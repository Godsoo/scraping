/* CANSTAR: Built at Wed Dec 14 2016 on top of changeset  */
/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */
/*!
 * jQuery JavaScript Library v1.8.3+1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Wed Mar 26 2014 11:04:46 GMT-0400 (EDT)
 */
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
/**
 * @license
 * Lo-Dash 1.3.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash underscore exports="amd,commonjs,global,node" -o ./dist/lodash.underscore.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */
//     (c) 2010-2013 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org
/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */
/*!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)*/
/** @license
 * RequireJS plugin for loading JSON files
 * - depends on Text plugin and it was HEAVILY "inspired" by it as well.
 * Author: Miller Medeiros
 * Version: 0.3.1 (2013/02/04)
 * Released under the MIT license
 */
/*!
 * accounting.js v0.4.1
 * Copyright 2014 Open Exchange Rates
 *
 * Freely distributable under the MIT license.
 * Portions of accounting.js are inspired or borrowed from underscore.js
 *
 * Full details and documentation:
 * http://openexchangerates.github.io/accounting.js/
 */
//! moment.js
//! version : 2.10.2
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
/*
 * Backbone.Courier, v1.0.5
 * Copyright (c)2013 Rotunda Software, LLC.
 * Distributed under MIT license
 * http://github.com/rotundasoftware/backbone.courier
 */
/**
 * jjv.js -- A javascript library to validate json input through a json-schema.
 *
 * Copyright (c) 2013 Alex Cornejo.
 *
 * Redistributable under a MIT-style open source license.
 */
/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.3
 *
 */
/**
 * Backbone Forms v0.14.0
 *
 * NOTE:
 * This version is for use with RequireJS
 * If using regular <script> tags to include your files, use backbone-forms.min.js
 *
 * Copyright (c) 2013 Charles Davison, Pow Media Ltd
 * 
 * License and more information at:
 * http://github.com/powmedia/backbone-forms
 *
 * Commit 24f4e18fcd8b84857d007191135d442db1401156
 */
/*
 A JavaScript implementation of the SHA family of hashes, as
 defined in FIPS PUB 180-2 as well as the corresponding HMAC implementation
 as defined in FIPS PUB 198a

 Copyright Brian Turek 2008-2015
 Distributed under the BSD License
 See http://caligatio.github.com/jsSHA/ for more information

 Several functions taken from Paul Johnston
*/
//     (c) 2012 Onsi Fakhouri
//     Cocktail.js may be freely distributed under the MIT license.
//     http://github.com/onsi/cocktail
// backbone.facetr 0.3.7 
// Copyright (c)2012 Arillo GmbH 
// Author: Francesco Macri 
// Distributed under MIT license 
// https://github.com/arillo/Backbone.Facetr 
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
/*
 * jQuery Dynatable plugin 0.3.1
 *
 * Copyright (c) 2014 Steve Schwartz (JangoSteve)
 *
 * Dual licensed under the AGPL and Proprietary licenses:
 *   http://www.dynatable.com/license/
 *
 * Date: Tue Jan 02 2014
 *
 *  CANSTAR:
 *
 *  This file has been edited in order to introduce new sorting functionality as of 23/2/16.
 *  Only the native sort function has been edited, in order to avoid the slow and unreliable
 *  bubble sort that was initially implemented. #18039
 *  Take care when upgrading to a new version of Dynatable. 
 */
/*!
 * jQuery UI Core @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
/*!
 * jQuery UI Widget @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
/*!
 * jQuery UI Mouse @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
/*!
 * jQuery UI Sortable @VERSION
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/sortable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
/*
 * jQuery UI Multiselect
 *
 * Authors:
 *  Michael Aufreiter (quasipartikel.at)
 *  Yanick Rochon (yanick.rochon[at]gmail[dot]com)
 * 
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 * 
 * http://www.quasipartikel.at/multiselect/
 *
 * 
 * Depends:
 *	ui.core.js
 *	ui.sortable.js
 *
 * Optional:
 * localization (http://plugins.jquery.com/project/localisation)
 * scrollTo (http://plugins.jquery.com/project/ScrollTo)
 * 
 * Todo:
 *  Make batch actions faster
 *  Implement dynamic insertion through remote calls
 */
/**
 * jquery.mask.js
 * @version: v1.10.13
 * @author: Igor Escobar
 *
 * Created by Igor Escobar on 2012-03-10. Please report any bug at http://blog.igorescobar.com
 *
 * Copyright (c) 2012 Igor Escobar http://blog.igorescobar.com
 *
 * The MIT License (http://www.opensource.org/licenses/mit-license.php)
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 * http://spin.js.org/
 *
 * Example:
    var opts = {
      lines: 12             // The number of lines to draw
    , length: 7             // The length of each line
    , width: 5              // The line thickness
    , radius: 10            // The radius of the inner circle
    , scale: 1.0            // Scales overall size of the spinner
    , corners: 1            // Roundness (0..1)
    , color: '#000'         // #rgb or #rrggbb
    , opacity: 1/4          // Opacity of the lines
    , rotate: 0             // Rotation offset
    , direction: 1          // 1: clockwise, -1: counterclockwise
    , speed: 1              // Rounds per second
    , trail: 100            // Afterglow percentage
    , fps: 20               // Frames per second when using setTimeout()
    , zIndex: 2e9           // Use a high z-index by default
    , className: 'spinner'  // CSS class to assign to the element
    , top: '50%'            // center vertically
    , left: '50%'           // center horizontally
    , shadow: false         // Whether to render a shadow
    , hwaccel: false        // Whether to use hardware acceleration (might be buggy)
    , position: 'absolute'  // Element positioning
    }
    var target = document.getElementById('foo')
    var spinner = new Spinner(opts).spin(target)
 */
! function() {
    var requirejs, require, define;
    ! function(global) {
        function isFunction(t) {
            return "[object Function]" === ostring.call(t)
        }

        function isArray(t) {
            return "[object Array]" === ostring.call(t)
        }

        function each(t, e) {
            if (t) {
                var n;
                for (n = 0; n < t.length && (!t[n] || !e(t[n], n, t)); n += 1);
            }
        }

        function eachReverse(t, e) {
            if (t) {
                var n;
                for (n = t.length - 1; n > -1 && (!t[n] || !e(t[n], n, t)); n -= 1);
            }
        }

        function hasProp(t, e) {
            return hasOwn.call(t, e)
        }

        function getOwn(t, e) {
            return hasProp(t, e) && t[e]
        }

        function eachProp(t, e) {
            var n;
            for (n in t)
                if (hasProp(t, n) && e(t[n], n)) break
        }

        function mixin(t, e, n, i) {
            return e && eachProp(e, function(e, r) {
                (n || !hasProp(t, r)) && (i && "string" != typeof e ? (t[r] || (t[r] = {}), mixin(t[r], e, n, i)) : t[r] = e)
            }), t
        }

        function bind(t, e) {
            return function() {
                return e.apply(t, arguments)
            }
        }

        function scripts() {
            return document.getElementsByTagName("script")
        }

        function getGlobal(t) {
            if (!t) return t;
            var e = global;
            return each(t.split("."), function(t) {
                e = e[t]
            }), e
        }

        function makeError(t, e, n, i) {
            var r = new Error(e + "\nhttp://requirejs.org/docs/errors.html#" + t);
            return r.requireType = t, r.requireModules = i, n && (r.originalError = n), r
        }

        function newContext(t) {
            function e(t) {
                var e, n;
                for (e = 0; t[e]; e += 1)
                    if (n = t[e], "." === n) t.splice(e, 1), e -= 1;
                    else if (".." === n) {
                    if (1 === e && (".." === t[2] || ".." === t[0])) break;
                    e > 0 && (t.splice(e - 1, 2), e -= 2)
                }
            }

            function n(t, n, i) {
                var r, o, s, a, l, c, u, d, p, h, f, m = n && n.split("/"),
                    g = m,
                    v = S.map,
                    _ = v && v["*"];
                if (t && "." === t.charAt(0) && (n ? (g = getOwn(S.pkgs, n) ? m = [n] : m.slice(0, m.length - 1), t = g.concat(t.split("/")), e(t), o = getOwn(S.pkgs, r = t[0]), t = t.join("/"), o && t === r + "/" + o.main && (t = r)) : 0 === t.indexOf("./") && (t = t.substring(2))), i && (m || _) && v) {
                    for (a = t.split("/"), l = a.length; l > 0; l -= 1) {
                        if (u = a.slice(0, l).join("/"), m)
                            for (c = m.length; c > 0; c -= 1)
                                if (s = getOwn(v, m.slice(0, c).join("/")), s && (s = getOwn(s, u))) {
                                    d = s, p = l;
                                    break
                                }
                        if (d) break;
                        !h && _ && getOwn(_, u) && (h = getOwn(_, u), f = l)
                    }!d && h && (d = h, p = f), d && (a.splice(0, p, d), t = a.join("/"))
                }
                return t
            }

            function i(t) {
                isBrowser && each(scripts(), function(e) {
                    return e.getAttribute("data-requiremodule") === t && e.getAttribute("data-requirecontext") === b.contextName ? (e.parentNode.removeChild(e), !0) : void 0
                })
            }

            function r(t) {
                var e = getOwn(S.paths, t);
                return e && isArray(e) && e.length > 1 ? (i(t), e.shift(), b.require.undef(t), b.require([t]), !0) : void 0
            }

            function o(t) {
                var e, n = t ? t.indexOf("!") : -1;
                return n > -1 && (e = t.substring(0, n), t = t.substring(n + 1, t.length)), [e, t]
            }

            function s(t, e, i, r) {
                var s, a, l, c, u = null,
                    d = e ? e.name : null,
                    p = t,
                    h = !0,
                    f = "";
                return t || (h = !1, t = "_@r" + (E += 1)), c = o(t), u = c[0], t = c[1], u && (u = n(u, d, r), a = getOwn(T, u)), t && (u ? f = a && a.normalize ? a.normalize(t, function(t) {
                    return n(t, d, r)
                }) : n(t, d, r) : (f = n(t, d, r), c = o(f), u = c[0], f = c[1], i = !0, s = b.nameToUrl(f))), l = !u || a || i ? "" : "_unnormalized" + (A += 1), {
                    prefix: u,
                    name: f,
                    parentMap: e,
                    unnormalized: !!l,
                    url: s,
                    originalName: p,
                    isDefine: h,
                    id: (u ? u + "!" + f : f) + l
                }
            }

            function a(t) {
                var e = t.id,
                    n = getOwn(C, e);
                return n || (n = C[e] = new b.Module(t)), n
            }

            function l(t, e, n) {
                var i = t.id,
                    r = getOwn(C, i);
                !hasProp(T, i) || r && !r.defineEmitComplete ? a(t).on(e, n) : "defined" === e && n(T[i])
            }

            function c(t, e) {
                var n = t.requireModules,
                    i = !1;
                e ? e(t) : (each(n, function(e) {
                    var n = getOwn(C, e);
                    n && (n.error = t, n.events.error && (i = !0, n.emit("error", t)))
                }), i || req.onError(t))
            }

            function u() {
                globalDefQueue.length && (apsp.apply(k, [k.length - 1, 0].concat(globalDefQueue)), globalDefQueue = [])
            }

            function d(t) {
                delete C[t]
            }

            function p(t, e, n) {
                var i = t.map.id;
                t.error ? t.emit("error", t.error) : (e[i] = !0, each(t.depMaps, function(i, r) {
                    var o = i.id,
                        s = getOwn(C, o);
                    !s || t.depMatched[r] || n[o] || (getOwn(e, o) ? (t.defineDep(r, T[o]), t.check()) : p(s, e, n))
                }), n[i] = !0)
            }

            function h() {
                var t, e, n, o, s = 1e3 * S.waitSeconds,
                    a = s && b.startTime + s < (new Date).getTime(),
                    l = [],
                    u = [],
                    d = !1,
                    f = !0;
                if (!_) {
                    if (_ = !0, eachProp(C, function(n) {
                            if (t = n.map, e = t.id, n.enabled && (t.isDefine || u.push(n), !n.error))
                                if (!n.inited && a) r(e) ? (o = !0, d = !0) : (l.push(e), i(e));
                                else if (!n.inited && n.fetched && t.isDefine && (d = !0, !t.prefix)) return f = !1
                        }), a && l.length) return n = makeError("timeout", "Load timeout for modules: " + l, null, l), n.contextName = b.contextName, c(n);
                    f && each(u, function(t) {
                        p(t, {}, {})
                    }), a && !o || !d || !isBrowser && !isWebWorker || P || (P = setTimeout(function() {
                        P = 0, h()
                    }, 50)), _ = !1
                }
            }

            function f(t) {
                hasProp(T, t[0]) || a(s(t[0], null, !0)).init(t[1], t[2])
            }

            function m(t, e, n, i) {
                t.detachEvent && !isOpera ? i && t.detachEvent(i, e) : t.removeEventListener(n, e, !1)
            }

            function g(t) {
                var e = t.currentTarget || t.srcElement;
                return m(e, b.onScriptLoad, "load", "onreadystatechange"), m(e, b.onScriptError, "error"), {
                    node: e,
                    id: e && e.getAttribute("data-requiremodule")
                }
            }

            function v() {
                var t;
                for (u(); k.length;) {
                    if (t = k.shift(), null === t[0]) return c(makeError("mismatch", "Mismatched anonymous define() module: " + t[t.length - 1]));
                    f(t)
                }
            }
            var _, y, b, w, P, S = {
                    waitSeconds: 7,
                    baseUrl: "./",
                    paths: {},
                    pkgs: {},
                    shim: {},
                    map: {},
                    config: {}
                },
                C = {},
                x = {},
                k = [],
                T = {},
                L = {},
                E = 1,
                A = 1;
            return w = {
                require: function(t) {
                    return t.require ? t.require : t.require = b.makeRequire(t.map)
                },
                exports: function(t) {
                    return t.usingExports = !0, t.map.isDefine ? t.exports ? t.exports : t.exports = T[t.map.id] = {} : void 0
                },
                module: function(t) {
                    return t.module ? t.module : t.module = {
                        id: t.map.id,
                        uri: t.map.url,
                        config: function() {
                            return S.config && getOwn(S.config, t.map.id) || {}
                        },
                        exports: T[t.map.id]
                    }
                }
            }, y = function(t) {
                this.events = getOwn(x, t.id) || {}, this.map = t, this.shim = getOwn(S.shim, t.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
            }, y.prototype = {
                init: function(t, e, n, i) {
                    i = i || {}, this.inited || (this.factory = e, n ? this.on("error", n) : this.events.error && (n = bind(this, function(t) {
                        this.emit("error", t)
                    })), this.depMaps = t && t.slice(0), this.errback = n, this.inited = !0, this.ignore = i.ignore, i.enabled || this.enabled ? this.enable() : this.check())
                },
                defineDep: function(t, e) {
                    this.depMatched[t] || (this.depMatched[t] = !0, this.depCount -= 1, this.depExports[t] = e)
                },
                fetch: function() {
                    if (!this.fetched) {
                        this.fetched = !0, b.startTime = (new Date).getTime();
                        var t = this.map;
                        return this.shim ? void b.makeRequire(this.map, {
                            enableBuildCallback: !0
                        })(this.shim.deps || [], bind(this, function() {
                            return t.prefix ? this.callPlugin() : this.load()
                        })) : t.prefix ? this.callPlugin() : this.load()
                    }
                },
                load: function() {
                    var t = this.map.url;
                    L[t] || (L[t] = !0, b.load(this.map.id, t))
                },
                check: function() {
                    if (this.enabled && !this.enabling) {
                        var t, e, n = this.map.id,
                            i = this.depExports,
                            r = this.exports,
                            o = this.factory;
                        if (this.inited) {
                            if (this.error) this.emit("error", this.error);
                            else if (!this.defining) {
                                if (this.defining = !0, this.depCount < 1 && !this.defined) {
                                    if (isFunction(o)) {
                                        if (this.events.error) try {
                                            r = b.execCb(n, o, i, r)
                                        } catch (s) {
                                            t = s
                                        } else r = b.execCb(n, o, i, r);
                                        if (this.map.isDefine && (e = this.module, e && void 0 !== e.exports && e.exports !== this.exports ? r = e.exports : void 0 === r && this.usingExports && (r = this.exports)), t) return t.requireMap = this.map, t.requireModules = [this.map.id], t.requireType = "define", c(this.error = t)
                                    } else r = o;
                                    this.exports = r, this.map.isDefine && !this.ignore && (T[n] = r, req.onResourceLoad && req.onResourceLoad(b, this.map, this.depMaps)), delete C[n], this.defined = !0
                                }
                                this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                            }
                        } else this.fetch()
                    }
                },
                callPlugin: function() {
                    var t = this.map,
                        e = t.id,
                        i = s(t.prefix);
                    this.depMaps.push(i), l(i, "defined", bind(this, function(i) {
                        var r, o, u, p = this.map.name,
                            h = this.map.parentMap ? this.map.parentMap.name : null,
                            f = b.makeRequire(t.parentMap, {
                                enableBuildCallback: !0
                            });
                        return this.map.unnormalized ? (i.normalize && (p = i.normalize(p, function(t) {
                            return n(t, h, !0)
                        }) || ""), o = s(t.prefix + "!" + p, this.map.parentMap), l(o, "defined", bind(this, function(t) {
                            this.init([], function() {
                                return t
                            }, null, {
                                enabled: !0,
                                ignore: !0
                            })
                        })), u = getOwn(C, o.id), void(u && (this.depMaps.push(o), this.events.error && u.on("error", bind(this, function(t) {
                            this.emit("error", t)
                        })), u.enable()))) : (r = bind(this, function(t) {
                            this.init([], function() {
                                return t
                            }, null, {
                                enabled: !0
                            })
                        }), r.error = bind(this, function(t) {
                            this.inited = !0, this.error = t, t.requireModules = [e], eachProp(C, function(t) {
                                0 === t.map.id.indexOf(e + "_unnormalized") && d(t.map.id)
                            }), c(t)
                        }), r.fromText = bind(this, function(n, i) {
                            var o = t.name,
                                l = s(o),
                                u = useInteractive;
                            i && (n = i), u && (useInteractive = !1), a(l), hasProp(S.config, e) && (S.config[o] = S.config[e]);
                            try {
                                req.exec(n)
                            } catch (d) {
                                return c(makeError("fromtexteval", "fromText eval for " + e + " failed: " + d, d, [e]))
                            }
                            u && (useInteractive = !0), this.depMaps.push(l), b.completeLoad(o), f([o], r)
                        }), void i.load(t.name, f, r, S))
                    })), b.enable(i, this), this.pluginMaps[i.id] = i
                },
                enable: function() {
                    this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function(t, e) {
                        var n, i, r;
                        if ("string" == typeof t) {
                            if (t = s(t, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[e] = t, r = getOwn(w, t.id)) return void(this.depExports[e] = r(this));
                            this.depCount += 1, l(t, "defined", bind(this, function(t) {
                                this.defineDep(e, t), this.check()
                            })), this.errback && l(t, "error", this.errback)
                        }
                        n = t.id, i = C[n], hasProp(w, n) || !i || i.enabled || b.enable(t, this)
                    })), eachProp(this.pluginMaps, bind(this, function(t) {
                        var e = getOwn(C, t.id);
                        e && !e.enabled && b.enable(t, this)
                    })), this.enabling = !1, this.check()
                },
                on: function(t, e) {
                    var n = this.events[t];
                    n || (n = this.events[t] = []), n.push(e)
                },
                emit: function(t, e) {
                    each(this.events[t], function(t) {
                        t(e)
                    }), "error" === t && delete this.events[t]
                }
            }, b = {
                config: S,
                contextName: t,
                registry: C,
                defined: T,
                urlFetched: L,
                defQueue: k,
                Module: y,
                makeModuleMap: s,
                nextTick: req.nextTick,
                configure: function(t) {
                    t.baseUrl && "/" !== t.baseUrl.charAt(t.baseUrl.length - 1) && (t.baseUrl += "/");
                    var e = S.pkgs,
                        n = S.shim,
                        i = {
                            paths: !0,
                            config: !0,
                            map: !0
                        };
                    eachProp(t, function(t, e) {
                        i[e] ? "map" === e ? mixin(S[e], t, !0, !0) : mixin(S[e], t, !0) : S[e] = t
                    }), t.shim && (eachProp(t.shim, function(t, e) {
                        isArray(t) && (t = {
                            deps: t
                        }), !t.exports && !t.init || t.exportsFn || (t.exportsFn = b.makeShimExports(t)), n[e] = t
                    }), S.shim = n), t.packages && (each(t.packages, function(t) {
                        var n;
                        t = "string" == typeof t ? {
                            name: t
                        } : t, n = t.location, e[t.name] = {
                            name: t.name,
                            location: n || t.name,
                            main: (t.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                        }
                    }), S.pkgs = e), eachProp(C, function(t, e) {
                        t.inited || t.map.unnormalized || (t.map = s(e))
                    }), (t.deps || t.callback) && b.require(t.deps || [], t.callback)
                },
                makeShimExports: function(t) {
                    function e() {
                        var e;
                        return t.init && (e = t.init.apply(global, arguments)), e || t.exports && getGlobal(t.exports)
                    }
                    return e
                },
                makeRequire: function(e, i) {
                    function r(n, o, l) {
                        var u, d, p;
                        return i.enableBuildCallback && o && isFunction(o) && (o.__requireJsBuild = !0), "string" == typeof n ? isFunction(o) ? c(makeError("requireargs", "Invalid require call"), l) : e && hasProp(w, n) ? w[n](C[e.id]) : req.get ? req.get(b, n, e) : (d = s(n, e, !1, !0), u = d.id, hasProp(T, u) ? T[u] : c(makeError("notloaded", 'Module name "' + u + '" has not been loaded yet for context: ' + t + (e ? "" : ". Use require([])")))) : (v(), b.nextTick(function() {
                            v(), p = a(s(null, e)), p.skipMap = i.skipMap, p.init(n, o, l, {
                                enabled: !0
                            }), h()
                        }), r)
                    }
                    return i = i || {}, mixin(r, {
                        isBrowser: isBrowser,
                        toUrl: function(t) {
                            var i, r, o = t.lastIndexOf("."),
                                s = t.split("/")[0],
                                a = "." === s || ".." === s;
                            return -1 !== o && (!a || o > 1) && (i = t.substring(o, t.length), t = t.substring(0, o)), r = b.nameToUrl(n(t, e && e.id, !0), i || ".fake"), i ? r : r.substring(0, r.length - 5)
                        },
                        defined: function(t) {
                            return hasProp(T, s(t, e, !1, !0).id)
                        },
                        specified: function(t) {
                            return t = s(t, e, !1, !0).id, hasProp(T, t) || hasProp(C, t)
                        }
                    }), e || (r.undef = function(t) {
                        u();
                        var n = s(t, e, !0),
                            i = getOwn(C, t);
                        delete T[t], delete L[n.url], delete x[t], i && (i.events.defined && (x[t] = i.events), d(t))
                    }), r
                },
                enable: function(t) {
                    var e = getOwn(C, t.id);
                    e && a(t).enable()
                },
                completeLoad: function(t) {
                    var e, n, i, o = getOwn(S.shim, t) || {},
                        s = o.exports;
                    for (u(); k.length;) {
                        if (n = k.shift(), null === n[0]) {
                            if (n[0] = t, e) break;
                            e = !0
                        } else n[0] === t && (e = !0);
                        f(n)
                    }
                    if (i = getOwn(C, t), !e && !hasProp(T, t) && i && !i.inited) {
                        if (!(!S.enforceDefine || s && getGlobal(s))) return r(t) ? void 0 : c(makeError("nodefine", "No define call for " + t, null, [t]));
                        f([t, o.deps || [], o.exportsFn])
                    }
                    h()
                },
                nameToUrl: function(t, e) {
                    var n, i, r, o, s, a, l, c, u;
                    if (req.jsExtRegExp.test(t)) c = t + (e || "");
                    else {
                        for (n = S.paths, i = S.pkgs, s = t.split("/"), a = s.length; a > 0; a -= 1) {
                            if (l = s.slice(0, a).join("/"), r = getOwn(i, l), u = getOwn(n, l)) {
                                isArray(u) && (u = u[0]), s.splice(0, a, u);
                                break
                            }
                            if (r) {
                                o = t === r.name ? r.location + "/" + r.main : r.location, s.splice(0, a, o);
                                break
                            }
                        }
                        c = s.join("/"), c += e || (/\?/.test(c) ? "" : ".js"), c = ("/" === c.charAt(0) || c.match(/^[\w\+\.\-]+:/) ? "" : S.baseUrl) + c
                    }
                    return S.urlArgs ? c + ((-1 === c.indexOf("?") ? "?" : "&") + S.urlArgs) : c
                },
                load: function(t, e) {
                    req.load(b, t, e)
                },
                execCb: function(t, e, n, i) {
                    return e.apply(i, n)
                },
                onScriptLoad: function(t) {
                    if ("load" === t.type || readyRegExp.test((t.currentTarget || t.srcElement).readyState)) {
                        interactiveScript = null;
                        var e = g(t);
                        b.completeLoad(e.id)
                    }
                },
                onScriptError: function(t) {
                    var e = g(t);
                    return r(e.id) ? void 0 : c(makeError("scripterror", "Script error", t, [e.id]))
                }
            }, b.require = b.makeRequire(), b
        }

        function getInteractiveScript() {
            return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function(t) {
                return "interactive" === t.readyState ? interactiveScript = t : void 0
            }), interactiveScript)
        }
        var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.4",
            commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
            cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
            jsSuffixRegExp = /\.js$/,
            currDirRegExp = /^\.\//,
            op = Object.prototype,
            ostring = op.toString,
            hasOwn = op.hasOwnProperty,
            ap = Array.prototype,
            apsp = ap.splice,
            isBrowser = !("undefined" == typeof window || !navigator || !document),
            isWebWorker = !isBrowser && "undefined" != typeof importScripts,
            readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/,
            defContextName = "_",
            isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(),
            contexts = {},
            cfg = {},
            globalDefQueue = [],
            useInteractive = !1;
        if ("undefined" == typeof define) {
            if ("undefined" != typeof requirejs) {
                if (isFunction(requirejs)) return;
                cfg = requirejs, requirejs = void 0
            }
            "undefined" == typeof require || isFunction(require) || (cfg = require, require = void 0), req = requirejs = function(t, e, n, i) {
                var r, o, s = defContextName;
                return isArray(t) || "string" == typeof t || (o = t, isArray(e) ? (t = e, e = n, n = i) : t = []), o && o.context && (s = o.context), r = getOwn(contexts, s), r || (r = contexts[s] = req.s.newContext(s)), o && r.configure(o), r.require(t, e, n)
            }, req.config = function(t) {
                return req(t)
            }, req.nextTick = "undefined" != typeof setTimeout ? function(t) {
                setTimeout(t, 4)
            } : function(t) {
                t()
            }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
                contexts: contexts,
                newContext: newContext
            }, req({}), each(["toUrl", "undef", "defined", "specified"], function(t) {
                req[t] = function() {
                    var e = contexts[defContextName];
                    return e.require[t].apply(e, arguments)
                }
            }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = function(t) {
                throw t
            }, req.load = function(t, e, n) {
                var i, r = t && t.config || {};
                return isBrowser ? (i = r.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script"), i.type = r.scriptType || "text/javascript", i.charset = "utf-8", i.async = !0, i.setAttribute("data-requirecontext", t.contextName), i.setAttribute("data-requiremodule", e), !i.attachEvent || i.attachEvent.toString && i.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (i.addEventListener("load", t.onScriptLoad, !1), i.addEventListener("error", t.onScriptError, !1)) : (useInteractive = !0, i.attachEvent("onreadystatechange", t.onScriptLoad)), i.src = n, currentlyAddingScript = i, baseElement ? head.insertBefore(i, baseElement) : head.appendChild(i), currentlyAddingScript = null, i) : void(isWebWorker && (importScripts(n), t.completeLoad(e)))
            }, isBrowser && eachReverse(scripts(), function(t) {
                return head || (head = t.parentNode), dataMain = t.getAttribute("data-main"), dataMain ? (cfg.baseUrl || (src = dataMain.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath, dataMain = mainScript), dataMain = dataMain.replace(jsSuffixRegExp, ""), cfg.deps = cfg.deps ? cfg.deps.concat(dataMain) : [dataMain], !0) : void 0
            }), define = function(t, e, n) {
                var i, r;
                "string" != typeof t && (n = e, e = t, t = null), isArray(e) || (n = e, e = []), !e.length && isFunction(n) && n.length && (n.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(t, n) {
                    e.push(n)
                }), e = (1 === n.length ? ["require"] : ["require", "exports", "module"]).concat(e)), useInteractive && (i = currentlyAddingScript || getInteractiveScript(), i && (t || (t = i.getAttribute("data-requiremodule")), r = contexts[i.getAttribute("data-requirecontext")])), (r ? r.defQueue : globalDefQueue).push([t, e, n])
            }, define.amd = {
                jQuery: !0
            }, req.exec = function(text) {
                return eval(text)
            }, req(cfg)
        }
    }(this), define("requireLib", function() {}), require.config({
            shim: {
                datatables_length_change: {
                    deps: ["datatables", "jquery"]
                },
                aight: {
                    deps: []
                },
                raphael: {
                    deps: [],
                    exports: "Raphael"
                },
                d3: {
                    deps: []
                },
                r2d3: {
                    deps: ["aight", "eve", "sizzle"]
                },
                rickshaw: {
                    deps: ["d3"]
                },
                datepicker: {
                    deps: ["bootstrap"]
                },
                jjv: {
                    deps: []
                },
                facebook: {
                    exports: "FB",
                    init: function() {
                        FB.init({
                            appId: "219701801695174",
                            xfbml: !0,
                            version: "v2.5",
                            status: !0
                        })
                    }
                },
                "facebook-dev": {
                    exports: "FB",
                    init: function() {
                        FB.init({
                            appId: "219807215017966",
                            xfbml: !0,
                            version: "v2.5",
                            status: !0
                        })
                    }
                },
                respond: {
                    exports: "respond"
                }
            },
            map: {
                "*": {
                    css: "require-css/css",
                    is: "require-is/is",
                    json: "json",
                    jquery: "jquery-private",
                    "backbone-forms": "backbone-forms-ext",
                    backbone: "backbone-ext"
                },
                "jquery-private": {
                    jquery: "jquery"
                },
                "backbone-forms-ext": {
                    "backbone-forms": "backbone-forms"
                },
                "backbone-ext": {
                    backbone: "backbone"
                }
            },
            paths: {
                text: "text",
                "text-cns": "text-cns",
                "jquery-private": "extensions/jquery/jquery-private",
                "cns-jquery": "cns-jquery",
                requireLib: "require",
                jquery: "bower_components/jquery/jquery.min",
                facebook: "//connect.facebook.net/en_US/sdk",
                "facebook-dev": "//connect.facebook.net/en_US/sdk/debug",
                canstar_widget: "components/base/canstar_widget",
                jquery: "bower_components/jquery/jquery",
                datatables: "bower_components/datatables/media/js/jquery.dataTables",
                zeroclipboard: "bower_components/datatables-tabletools/media/js/ZeroClipboard",
                tabletools: "bower_components/datatables-tabletools/media/js/TableTools",
                datatables_length_change: "fnLengthChange",
                visualsearch: "bower_components/visualsearch/build/visualsearch",
                fixedHeader: "FixedHeader",
                colorbox: "jquery.colorbox",
                jqueryui: "../jqueryui",
                multiselect: "ui.multiselect.amd",
                jquerytouchpunch: "jquery.ui.touch-punch",
                jquerymaskmoney: "bower_components/jquery-maskmoney/dist/jquery.maskMoney",
                raphael: "raphael",
                sizzle: "sizzle",
                aight: "aight",
                d3: "d3",
                r2d3: "r2d3",
                ie8: "components/base/ie8",
                modernizr: "modernizr",
                spin: "bower_components/iOS-Overlay/js/spin.min",
                "ios-overlay": "bower_components/iOS-Overlay/js/iosOverlay",
                prettify: "bower_components/iOS-Overlay/js/prettify",
                "jquery.lazyload": "bower_components/jquery.lazyload/jquery.lazyload",
                "jquery.bind-first": "bower_components/jquery.bind-first/release/jquery.bind-first-0.2.3",
                bootstrap: "bootstrap",
                bootstrap_css: "bootstrap/css",
                bcss: "bcss",
                respond: "bower_components/respond/dest/respond.min",
                rickshaw: "rickshaw",
                underscore: "bower_components/lodash/dist/lodash.underscore",
                backbone: "bower_components/backbone-amd/backbone",
                "backbone-ext": "extensions/backbone/backbone",
                backbone_fetch_cache: "bower_components/backbone-fetch-cache/backbone.fetch-cache",
                "backbone-forms": "bower_components/backbone-forms/distribution.amd/backbone-forms",
                "backbone-forms-ext": "extensions/backbone-forms/backbone-forms",
                datepicker_css: "datepicker/css/",
                datepicker: "datepicker/js/bootstrap-datepicker",
                jjv: "jjv",
                components: "components",
                libraries: "libraries",
                extensions: "extensions",
                config: "config",
                assets: "../",
                normalize: "require-css/normalize",
                accounting: "accounting",
                jquerymaskplugin: "bower_components/jQuery-Mask-Plugin/dist/jquery.mask",
                "jquery.placeholder": "bower_components/jquery-placeholder/jquery.placeholder",
                anytime: "anytime",
                jssha: "bower_components/jsSHA/src/sha1",
                "font-awesome": "bower_components/font-awesome",
                cookies: "bower_components/Cookies/dist/cookies",
                moment: "bower_components/moment/moment",
                slick: "bower_components/slick-carousel/slick/slick",
                slick_css: "bower_components/slick-carousel/slick/slick.css",
                slick_theme_css: "bower_components/slick-carousel/slick/slick-theme.css",
                chartjs: "bower_components/Chart.js/Chart",
                cocktail: "bower_components/cocktail/Cocktail",
                "backbone.courier": "bower_components/backbone.courier/dist/backbone.courier",
                "base-64": "bower_components/base-64/base64",
                spinjs: "bower_components/spin.js/spin",
                jStat: "bower_components/jstat/dist/jstat"
            }
        }), define("base", function() {}),
        function(t, e) {
            function n(t) {
                var e = fe[t] = {};
                return Q.each(t.split(ee), function(t, n) {
                    e[n] = !0
                }), e
            }

            function i(t, n, i) {
                if (i === e && 1 === t.nodeType) {
                    var r = "data-" + n.replace(ge, "-$1").toLowerCase();
                    if (i = t.getAttribute(r), "string" == typeof i) {
                        try {
                            i = "true" === i ? !0 : "false" === i ? !1 : "null" === i ? null : +i + "" === i ? +i : me.test(i) ? Q.parseJSON(i) : i
                        } catch (o) {}
                        Q.data(t, n, i)
                    } else i = e
                }
                return i
            }

            function r(t) {
                var e;
                for (e in t)
                    if (("data" !== e || !Q.isEmptyObject(t[e])) && "toJSON" !== e) return !1;
                return !0
            }

            function o() {
                return !1
            }

            function s() {
                return !0
            }

            function a(t) {
                return !t || !t.parentNode || 11 === t.parentNode.nodeType
            }

            function l(t, e) {
                do t = t[e]; while (t && 1 !== t.nodeType);
                return t
            }

            function c(t, e, n) {
                if (e = e || 0, Q.isFunction(e)) return Q.grep(t, function(t, i) {
                    var r = !!e.call(t, i, t);
                    return r === n
                });
                if (e.nodeType) return Q.grep(t, function(t) {
                    return t === e === n
                });
                if ("string" == typeof e) {
                    var i = Q.grep(t, function(t) {
                        return 1 === t.nodeType
                    });
                    if (Re.test(e)) return Q.filter(e, i, !n);
                    e = Q.filter(e, i)
                }
                return Q.grep(t, function(t) {
                    return Q.inArray(t, e) >= 0 === n
                })
            }

            function u(t) {
                var e = qe.split("|"),
                    n = t.createDocumentFragment();
                if (n.createElement)
                    for (; e.length;) n.createElement(e.pop());
                return n
            }

            function d(t, e) {
                return t.getElementsByTagName(e)[0] || t.appendChild(t.ownerDocument.createElement(e))
            }

            function p(t, e) {
                if (1 === e.nodeType && Q.hasData(t)) {
                    var n, i, r, o = Q._data(t),
                        s = Q._data(e, o),
                        a = o.events;
                    if (a) {
                        delete s.handle, s.events = {};
                        for (n in a)
                            for (i = 0, r = a[n].length; r > i; i++) Q.event.add(e, n, a[n][i])
                    }
                    s.data && (s.data = Q.extend({}, s.data))
                }
            }

            function h(t, e) {
                var n;
                1 === e.nodeType && (e.clearAttributes && e.clearAttributes(), e.mergeAttributes && e.mergeAttributes(t), n = e.nodeName.toLowerCase(), "object" === n ? (e.parentNode && (e.outerHTML = t.outerHTML), Q.support.html5Clone && t.innerHTML && !Q.trim(e.innerHTML) && (e.innerHTML = t.innerHTML)) : "input" === n && Xe.test(t.type) ? (e.defaultChecked = e.checked = t.checked, e.value !== t.value && (e.value = t.value)) : "option" === n ? e.selected = t.defaultSelected : "input" === n || "textarea" === n ? e.defaultValue = t.defaultValue : "script" === n && e.text !== t.text && (e.text = t.text), e.removeAttribute(Q.expando))
            }

            function f(t) {
                return "undefined" != typeof t.getElementsByTagName ? t.getElementsByTagName("*") : "undefined" != typeof t.querySelectorAll ? t.querySelectorAll("*") : []
            }

            function m(t) {
                Xe.test(t.type) && (t.defaultChecked = t.checked)
            }

            function g(t, e) {
                if (e in t) return e;
                for (var n = e.charAt(0).toUpperCase() + e.slice(1), i = e, r = _n.length; r--;)
                    if (e = _n[r] + n, e in t) return e;
                return i
            }

            function v(t, e) {
                return t = e || t, "none" === Q.css(t, "display") || !Q.contains(t.ownerDocument, t)
            }

            function _(t, e) {
                for (var n, i, r = [], o = 0, s = t.length; s > o; o++) n = t[o], n.style && (r[o] = Q._data(n, "olddisplay"), e ? (r[o] || "none" !== n.style.display || (n.style.display = ""), "" === n.style.display && v(n) && (r[o] = Q._data(n, "olddisplay", P(n.nodeName)))) : (i = nn(n, "display"), r[o] || "none" === i || Q._data(n, "olddisplay", i)));
                for (o = 0; s > o; o++) n = t[o], n.style && (e && "none" !== n.style.display && "" !== n.style.display || (n.style.display = e ? r[o] || "" : "none"));
                return t
            }

            function y(t, e, n) {
                var i = dn.exec(e);
                return i ? Math.max(0, i[1] - (n || 0)) + (i[2] || "px") : e
            }

            function b(t, e, n, i) {
                for (var r = n === (i ? "border" : "content") ? 4 : "width" === e ? 1 : 0, o = 0; 4 > r; r += 2) "margin" === n && (o += Q.css(t, n + vn[r], !0)), i ? ("content" === n && (o -= parseFloat(nn(t, "padding" + vn[r])) || 0), "margin" !== n && (o -= parseFloat(nn(t, "border" + vn[r] + "Width")) || 0)) : (o += parseFloat(nn(t, "padding" + vn[r])) || 0, "padding" !== n && (o += parseFloat(nn(t, "border" + vn[r] + "Width")) || 0));
                return o
            }

            function w(t, e, n) {
                var i = "width" === e ? t.offsetWidth : t.offsetHeight,
                    r = !0,
                    o = Q.support.boxSizing && "border-box" === Q.css(t, "boxSizing");
                if (0 >= i || null == i) {
                    if (i = nn(t, e), (0 > i || null == i) && (i = t.style[e]), pn.test(i)) return i;
                    r = o && (Q.support.boxSizingReliable || i === t.style[e]), i = parseFloat(i) || 0
                }
                return i + b(t, e, n || (o ? "border" : "content"), r) + "px"
            }

            function P(t) {
                if (fn[t]) return fn[t];
                var e = Q("<" + t + ">").appendTo($.body),
                    n = e.css("display");
                return e.remove(), ("none" === n || "" === n) && (rn = $.body.appendChild(rn || Q.extend($.createElement("iframe"), {
                    frameBorder: 0,
                    width: 0,
                    height: 0
                })), on && rn.createElement || (on = (rn.contentWindow || rn.contentDocument).document, on.write("<!doctype html><html><body>"), on.close()), e = on.body.appendChild(on.createElement(t)), n = nn(e, "display"), $.body.removeChild(rn)), fn[t] = n, n
            }

            function S(t, e, n, i) {
                var r;
                if (Q.isArray(e)) Q.each(e, function(e, r) {
                    n || wn.test(t) ? i(t, r) : S(t + "[" + ("object" == typeof r ? e : "") + "]", r, n, i)
                });
                else if (n || "object" !== Q.type(e)) i(t, e);
                else
                    for (r in e) S(t + "[" + r + "]", e[r], n, i)
            }

            function C(t) {
                return function(e, n) {
                    "string" != typeof e && (n = e, e = "*");
                    var i, r, o, s = e.toLowerCase().split(ee),
                        a = 0,
                        l = s.length;
                    if (Q.isFunction(n))
                        for (; l > a; a++) i = s[a], o = /^\+/.test(i), o && (i = i.substr(1) || "*"), r = t[i] = t[i] || [], r[o ? "unshift" : "push"](n)
                }
            }

            function x(t, n, i, r, o, s) {
                o = o || n.dataTypes[0], s = s || {}, s[o] = !0;
                for (var a, l = t[o], c = 0, u = l ? l.length : 0, d = t === Un; u > c && (d || !a); c++) a = l[c](n, i, r), "string" == typeof a && (!d || s[a] ? a = e : (n.dataTypes.unshift(a), a = x(t, n, i, r, a, s)));
                return !d && a || s["*"] || (a = x(t, n, i, r, "*", s)), a
            }

            function k(t, n) {
                var i, r, o = Q.ajaxSettings.flatOptions || {};
                for (i in n) n[i] !== e && ((o[i] ? t : r || (r = {}))[i] = n[i]);
                r && Q.extend(!0, t, r)
            }

            function T(t, n, i) {
                var r, o, s, a, l = t.contents,
                    c = t.dataTypes,
                    u = t.responseFields;
                for (o in u) o in i && (n[u[o]] = i[o]);
                for (;
                    "*" === c[0];) c.shift(), r === e && (r = t.mimeType || n.getResponseHeader("content-type"));
                if (r)
                    for (o in l)
                        if (l[o] && l[o].test(r)) {
                            c.unshift(o);
                            break
                        }
                if (c[0] in i) s = c[0];
                else {
                    for (o in i) {
                        if (!c[0] || t.converters[o + " " + c[0]]) {
                            s = o;
                            break
                        }
                        a || (a = o)
                    }
                    s = s || a
                }
                return s ? (s !== c[0] && c.unshift(s), i[s]) : void 0
            }

            function L(t, e) {
                var n, i, r, o, s = t.dataTypes.slice(),
                    a = s[0],
                    l = {},
                    c = 0;
                if (t.dataFilter && (e = t.dataFilter(e, t.dataType)), s[1])
                    for (n in t.converters) l[n.toLowerCase()] = t.converters[n];
                for (; r = s[++c];)
                    if ("*" !== r) {
                        if ("*" !== a && a !== r) {
                            if (n = l[a + " " + r] || l["* " + r], !n)
                                for (i in l)
                                    if (o = i.split(" "), o[1] === r && (n = l[a + " " + o[0]] || l["* " + o[0]])) {
                                        n === !0 ? n = l[i] : l[i] !== !0 && (r = o[0], s.splice(c--, 0, r));
                                        break
                                    }
                            if (n !== !0)
                                if (n && t["throws"]) e = n(e);
                                else try {
                                    e = n(e)
                                } catch (u) {
                                    return {
                                        state: "parsererror",
                                        error: n ? u : "No conversion from " + a + " to " + r
                                    }
                                }
                        }
                        a = r
                    }
                return {
                    state: "success",
                    data: e
                }
            }

            function E() {
                try {
                    return new t.XMLHttpRequest
                } catch (e) {}
            }

            function A() {
                try {
                    return new t.ActiveXObject("Microsoft.XMLHTTP")
                } catch (e) {}
            }

            function N() {
                return setTimeout(function() {
                    Gn = e
                }, 0), Gn = Q.now()
            }

            function O(t, e) {
                Q.each(e, function(e, n) {
                    for (var i = (ti[e] || []).concat(ti["*"]), r = 0, o = i.length; o > r; r++)
                        if (i[r].call(t, e, n)) return
                })
            }

            function D(t, e, n) {
                var i, r = 0,
                    o = Kn.length,
                    s = Q.Deferred().always(function() {
                        delete a.elem
                    }),
                    a = function() {
                        for (var e = Gn || N(), n = Math.max(0, l.startTime + l.duration - e), i = n / l.duration || 0, r = 1 - i, o = 0, a = l.tweens.length; a > o; o++) l.tweens[o].run(r);
                        return s.notifyWith(t, [l, r, n]), 1 > r && a ? n : (s.resolveWith(t, [l]), !1)
                    },
                    l = s.promise({
                        elem: t,
                        props: Q.extend({}, e),
                        opts: Q.extend(!0, {
                            specialEasing: {}
                        }, n),
                        originalProperties: e,
                        originalOptions: n,
                        startTime: Gn || N(),
                        duration: n.duration,
                        tweens: [],
                        createTween: function(e, n) {
                            var i = Q.Tween(t, l.opts, e, n, l.opts.specialEasing[e] || l.opts.easing);
                            return l.tweens.push(i), i
                        },
                        stop: function(e) {
                            for (var n = 0, i = e ? l.tweens.length : 0; i > n; n++) l.tweens[n].run(1);
                            return e ? s.resolveWith(t, [l, e]) : s.rejectWith(t, [l, e]), this
                        }
                    }),
                    c = l.props;
                for (M(c, l.opts.specialEasing); o > r; r++)
                    if (i = Kn[r].call(l, t, c, l.opts)) return i;
                return O(l, c), Q.isFunction(l.opts.start) && l.opts.start.call(t, l), Q.fx.timer(Q.extend(a, {
                    anim: l,
                    queue: l.opts.queue,
                    elem: t
                })), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
            }

            function M(t, e) {
                var n, i, r, o, s;
                for (n in t)
                    if (i = Q.camelCase(n), r = e[i], o = t[n], Q.isArray(o) && (r = o[1], o = t[n] = o[0]), n !== i && (t[i] = o, delete t[n]), s = Q.cssHooks[i], s && "expand" in s) {
                        o = s.expand(o), delete t[i];
                        for (n in o) n in t || (t[n] = o[n], e[n] = r)
                    } else e[i] = r
            }

            function F(t, e, n) {
                var i, r, o, s, a, l, c, u, d, p = this,
                    h = t.style,
                    f = {},
                    m = [],
                    g = t.nodeType && v(t);
                n.queue || (u = Q._queueHooks(t, "fx"), null == u.unqueued && (u.unqueued = 0, d = u.empty.fire, u.empty.fire = function() {
                    u.unqueued || d()
                }), u.unqueued++, p.always(function() {
                    p.always(function() {
                        u.unqueued--, Q.queue(t, "fx").length || u.empty.fire()
                    })
                })), 1 === t.nodeType && ("height" in e || "width" in e) && (n.overflow = [h.overflow, h.overflowX, h.overflowY], "inline" === Q.css(t, "display") && "none" === Q.css(t, "float") && (Q.support.inlineBlockNeedsLayout && "inline" !== P(t.nodeName) ? h.zoom = 1 : h.display = "inline-block")), n.overflow && (h.overflow = "hidden", Q.support.shrinkWrapBlocks || p.done(function() {
                    h.overflow = n.overflow[0], h.overflowX = n.overflow[1], h.overflowY = n.overflow[2]
                }));
                for (i in e)
                    if (o = e[i], Zn.exec(o)) {
                        if (delete e[i], l = l || "toggle" === o, o === (g ? "hide" : "show")) continue;
                        m.push(i)
                    }
                if (s = m.length) {
                    a = Q._data(t, "fxshow") || Q._data(t, "fxshow", {}), "hidden" in a && (g = a.hidden), l && (a.hidden = !g), g ? Q(t).show() : p.done(function() {
                        Q(t).hide()
                    }), p.done(function() {
                        var e;
                        Q.removeData(t, "fxshow", !0);
                        for (e in f) Q.style(t, e, f[e])
                    });
                    for (i = 0; s > i; i++) r = m[i], c = p.createTween(r, g ? a[r] : 0), f[r] = a[r] || Q.style(t, r), r in a || (a[r] = c.start, g && (c.end = c.start, c.start = "width" === r || "height" === r ? 1 : 0))
                }
            }

            function R(t, e, n, i, r) {
                return new R.prototype.init(t, e, n, i, r)
            }

            function U(t, e) {
                var n, i = {
                        height: t
                    },
                    r = 0;
                for (e = e ? 1 : 0; 4 > r; r += 2 - e) n = vn[r], i["margin" + n] = i["padding" + n] = t;
                return e && (i.opacity = i.width = t), i
            }

            function I(t) {
                return Q.isWindow(t) ? t : 9 === t.nodeType ? t.defaultView || t.parentWindow : !1
            }
            var q, j, $ = t.document,
                H = t.location,
                B = t.navigator,
                V = t.jQuery,
                z = t.$,
                Y = Array.prototype.push,
                W = Array.prototype.slice,
                G = Array.prototype.indexOf,
                X = Object.prototype.toString,
                Z = Object.prototype.hasOwnProperty,
                J = String.prototype.trim,
                Q = function(t, e) {
                    return new Q.fn.init(t, e, q)
                },
                K = /[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,
                te = /\S/,
                ee = /\s+/,
                ne = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
                ie = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,
                re = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
                oe = /^[\],:{}\s]*$/,
                se = /(?:^|:|,)(?:\s*\[)+/g,
                ae = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
                le = /"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,
                ce = /^-ms-/,
                ue = /-([\da-z])/gi,
                de = function(t, e) {
                    return (e + "").toUpperCase()
                },
                pe = function() {
                    $.addEventListener ? ($.removeEventListener("DOMContentLoaded", pe, !1), Q.ready()) : "complete" === $.readyState && ($.detachEvent("onreadystatechange", pe), Q.ready())
                },
                he = {};
            Q.fn = Q.prototype = {
                constructor: Q,
                init: function(t, n, i) {
                    var r, o, s;
                    if (!t) return this;
                    if (t.nodeType) return this.context = this[0] = t, this.length = 1, this;
                    if ("string" == typeof t) {
                        if (r = "<" === t.charAt(0) && ">" === t.charAt(t.length - 1) && t.length >= 3 ? [null, t, null] : ie.exec(t), !r || !r[1] && n) return !n || n.jquery ? (n || i).find(t) : this.constructor(n).find(t);
                        if (r[1]) return n = n instanceof Q ? n[0] : n, s = n && n.nodeType ? n.ownerDocument || n : $, t = Q.parseHTML(r[1], s, !0), re.test(r[1]) && Q.isPlainObject(n) && this.attr.call(t, n, !0), Q.merge(this, t);
                        if (o = $.getElementById(r[2]), o && o.parentNode) {
                            if (o.id !== r[2]) return i.find(t);
                            this.length = 1, this[0] = o
                        }
                        return this.context = $, this.selector = t, this
                    }
                    return Q.isFunction(t) ? i.ready(t) : (t.selector !== e && (this.selector = t.selector, this.context = t.context), Q.makeArray(t, this))
                },
                selector: "",
                jquery: "1.8.3+1",
                length: 0,
                size: function() {
                    return this.length
                },
                toArray: function() {
                    return W.call(this)
                },
                get: function(t) {
                    return null == t ? this.toArray() : 0 > t ? this[this.length + t] : this[t]
                },
                pushStack: function(t, e, n) {
                    var i = Q.merge(this.constructor(), t);
                    return i.prevObject = this, i.context = this.context, "find" === e ? i.selector = this.selector + (this.selector ? " " : "") + n : e && (i.selector = this.selector + "." + e + "(" + n + ")"), i
                },
                each: function(t, e) {
                    return Q.each(this, t, e)
                },
                ready: function(t) {
                    return Q.ready.promise().done(t), this
                },
                eq: function(t) {
                    return t = +t, -1 === t ? this.slice(t) : this.slice(t, t + 1)
                },
                first: function() {
                    return this.eq(0)
                },
                last: function() {
                    return this.eq(-1)
                },
                slice: function() {
                    return this.pushStack(W.apply(this, arguments), "slice", W.call(arguments).join(","))
                },
                map: function(t) {
                    return this.pushStack(Q.map(this, function(e, n) {
                        return t.call(e, n, e)
                    }))
                },
                end: function() {
                    return this.prevObject || this.constructor(null)
                },
                push: Y,
                sort: [].sort,
                splice: [].splice
            }, Q.fn.init.prototype = Q.fn, Q.extend = Q.fn.extend = function() {
                var t, n, i, r, o, s, a = arguments[0] || {},
                    l = 1,
                    c = arguments.length,
                    u = !1;
                for ("boolean" == typeof a && (u = a, a = arguments[1] || {}, l = 2), "object" == typeof a || Q.isFunction(a) || (a = {}), c === l && (a = this, --l); c > l; l++)
                    if (null != (t = arguments[l]))
                        for (n in t) i = a[n], r = t[n], a !== r && (u && r && (Q.isPlainObject(r) || (o = Q.isArray(r))) ? (o ? (o = !1, s = i && Q.isArray(i) ? i : []) : s = i && Q.isPlainObject(i) ? i : {}, a[n] = Q.extend(u, s, r)) : r !== e && (a[n] = r));
                return a
            }, Q.extend({
                noConflict: function(e) {
                    return t.$ === Q && (t.$ = z), e && t.jQuery === Q && (t.jQuery = V), Q
                },
                isReady: !1,
                readyWait: 1,
                holdReady: function(t) {
                    t ? Q.readyWait++ : Q.ready(!0)
                },
                ready: function(t) {
                    if (t === !0 ? !--Q.readyWait : !Q.isReady) {
                        if (!$.body) return setTimeout(Q.ready, 1);
                        Q.isReady = !0, t !== !0 && --Q.readyWait > 0 || (j.resolveWith($, [Q]), Q.fn.trigger && Q($).trigger("ready").off("ready"))
                    }
                },
                isFunction: function(t) {
                    return "function" === Q.type(t)
                },
                isArray: Array.isArray || function(t) {
                    return "array" === Q.type(t)
                },
                isWindow: function(t) {
                    return null != t && t == t.window
                },
                isNumeric: function(t) {
                    return !isNaN(parseFloat(t)) && isFinite(t)
                },
                type: function(t) {
                    return null == t ? String(t) : he[X.call(t)] || "object"
                },
                isPlainObject: function(t) {
                    if (!t || "object" !== Q.type(t) || t.nodeType || Q.isWindow(t)) return !1;
                    try {
                        if (t.constructor && !Z.call(t, "constructor") && !Z.call(t.constructor.prototype, "isPrototypeOf")) return !1
                    } catch (n) {
                        return !1
                    }
                    var i;
                    for (i in t);
                    return i === e || Z.call(t, i)
                },
                isEmptyObject: function(t) {
                    var e;
                    for (e in t) return !1;
                    return !0
                },
                error: function(t) {
                    throw new Error(t)
                },
                parseHTML: function(t, e, n) {
                    var i;
                    return t && "string" == typeof t ? ("boolean" == typeof e && (n = e, e = 0), e = e || $, (i = re.exec(t)) ? [e.createElement(i[1])] : (i = Q.buildFragment([t], e, n ? null : []), Q.merge([], (i.cacheable ? Q.clone(i.fragment) : i.fragment).childNodes))) : null
                },
                parseJSON: function(e) {
                    return e && "string" == typeof e ? (e = Q.trim(e), t.JSON && t.JSON.parse ? t.JSON.parse(e) : oe.test(e.replace(ae, "@").replace(le, "]").replace(se, "")) ? new Function("return " + e)() : void Q.error("Invalid JSON: " + e)) : null
                },
                parseXML: function(n) {
                    var i, r;
                    if (!n || "string" != typeof n) return null;
                    try {
                        t.DOMParser ? (r = new DOMParser, i = r.parseFromString(n, "text/xml")) : (i = new ActiveXObject("Microsoft.XMLDOM"), i.async = "false", i.loadXML(n))
                    } catch (o) {
                        i = e
                    }
                    return i && i.documentElement && !i.getElementsByTagName("parsererror").length || Q.error("Invalid XML: " + n), i
                },
                noop: function() {},
                globalEval: function(e) {
                    e && te.test(e) && (t.execScript || function(e) {
                        t.eval.call(t, e)
                    })(e)
                },
                camelCase: function(t) {
                    return t.replace(ce, "ms-").replace(ue, de)
                },
                nodeName: function(t, e) {
                    return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase()
                },
                each: function(t, n, i) {
                    var r, o = 0,
                        s = t.length,
                        a = s === e || Q.isFunction(t);
                    if (i)
                        if (a) {
                            for (r in t)
                                if (n.apply(t[r], i) === !1) break
                        } else
                            for (; s > o && n.apply(t[o++], i) !== !1;);
                    else if (a) {
                        for (r in t)
                            if (n.call(t[r], r, t[r]) === !1) break
                    } else
                        for (; s > o && n.call(t[o], o, t[o++]) !== !1;);
                    return t
                },
                trim: J && !J.call(" ") ? function(t) {
                    return null == t ? "" : J.call(t)
                } : function(t) {
                    return null == t ? "" : (t + "").replace(ne, "")
                },
                makeArray: function(t, e) {
                    var n, i = e || [];
                    return null != t && (n = Q.type(t), null == t.length || "string" === n || "function" === n || "regexp" === n || Q.isWindow(t) ? Y.call(i, t) : Q.merge(i, t)), i
                },
                inArray: function(t, e, n) {
                    var i;
                    if (e) {
                        if (G) return G.call(e, t, n);
                        for (i = e.length, n = n ? 0 > n ? Math.max(0, i + n) : n : 0; i > n; n++)
                            if (n in e && e[n] === t) return n
                    }
                    return -1
                },
                merge: function(t, n) {
                    var i = n.length,
                        r = t.length,
                        o = 0;
                    if ("number" == typeof i)
                        for (; i > o; o++) t[r++] = n[o];
                    else
                        for (; n[o] !== e;) t[r++] = n[o++];
                    return t.length = r, t
                },
                grep: function(t, e, n) {
                    var i, r = [],
                        o = 0,
                        s = t.length;
                    for (n = !!n; s > o; o++) i = !!e(t[o], o), n !== i && r.push(t[o]);
                    return r
                },
                map: function(t, n, i) {
                    var r, o, s = [],
                        a = 0,
                        l = t.length,
                        c = t instanceof Q || l !== e && "number" == typeof l && (l > 0 && t[0] && t[l - 1] || 0 === l || Q.isArray(t));
                    if (c)
                        for (; l > a; a++) r = n(t[a], a, i), null != r && (s[s.length] = r);
                    else
                        for (o in t) r = n(t[o], o, i), null != r && (s[s.length] = r);
                    return s.concat.apply([], s)
                },
                guid: 1,
                proxy: function(t, n) {
                    var i, r, o;
                    return "string" == typeof n && (i = t[n], n = t, t = i), Q.isFunction(t) ? (r = W.call(arguments, 2), o = function() {
                        return t.apply(n, r.concat(W.call(arguments)))
                    }, o.guid = t.guid = t.guid || Q.guid++, o) : e
                },
                access: function(t, n, i, r, o, s, a) {
                    var l, c = null == i,
                        u = 0,
                        d = t.length;
                    if (i && "object" == typeof i) {
                        for (u in i) Q.access(t, n, u, i[u], 1, s, r);
                        o = 1
                    } else if (r !== e) {
                        if (l = a === e && Q.isFunction(r), c && (l ? (l = n, n = function(t, e, n) {
                                return l.call(Q(t), n)
                            }) : (n.call(t, r), n = null)), n)
                            for (; d > u; u++) n(t[u], i, l ? r.call(t[u], u, n(t[u], i)) : r, a);
                        o = 1
                    }
                    return o ? t : c ? n.call(t) : d ? n(t[0], i) : s
                },
                now: function() {
                    return (new Date).getTime()
                }
            }), Q.ready.promise = function(e) {
                if (!j)
                    if (j = Q.Deferred(), "complete" === $.readyState) setTimeout(Q.ready, 1);
                    else if ($.addEventListener) $.addEventListener("DOMContentLoaded", pe, !1), t.addEventListener("load", Q.ready, !1);
                else {
                    $.attachEvent("onreadystatechange", pe), t.attachEvent("onload", Q.ready);
                    var n = !1;
                    try {
                        n = null == t.frameElement && $.documentElement
                    } catch (i) {}
                    n && n.doScroll && ! function r() {
                        if (!Q.isReady) {
                            try {
                                n.doScroll("left")
                            } catch (t) {
                                return setTimeout(r, 50)
                            }
                            Q.ready()
                        }
                    }()
                }
                return j.promise(e)
            }, Q.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(t, e) {
                he["[object " + e + "]"] = e.toLowerCase()
            }), q = Q($);
            var fe = {};
            Q.Callbacks = function(t) {
                t = "string" == typeof t ? fe[t] || n(t) : Q.extend({}, t);
                var i, r, o, s, a, l, c = [],
                    u = !t.once && [],
                    d = function(e) {
                        for (i = t.memory && e, r = !0, l = s || 0, s = 0, a = c.length, o = !0; c && a > l; l++)
                            if (c[l].apply(e[0], e[1]) === !1 && t.stopOnFalse) {
                                i = !1;
                                break
                            }
                        o = !1, c && (u ? u.length && d(u.shift()) : i ? c = [] : p.disable())
                    },
                    p = {
                        add: function() {
                            if (c) {
                                var e = c.length;
                                ! function n(e) {
                                    Q.each(e, function(e, i) {
                                        var r = Q.type(i);
                                        "function" === r ? t.unique && p.has(i) || c.push(i) : i && i.length && "string" !== r && n(i)
                                    })
                                }(arguments), o ? a = c.length : i && (s = e, d(i))
                            }
                            return this
                        },
                        remove: function() {
                            return c && Q.each(arguments, function(t, e) {
                                for (var n;
                                    (n = Q.inArray(e, c, n)) > -1;) c.splice(n, 1), o && (a >= n && a--, l >= n && l--)
                            }), this
                        },
                        has: function(t) {
                            return Q.inArray(t, c) > -1
                        },
                        empty: function() {
                            return c = [], this
                        },
                        disable: function() {
                            return c = u = i = e, this
                        },
                        disabled: function() {
                            return !c
                        },
                        lock: function() {
                            return u = e, i || p.disable(), this
                        },
                        locked: function() {
                            return !u
                        },
                        fireWith: function(t, e) {
                            return e = e || [], e = [t, e.slice ? e.slice() : e], !c || r && !u || (o ? u.push(e) : d(e)), this
                        },
                        fire: function() {
                            return p.fireWith(this, arguments), this
                        },
                        fired: function() {
                            return !!r
                        }
                    };
                return p
            }, Q.extend({
                Deferred: function(t) {
                    var e = [
                            ["resolve", "done", Q.Callbacks("once memory"), "resolved"],
                            ["reject", "fail", Q.Callbacks("once memory"), "rejected"],
                            ["notify", "progress", Q.Callbacks("memory")]
                        ],
                        n = "pending",
                        i = {
                            state: function() {
                                return n
                            },
                            always: function() {
                                return r.done(arguments).fail(arguments), this
                            },
                            then: function() {
                                var t = arguments;
                                return Q.Deferred(function(n) {
                                    Q.each(e, function(e, i) {
                                        var o = i[0],
                                            s = t[e];
                                        r[i[1]](Q.isFunction(s) ? function() {
                                            var t = s.apply(this, arguments);
                                            t && Q.isFunction(t.promise) ? t.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o + "With"](this === r ? n : this, [t])
                                        } : n[o])
                                    }), t = null
                                }).promise()
                            },
                            promise: function(t) {
                                return null != t ? Q.extend(t, i) : i
                            }
                        },
                        r = {};
                    return i.pipe = i.then, Q.each(e, function(t, o) {
                        var s = o[2],
                            a = o[3];
                        i[o[1]] = s.add, a && s.add(function() {
                            n = a
                        }, e[1 ^ t][2].disable, e[2][2].lock), r[o[0]] = s.fire, r[o[0] + "With"] = s.fireWith
                    }), i.promise(r), t && t.call(r, r), r
                },
                when: function(t) {
                    var e, n, i, r = 0,
                        o = W.call(arguments),
                        s = o.length,
                        a = 1 !== s || t && Q.isFunction(t.promise) ? s : 0,
                        l = 1 === a ? t : Q.Deferred(),
                        c = function(t, n, i) {
                            return function(r) {
                                n[t] = this, i[t] = arguments.length > 1 ? W.call(arguments) : r, i === e ? l.notifyWith(n, i) : --a || l.resolveWith(n, i)
                            }
                        };
                    if (s > 1)
                        for (e = new Array(s), n = new Array(s), i = new Array(s); s > r; r++) o[r] && Q.isFunction(o[r].promise) ? o[r].promise().done(c(r, i, o)).fail(l.reject).progress(c(r, n, e)) : --a;
                    return a || l.resolveWith(i, o), l.promise()
                }
            }), Q.support = function() {
                var e, n, i, r, o, s, a, l, c, u, d, p = $.createElement("div");
                if (p.setAttribute("className", "t"), p.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = p.getElementsByTagName("*"), i = p.getElementsByTagName("a")[0], !n || !i || !n.length) return {};
                r = $.createElement("select"), o = r.appendChild($.createElement("option")), s = p.getElementsByTagName("input")[0], i.style.cssText = "top:1px;float:left;opacity:.5", e = {
                    leadingWhitespace: 3 === p.firstChild.nodeType,
                    tbody: !p.getElementsByTagName("tbody").length,
                    htmlSerialize: !!p.getElementsByTagName("link").length,
                    style: /top/.test(i.getAttribute("style")),
                    hrefNormalized: "/a" === i.getAttribute("href"),
                    opacity: /^0.5/.test(i.style.opacity),
                    cssFloat: !!i.style.cssFloat,
                    checkOn: "on" === s.value,
                    optSelected: o.selected,
                    getSetAttribute: "t" !== p.className,
                    enctype: !!$.createElement("form").enctype,
                    html5Clone: "<:nav></:nav>" !== $.createElement("nav").cloneNode(!0).outerHTML,
                    boxModel: "CSS1Compat" === $.compatMode,
                    submitBubbles: !0,
                    changeBubbles: !0,
                    focusinBubbles: !1,
                    deleteExpando: !0,
                    noCloneEvent: !0,
                    inlineBlockNeedsLayout: !1,
                    shrinkWrapBlocks: !1,
                    reliableMarginRight: !0,
                    boxSizingReliable: !0,
                    pixelPosition: !1
                }, s.checked = !0, e.noCloneChecked = s.cloneNode(!0).checked, r.disabled = !0, e.optDisabled = !o.disabled;
                try {
                    delete p.test
                } catch (h) {
                    e.deleteExpando = !1
                }
                if (!p.addEventListener && p.attachEvent && p.fireEvent && (p.attachEvent("onclick", d = function() {
                        e.noCloneEvent = !1
                    }), p.cloneNode(!0).fireEvent("onclick"), p.detachEvent("onclick", d)), s = $.createElement("input"), s.value = "t", s.setAttribute("type", "radio"), e.radioValue = "t" === s.value, s.setAttribute("checked", "checked"), s.setAttribute("name", "t"), p.appendChild(s), a = $.createDocumentFragment(), a.appendChild(p.lastChild), e.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked, e.appendChecked = s.checked, a.removeChild(s), a.appendChild(p), p.attachEvent)
                    for (c in {
                            submit: !0,
                            change: !0,
                            focusin: !0
                        }) l = "on" + c, u = l in p, u || (p.setAttribute(l, "return;"), u = "function" == typeof p[l]), e[c + "Bubbles"] = u;
                return Q(function() {
                    var n, i, r, o, s = "padding:0;margin:0;border:0;display:block;overflow:hidden;",
                        a = $.getElementsByTagName("body")[0];
                    a && (n = $.createElement("div"), n.style.cssText = "visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px", a.insertBefore(n, a.firstChild), i = $.createElement("div"), n.appendChild(i), i.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", r = i.getElementsByTagName("td"), r[0].style.cssText = "padding:0;margin:0;border:0;display:none", u = 0 === r[0].offsetHeight, r[0].style.display = "", r[1].style.display = "none", e.reliableHiddenOffsets = u && 0 === r[0].offsetHeight, i.innerHTML = "", i.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", e.boxSizing = 4 === i.offsetWidth, e.doesNotIncludeMarginInBodyOffset = 1 !== a.offsetTop, t.getComputedStyle && (e.pixelPosition = "1%" !== (t.getComputedStyle(i, null) || {}).top, e.boxSizingReliable = "4px" === (t.getComputedStyle(i, null) || {
                        width: "4px"
                    }).width, o = $.createElement("div"), o.style.cssText = i.style.cssText = s, o.style.marginRight = o.style.width = "0", i.style.width = "1px", i.appendChild(o), e.reliableMarginRight = !parseFloat((t.getComputedStyle(o, null) || {}).marginRight)), "undefined" != typeof i.style.zoom && (i.innerHTML = "", i.style.cssText = s + "width:1px;padding:1px;display:inline;zoom:1", e.inlineBlockNeedsLayout = 3 === i.offsetWidth, i.style.display = "block", i.style.overflow = "visible", i.innerHTML = "<div></div>", i.firstChild.style.width = "5px", e.shrinkWrapBlocks = 3 !== i.offsetWidth, n.style.zoom = 1), a.removeChild(n), n = i = r = o = null)
                }), a.removeChild(p), n = i = r = o = s = a = p = null, e
            }();
            var me = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
                ge = /([A-Z])/g;
            Q.extend({
                cache: {},
                deletedIds: [],
                uuid: 0,
                expando: "jQuery" + (Q.fn.jquery + Math.random()).replace(/\D/g, ""),
                noData: {
                    embed: !0,
                    object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
                    applet: !0
                },
                hasData: function(t) {
                    return t = t.nodeType ? Q.cache[t[Q.expando]] : t[Q.expando], !!t && !r(t)
                },
                data: function(t, n, i, r) {
                    if (Q.acceptData(t)) {
                        var o, s, a = Q.expando,
                            l = "string" == typeof n,
                            c = t.nodeType,
                            u = c ? Q.cache : t,
                            d = c ? t[a] : t[a] && a;
                        if (d && u[d] && (r || u[d].data) || !l || i !== e) return d || (c ? t[a] = d = Q.deletedIds.pop() || Q.guid++ : d = a), u[d] || (u[d] = {}, c || (u[d].toJSON = Q.noop)), ("object" == typeof n || "function" == typeof n) && (r ? u[d] = Q.extend(u[d], n) : u[d].data = Q.extend(u[d].data, n)), o = u[d], r || (o.data || (o.data = {}), o = o.data), i !== e && (o[Q.camelCase(n)] = i), l ? (s = o[n], null == s && (s = o[Q.camelCase(n)])) : s = o, s
                    }
                },
                removeData: function(t, e, n) {
                    if (Q.acceptData(t)) {
                        var i, o, s, a = t.nodeType,
                            l = a ? Q.cache : t,
                            c = a ? t[Q.expando] : Q.expando;
                        if (l[c]) {
                            if (e && (i = n ? l[c] : l[c].data)) {
                                Q.isArray(e) || (e in i ? e = [e] : (e = Q.camelCase(e), e = e in i ? [e] : e.split(" ")));
                                for (o = 0, s = e.length; s > o; o++) delete i[e[o]];
                                if (!(n ? r : Q.isEmptyObject)(i)) return
                            }(n || (delete l[c].data, r(l[c]))) && (a ? Q.cleanData([t], !0) : Q.support.deleteExpando || l != l.window ? delete l[c] : l[c] = null)
                        }
                    }
                },
                _data: function(t, e, n) {
                    return Q.data(t, e, n, !0)
                },
                acceptData: function(t) {
                    var e = t.nodeName && Q.noData[t.nodeName.toLowerCase()];
                    return !e || e !== !0 && t.getAttribute("classid") === e
                }
            }), Q.fn.extend({
                data: function(t, n) {
                    var r, o, s, a, l, c = this[0],
                        u = 0,
                        d = null;
                    if (t === e) {
                        if (this.length && (d = Q.data(c), 1 === c.nodeType && !Q._data(c, "parsedAttrs"))) {
                            for (s = c.attributes, l = s.length; l > u; u++) a = s[u].name, a.indexOf("data-") || (a = Q.camelCase(a.substring(5)), i(c, a, d[a]));
                            Q._data(c, "parsedAttrs", !0)
                        }
                        return d
                    }
                    return "object" == typeof t ? this.each(function() {
                        Q.data(this, t)
                    }) : (r = t.split(".", 2), r[1] = r[1] ? "." + r[1] : "", o = r[1] + "!", Q.access(this, function(n) {
                        return n === e ? (d = this.triggerHandler("getData" + o, [r[0]]), d === e && c && (d = Q.data(c, t), d = i(c, t, d)), d === e && r[1] ? this.data(r[0]) : d) : (r[1] = n, void this.each(function() {
                            var e = Q(this);
                            e.triggerHandler("setData" + o, r), Q.data(this, t, n), e.triggerHandler("changeData" + o, r)
                        }))
                    }, null, n, arguments.length > 1, null, !1))
                },
                removeData: function(t) {
                    return this.each(function() {
                        Q.removeData(this, t)
                    })
                }
            }), Q.extend({
                queue: function(t, e, n) {
                    var i;
                    return t ? (e = (e || "fx") + "queue", i = Q._data(t, e), n && (!i || Q.isArray(n) ? i = Q._data(t, e, Q.makeArray(n)) : i.push(n)), i || []) : void 0
                },
                dequeue: function(t, e) {
                    e = e || "fx";
                    var n = Q.queue(t, e),
                        i = n.length,
                        r = n.shift(),
                        o = Q._queueHooks(t, e),
                        s = function() {
                            Q.dequeue(t, e)
                        };
                    "inprogress" === r && (r = n.shift(), i--), r && ("fx" === e && n.unshift("inprogress"), delete o.stop, r.call(t, s, o)), !i && o && o.empty.fire()
                },
                _queueHooks: function(t, e) {
                    var n = e + "queueHooks";
                    return Q._data(t, n) || Q._data(t, n, {
                        empty: Q.Callbacks("once memory").add(function() {
                            Q.removeData(t, e + "queue", !0), Q.removeData(t, n, !0)
                        })
                    })
                }
            }), Q.fn.extend({
                queue: function(t, n) {
                    var i = 2;
                    return "string" != typeof t && (n = t, t = "fx", i--), arguments.length < i ? Q.queue(this[0], t) : n === e ? this : this.each(function() {
                        var e = Q.queue(this, t, n);
                        Q._queueHooks(this, t), "fx" === t && "inprogress" !== e[0] && Q.dequeue(this, t)
                    })
                },
                dequeue: function(t) {
                    return this.each(function() {
                        Q.dequeue(this, t)
                    })
                },
                delay: function(t, e) {
                    return t = Q.fx ? Q.fx.speeds[t] || t : t, e = e || "fx", this.queue(e, function(e, n) {
                        var i = setTimeout(e, t);
                        n.stop = function() {
                            clearTimeout(i)
                        }
                    })
                },
                clearQueue: function(t) {
                    return this.queue(t || "fx", [])
                },
                promise: function(t, n) {
                    var i, r = 1,
                        o = Q.Deferred(),
                        s = this,
                        a = this.length,
                        l = function() {
                            --r || o.resolveWith(s, [s])
                        };
                    for ("string" != typeof t && (n = t, t = e), t = t || "fx"; a--;) i = Q._data(s[a], t + "queueHooks"), i && i.empty && (r++, i.empty.add(l));
                    return l(), o.promise(n)
                }
            });
            var ve, _e, ye, be = /[\t\r\n]/g,
                we = /\r/g,
                Pe = /^(?:button|input)$/i,
                Se = /^(?:button|input|object|select|textarea)$/i,
                Ce = /^a(?:rea|)$/i,
                xe = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
                ke = Q.support.getSetAttribute;
            Q.fn.extend({
                attr: function(t, e) {
                    return Q.access(this, Q.attr, t, e, arguments.length > 1)
                },
                removeAttr: function(t) {
                    return this.each(function() {
                        Q.removeAttr(this, t)
                    })
                },
                prop: function(t, e) {
                    return Q.access(this, Q.prop, t, e, arguments.length > 1)
                },
                removeProp: function(t) {
                    return t = Q.propFix[t] || t, this.each(function() {
                        try {
                            this[t] = e, delete this[t]
                        } catch (n) {}
                    })
                },
                addClass: function(t) {
                    var e, n, i, r, o, s, a;
                    if (Q.isFunction(t)) return this.each(function(e) {
                        Q(this).addClass(t.call(this, e, this.className))
                    });
                    if (t && "string" == typeof t)
                        for (e = t.split(ee), n = 0, i = this.length; i > n; n++)
                            if (r = this[n], 1 === r.nodeType)
                                if (r.className || 1 !== e.length) {
                                    for (o = " " + r.className + " ", s = 0, a = e.length; a > s; s++) o.indexOf(" " + e[s] + " ") < 0 && (o += e[s] + " ");
                                    r.className = Q.trim(o)
                                } else r.className = t;
                    return this
                },
                removeClass: function(t) {
                    var n, i, r, o, s, a, l;
                    if (Q.isFunction(t)) return this.each(function(e) {
                        Q(this).removeClass(t.call(this, e, this.className))
                    });
                    if (t && "string" == typeof t || t === e)
                        for (n = (t || "").split(ee), a = 0, l = this.length; l > a; a++)
                            if (r = this[a], 1 === r.nodeType && r.className) {
                                for (i = (" " + r.className + " ").replace(be, " "), o = 0, s = n.length; s > o; o++)
                                    for (; i.indexOf(" " + n[o] + " ") >= 0;) i = i.replace(" " + n[o] + " ", " ");
                                r.className = t ? Q.trim(i) : ""
                            }
                    return this
                },
                toggleClass: function(t, e) {
                    var n = typeof t,
                        i = "boolean" == typeof e;
                    return this.each(Q.isFunction(t) ? function(n) {
                        Q(this).toggleClass(t.call(this, n, this.className, e), e)
                    } : function() {
                        if ("string" === n)
                            for (var r, o = 0, s = Q(this), a = e, l = t.split(ee); r = l[o++];) a = i ? a : !s.hasClass(r), s[a ? "addClass" : "removeClass"](r);
                        else("undefined" === n || "boolean" === n) && (this.className && Q._data(this, "__className__", this.className), this.className = this.className || t === !1 ? "" : Q._data(this, "__className__") || "")
                    })
                },
                hasClass: function(t) {
                    for (var e = " " + t + " ", n = 0, i = this.length; i > n; n++)
                        if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(be, " ").indexOf(e) >= 0) return !0;
                    return !1
                },
                val: function(t) {
                    var n, i, r, o = this[0]; {
                        if (arguments.length) return r = Q.isFunction(t), this.each(function(i) {
                            var o, s = Q(this);
                            1 === this.nodeType && (o = r ? t.call(this, i, s.val()) : t, null == o ? o = "" : "number" == typeof o ? o += "" : Q.isArray(o) && (o = Q.map(o, function(t) {
                                return null == t ? "" : t + ""
                            })), n = Q.valHooks[this.type] || Q.valHooks[this.nodeName.toLowerCase()], n && "set" in n && n.set(this, o, "value") !== e || (this.value = o))
                        });
                        if (o) return n = Q.valHooks[o.type] || Q.valHooks[o.nodeName.toLowerCase()], n && "get" in n && (i = n.get(o, "value")) !== e ? i : (i = o.value, "string" == typeof i ? i.replace(we, "") : null == i ? "" : i)
                    }
                }
            }), Q.extend({
                valHooks: {
                    option: {
                        get: function(t) {
                            var e = t.attributes.value;
                            return !e || e.specified ? t.value : t.text
                        }
                    },
                    select: {
                        get: function(t) {
                            for (var e, n, i = t.options, r = t.selectedIndex, o = "select-one" === t.type || 0 > r, s = o ? null : [], a = o ? r + 1 : i.length, l = 0 > r ? a : o ? r : 0; a > l; l++)
                                if (n = i[l], !(!n.selected && l !== r || (Q.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && Q.nodeName(n.parentNode, "optgroup"))) {
                                    if (e = Q(n).val(), o) return e;
                                    s.push(e)
                                }
                            return s
                        },
                        set: function(t, e) {
                            var n = Q.makeArray(e);
                            return Q(t).find("option").each(function() {
                                this.selected = Q.inArray(Q(this).val(), n) >= 0
                            }), n.length || (t.selectedIndex = -1), n
                        }
                    }
                },
                attrFn: {},
                attr: function(t, n, i, r) {
                    var o, s, a, l = t.nodeType;
                    if (t && 3 !== l && 8 !== l && 2 !== l) return r && Q.isFunction(Q.fn[n]) ? Q(t)[n](i) : "undefined" == typeof t.getAttribute ? Q.prop(t, n, i) : (a = 1 !== l || !Q.isXMLDoc(t), a && (n = n.toLowerCase(), s = Q.attrHooks[n] || (xe.test(n) ? _e : ve)), i !== e ? null === i ? void Q.removeAttr(t, n) : s && "set" in s && a && (o = s.set(t, i, n)) !== e ? o : (t.setAttribute(n, i + ""), i) : s && "get" in s && a && null !== (o = s.get(t, n)) ? o : (o = t.getAttribute(n), null === o ? e : o))
                },
                removeAttr: function(t, e) {
                    var n, i, r, o, s = 0;
                    if (e && 1 === t.nodeType)
                        for (i = e.split(ee); s < i.length; s++) r = i[s], r && (n = Q.propFix[r] || r, o = xe.test(r), o || Q.attr(t, r, ""), t.removeAttribute(ke ? r : n), o && n in t && (t[n] = !1))
                },
                attrHooks: {
                    type: {
                        set: function(t, e) {
                            if (Pe.test(t.nodeName) && t.parentNode) Q.error("type property can't be changed");
                            else if (!Q.support.radioValue && "radio" === e && Q.nodeName(t, "input")) {
                                var n = t.value;
                                return t.setAttribute("type", e), n && (t.value = n), e
                            }
                        }
                    },
                    value: {
                        get: function(t, e) {
                            return ve && Q.nodeName(t, "button") ? ve.get(t, e) : e in t ? t.value : null
                        },
                        set: function(t, e, n) {
                            return ve && Q.nodeName(t, "button") ? ve.set(t, e, n) : void(t.value = e)
                        }
                    }
                },
                propFix: {
                    tabindex: "tabIndex",
                    readonly: "readOnly",
                    "for": "htmlFor",
                    "class": "className",
                    maxlength: "maxLength",
                    cellspacing: "cellSpacing",
                    cellpadding: "cellPadding",
                    rowspan: "rowSpan",
                    colspan: "colSpan",
                    usemap: "useMap",
                    frameborder: "frameBorder",
                    contenteditable: "contentEditable"
                },
                prop: function(t, n, i) {
                    var r, o, s, a = t.nodeType;
                    if (t && 3 !== a && 8 !== a && 2 !== a) return s = 1 !== a || !Q.isXMLDoc(t), s && (n = Q.propFix[n] || n, o = Q.propHooks[n]), i !== e ? o && "set" in o && (r = o.set(t, i, n)) !== e ? r : t[n] = i : o && "get" in o && null !== (r = o.get(t, n)) ? r : t[n]
                },
                propHooks: {
                    tabIndex: {
                        get: function(t) {
                            var n = t.getAttributeNode("tabindex");
                            return n && n.specified ? parseInt(n.value, 10) : Se.test(t.nodeName) || Ce.test(t.nodeName) && t.href ? 0 : e
                        }
                    }
                }
            }), _e = {
                get: function(t, n) {
                    var i, r = Q.prop(t, n);
                    return r === !0 || "boolean" != typeof r && (i = t.getAttributeNode(n)) && i.nodeValue !== !1 ? n.toLowerCase() : e
                },
                set: function(t, e, n) {
                    var i;
                    return e === !1 ? Q.removeAttr(t, n) : (i = Q.propFix[n] || n, i in t && (t[i] = !0), t.setAttribute(n, n.toLowerCase())), n
                }
            }, ke || (ye = {
                name: !0,
                id: !0,
                coords: !0
            }, ve = Q.valHooks.button = {
                get: function(t, n) {
                    var i;
                    return i = t.getAttributeNode(n), i && (ye[n] ? "" !== i.value : i.specified) ? i.value : e
                },
                set: function(t, e, n) {
                    var i = t.getAttributeNode(n);
                    return i || (i = $.createAttribute(n), t.setAttributeNode(i)), i.value = e + ""
                }
            }, Q.each(["width", "height"], function(t, e) {
                Q.attrHooks[e] = Q.extend(Q.attrHooks[e], {
                    set: function(t, n) {
                        return "" === n ? (t.setAttribute(e, "auto"), n) : void 0
                    }
                })
            }), Q.attrHooks.contenteditable = {
                get: ve.get,
                set: function(t, e, n) {
                    "" === e && (e = "false"), ve.set(t, e, n)
                }
            }), Q.support.hrefNormalized || Q.each(["href", "src", "width", "height"], function(t, n) {
                Q.attrHooks[n] = Q.extend(Q.attrHooks[n], {
                    get: function(t) {
                        var i = t.getAttribute(n, 2);
                        return null === i ? e : i
                    }
                })
            }), Q.support.style || (Q.attrHooks.style = {
                get: function(t) {
                    return t.style.cssText.toLowerCase() || e
                },
                set: function(t, e) {
                    return t.style.cssText = e + ""
                }
            }), Q.support.optSelected || (Q.propHooks.selected = Q.extend(Q.propHooks.selected, {
                get: function(t) {
                    var e = t.parentNode;
                    return e && (e.selectedIndex, e.parentNode && e.parentNode.selectedIndex), null
                }
            })), Q.support.enctype || (Q.propFix.enctype = "encoding"), Q.support.checkOn || Q.each(["radio", "checkbox"], function() {
                Q.valHooks[this] = {
                    get: function(t) {
                        return null === t.getAttribute("value") ? "on" : t.value
                    }
                }
            }), Q.each(["radio", "checkbox"], function() {
                Q.valHooks[this] = Q.extend(Q.valHooks[this], {
                    set: function(t, e) {
                        return Q.isArray(e) ? t.checked = Q.inArray(Q(t).val(), e) >= 0 : void 0
                    }
                })
            });
            var Te = /^(?:textarea|input|select)$/i,
                Le = /^([^\.]*|)(?:\.(.+)|)$/,
                Ee = /(?:^|\s)hover(\.\S+|)\b/,
                Ae = /^key/,
                Ne = /^(?:mouse|contextmenu)|click/,
                Oe = /^(?:focusinfocus|focusoutblur)$/,
                De = function(t) {
                    return Q.event.special.hover ? t : t.replace(Ee, "mouseenter$1 mouseleave$1")
                };
            Q.event = {
                    add: function(t, n, i, r, o) {
                        var s, a, l, c, u, d, p, h, f, m, g;
                        if (3 !== t.nodeType && 8 !== t.nodeType && n && i && (s = Q._data(t))) {
                            for (i.handler && (f = i, i = f.handler, o = f.selector), i.guid || (i.guid = Q.guid++), l = s.events, l || (s.events = l = {}), a = s.handle, a || (s.handle = a = function(t) {
                                    return "undefined" == typeof Q || t && Q.event.triggered === t.type ? e : Q.event.dispatch.apply(a.elem, arguments)
                                }, a.elem = t), n = Q.trim(De(n)).split(" "), c = 0; c < n.length; c++) u = Le.exec(n[c]) || [], d = u[1], p = (u[2] || "").split(".").sort(), g = Q.event.special[d] || {}, d = (o ? g.delegateType : g.bindType) || d, g = Q.event.special[d] || {}, h = Q.extend({
                                type: d,
                                origType: u[1],
                                data: r,
                                handler: i,
                                guid: i.guid,
                                selector: o,
                                needsContext: o && Q.expr.match.needsContext.test(o),
                                namespace: p.join(".")
                            }, f), m = l[d], m || (m = l[d] = [], m.delegateCount = 0, g.setup && g.setup.call(t, r, p, a) !== !1 || (t.addEventListener ? t.addEventListener(d, a, !1) : t.attachEvent && t.attachEvent("on" + d, a))), g.add && (g.add.call(t, h), h.handler.guid || (h.handler.guid = i.guid)), o ? m.splice(m.delegateCount++, 0, h) : m.push(h), Q.event.global[d] = !0;
                            t = null
                        }
                    },
                    global: {},
                    remove: function(t, e, n, i, r) {
                        var o, s, a, l, c, u, d, p, h, f, m, g = Q.hasData(t) && Q._data(t);
                        if (g && (p = g.events)) {
                            for (e = Q.trim(De(e || "")).split(" "), o = 0; o < e.length; o++)
                                if (s = Le.exec(e[o]) || [], a = l = s[1], c = s[2], a) {
                                    for (h = Q.event.special[a] || {}, a = (i ? h.delegateType : h.bindType) || a, f = p[a] || [], u = f.length, c = c ? new RegExp("(^|\\.)" + c.split(".").sort().join("\\.(?:.*\\.|)") + "(\\.|$)") : null, d = 0; d < f.length; d++) m = f[d], !r && l !== m.origType || n && n.guid !== m.guid || c && !c.test(m.namespace) || i && i !== m.selector && ("**" !== i || !m.selector) || (f.splice(d--, 1), m.selector && f.delegateCount--, h.remove && h.remove.call(t, m));
                                    0 === f.length && u !== f.length && (h.teardown && h.teardown.call(t, c, g.handle) !== !1 || Q.removeEvent(t, a, g.handle), delete p[a])
                                } else
                                    for (a in p) Q.event.remove(t, a + e[o], n, i, !0);
                            Q.isEmptyObject(p) && (delete g.handle, Q.removeData(t, "events", !0))
                        }
                    },
                    customEvent: {
                        getData: !0,
                        setData: !0,
                        changeData: !0
                    },
                    trigger: function(n, i, r, o) {
                        if (!r || 3 !== r.nodeType && 8 !== r.nodeType) {
                            var s, a, l, c, u, d, p, h, f, m, g = n.type || n,
                                v = [];
                            if (!Oe.test(g + Q.event.triggered) && (g.indexOf("!") >= 0 && (g = g.slice(0, -1), a = !0), g.indexOf(".") >= 0 && (v = g.split("."), g = v.shift(), v.sort()), r && !Q.event.customEvent[g] || Q.event.global[g]))
                                if (n = "object" == typeof n ? n[Q.expando] ? n : new Q.Event(g, n) : new Q.Event(g), n.type = g, n.isTrigger = !0, n.exclusive = a, n.namespace = v.join("."), n.namespace_re = n.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, d = g.indexOf(":") < 0 ? "on" + g : "", r) {
                                    if (n.result = e, n.target || (n.target = r), i = null != i ? Q.makeArray(i) : [], i.unshift(n), p = Q.event.special[g] || {}, !p.trigger || p.trigger.apply(r, i) !== !1) {
                                        if (f = [
                                                [r, p.bindType || g]
                                            ], !o && !p.noBubble && !Q.isWindow(r)) {
                                            for (m = p.delegateType || g, c = Oe.test(m + g) ? r : r.parentNode, u = r; c; c = c.parentNode) f.push([c, m]), u = c;
                                            u === (r.ownerDocument || $) && f.push([u.defaultView || u.parentWindow || t, m])
                                        }
                                        for (l = 0; l < f.length && !n.isPropagationStopped(); l++) c = f[l][0], n.type = f[l][1], h = (Q._data(c, "events") || {})[n.type] && Q._data(c, "handle"), h && h.apply(c, i), h = d && c[d], h && Q.acceptData(c) && h.apply && h.apply(c, i) === !1 && n.preventDefault();
                                        return n.type = g, o || n.isDefaultPrevented() || p._default && p._default.apply(r.ownerDocument, i) !== !1 || "click" === g && Q.nodeName(r, "a") || !Q.acceptData(r) || d && r[g] && ("focus" !== g && "blur" !== g || 0 !== n.target.offsetWidth) && !Q.isWindow(r) && (u = r[d], u && (r[d] = null), Q.event.triggered = g, r[g](), Q.event.triggered = e, u && (r[d] = u)), n.result
                                    }
                                } else {
                                    s = Q.cache;
                                    for (l in s) s[l].events && s[l].events[g] && Q.event.trigger(n, i, s[l].handle.elem, !0)
                                }
                        }
                    },
                    dispatch: function(n) {
                        n = Q.event.fix(n || t.event);
                        var i, r, o, s, a, l, c, u, d, p = (Q._data(this, "events") || {})[n.type] || [],
                            h = p.delegateCount,
                            f = W.call(arguments),
                            m = !n.exclusive && !n.namespace,
                            g = Q.event.special[n.type] || {},
                            v = [];
                        if (f[0] = n, n.delegateTarget = this, !g.preDispatch || g.preDispatch.call(this, n) !== !1) {
                            if (h && (!n.button || "click" !== n.type))
                                for (o = n.target; o != this; o = o.parentNode || this)
                                    if (o.disabled !== !0 || "click" !== n.type) {
                                        for (a = {}, c = [], i = 0; h > i; i++) u = p[i], d = u.selector, a[d] === e && (a[d] = u.needsContext ? Q(d, this).index(o) >= 0 : Q.find(d, this, null, [o]).length), a[d] && c.push(u);
                                        c.length && v.push({
                                            elem: o,
                                            matches: c
                                        })
                                    }
                            for (p.length > h && v.push({
                                    elem: this,
                                    matches: p.slice(h)
                                }), i = 0; i < v.length && !n.isPropagationStopped(); i++)
                                for (l = v[i], n.currentTarget = l.elem, r = 0; r < l.matches.length && !n.isImmediatePropagationStopped(); r++) u = l.matches[r], (m || !n.namespace && !u.namespace || n.namespace_re && n.namespace_re.test(u.namespace)) && (n.data = u.data, n.handleObj = u, s = ((Q.event.special[u.origType] || {}).handle || u.handler).apply(l.elem, f), s !== e && (n.result = s, s === !1 && (n.preventDefault(), n.stopPropagation())));
                            return g.postDispatch && g.postDispatch.call(this, n), n.result
                        }
                    },
                    props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
                    fixHooks: {},
                    keyHooks: {
                        props: "char charCode key keyCode".split(" "),
                        filter: function(t, e) {
                            return null == t.which && (t.which = null != e.charCode ? e.charCode : e.keyCode), t
                        }
                    },
                    mouseHooks: {
                        props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                        filter: function(t, n) {
                            var i, r, o, s = n.button,
                                a = n.fromElement;
                            return null == t.pageX && null != n.clientX && (i = t.target.ownerDocument || $, r = i.documentElement, o = i.body, t.pageX = n.clientX + (r && r.scrollLeft || o && o.scrollLeft || 0) - (r && r.clientLeft || o && o.clientLeft || 0), t.pageY = n.clientY + (r && r.scrollTop || o && o.scrollTop || 0) - (r && r.clientTop || o && o.clientTop || 0)), !t.relatedTarget && a && (t.relatedTarget = a === t.target ? n.toElement : a), t.which || s === e || (t.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), t
                        }
                    },
                    fix: function(t) {
                        if (t[Q.expando]) return t;
                        var e, n, i = t,
                            r = Q.event.fixHooks[t.type] || {},
                            o = r.props ? this.props.concat(r.props) : this.props;
                        for (t = Q.Event(i), e = o.length; e;) n = o[--e], t[n] = i[n];
                        return t.target || (t.target = i.srcElement || $), 3 === t.target.nodeType && (t.target = t.target.parentNode), t.metaKey = !!t.metaKey, r.filter ? r.filter(t, i) : t
                    },
                    special: {
                        load: {
                            noBubble: !0
                        },
                        focus: {
                            delegateType: "focusin"
                        },
                        blur: {
                            delegateType: "focusout"
                        },
                        beforeunload: {
                            setup: function(t, e, n) {
                                Q.isWindow(this) && (this.onbeforeunload = n)
                            },
                            teardown: function(t, e) {
                                this.onbeforeunload === e && (this.onbeforeunload = null)
                            }
                        }
                    },
                    simulate: function(t, e, n, i) {
                        var r = Q.extend(new Q.Event, n, {
                            type: t,
                            isSimulated: !0,
                            originalEvent: {}
                        });
                        i ? Q.event.trigger(r, null, e) : Q.event.dispatch.call(e, r), r.isDefaultPrevented() && n.preventDefault()
                    }
                }, Q.event.handle = Q.event.dispatch, Q.removeEvent = $.removeEventListener ? function(t, e, n) {
                    t.removeEventListener && t.removeEventListener(e, n, !1)
                } : function(t, e, n) {
                    var i = "on" + e;
                    t.detachEvent && ("undefined" == typeof t[i] && (t[i] = null), t.detachEvent(i, n))
                }, Q.Event = function(t, e) {
                    return this instanceof Q.Event ? (t && t.type ? (this.originalEvent = t, this.type = t.type, this.isDefaultPrevented = t.defaultPrevented || t.returnValue === !1 || t.getPreventDefault && t.getPreventDefault() ? s : o) : this.type = t, e && Q.extend(this, e), this.timeStamp = t && t.timeStamp || Q.now(), void(this[Q.expando] = !0)) : new Q.Event(t, e)
                }, Q.Event.prototype = {
                    preventDefault: function() {
                        this.isDefaultPrevented = s;
                        var t = this.originalEvent;
                        t && (t.preventDefault ? t.preventDefault() : t.returnValue = !1)
                    },
                    stopPropagation: function() {
                        this.isPropagationStopped = s;
                        var t = this.originalEvent;
                        t && (t.stopPropagation && t.stopPropagation(), t.cancelBubble = !0)
                    },
                    stopImmediatePropagation: function() {
                        this.isImmediatePropagationStopped = s, this.stopPropagation()
                    },
                    isDefaultPrevented: o,
                    isPropagationStopped: o,
                    isImmediatePropagationStopped: o
                }, Q.each({
                    mouseenter: "mouseover",
                    mouseleave: "mouseout"
                }, function(t, e) {
                    Q.event.special[t] = {
                        delegateType: e,
                        bindType: e,
                        handle: function(t) {
                            {
                                var n, i = this,
                                    r = t.relatedTarget,
                                    o = t.handleObj;
                                o.selector
                            }
                            return (!r || r !== i && !Q.contains(i, r)) && (t.type = o.origType, n = o.handler.apply(this, arguments), t.type = e), n
                        }
                    }
                }), Q.support.submitBubbles || (Q.event.special.submit = {
                    setup: function() {
                        return Q.nodeName(this, "form") ? !1 : void Q.event.add(this, "click._submit keypress._submit", function(t) {
                            var n = t.target,
                                i = Q.nodeName(n, "input") || Q.nodeName(n, "button") ? n.form : e;
                            i && !Q._data(i, "_submit_attached") && (Q.event.add(i, "submit._submit", function(t) {
                                t._submit_bubble = !0
                            }), Q._data(i, "_submit_attached", !0))
                        })
                    },
                    postDispatch: function(t) {
                        t._submit_bubble && (delete t._submit_bubble, this.parentNode && !t.isTrigger && Q.event.simulate("submit", this.parentNode, t, !0))
                    },
                    teardown: function() {
                        return Q.nodeName(this, "form") ? !1 : void Q.event.remove(this, "._submit")
                    }
                }), Q.support.changeBubbles || (Q.event.special.change = {
                    setup: function() {
                        return Te.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (Q.event.add(this, "propertychange._change", function(t) {
                            "checked" === t.originalEvent.propertyName && (this._just_changed = !0)
                        }), Q.event.add(this, "click._change", function(t) {
                            this._just_changed && !t.isTrigger && (this._just_changed = !1), Q.event.simulate("change", this, t, !0)
                        })), !1) : void Q.event.add(this, "beforeactivate._change", function(t) {
                            var e = t.target;
                            Te.test(e.nodeName) && !Q._data(e, "_change_attached") && (Q.event.add(e, "change._change", function(t) {
                                !this.parentNode || t.isSimulated || t.isTrigger || Q.event.simulate("change", this.parentNode, t, !0)
                            }), Q._data(e, "_change_attached", !0))
                        })
                    },
                    handle: function(t) {
                        var e = t.target;
                        return this !== e || t.isSimulated || t.isTrigger || "radio" !== e.type && "checkbox" !== e.type ? t.handleObj.handler.apply(this, arguments) : void 0
                    },
                    teardown: function() {
                        return Q.event.remove(this, "._change"), !Te.test(this.nodeName)
                    }
                }), Q.support.focusinBubbles || Q.each({
                    focus: "focusin",
                    blur: "focusout"
                }, function(t, e) {
                    var n = 0,
                        i = function(t) {
                            Q.event.simulate(e, t.target, Q.event.fix(t), !0)
                        };
                    Q.event.special[e] = {
                        setup: function() {
                            0 === n++ && $.addEventListener(t, i, !0)
                        },
                        teardown: function() {
                            0 === --n && $.removeEventListener(t, i, !0)
                        }
                    }
                }), Q.fn.extend({
                    on: function(t, n, i, r, s) {
                        var a, l;
                        if ("object" == typeof t) {
                            "string" != typeof n && (i = i || n, n = e);
                            for (l in t) this.on(l, n, i, t[l], s);
                            return this
                        }
                        if (null == i && null == r ? (r = n, i = n = e) : null == r && ("string" == typeof n ? (r = i, i = e) : (r = i, i = n, n = e)), r === !1) r = o;
                        else if (!r) return this;
                        return 1 === s && (a = r, r = function(t) {
                            return Q().off(t), a.apply(this, arguments)
                        }, r.guid = a.guid || (a.guid = Q.guid++)), this.each(function() {
                            Q.event.add(this, t, r, i, n)
                        })
                    },
                    one: function(t, e, n, i) {
                        return this.on(t, e, n, i, 1)
                    },
                    off: function(t, n, i) {
                        var r, s;
                        if (t && t.preventDefault && t.handleObj) return r = t.handleObj, Q(t.delegateTarget).off(r.namespace ? r.origType + "." + r.namespace : r.origType, r.selector, r.handler), this;
                        if ("object" == typeof t) {
                            for (s in t) this.off(s, n, t[s]);
                            return this
                        }
                        return (n === !1 || "function" == typeof n) && (i = n, n = e), i === !1 && (i = o), this.each(function() {
                            Q.event.remove(this, t, i, n)
                        })
                    },
                    bind: function(t, e, n) {
                        return this.on(t, null, e, n)
                    },
                    unbind: function(t, e) {
                        return this.off(t, null, e)
                    },
                    live: function(t, e, n) {
                        return Q(this.context).on(t, this.selector, e, n), this
                    },
                    die: function(t, e) {
                        return Q(this.context).off(t, this.selector || "**", e), this
                    },
                    delegate: function(t, e, n, i) {
                        return this.on(e, t, n, i)
                    },
                    undelegate: function(t, e, n) {
                        return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", n)
                    },
                    trigger: function(t, e) {
                        return this.each(function() {
                            Q.event.trigger(t, e, this)
                        })
                    },
                    triggerHandler: function(t, e) {
                        return this[0] ? Q.event.trigger(t, e, this[0], !0) : void 0
                    },
                    toggle: function(t) {
                        var e = arguments,
                            n = t.guid || Q.guid++,
                            i = 0,
                            r = function(n) {
                                var r = (Q._data(this, "lastToggle" + t.guid) || 0) % i;
                                return Q._data(this, "lastToggle" + t.guid, r + 1), n.preventDefault(), e[r].apply(this, arguments) || !1
                            };
                        for (r.guid = n; i < e.length;) e[i++].guid = n;
                        return this.click(r)
                    },
                    hover: function(t, e) {
                        return this.mouseenter(t).mouseleave(e || t)
                    }
                }), Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(t, e) {
                    Q.fn[e] = function(t, n) {
                        return null == n && (n = t, t = null), arguments.length > 0 ? this.on(e, null, t, n) : this.trigger(e)
                    }, Ae.test(e) && (Q.event.fixHooks[e] = Q.event.keyHooks), Ne.test(e) && (Q.event.fixHooks[e] = Q.event.mouseHooks)
                }),
                function(t, e) {
                    function n(t, e, n, i) {
                        n = n || [], e = e || N;
                        var r, o, s, a, l = e.nodeType;
                        if (!t || "string" != typeof t) return n;
                        if (1 !== l && 9 !== l) return [];
                        if (s = w(e), !s && !i && (r = ne.exec(t)))
                            if (a = r[1]) {
                                if (9 === l) {
                                    if (o = e.getElementById(a), !o || !o.parentNode) return n;
                                    if (o.id === a) return n.push(o), n
                                } else if (e.ownerDocument && (o = e.ownerDocument.getElementById(a)) && P(e, o) && o.id === a) return n.push(o), n
                            } else {
                                if (r[2]) return R.apply(n, U.call(e.getElementsByTagName(t), 0)), n;
                                if ((a = r[3]) && pe && e.getElementsByClassName) return R.apply(n, U.call(e.getElementsByClassName(a), 0)), n
                            }
                        return m(t.replace(J, "$1"), e, n, i, s)
                    }

                    function i(t) {
                        return function(e) {
                            var n = e.nodeName.toLowerCase();
                            return "input" === n && e.type === t
                        }
                    }

                    function r(t) {
                        return function(e) {
                            var n = e.nodeName.toLowerCase();
                            return ("input" === n || "button" === n) && e.type === t
                        }
                    }

                    function o(t) {
                        return q(function(e) {
                            return e = +e, q(function(n, i) {
                                for (var r, o = t([], n.length, e), s = o.length; s--;) n[r = o[s]] && (n[r] = !(i[r] = n[r]))
                            })
                        })
                    }

                    function s(t, e, n) {
                        if (t === e) return n;
                        for (var i = t.nextSibling; i;) {
                            if (i === e) return -1;
                            i = i.nextSibling
                        }
                        return 1
                    }

                    function a(t, e) {
                        var i, r, o, s, a, l, c, u = H[E][t + " "];
                        if (u) return e ? 0 : u.slice(0);
                        for (a = t, l = [], c = y.preFilter; a;) {
                            (!i || (r = K.exec(a))) && (r && (a = a.slice(r[0].length) || a), l.push(o = [])), i = !1, (r = te.exec(a)) && (o.push(i = new A(r.shift())), a = a.slice(i.length), i.type = r[0].replace(J, " "));
                            for (s in y.filter) !(r = ae[s].exec(a)) || c[s] && !(r = c[s](r)) || (o.push(i = new A(r.shift())), a = a.slice(i.length), i.type = s, i.matches = r);
                            if (!i) break
                        }
                        return e ? a.length : a ? n.error(t) : H(t, l).slice(0)
                    }

                    function l(t, e, n) {
                        var i = e.dir,
                            r = n && "parentNode" === e.dir,
                            o = M++;
                        return e.first ? function(e, n, o) {
                            for (; e = e[i];)
                                if (r || 1 === e.nodeType) return t(e, n, o)
                        } : function(e, n, s) {
                            if (s) {
                                for (; e = e[i];)
                                    if ((r || 1 === e.nodeType) && t(e, n, s)) return e
                            } else
                                for (var a, l = D + " " + o + " ", c = l + v; e = e[i];)
                                    if (r || 1 === e.nodeType) {
                                        if ((a = e[E]) === c) return e.sizset;
                                        if ("string" == typeof a && 0 === a.indexOf(l)) {
                                            if (e.sizset) return e
                                        } else {
                                            if (e[E] = c, t(e, n, s)) return e.sizset = !0, e;
                                            e.sizset = !1
                                        }
                                    }
                        }
                    }

                    function c(t) {
                        return t.length > 1 ? function(e, n, i) {
                            for (var r = t.length; r--;)
                                if (!t[r](e, n, i)) return !1;
                            return !0
                        } : t[0]
                    }

                    function u(t, e, n, i, r) {
                        for (var o, s = [], a = 0, l = t.length, c = null != e; l > a; a++)(o = t[a]) && (!n || n(o, i, r)) && (s.push(o), c && e.push(a));
                        return s
                    }

                    function d(t, e, n, i, r, o) {
                        return i && !i[E] && (i = d(i)), r && !r[E] && (r = d(r, o)), q(function(o, s, a, l) {
                            var c, d, p, h = [],
                                m = [],
                                g = s.length,
                                v = o || f(e || "*", a.nodeType ? [a] : a, []),
                                _ = !t || !o && e ? v : u(v, h, t, a, l),
                                y = n ? r || (o ? t : g || i) ? [] : s : _;
                            if (n && n(_, y, a, l), i)
                                for (c = u(y, m), i(c, [], a, l), d = c.length; d--;)(p = c[d]) && (y[m[d]] = !(_[m[d]] = p));
                            if (o) {
                                if (r || t) {
                                    if (r) {
                                        for (c = [], d = y.length; d--;)(p = y[d]) && c.push(_[d] = p);
                                        r(null, y = [], c, l)
                                    }
                                    for (d = y.length; d--;)(p = y[d]) && (c = r ? I.call(o, p) : h[d]) > -1 && (o[c] = !(s[c] = p))
                                }
                            } else y = u(y === s ? y.splice(g, y.length) : y), r ? r(null, s, y, l) : R.apply(s, y)
                        })
                    }

                    function p(t) {
                        for (var e, n, i, r = t.length, o = y.relative[t[0].type], s = o || y.relative[" "], a = o ? 1 : 0, u = l(function(t) {
                                return t === e
                            }, s, !0), h = l(function(t) {
                                return I.call(e, t) > -1
                            }, s, !0), f = [function(t, n, i) {
                                return !o && (i || n !== k) || ((e = n).nodeType ? u(t, n, i) : h(t, n, i))
                            }]; r > a; a++)
                            if (n = y.relative[t[a].type]) f = [l(c(f), n)];
                            else {
                                if (n = y.filter[t[a].type].apply(null, t[a].matches), n[E]) {
                                    for (i = ++a; r > i && !y.relative[t[i].type]; i++);
                                    return d(a > 1 && c(f), a > 1 && t.slice(0, a - 1).join("").replace(J, "$1"), n, i > a && p(t.slice(a, i)), r > i && p(t = t.slice(i)), r > i && t.join(""))
                                }
                                f.push(n)
                            }
                        return c(f)
                    }

                    function h(t, e) {
                        var i = e.length > 0,
                            r = t.length > 0,
                            o = function(s, a, l, c, d) {
                                var p, h, f, m = [],
                                    g = 0,
                                    _ = "0",
                                    b = s && [],
                                    w = null != d,
                                    P = k,
                                    S = s || r && y.find.TAG("*", d && a.parentNode || a),
                                    C = D += null == P ? 1 : Math.E;
                                for (w && (k = a !== N && a, v = o.el); null != (p = S[_]); _++) {
                                    if (r && p) {
                                        for (h = 0; f = t[h]; h++)
                                            if (f(p, a, l)) {
                                                c.push(p);
                                                break
                                            }
                                        w && (D = C, v = ++o.el)
                                    }
                                    i && ((p = !f && p) && g--, s && b.push(p))
                                }
                                if (g += _, i && _ !== g) {
                                    for (h = 0; f = e[h]; h++) f(b, m, a, l);
                                    if (s) {
                                        if (g > 0)
                                            for (; _--;) b[_] || m[_] || (m[_] = F.call(c));
                                        m = u(m)
                                    }
                                    R.apply(c, m), w && !s && m.length > 0 && g + e.length > 1 && n.uniqueSort(c)
                                }
                                return w && (D = C, k = P), b
                            };
                        return o.el = 0, i ? q(o) : o
                    }

                    function f(t, e, i) {
                        for (var r = 0, o = e.length; o > r; r++) n(t, e[r], i);
                        return i
                    }

                    function m(t, e, n, i, r) {
                        {
                            var o, s, l, c, u, d = a(t);
                            d.length
                        }
                        if (!i && 1 === d.length) {
                            if (s = d[0] = d[0].slice(0), s.length > 2 && "ID" === (l = s[0]).type && 9 === e.nodeType && !r && y.relative[s[1].type]) {
                                if (e = y.find.ID(l.matches[0].replace(se, ""), e, r)[0], !e) return n;
                                t = t.slice(s.shift().length)
                            }
                            for (o = ae.POS.test(t) ? -1 : s.length - 1; o >= 0 && (l = s[o], !y.relative[c = l.type]); o--)
                                if ((u = y.find[c]) && (i = u(l.matches[0].replace(se, ""), ie.test(s[0].type) && e.parentNode || e, r))) {
                                    if (s.splice(o, 1), t = i.length && s.join(""), !t) return R.apply(n, U.call(i, 0)), n;
                                    break
                                }
                        }
                        return S(t, d)(i, e, r, n, ie.test(t)), n
                    }

                    function g() {}
                    var v, _, y, b, w, P, S, C, x, k, T = !0,
                        L = "undefined",
                        E = ("sizcache" + Math.random()).replace(".", ""),
                        A = String,
                        N = t.document,
                        O = N.documentElement,
                        D = 0,
                        M = 0,
                        F = [].pop,
                        R = [].push,
                        U = [].slice,
                        I = [].indexOf || function(t) {
                            for (var e = 0, n = this.length; n > e; e++)
                                if (this[e] === t) return e;
                            return -1
                        },
                        q = function(t, e) {
                            return t[E] = null == e || e, t
                        },
                        j = function() {
                            var t = {},
                                e = [];
                            return q(function(n, i) {
                                return e.push(n) > y.cacheLength && delete t[e.shift()], t[n + " "] = i
                            }, t)
                        },
                        $ = j(),
                        H = j(),
                        B = j(),
                        V = "[\\x20\\t\\r\\n\\f]",
                        z = "(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",
                        Y = z.replace("w", "w#"),
                        W = "([*^$|!~]?=)",
                        G = "\\[" + V + "*(" + z + ")" + V + "*(?:" + W + V + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + Y + ")|)|)" + V + "*\\]",
                        X = ":(" + z + ")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:" + G + ")|[^:]|\\\\.)*|.*))\\)|)",
                        Z = ":(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + V + "*((?:-\\d)?\\d*)" + V + "*\\)|)(?=[^-]|$)",
                        J = new RegExp("^" + V + "+|((?:^|[^\\\\])(?:\\\\.)*)" + V + "+$", "g"),
                        K = new RegExp("^" + V + "*," + V + "*"),
                        te = new RegExp("^" + V + "*([\\x20\\t\\r\\n\\f>+~])" + V + "*"),
                        ee = new RegExp(X),
                        ne = /^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,
                        ie = /[\x20\t\r\n\f]*[+~]/,
                        re = /h\d/i,
                        oe = /input|select|textarea|button/i,
                        se = /\\(?!\\)/g,
                        ae = {
                            ID: new RegExp("^#(" + z + ")"),
                            CLASS: new RegExp("^\\.(" + z + ")"),
                            NAME: new RegExp("^\\[name=['\"]?(" + z + ")['\"]?\\]"),
                            TAG: new RegExp("^(" + z.replace("w", "w*") + ")"),
                            ATTR: new RegExp("^" + G),
                            PSEUDO: new RegExp("^" + X),
                            POS: new RegExp(Z, "i"),
                            CHILD: new RegExp("^:(only|nth|first|last)-child(?:\\(" + V + "*(even|odd|(([+-]|)(\\d*)n|)" + V + "*(?:([+-]|)" + V + "*(\\d+)|))" + V + "*\\)|)", "i"),
                            needsContext: new RegExp("^" + V + "*[>+~]|" + Z, "i")
                        },
                        le = function(t) {
                            var e = N.createElement("div");
                            try {
                                return t(e)
                            } catch (n) {
                                return !1
                            } finally {
                                e = null
                            }
                        },
                        ce = le(function(t) {
                            return t.appendChild(N.createComment("")), !t.getElementsByTagName("*").length
                        }),
                        ue = le(function(t) {
                            return t.innerHTML = "<a href='#'></a>", t.firstChild && typeof t.firstChild.getAttribute !== L && "#" === t.firstChild.getAttribute("href")
                        }),
                        de = le(function(t) {
                            t.innerHTML = "<select></select>";
                            var e = typeof t.lastChild.getAttribute("multiple");
                            return "boolean" !== e && "string" !== e
                        }),
                        pe = le(function(t) {
                            return t.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", t.getElementsByClassName && t.getElementsByClassName("e").length ? (t.lastChild.className = "e", 2 === t.getElementsByClassName("e").length) : !1
                        }),
                        he = le(function(t) {
                            t.id = E + 0, t.innerHTML = "<a name='" + E + "'></a><div name='" + E + "'></div>", O.insertBefore(t, O.firstChild);
                            var e = N.getElementsByName && N.getElementsByName(E).length === 2 + N.getElementsByName(E + 0).length;
                            return _ = !N.getElementById(E), O.removeChild(t), e
                        });
                    try {
                        U.call(O.childNodes, 0)[0].nodeType
                    } catch (fe) {
                        U = function(t) {
                            for (var e, n = []; e = this[t]; t++) n.push(e);
                            return n
                        }
                    }
                    n.matches = function(t, e) {
                        return n(t, null, null, e)
                    }, n.matchesSelector = function(t, e) {
                        return n(e, null, null, [t]).length > 0
                    }, b = n.getText = function(t) {
                        var e, n = "",
                            i = 0,
                            r = t.nodeType;
                        if (r) {
                            if (1 === r || 9 === r || 11 === r) {
                                if ("string" == typeof t.textContent) return t.textContent;
                                for (t = t.firstChild; t; t = t.nextSibling) n += b(t)
                            } else if (3 === r || 4 === r) return t.nodeValue
                        } else
                            for (; e = t[i]; i++) n += b(e);
                        return n
                    }, w = n.isXML = function(t) {
                        var e = t && (t.ownerDocument || t).documentElement;
                        return e ? "HTML" !== e.nodeName : !1
                    }, P = n.contains = O.contains ? function(t, e) {
                        var n = 9 === t.nodeType ? t.documentElement : t,
                            i = e && e.parentNode;
                        return t === i || !!(i && 1 === i.nodeType && n.contains && n.contains(i))
                    } : O.compareDocumentPosition ? function(t, e) {
                        return e && !!(16 & t.compareDocumentPosition(e))
                    } : function(t, e) {
                        for (; e = e.parentNode;)
                            if (e === t) return !0;
                        return !1
                    }, n.attr = function(t, e) {
                        var n, i = w(t);
                        return i || (e = e.toLowerCase()), (n = y.attrHandle[e]) ? n(t) : i || de ? t.getAttribute(e) : (n = t.getAttributeNode(e), n ? "boolean" == typeof t[e] ? t[e] ? e : null : n.specified ? n.value : null : null)
                    }, y = n.selectors = {
                        cacheLength: 50,
                        createPseudo: q,
                        match: ae,
                        attrHandle: ue ? {} : {
                            href: function(t) {
                                return t.getAttribute("href", 2)
                            },
                            type: function(t) {
                                return t.getAttribute("type")
                            }
                        },
                        find: {
                            ID: _ ? function(t, e, n) {
                                if (typeof e.getElementById !== L && !n) {
                                    var i = e.getElementById(t);
                                    return i && i.parentNode ? [i] : []
                                }
                            } : function(t, n, i) {
                                if (typeof n.getElementById !== L && !i) {
                                    var r = n.getElementById(t);
                                    return r ? r.id === t || typeof r.getAttributeNode !== L && r.getAttributeNode("id").value === t ? [r] : e : []
                                }
                            },
                            TAG: ce ? function(t, e) {
                                return typeof e.getElementsByTagName !== L ? e.getElementsByTagName(t) : void 0
                            } : function(t, e) {
                                var n = e.getElementsByTagName(t);
                                if ("*" === t) {
                                    for (var i, r = [], o = 0; i = n[o]; o++) 1 === i.nodeType && r.push(i);
                                    return r
                                }
                                return n
                            },
                            NAME: he && function(t, e) {
                                return typeof e.getElementsByName !== L ? e.getElementsByName(name) : void 0
                            },
                            CLASS: pe && function(t, e, n) {
                                return typeof e.getElementsByClassName === L || n ? void 0 : e.getElementsByClassName(t)
                            }
                        },
                        relative: {
                            ">": {
                                dir: "parentNode",
                                first: !0
                            },
                            " ": {
                                dir: "parentNode"
                            },
                            "+": {
                                dir: "previousSibling",
                                first: !0
                            },
                            "~": {
                                dir: "previousSibling"
                            }
                        },
                        preFilter: {
                            ATTR: function(t) {
                                return t[1] = t[1].replace(se, ""), t[3] = (t[4] || t[5] || "").replace(se, ""), "~=" === t[2] && (t[3] = " " + t[3] + " "), t.slice(0, 4)
                            },
                            CHILD: function(t) {
                                return t[1] = t[1].toLowerCase(), "nth" === t[1] ? (t[2] || n.error(t[0]), t[3] = +(t[3] ? t[4] + (t[5] || 1) : 2 * ("even" === t[2] || "odd" === t[2])), t[4] = +(t[6] + t[7] || "odd" === t[2])) : t[2] && n.error(t[0]), t
                            },
                            PSEUDO: function(t) {
                                var e, n;
                                return ae.CHILD.test(t[0]) ? null : (t[3] ? t[2] = t[3] : (e = t[4]) && (ee.test(e) && (n = a(e, !0)) && (n = e.indexOf(")", e.length - n) - e.length) && (e = e.slice(0, n), t[0] = t[0].slice(0, n)), t[2] = e), t.slice(0, 3))
                            }
                        },
                        filter: {
                            ID: _ ? function(t) {
                                return t = t.replace(se, ""),
                                    function(e) {
                                        return e.getAttribute("id") === t
                                    }
                            } : function(t) {
                                return t = t.replace(se, ""),
                                    function(e) {
                                        var n = typeof e.getAttributeNode !== L && e.getAttributeNode("id");
                                        return n && n.value === t
                                    }
                            },
                            TAG: function(t) {
                                return "*" === t ? function() {
                                    return !0
                                } : (t = t.replace(se, "").toLowerCase(), function(e) {
                                    return e.nodeName && e.nodeName.toLowerCase() === t
                                })
                            },
                            CLASS: function(t) {
                                var e = $[E][t + " "];
                                return e || (e = new RegExp("(^|" + V + ")" + t + "(" + V + "|$)")) && $(t, function(t) {
                                    return e.test(t.className || typeof t.getAttribute !== L && t.getAttribute("class") || "")
                                })
                            },
                            ATTR: function(t, e, i) {
                                return function(r) {
                                    var o = n.attr(r, t);
                                    return null == o ? "!=" === e : e ? (o += "", "=" === e ? o === i : "!=" === e ? o !== i : "^=" === e ? i && 0 === o.indexOf(i) : "*=" === e ? i && o.indexOf(i) > -1 : "$=" === e ? i && o.substr(o.length - i.length) === i : "~=" === e ? (" " + o + " ").indexOf(i) > -1 : "|=" === e ? o === i || o.substr(0, i.length + 1) === i + "-" : !1) : !0
                                }
                            },
                            CHILD: function(t, e, n, i) {
                                return "nth" === t ? function(t) {
                                    var e, r, o = t.parentNode;
                                    if (1 === n && 0 === i) return !0;
                                    if (o)
                                        for (r = 0, e = o.firstChild; e && (1 !== e.nodeType || (r++, t !== e)); e = e.nextSibling);
                                    return r -= i, r === n || r % n === 0 && r / n >= 0
                                } : function(e) {
                                    var n = e;
                                    switch (t) {
                                        case "only":
                                        case "first":
                                            for (; n = n.previousSibling;)
                                                if (1 === n.nodeType) return !1;
                                            if ("first" === t) return !0;
                                            n = e;
                                        case "last":
                                            for (; n = n.nextSibling;)
                                                if (1 === n.nodeType) return !1;
                                            return !0
                                    }
                                }
                            },
                            PSEUDO: function(t, e) {
                                var i, r = y.pseudos[t] || y.setFilters[t.toLowerCase()] || n.error("unsupported pseudo: " + t);
                                return r[E] ? r(e) : r.length > 1 ? (i = [t, t, "", e], y.setFilters.hasOwnProperty(t.toLowerCase()) ? q(function(t, n) {
                                    for (var i, o = r(t, e), s = o.length; s--;) i = I.call(t, o[s]), t[i] = !(n[i] = o[s])
                                }) : function(t) {
                                    return r(t, 0, i)
                                }) : r
                            }
                        },
                        pseudos: {
                            not: q(function(t) {
                                var e = [],
                                    n = [],
                                    i = S(t.replace(J, "$1"));
                                return i[E] ? q(function(t, e, n, r) {
                                    for (var o, s = i(t, null, r, []), a = t.length; a--;)(o = s[a]) && (t[a] = !(e[a] = o))
                                }) : function(t, r, o) {
                                    return e[0] = t, i(e, null, o, n), !n.pop()
                                }
                            }),
                            has: q(function(t) {
                                return function(e) {
                                    return n(t, e).length > 0
                                }
                            }),
                            contains: q(function(t) {
                                return function(e) {
                                    return (e.textContent || e.innerText || b(e)).indexOf(t) > -1
                                }
                            }),
                            enabled: function(t) {
                                return t.disabled === !1
                            },
                            disabled: function(t) {
                                return t.disabled === !0
                            },
                            checked: function(t) {
                                var e = t.nodeName.toLowerCase();
                                return "input" === e && !!t.checked || "option" === e && !!t.selected
                            },
                            selected: function(t) {
                                return t.parentNode && t.parentNode.selectedIndex, t.selected === !0
                            },
                            parent: function(t) {
                                return !y.pseudos.empty(t)
                            },
                            empty: function(t) {
                                var e;
                                for (t = t.firstChild; t;) {
                                    if (t.nodeName > "@" || 3 === (e = t.nodeType) || 4 === e) return !1;
                                    t = t.nextSibling
                                }
                                return !0
                            },
                            header: function(t) {
                                return re.test(t.nodeName)
                            },
                            text: function(t) {
                                var e, n;
                                return "input" === t.nodeName.toLowerCase() && "text" === (e = t.type) && (null == (n = t.getAttribute("type")) || n.toLowerCase() === e)
                            },
                            radio: i("radio"),
                            checkbox: i("checkbox"),
                            file: i("file"),
                            password: i("password"),
                            image: i("image"),
                            submit: r("submit"),
                            reset: r("reset"),
                            button: function(t) {
                                var e = t.nodeName.toLowerCase();
                                return "input" === e && "button" === t.type || "button" === e
                            },
                            input: function(t) {
                                return oe.test(t.nodeName)
                            },
                            focus: function(t) {
                                var e = t.ownerDocument;
                                return t === e.activeElement && (!e.hasFocus || e.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
                            },
                            active: function(t) {
                                return t === t.ownerDocument.activeElement
                            },
                            first: o(function() {
                                return [0]
                            }),
                            last: o(function(t, e) {
                                return [e - 1]
                            }),
                            eq: o(function(t, e, n) {
                                return [0 > n ? n + e : n]
                            }),
                            even: o(function(t, e) {
                                for (var n = 0; e > n; n += 2) t.push(n);
                                return t
                            }),
                            odd: o(function(t, e) {
                                for (var n = 1; e > n; n += 2) t.push(n);
                                return t
                            }),
                            lt: o(function(t, e, n) {
                                for (var i = 0 > n ? n + e : n; --i >= 0;) t.push(i);
                                return t
                            }),
                            gt: o(function(t, e, n) {
                                for (var i = 0 > n ? n + e : n; ++i < e;) t.push(i);
                                return t
                            })
                        }
                    }, C = O.compareDocumentPosition ? function(t, e) {
                        return t === e ? (x = !0, 0) : (t.compareDocumentPosition && e.compareDocumentPosition ? 4 & t.compareDocumentPosition(e) : t.compareDocumentPosition) ? -1 : 1
                    } : function(t, e) {
                        if (t === e) return x = !0, 0;
                        if (t.sourceIndex && e.sourceIndex) return t.sourceIndex - e.sourceIndex;
                        var n, i, r = [],
                            o = [],
                            a = t.parentNode,
                            l = e.parentNode,
                            c = a;
                        if (a === l) return s(t, e);
                        if (!a) return -1;
                        if (!l) return 1;
                        for (; c;) r.unshift(c), c = c.parentNode;
                        for (c = l; c;) o.unshift(c), c = c.parentNode;
                        n = r.length, i = o.length;
                        for (var u = 0; n > u && i > u; u++)
                            if (r[u] !== o[u]) return s(r[u], o[u]);
                        return u === n ? s(t, o[u], -1) : s(r[u], e, 1)
                    }, [0, 0].sort(C), T = !x, n.uniqueSort = function(t) {
                        var e, n = [],
                            i = 1,
                            r = 0;
                        if (x = T, t.sort(C), x) {
                            for (; e = t[i]; i++) e === t[i - 1] && (r = n.push(i));
                            for (; r--;) t.splice(n[r], 1)
                        }
                        return t
                    }, n.error = function(t) {
                        throw new Error("Syntax error, unrecognized expression: " + t)
                    }, S = n.compile = function(t, e) {
                        var n, i = [],
                            r = [],
                            o = B[E][t + " "];
                        if (!o) {
                            for (e || (e = a(t)), n = e.length; n--;) o = p(e[n]), o[E] ? i.push(o) : r.push(o);
                            o = B(t, h(r, i))
                        }
                        return o
                    }, N.querySelectorAll && ! function() {
                        var t, e = m,
                            i = /'|\\/g,
                            r = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
                            o = [":focus"],
                            s = [":active"],
                            l = O.matchesSelector || O.mozMatchesSelector || O.webkitMatchesSelector || O.oMatchesSelector || O.msMatchesSelector;
                        le(function(t) {
                            t.innerHTML = "<select><option selected=''></option></select>", t.querySelectorAll("[selected]").length || o.push("\\[" + V + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), t.querySelectorAll(":checked").length || o.push(":checked")
                        }), le(function(t) {
                            t.innerHTML = "<p test=''></p>", t.querySelectorAll("[test^='']").length && o.push("[*^$]=" + V + "*(?:\"\"|'')"), t.innerHTML = "<input type='hidden'/>", t.querySelectorAll(":enabled").length || o.push(":enabled", ":disabled")
                        }), o = new RegExp(o.join("|")), m = function(t, n, r, s, l) {
                            if (!s && !l && !o.test(t)) {
                                var c, u, d = !0,
                                    p = E,
                                    h = n,
                                    f = 9 === n.nodeType && t;
                                if (1 === n.nodeType && "object" !== n.nodeName.toLowerCase()) {
                                    for (c = a(t), (d = n.getAttribute("id")) ? p = d.replace(i, "\\$&") : n.setAttribute("id", p), p = "[id='" + p + "'] ", u = c.length; u--;) c[u] = p + c[u].join("");
                                    h = ie.test(t) && n.parentNode || n, f = c.join(",")
                                }
                                if (f) try {
                                    return R.apply(r, U.call(h.querySelectorAll(f), 0)), r
                                } catch (m) {} finally {
                                    d || n.removeAttribute("id")
                                }
                            }
                            return e(t, n, r, s, l)
                        }, l && (le(function(e) {
                            t = l.call(e, "div");
                            try {
                                l.call(e, "[test!='']:sizzle"), s.push("!=", X)
                            } catch (n) {}
                        }), s = new RegExp(s.join("|")), n.matchesSelector = function(e, i) {
                            if (i = i.replace(r, "='$1']"), !w(e) && !s.test(i) && !o.test(i)) try {
                                var a = l.call(e, i);
                                if (a || t || e.document && 11 !== e.document.nodeType) return a
                            } catch (c) {}
                            return n(i, null, null, [e]).length > 0
                        })
                    }(), y.pseudos.nth = y.pseudos.eq, y.filters = g.prototype = y.pseudos, y.setFilters = new g, n.attr = Q.attr, Q.find = n, Q.expr = n.selectors, Q.expr[":"] = Q.expr.pseudos, Q.unique = n.uniqueSort, Q.text = n.getText, Q.isXMLDoc = n.isXML, Q.contains = n.contains
                }(t);
            var Me = /Until$/,
                Fe = /^(?:parents|prev(?:Until|All))/,
                Re = /^.[^:#\[\.,]*$/,
                Ue = Q.expr.match.needsContext,
                Ie = {
                    children: !0,
                    contents: !0,
                    next: !0,
                    prev: !0
                };
            Q.fn.extend({
                find: function(t) {
                    var e, n, i, r, o, s, a = this;
                    if ("string" != typeof t) return Q(t).filter(function() {
                        for (e = 0, n = a.length; n > e; e++)
                            if (Q.contains(a[e], this)) return !0
                    });
                    for (s = this.pushStack("", "find", t), e = 0, n = this.length; n > e; e++)
                        if (i = s.length, Q.find(t, this[e], s), e > 0)
                            for (r = i; r < s.length; r++)
                                for (o = 0; i > o; o++)
                                    if (s[o] === s[r]) {
                                        s.splice(r--, 1);
                                        break
                                    }
                    return s
                },
                has: function(t) {
                    var e, n = Q(t, this),
                        i = n.length;
                    return this.filter(function() {
                        for (e = 0; i > e; e++)
                            if (Q.contains(this, n[e])) return !0
                    })
                },
                not: function(t) {
                    return this.pushStack(c(this, t, !1), "not", t)
                },
                filter: function(t) {
                    return this.pushStack(c(this, t, !0), "filter", t)
                },
                is: function(t) {
                    return !!t && ("string" == typeof t ? Ue.test(t) ? Q(t, this.context).index(this[0]) >= 0 : Q.filter(t, this).length > 0 : this.filter(t).length > 0)
                },
                closest: function(t, e) {
                    for (var n, i = 0, r = this.length, o = [], s = Ue.test(t) || "string" != typeof t ? Q(t, e || this.context) : 0; r > i; i++)
                        for (n = this[i]; n && n.ownerDocument && n !== e && 11 !== n.nodeType;) {
                            if (s ? s.index(n) > -1 : Q.find.matchesSelector(n, t)) {
                                o.push(n);
                                break
                            }
                            n = n.parentNode
                        }
                    return o = o.length > 1 ? Q.unique(o) : o, this.pushStack(o, "closest", t)
                },
                index: function(t) {
                    return t ? "string" == typeof t ? Q.inArray(this[0], Q(t)) : Q.inArray(t.jquery ? t[0] : t, this) : this[0] && this[0].parentNode ? this.prevAll().length : -1
                },
                add: function(t, e) {
                    var n = "string" == typeof t ? Q(t, e) : Q.makeArray(t && t.nodeType ? [t] : t),
                        i = Q.merge(this.get(), n);
                    return this.pushStack(a(n[0]) || a(i[0]) ? i : Q.unique(i))
                },
                addBack: function(t) {
                    return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
                }
            }), Q.fn.andSelf = Q.fn.addBack, Q.each({
                parent: function(t) {
                    var e = t.parentNode;
                    return e && 11 !== e.nodeType ? e : null
                },
                parents: function(t) {
                    return Q.dir(t, "parentNode")
                },
                parentsUntil: function(t, e, n) {
                    return Q.dir(t, "parentNode", n)
                },
                next: function(t) {
                    return l(t, "nextSibling")
                },
                prev: function(t) {
                    return l(t, "previousSibling")
                },
                nextAll: function(t) {
                    return Q.dir(t, "nextSibling")
                },
                prevAll: function(t) {
                    return Q.dir(t, "previousSibling")
                },
                nextUntil: function(t, e, n) {
                    return Q.dir(t, "nextSibling", n)
                },
                prevUntil: function(t, e, n) {
                    return Q.dir(t, "previousSibling", n)
                },
                siblings: function(t) {
                    return Q.sibling((t.parentNode || {}).firstChild, t)
                },
                children: function(t) {
                    return Q.sibling(t.firstChild)
                },
                contents: function(t) {
                    return Q.nodeName(t, "iframe") ? t.contentDocument || t.contentWindow.document : Q.merge([], t.childNodes)
                }
            }, function(t, e) {
                Q.fn[t] = function(n, i) {
                    var r = Q.map(this, e, n);
                    return Me.test(t) || (i = n), i && "string" == typeof i && (r = Q.filter(i, r)), r = this.length > 1 && !Ie[t] ? Q.unique(r) : r, this.length > 1 && Fe.test(t) && (r = r.reverse()), this.pushStack(r, t, W.call(arguments).join(","))
                }
            }), Q.extend({
                filter: function(t, e, n) {
                    return n && (t = ":not(" + t + ")"), 1 === e.length ? Q.find.matchesSelector(e[0], t) ? [e[0]] : [] : Q.find.matches(t, e)
                },
                dir: function(t, n, i) {
                    for (var r = [], o = t[n]; o && 9 !== o.nodeType && (i === e || 1 !== o.nodeType || !Q(o).is(i));) 1 === o.nodeType && r.push(o), o = o[n];
                    return r
                },
                sibling: function(t, e) {
                    for (var n = []; t; t = t.nextSibling) 1 === t.nodeType && t !== e && n.push(t);
                    return n
                }
            });
            var qe = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
                je = / jQuery\d+="(?:null|\d+)"/g,
                $e = /^\s+/,
                He = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
                Be = /<([\w:]+)/,
                Ve = /<tbody/i,
                ze = /<|&#?\w+;/,
                Ye = /<(?:script|style|link)/i,
                We = /<(?:script|object|embed|option|style)/i,
                Ge = new RegExp("<(?:" + qe + ")[\\s/>]", "i"),
                Xe = /^(?:checkbox|radio)$/,
                Ze = /checked\s*(?:[^=]|=\s*.checked.)/i,
                Je = /\/(java|ecma)script/i,
                Qe = /^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,
                Ke = {
                    option: [1, "<select multiple='multiple'>", "</select>"],
                    legend: [1, "<fieldset>", "</fieldset>"],
                    thead: [1, "<table>", "</table>"],
                    tr: [2, "<table><tbody>", "</tbody></table>"],
                    td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                    col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
                    area: [1, "<map>", "</map>"],
                    _default: [0, "", ""]
                },
                tn = u($),
                en = tn.appendChild($.createElement("div"));
            Ke.optgroup = Ke.option, Ke.tbody = Ke.tfoot = Ke.colgroup = Ke.caption = Ke.thead, Ke.th = Ke.td, Q.support.htmlSerialize || (Ke._default = [1, "X<div>", "</div>"]), Q.fn.extend({
                    text: function(t) {
                        return Q.access(this, function(t) {
                            return t === e ? Q.text(this) : this.empty().append((this[0] && this[0].ownerDocument || $).createTextNode(t))
                        }, null, t, arguments.length)
                    },
                    wrapAll: function(t) {
                        if (Q.isFunction(t)) return this.each(function(e) {
                            Q(this).wrapAll(t.call(this, e))
                        });
                        if (this[0]) {
                            var e = Q(t, this[0].ownerDocument).eq(0).clone(!0);
                            this[0].parentNode && e.insertBefore(this[0]), e.map(function() {
                                for (var t = this; t.firstChild && 1 === t.firstChild.nodeType;) t = t.firstChild;
                                return t
                            }).append(this)
                        }
                        return this
                    },
                    wrapInner: function(t) {
                        return this.each(Q.isFunction(t) ? function(e) {
                            Q(this).wrapInner(t.call(this, e))
                        } : function() {
                            var e = Q(this),
                                n = e.contents();
                            n.length ? n.wrapAll(t) : e.append(t)
                        })
                    },
                    wrap: function(t) {
                        var e = Q.isFunction(t);
                        return this.each(function(n) {
                            Q(this).wrapAll(e ? t.call(this, n) : t)
                        })
                    },
                    unwrap: function() {
                        return this.parent().each(function() {
                            Q.nodeName(this, "body") || Q(this).replaceWith(this.childNodes)
                        }).end()
                    },
                    append: function() {
                        return this.domManip(arguments, !0, function(t) {
                            (1 === this.nodeType || 11 === this.nodeType) && this.appendChild(t)
                        })
                    },
                    prepend: function() {
                        return this.domManip(arguments, !0, function(t) {
                            (1 === this.nodeType || 11 === this.nodeType) && this.insertBefore(t, this.firstChild)
                        })
                    },
                    before: function() {
                        if (!a(this[0])) return this.domManip(arguments, !1, function(t) {
                            this.parentNode.insertBefore(t, this)
                        });
                        if (arguments.length) {
                            var t = Q.clean(arguments);
                            return this.pushStack(Q.merge(t, this), "before", this.selector)
                        }
                    },
                    after: function() {
                        if (!a(this[0])) return this.domManip(arguments, !1, function(t) {
                            this.parentNode.insertBefore(t, this.nextSibling)
                        });
                        if (arguments.length) {
                            var t = Q.clean(arguments);
                            return this.pushStack(Q.merge(this, t), "after", this.selector)
                        }
                    },
                    remove: function(t, e) {
                        for (var n, i = 0; null != (n = this[i]); i++)(!t || Q.filter(t, [n]).length) && (e || 1 !== n.nodeType || (Q.cleanData(n.getElementsByTagName("*")), Q.cleanData([n])), n.parentNode && n.parentNode.removeChild(n));
                        return this
                    },
                    empty: function() {
                        for (var t, e = 0; null != (t = this[e]); e++)
                            for (1 === t.nodeType && Q.cleanData(t.getElementsByTagName("*")); t.firstChild;) t.removeChild(t.firstChild);
                        return this
                    },
                    clone: function(t, e) {
                        return t = null == t ? !1 : t, e = null == e ? t : e, this.map(function() {
                            return Q.clone(this, t, e)
                        })
                    },
                    html: function(t) {
                        return Q.access(this, function(t) {
                            var n = this[0] || {},
                                i = 0,
                                r = this.length;
                            if (t === e) return 1 === n.nodeType ? n.innerHTML.replace(je, "") : e;
                            if (!("string" != typeof t || Ye.test(t) || !Q.support.htmlSerialize && Ge.test(t) || !Q.support.leadingWhitespace && $e.test(t) || Ke[(Be.exec(t) || ["", ""])[1].toLowerCase()])) {
                                t = t.replace(He, "<$1></$2>");
                                try {
                                    for (; r > i; i++) n = this[i] || {}, 1 === n.nodeType && (Q.cleanData(n.getElementsByTagName("*")), n.innerHTML = t);
                                    n = 0
                                } catch (o) {}
                            }
                            n && this.empty().append(t)
                        }, null, t, arguments.length)
                    },
                    replaceWith: function(t) {
                        return a(this[0]) ? this.length ? this.pushStack(Q(Q.isFunction(t) ? t() : t), "replaceWith", t) : this : Q.isFunction(t) ? this.each(function(e) {
                            var n = Q(this),
                                i = n.html();
                            n.replaceWith(t.call(this, e, i))
                        }) : ("string" != typeof t && (t = Q(t).detach()), this.each(function() {
                            var e = this.nextSibling,
                                n = this.parentNode;
                            Q(this).remove(), e ? Q(e).before(t) : Q(n).append(t)
                        }))
                    },
                    detach: function(t) {
                        return this.remove(t, !0)
                    },
                    domManip: function(t, n, i) {
                        t = [].concat.apply([], t);
                        var r, o, s, a, l = 0,
                            c = t[0],
                            u = [],
                            p = this.length;
                        if (!Q.support.checkClone && p > 1 && "string" == typeof c && Ze.test(c)) return this.each(function() {
                            Q(this).domManip(t, n, i)
                        });
                        if (Q.isFunction(c)) return this.each(function(r) {
                            var o = Q(this);
                            t[0] = c.call(this, r, n ? o.html() : e), o.domManip(t, n, i)
                        });
                        if (this[0]) {
                            if (r = Q.buildFragment(t, this, u), s = r.fragment, o = s.firstChild, 1 === s.childNodes.length && (s = o), o)
                                for (n = n && Q.nodeName(o, "tr"), a = r.cacheable || p - 1; p > l; l++) i.call(n && Q.nodeName(this[l], "table") ? d(this[l], "tbody") : this[l], l === a ? s : Q.clone(s, !0, !0));
                            s = o = null, u.length && Q.each(u, function(t, e) {
                                e.src ? Q.ajax ? Q.ajax({
                                    url: e.src,
                                    type: "GET",
                                    dataType: "script",
                                    async: !1,
                                    global: !1,
                                    "throws": !0
                                }) : Q.error("no ajax") : Q.globalEval((e.text || e.textContent || e.innerHTML || "").replace(Qe, "")), e.parentNode && e.parentNode.removeChild(e)
                            })
                        }
                        return this
                    }
                }), Q.buildFragment = function(t, n, i) {
                    var r, o, s, a = t[0];
                    return n = n || $, n = !n.nodeType && n[0] || n, n = n.ownerDocument || n, !(1 === t.length && "string" == typeof a && a.length < 512 && n === $ && "<" === a.charAt(0)) || We.test(a) || !Q.support.checkClone && Ze.test(a) || !Q.support.html5Clone && Ge.test(a) || (o = !0, r = Q.fragments[a], s = r !== e), r || (r = n.createDocumentFragment(), Q.clean(t, n, r, i), o && (Q.fragments[a] = s && r)), {
                        fragment: r,
                        cacheable: o
                    }
                }, Q.fragments = {}, Q.each({
                    appendTo: "append",
                    prependTo: "prepend",
                    insertBefore: "before",
                    insertAfter: "after",
                    replaceAll: "replaceWith"
                }, function(t, e) {
                    Q.fn[t] = function(n) {
                        var i, r = 0,
                            o = [],
                            s = Q(n),
                            a = s.length,
                            l = 1 === this.length && this[0].parentNode;
                        if ((null == l || l && 11 === l.nodeType && 1 === l.childNodes.length) && 1 === a) return s[e](this[0]), this;
                        for (; a > r; r++) i = (r > 0 ? this.clone(!0) : this).get(), Q(s[r])[e](i), o = o.concat(i);
                        return this.pushStack(o, t, s.selector)
                    }
                }), Q.extend({
                    clone: function(t, e, n) {
                        var i, r, o, s;
                        if (Q.support.html5Clone || Q.isXMLDoc(t) || !Ge.test("<" + t.nodeName + ">") ? s = t.cloneNode(!0) : (en.innerHTML = t.outerHTML, en.removeChild(s = en.firstChild)), !(Q.support.noCloneEvent && Q.support.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || Q.isXMLDoc(t)))
                            for (h(t, s), i = f(t), r = f(s), o = 0; i[o]; ++o) r[o] && h(i[o], r[o]);
                        if (e && (p(t, s), n))
                            for (i = f(t), r = f(s), o = 0; i[o]; ++o) p(i[o], r[o]);
                        return i = r = null, s
                    },
                    clean: function(t, e, n, i) {
                        var r, o, s, a, l, c, d, p, h, f, g, v = e === $ && tn,
                            _ = [];
                        for (e && "undefined" != typeof e.createDocumentFragment || (e = $), r = 0; null != (s = t[r]); r++)
                            if ("number" == typeof s && (s += ""), s) {
                                if ("string" == typeof s)
                                    if (ze.test(s)) {
                                        for (v = v || u(e), d = e.createElement("div"), v.appendChild(d), s = s.replace(He, "<$1></$2>"), a = (Be.exec(s) || ["", ""])[1].toLowerCase(), l = Ke[a] || Ke._default, c = l[0], d.innerHTML = l[1] + s + l[2]; c--;) d = d.lastChild;
                                        if (!Q.support.tbody)
                                            for (p = Ve.test(s), h = "table" !== a || p ? "<table>" !== l[1] || p ? [] : d.childNodes : d.firstChild && d.firstChild.childNodes, o = h.length - 1; o >= 0; --o) Q.nodeName(h[o], "tbody") && !h[o].childNodes.length && h[o].parentNode.removeChild(h[o]);
                                        !Q.support.leadingWhitespace && $e.test(s) && d.insertBefore(e.createTextNode($e.exec(s)[0]), d.firstChild), s = d.childNodes, d.parentNode.removeChild(d)
                                    } else s = e.createTextNode(s);
                                s.nodeType ? _.push(s) : Q.merge(_, s)
                            }
                        if (d && (s = d = v = null), !Q.support.appendChecked)
                            for (r = 0; null != (s = _[r]); r++) Q.nodeName(s, "input") ? m(s) : "undefined" != typeof s.getElementsByTagName && Q.grep(s.getElementsByTagName("input"), m);
                        if (n)
                            for (f = function(t) {
                                    return !t.type || Je.test(t.type) ? i ? i.push(t.parentNode ? t.parentNode.removeChild(t) : t) : n.appendChild(t) : void 0
                                }, r = 0; null != (s = _[r]); r++) Q.nodeName(s, "script") && f(s) || (n.appendChild(s), "undefined" != typeof s.getElementsByTagName && (g = Q.grep(Q.merge([], s.getElementsByTagName("script")), f), _.splice.apply(_, [r + 1, 0].concat(g)), r += g.length));
                        return _
                    },
                    cleanData: function(t, e) {
                        for (var n, i, r, o, s = 0, a = Q.expando, l = Q.cache, c = Q.support.deleteExpando, u = Q.event.special; null != (r = t[s]); s++)
                            if ((e || Q.acceptData(r)) && (i = r[a], n = i && l[i])) {
                                if (n.events)
                                    for (o in n.events) u[o] ? Q.event.remove(r, o) : Q.removeEvent(r, o, n.handle);
                                l[i] && (delete l[i], c ? delete r[a] : r.removeAttribute ? r.removeAttribute(a) : r[a] = null, Q.deletedIds.push(i))
                            }
                    }
                }),
                function() {
                    var t, e;
                    Q.uaMatch = function(t) {
                        t = t.toLowerCase();
                        var e = /(chrome)[ \/]([\w.]+)/.exec(t) || /(webkit)[ \/]([\w.]+)/.exec(t) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t) || /(msie) ([\w.]+)/.exec(t) || t.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t) || [];
                        return {
                            browser: e[1] || "",
                            version: e[2] || "0"
                        }
                    }, t = Q.uaMatch(B.userAgent), e = {}, t.browser && (e[t.browser] = !0, e.version = t.version), e.chrome ? e.webkit = !0 : e.webkit && (e.safari = !0), Q.browser = e, Q.sub = function() {
                        function t(e, n) {
                            return new t.fn.init(e, n)
                        }
                        Q.extend(!0, t, this), t.superclass = this, t.fn = t.prototype = this(), t.fn.constructor = t, t.sub = this.sub, t.fn.init = function(n, i) {
                            return i && i instanceof Q && !(i instanceof t) && (i = t(i)), Q.fn.init.call(this, n, i, e)
                        }, t.fn.init.prototype = t.fn;
                        var e = t($);
                        return t
                    }
                }();
            var nn, rn, on, sn = /alpha\([^)]*\)/i,
                an = /opacity=([^)]*)/,
                ln = /^(top|right|bottom|left)$/,
                cn = /^(none|table(?!-c[ea]).+)/,
                un = /^margin/,
                dn = new RegExp("^(" + K + ")(.*)$", "i"),
                pn = new RegExp("^(" + K + ")(?!px)[a-z%]+$", "i"),
                hn = new RegExp("^([-+])=(" + K + ")", "i"),
                fn = {
                    BODY: "block"
                },
                mn = {
                    position: "absolute",
                    visibility: "hidden",
                    display: "block"
                },
                gn = {
                    letterSpacing: 0,
                    fontWeight: 400
                },
                vn = ["Top", "Right", "Bottom", "Left"],
                _n = ["Webkit", "O", "Moz", "ms"],
                yn = Q.fn.toggle;
            Q.fn.extend({
                css: function(t, n) {
                    return Q.access(this, function(t, n, i) {
                        return i !== e ? Q.style(t, n, i) : Q.css(t, n)
                    }, t, n, arguments.length > 1)
                },
                show: function() {
                    return _(this, !0)
                },
                hide: function() {
                    return _(this)
                },
                toggle: function(t, e) {
                    var n = "boolean" == typeof t;
                    return Q.isFunction(t) && Q.isFunction(e) ? yn.apply(this, arguments) : this.each(function() {
                        (n ? t : v(this)) ? Q(this).show(): Q(this).hide()
                    })
                }
            }), Q.extend({
                cssHooks: {
                    opacity: {
                        get: function(t, e) {
                            if (e) {
                                var n = nn(t, "opacity");
                                return "" === n ? "1" : n
                            }
                        }
                    }
                },
                cssNumber: {
                    fillOpacity: !0,
                    fontWeight: !0,
                    lineHeight: !0,
                    opacity: !0,
                    orphans: !0,
                    widows: !0,
                    zIndex: !0,
                    zoom: !0
                },
                cssProps: {
                    "float": Q.support.cssFloat ? "cssFloat" : "styleFloat"
                },
                style: function(t, n, i, r) {
                    if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                        var o, s, a, l = Q.camelCase(n),
                            c = t.style;
                        if (n = Q.cssProps[l] || (Q.cssProps[l] = g(c, l)), a = Q.cssHooks[n] || Q.cssHooks[l], i === e) return a && "get" in a && (o = a.get(t, !1, r)) !== e ? o : c[n];
                        if (s = typeof i, "string" === s && (o = hn.exec(i)) && (i = (o[1] + 1) * o[2] + parseFloat(Q.css(t, n)), s = "number"), !(null == i || "number" === s && isNaN(i) || ("number" !== s || Q.cssNumber[l] || (i += "px"), a && "set" in a && (i = a.set(t, i, r)) === e))) try {
                            c[n] = i
                        } catch (u) {}
                    }
                },
                css: function(t, n, i, r) {
                    var o, s, a, l = Q.camelCase(n);
                    return n = Q.cssProps[l] || (Q.cssProps[l] = g(t.style, l)), a = Q.cssHooks[n] || Q.cssHooks[l], a && "get" in a && (o = a.get(t, !0, r)), o === e && (o = nn(t, n)), "normal" === o && n in gn && (o = gn[n]), i || r !== e ? (s = parseFloat(o), i || Q.isNumeric(s) ? s || 0 : o) : o
                },
                swap: function(t, e, n) {
                    var i, r, o = {};
                    for (r in e) o[r] = t.style[r], t.style[r] = e[r];
                    i = n.call(t);
                    for (r in e) t.style[r] = o[r];
                    return i
                }
            }), t.getComputedStyle ? nn = function(e, n) {
                var i, r, o, s, a = t.getComputedStyle(e, null),
                    l = e.style;
                return a && (i = a.getPropertyValue(n) || a[n], "" !== i || Q.contains(e.ownerDocument, e) || (i = Q.style(e, n)), pn.test(i) && un.test(n) && (r = l.width, o = l.minWidth, s = l.maxWidth, l.minWidth = l.maxWidth = l.width = i, i = a.width, l.width = r, l.minWidth = o, l.maxWidth = s)), i
            } : $.documentElement.currentStyle && (nn = function(t, e) {
                var n, i, r = t.currentStyle && t.currentStyle[e],
                    o = t.style;
                return null == r && o && o[e] && (r = o[e]), pn.test(r) && !ln.test(e) && (n = o.left, i = t.runtimeStyle && t.runtimeStyle.left, i && (t.runtimeStyle.left = t.currentStyle.left), o.left = "fontSize" === e ? "1em" : r, r = o.pixelLeft + "px", o.left = n, i && (t.runtimeStyle.left = i)), "" === r ? "auto" : r
            }), Q.each(["height", "width"], function(t, e) {
                Q.cssHooks[e] = {
                    get: function(t, n, i) {
                        return n ? 0 === t.offsetWidth && cn.test(nn(t, "display")) ? Q.swap(t, mn, function() {
                            return w(t, e, i)
                        }) : w(t, e, i) : void 0
                    },
                    set: function(t, n, i) {
                        return y(t, n, i ? b(t, e, i, Q.support.boxSizing && "border-box" === Q.css(t, "boxSizing")) : 0)
                    }
                }
            }), Q.support.opacity || (Q.cssHooks.opacity = {
                get: function(t, e) {
                    return an.test((e && t.currentStyle ? t.currentStyle.filter : t.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : e ? "1" : ""
                },
                set: function(t, e) {
                    var n = t.style,
                        i = t.currentStyle,
                        r = Q.isNumeric(e) ? "alpha(opacity=" + 100 * e + ")" : "",
                        o = i && i.filter || n.filter || "";
                    n.zoom = 1, e >= 1 && "" === Q.trim(o.replace(sn, "")) && n.removeAttribute && (n.removeAttribute("filter"), i && !i.filter) || (n.filter = sn.test(o) ? o.replace(sn, r) : o + " " + r)
                }
            }), Q(function() {
                Q.support.reliableMarginRight || (Q.cssHooks.marginRight = {
                    get: function(t, e) {
                        return Q.swap(t, {
                            display: "inline-block"
                        }, function() {
                            return e ? nn(t, "marginRight") : void 0
                        })
                    }
                }), !Q.support.pixelPosition && Q.fn.position && Q.each(["top", "left"], function(t, e) {
                    Q.cssHooks[e] = {
                        get: function(t, n) {
                            if (n) {
                                var i = nn(t, e);
                                return pn.test(i) ? Q(t).position()[e] + "px" : i
                            }
                        }
                    }
                })
            }), Q.expr && Q.expr.filters && (Q.expr.filters.hidden = function(t) {
                return 0 === t.offsetWidth && 0 === t.offsetHeight || !Q.support.reliableHiddenOffsets && "none" === (t.style && t.style.display || nn(t, "display"))
            }, Q.expr.filters.visible = function(t) {
                return !Q.expr.filters.hidden(t)
            }), Q.each({
                margin: "",
                padding: "",
                border: "Width"
            }, function(t, e) {
                Q.cssHooks[t + e] = {
                    expand: function(n) {
                        var i, r = "string" == typeof n ? n.split(" ") : [n],
                            o = {};
                        for (i = 0; 4 > i; i++) o[t + vn[i] + e] = r[i] || r[i - 2] || r[0];
                        return o
                    }
                }, un.test(t) || (Q.cssHooks[t + e].set = y)
            });
            var bn = /%20/g,
                wn = /\[\]$/,
                Pn = /\r?\n/g,
                Sn = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
                Cn = /^(?:select|textarea)/i;
            Q.fn.extend({
                serialize: function() {
                    return Q.param(this.serializeArray())
                },
                serializeArray: function() {
                    return this.map(function() {
                        return this.elements ? Q.makeArray(this.elements) : this
                    }).filter(function() {
                        return this.name && !this.disabled && (this.checked || Cn.test(this.nodeName) || Sn.test(this.type))
                    }).map(function(t, e) {
                        var n = Q(this).val();
                        return null == n ? null : Q.isArray(n) ? Q.map(n, function(t) {
                            return {
                                name: e.name,
                                value: t.replace(Pn, "\r\n")
                            }
                        }) : {
                            name: e.name,
                            value: n.replace(Pn, "\r\n")
                        }
                    }).get()
                }
            }), Q.param = function(t, n) {
                var i, r = [],
                    o = function(t, e) {
                        e = Q.isFunction(e) ? e() : null == e ? "" : e, r[r.length] = encodeURIComponent(t) + "=" + encodeURIComponent(e)
                    };
                if (n === e && (n = Q.ajaxSettings && Q.ajaxSettings.traditional), Q.isArray(t) || t.jquery && !Q.isPlainObject(t)) Q.each(t, function() {
                    o(this.name, this.value)
                });
                else
                    for (i in t) S(i, t[i], n, o);
                return r.join("&").replace(bn, "+")
            };
            var xn, kn, Tn = /#.*$/,
                Ln = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
                En = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
                An = /^(?:GET|HEAD)$/,
                Nn = /^\/\//,
                On = /\?/,
                Dn = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
                Mn = /([?&])_=[^&]*/,
                Fn = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
                Rn = Q.fn.load,
                Un = {},
                In = {},
                qn = ["*/"] + ["*"];
            try {
                kn = H.href
            } catch (jn) {
                kn = $.createElement("a"), kn.href = "", kn = kn.href
            }
            xn = Fn.exec(kn.toLowerCase()) || [], Q.fn.load = function(t, n, i) {
                if ("string" != typeof t && Rn) return Rn.apply(this, arguments);
                if (!this.length) return this;
                var r, o, s, a = this,
                    l = t.indexOf(" ");
                return l >= 0 && (r = t.slice(l, t.length), t = t.slice(0, l)), Q.isFunction(n) ? (i = n, n = e) : n && "object" == typeof n && (o = "POST"), Q.ajax({
                    url: t,
                    type: o,
                    dataType: "html",
                    data: n,
                    complete: function(t, e) {
                        i && a.each(i, s || [t.responseText, e, t])
                    }
                }).done(function(t) {
                    s = arguments, a.html(r ? Q("<div>").append(t.replace(Dn, "")).find(r) : t)
                }), this
            }, Q.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(t, e) {
                Q.fn[e] = function(t) {
                    return this.on(e, t)
                }
            }), Q.each(["get", "post"], function(t, n) {
                Q[n] = function(t, i, r, o) {
                    return Q.isFunction(i) && (o = o || r, r = i, i = e), Q.ajax({
                        type: n,
                        url: t,
                        data: i,
                        success: r,
                        dataType: o
                    })
                }
            }), Q.extend({
                getScript: function(t, n) {
                    return Q.get(t, e, n, "script")
                },
                getJSON: function(t, e, n) {
                    return Q.get(t, e, n, "json")
                },
                ajaxSetup: function(t, e) {
                    return e ? k(t, Q.ajaxSettings) : (e = t, t = Q.ajaxSettings), k(t, e), t
                },
                ajaxSettings: {
                    url: kn,
                    isLocal: En.test(xn[1]),
                    global: !0,
                    type: "GET",
                    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                    processData: !0,
                    async: !0,
                    accepts: {
                        xml: "application/xml, text/xml",
                        html: "text/html",
                        text: "text/plain",
                        json: "application/json, text/javascript",
                        "*": qn
                    },
                    contents: {
                        xml: /xml/,
                        html: /html/,
                        json: /json/
                    },
                    responseFields: {
                        xml: "responseXML",
                        text: "responseText"
                    },
                    converters: {
                        "* text": t.String,
                        "text html": !0,
                        "text json": Q.parseJSON,
                        "text xml": Q.parseXML
                    },
                    flatOptions: {
                        context: !0,
                        url: !0
                    }
                },
                ajaxPrefilter: C(Un),
                ajaxTransport: C(In),
                ajax: function(t, n) {
                    function i(t, n, i, s) {
                        var c, d, _, y, w, S = n;
                        2 !== b && (b = 2, l && clearTimeout(l), a = e, o = s || "", P.readyState = t > 0 ? 4 : 0, i && (y = T(p, P, i)), t >= 200 && 300 > t || 304 === t ? (p.ifModified && (w = P.getResponseHeader("Last-Modified"), w && (Q.lastModified[r] = w), w = P.getResponseHeader("Etag"), w && (Q.etag[r] = w)), 304 === t ? (S = "notmodified", c = !0) : (c = L(p, y), S = c.state, d = c.data, _ = c.error, c = !_)) : (_ = S, (!S || t) && (S = "error", 0 > t && (t = 0))), P.status = t, P.statusText = (n || S) + "", c ? m.resolveWith(h, [d, S, P]) : m.rejectWith(h, [P, S, _]), P.statusCode(v), v = e, u && f.trigger("ajax" + (c ? "Success" : "Error"), [P, p, c ? d : _]), g.fireWith(h, [P, S]), u && (f.trigger("ajaxComplete", [P, p]), --Q.active || Q.event.trigger("ajaxStop")))
                    }
                    "object" == typeof t && (n = t, t = e), n = n || {};
                    var r, o, s, a, l, c, u, d, p = Q.ajaxSetup({}, n),
                        h = p.context || p,
                        f = h !== p && (h.nodeType || h instanceof Q) ? Q(h) : Q.event,
                        m = Q.Deferred(),
                        g = Q.Callbacks("once memory"),
                        v = p.statusCode || {},
                        _ = {},
                        y = {},
                        b = 0,
                        w = "canceled",
                        P = {
                            readyState: 0,
                            setRequestHeader: function(t, e) {
                                if (!b) {
                                    var n = t.toLowerCase();
                                    t = y[n] = y[n] || t, _[t] = e
                                }
                                return this
                            },
                            getAllResponseHeaders: function() {
                                return 2 === b ? o : null
                            },
                            getResponseHeader: function(t) {
                                var n;
                                if (2 === b) {
                                    if (!s)
                                        for (s = {}; n = Ln.exec(o);) s[n[1].toLowerCase()] = n[2];
                                    n = s[t.toLowerCase()]
                                }
                                return n === e ? null : n
                            },
                            overrideMimeType: function(t) {
                                return b || (p.mimeType = t), this
                            },
                            abort: function(t) {
                                return t = t || w, a && a.abort(t), i(0, t), this
                            }
                        };
                    if (m.promise(P), P.success = P.done, P.error = P.fail, P.complete = g.add, P.statusCode = function(t) {
                            if (t) {
                                var e;
                                if (2 > b)
                                    for (e in t) v[e] = [v[e], t[e]];
                                else e = t[P.status], P.always(e)
                            }
                            return this
                        }, p.url = ((t || p.url) + "").replace(Tn, "").replace(Nn, xn[1] + "//"), p.dataTypes = Q.trim(p.dataType || "*").toLowerCase().split(ee), null == p.crossDomain && (c = Fn.exec(p.url.toLowerCase()), p.crossDomain = !(!c || c[1] === xn[1] && c[2] === xn[2] && (c[3] || ("http:" === c[1] ? 80 : 443)) == (xn[3] || ("http:" === xn[1] ? 80 : 443)))), p.data && p.processData && "string" != typeof p.data && (p.data = Q.param(p.data, p.traditional)), x(Un, p, n, P), 2 === b) return P;
                    if (u = p.global, p.type = p.type.toUpperCase(), p.hasContent = !An.test(p.type), u && 0 === Q.active++ && Q.event.trigger("ajaxStart"), !p.hasContent && (p.data && (p.url += (On.test(p.url) ? "&" : "?") + p.data, delete p.data), r = p.url, p.cache === !1)) {
                        var S = Q.now(),
                            C = p.url.replace(Mn, "$1_=" + S);
                        p.url = C + (C === p.url ? (On.test(p.url) ? "&" : "?") + "_=" + S : "")
                    }(p.data && p.hasContent && p.contentType !== !1 || n.contentType) && P.setRequestHeader("Content-Type", p.contentType), p.ifModified && (r = r || p.url, Q.lastModified[r] && P.setRequestHeader("If-Modified-Since", Q.lastModified[r]), Q.etag[r] && P.setRequestHeader("If-None-Match", Q.etag[r])), P.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + qn + "; q=0.01" : "") : p.accepts["*"]);
                    for (d in p.headers) P.setRequestHeader(d, p.headers[d]);
                    if (p.beforeSend && (p.beforeSend.call(h, P, p) === !1 || 2 === b)) return P.abort();
                    w = "abort";
                    for (d in {
                            success: 1,
                            error: 1,
                            complete: 1
                        }) P[d](p[d]);
                    if (a = x(In, p, n, P)) {
                        P.readyState = 1, u && f.trigger("ajaxSend", [P, p]), p.async && p.timeout > 0 && (l = setTimeout(function() {
                            P.abort("timeout")
                        }, p.timeout));
                        try {
                            b = 1, a.send(_, i)
                        } catch (k) {
                            if (!(2 > b)) throw k;
                            i(-1, k)
                        }
                    } else i(-1, "No Transport");
                    return P
                },
                active: 0,
                lastModified: {},
                etag: {}
            });
            var $n = [],
                Hn = /\?/,
                Bn = /(=)\?(?=&|$)|\?\?/,
                Vn = Q.now();
            Q.ajaxSetup({
                jsonp: "callback",
                jsonpCallback: function() {
                    var t = $n.pop() || Q.expando + "_" + Vn++;
                    return this[t] = !0, t
                }
            }), Q.ajaxPrefilter("json jsonp", function(n, i, r) {
                var o, s, a, l = n.data,
                    c = n.url,
                    u = n.jsonp !== !1,
                    d = u && Bn.test(c),
                    p = u && !d && "string" == typeof l && !(n.contentType || "").indexOf("application/x-www-form-urlencoded") && Bn.test(l);
                return "jsonp" === n.dataTypes[0] || d || p ? (o = n.jsonpCallback = Q.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, s = t[o], d ? n.url = c.replace(Bn, "$1" + o) : p ? n.data = l.replace(Bn, "$1" + o) : u && (n.url += (Hn.test(c) ? "&" : "?") + n.jsonp + "=" + o), n.converters["script json"] = function() {
                    return a || Q.error(o + " was not called"), a[0]
                }, n.dataTypes[0] = "json", t[o] = function() {
                    a = arguments
                }, r.always(function() {
                    t[o] = s, n[o] && (n.jsonpCallback = i.jsonpCallback, $n.push(o)), a && Q.isFunction(s) && s(a[0]), a = s = e
                }), "script") : void 0
            }), Q.ajaxSetup({
                accepts: {
                    script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
                },
                contents: {
                    script: /javascript|ecmascript/
                },
                converters: {
                    "text script": function(t) {
                        return Q.globalEval(t), t
                    }
                }
            }), Q.ajaxPrefilter("script", function(t) {
                t.cache === e && (t.cache = !1), t.crossDomain && (t.type = "GET", t.global = !1)
            }), Q.ajaxTransport("script", function(t) {
                if (t.crossDomain) {
                    var n, i = $.head || $.getElementsByTagName("head")[0] || $.documentElement;
                    return {
                        send: function(r, o) {
                            n = $.createElement("script"), n.async = "async", t.scriptCharset && (n.charset = t.scriptCharset), n.src = t.url, n.onload = n.onreadystatechange = function(t, r) {
                                (r || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, i && n.parentNode && i.removeChild(n), n = e, r || o(200, "success"))
                            }, i.insertBefore(n, i.firstChild)
                        },
                        abort: function() {
                            n && n.onload(0, 1)
                        }
                    }
                }
            });
            var zn, Yn = t.ActiveXObject ? function() {
                    for (var t in zn) zn[t](0, 1)
                } : !1,
                Wn = 0;
            Q.ajaxSettings.xhr = t.ActiveXObject ? function() {
                    return !this.isLocal && E() || A()
                } : E,
                function(t) {
                    Q.extend(Q.support, {
                        ajax: !!t,
                        cors: !!t && "withCredentials" in t
                    })
                }(Q.ajaxSettings.xhr()), Q.support.ajax && Q.ajaxTransport(function(n) {
                    if (!n.crossDomain || Q.support.cors) {
                        var i;
                        return {
                            send: function(r, o) {
                                var s, a, l = n.xhr();
                                if (n.username ? l.open(n.type, n.url, n.async, n.username, n.password) : l.open(n.type, n.url, n.async), n.xhrFields)
                                    for (a in n.xhrFields) l[a] = n.xhrFields[a];
                                n.mimeType && l.overrideMimeType && l.overrideMimeType(n.mimeType), n.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest");
                                try {
                                    for (a in r) l.setRequestHeader(a, r[a])
                                } catch (c) {}
                                l.send(n.hasContent && n.data || null), i = function(t, r) {
                                    var a, c, u, d, p;
                                    try {
                                        if (i && (r || 4 === l.readyState))
                                            if (i = e, s && (l.onreadystatechange = Q.noop, Yn && delete zn[s]), r) 4 !== l.readyState && l.abort();
                                            else {
                                                a = l.status, u = l.getAllResponseHeaders(), d = {}, p = l.responseXML, p && p.documentElement && (d.xml = p);
                                                try {
                                                    d.text = l.responseText
                                                } catch (h) {}
                                                try {
                                                    c = l.statusText
                                                } catch (h) {
                                                    c = ""
                                                }
                                                a || !n.isLocal || n.crossDomain ? 1223 === a && (a = 204) : a = d.text ? 200 : 404
                                            }
                                    } catch (f) {
                                        r || o(-1, f)
                                    }
                                    d && o(a, c, d, u)
                                }, n.async ? 4 === l.readyState ? setTimeout(i, 0) : (s = ++Wn, Yn && (zn || (zn = {}, Q(t).unload(Yn)), zn[s] = i), l.onreadystatechange = i) : i()
                            },
                            abort: function() {
                                i && i(0, 1)
                            }
                        }
                    }
                });
            var Gn, Xn, Zn = /^(?:toggle|show|hide)$/,
                Jn = new RegExp("^(?:([-+])=|)(" + K + ")([a-z%]*)$", "i"),
                Qn = /queueHooks$/,
                Kn = [F],
                ti = {
                    "*": [function(t, e) {
                        var n, i, r = this.createTween(t, e),
                            o = Jn.exec(e),
                            s = r.cur(),
                            a = +s || 0,
                            l = 1,
                            c = 20;
                        if (o) {
                            if (n = +o[2], i = o[3] || (Q.cssNumber[t] ? "" : "px"), "px" !== i && a) {
                                a = Q.css(r.elem, t, !0) || n || 1;
                                do l = l || ".5", a /= l, Q.style(r.elem, t, a + i); while (l !== (l = r.cur() / s) && 1 !== l && --c)
                            }
                            r.unit = i, r.start = a, r.end = o[1] ? a + (o[1] + 1) * n : n
                        }
                        return r
                    }]
                };
            Q.Animation = Q.extend(D, {
                tweener: function(t, e) {
                    Q.isFunction(t) ? (e = t, t = ["*"]) : t = t.split(" ");
                    for (var n, i = 0, r = t.length; r > i; i++) n = t[i], ti[n] = ti[n] || [], ti[n].unshift(e)
                },
                prefilter: function(t, e) {
                    e ? Kn.unshift(t) : Kn.push(t)
                }
            }), Q.Tween = R, R.prototype = {
                constructor: R,
                init: function(t, e, n, i, r, o) {
                    this.elem = t, this.prop = n, this.easing = r || "swing", this.options = e, this.start = this.now = this.cur(), this.end = i, this.unit = o || (Q.cssNumber[n] ? "" : "px")
                },
                cur: function() {
                    var t = R.propHooks[this.prop];
                    return t && t.get ? t.get(this) : R.propHooks._default.get(this)
                },
                run: function(t) {
                    var e, n = R.propHooks[this.prop];
                    return this.pos = e = this.options.duration ? Q.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : t, this.now = (this.end - this.start) * e + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : R.propHooks._default.set(this), this
                }
            }, R.prototype.init.prototype = R.prototype, R.propHooks = {
                _default: {
                    get: function(t) {
                        var e;
                        return null == t.elem[t.prop] || t.elem.style && null != t.elem.style[t.prop] ? (e = Q.css(t.elem, t.prop, !1, ""), e && "auto" !== e ? e : 0) : t.elem[t.prop]
                    },
                    set: function(t) {
                        Q.fx.step[t.prop] ? Q.fx.step[t.prop](t) : t.elem.style && (null != t.elem.style[Q.cssProps[t.prop]] || Q.cssHooks[t.prop]) ? Q.style(t.elem, t.prop, t.now + t.unit) : t.elem[t.prop] = t.now
                    }
                }
            }, R.propHooks.scrollTop = R.propHooks.scrollLeft = {
                set: function(t) {
                    t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
                }
            }, Q.each(["toggle", "show", "hide"], function(t, e) {
                var n = Q.fn[e];
                Q.fn[e] = function(i, r, o) {
                    return null == i || "boolean" == typeof i || !t && Q.isFunction(i) && Q.isFunction(r) ? n.apply(this, arguments) : this.animate(U(e, !0), i, r, o)
                }
            }), Q.fn.extend({
                fadeTo: function(t, e, n, i) {
                    return this.filter(v).css("opacity", 0).show().end().animate({
                        opacity: e
                    }, t, n, i)
                },
                animate: function(t, e, n, i) {
                    var r = Q.isEmptyObject(t),
                        o = Q.speed(e, n, i),
                        s = function() {
                            var e = D(this, Q.extend({}, t), o);
                            r && e.stop(!0)
                        };
                    return r || o.queue === !1 ? this.each(s) : this.queue(o.queue, s)
                },
                stop: function(t, n, i) {
                    var r = function(t) {
                        var e = t.stop;
                        delete t.stop, e(i)
                    };
                    return "string" != typeof t && (i = n, n = t, t = e), n && t !== !1 && this.queue(t || "fx", []), this.each(function() {
                        var e = !0,
                            n = null != t && t + "queueHooks",
                            o = Q.timers,
                            s = Q._data(this);
                        if (n) s[n] && s[n].stop && r(s[n]);
                        else
                            for (n in s) s[n] && s[n].stop && Qn.test(n) && r(s[n]);
                        for (n = o.length; n--;) o[n].elem !== this || null != t && o[n].queue !== t || (o[n].anim.stop(i), e = !1, o.splice(n, 1));
                        (e || !i) && Q.dequeue(this, t)
                    })
                }
            }), Q.each({
                slideDown: U("show"),
                slideUp: U("hide"),
                slideToggle: U("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(t, e) {
                Q.fn[t] = function(t, n, i) {
                    return this.animate(e, t, n, i)
                }
            }), Q.speed = function(t, e, n) {
                var i = t && "object" == typeof t ? Q.extend({}, t) : {
                    complete: n || !n && e || Q.isFunction(t) && t,
                    duration: t,
                    easing: n && e || e && !Q.isFunction(e) && e
                };
                return i.duration = Q.fx.off ? 0 : "number" == typeof i.duration ? i.duration : i.duration in Q.fx.speeds ? Q.fx.speeds[i.duration] : Q.fx.speeds._default, (null == i.queue || i.queue === !0) && (i.queue = "fx"), i.old = i.complete, i.complete = function() {
                    Q.isFunction(i.old) && i.old.call(this), i.queue && Q.dequeue(this, i.queue)
                }, i
            }, Q.easing = {
                linear: function(t) {
                    return t
                },
                swing: function(t) {
                    return .5 - Math.cos(t * Math.PI) / 2
                }
            }, Q.timers = [], Q.fx = R.prototype.init, Q.fx.tick = function() {
                var t, n = Q.timers,
                    i = 0;
                for (Gn = Q.now(); i < n.length; i++) t = n[i], t() || n[i] !== t || n.splice(i--, 1);
                n.length || Q.fx.stop(), Gn = e
            }, Q.fx.timer = function(t) {
                t() && Q.timers.push(t) && !Xn && (Xn = setInterval(Q.fx.tick, Q.fx.interval))
            }, Q.fx.interval = 13, Q.fx.stop = function() {
                clearInterval(Xn), Xn = null
            }, Q.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, Q.fx.step = {}, Q.expr && Q.expr.filters && (Q.expr.filters.animated = function(t) {
                return Q.grep(Q.timers, function(e) {
                    return t === e.elem
                }).length
            });
            var ei = /^(?:body|html)$/i;
            Q.fn.offset = function(t) {
                if (arguments.length) return t === e ? this : this.each(function(e) {
                    Q.offset.setOffset(this, t, e)
                });
                var n, i, r, o, s, a, l, c = {
                        top: 0,
                        left: 0
                    },
                    u = this[0],
                    d = u && u.ownerDocument;
                if (d) return (i = d.body) === u ? Q.offset.bodyOffset(u) : (n = d.documentElement, Q.contains(n, u) ? ("undefined" != typeof u.getBoundingClientRect && (c = u.getBoundingClientRect()), r = I(d), o = n.clientTop || i.clientTop || 0, s = n.clientLeft || i.clientLeft || 0, a = r.pageYOffset || n.scrollTop, l = r.pageXOffset || n.scrollLeft, {
                    top: c.top + a - o,
                    left: c.left + l - s
                }) : c)
            }, Q.offset = {
                bodyOffset: function(t) {
                    var e = t.offsetTop,
                        n = t.offsetLeft;
                    return Q.support.doesNotIncludeMarginInBodyOffset && (e += parseFloat(Q.css(t, "marginTop")) || 0, n += parseFloat(Q.css(t, "marginLeft")) || 0), {
                        top: e,
                        left: n
                    }
                },
                setOffset: function(t, e, n) {
                    var i = Q.css(t, "position");
                    "static" === i && (t.style.position = "relative");
                    var r, o, s = Q(t),
                        a = s.offset(),
                        l = Q.css(t, "top"),
                        c = Q.css(t, "left"),
                        u = ("absolute" === i || "fixed" === i) && Q.inArray("auto", [l, c]) > -1,
                        d = {},
                        p = {};
                    u ? (p = s.position(), r = p.top, o = p.left) : (r = parseFloat(l) || 0, o = parseFloat(c) || 0), Q.isFunction(e) && (e = e.call(t, n, a)), null != e.top && (d.top = e.top - a.top + r), null != e.left && (d.left = e.left - a.left + o), "using" in e ? e.using.call(t, d) : s.css(d)
                }
            }, Q.fn.extend({
                position: function() {
                    if (this[0]) {
                        var t = this[0],
                            e = this.offsetParent(),
                            n = this.offset(),
                            i = ei.test(e[0].nodeName) ? {
                                top: 0,
                                left: 0
                            } : e.offset();
                        return n.top -= parseFloat(Q.css(t, "marginTop")) || 0, n.left -= parseFloat(Q.css(t, "marginLeft")) || 0, i.top += parseFloat(Q.css(e[0], "borderTopWidth")) || 0, i.left += parseFloat(Q.css(e[0], "borderLeftWidth")) || 0, {
                            top: n.top - i.top,
                            left: n.left - i.left
                        }
                    }
                },
                offsetParent: function() {
                    return this.map(function() {
                        for (var t = this.offsetParent || $.body; t && !ei.test(t.nodeName) && "static" === Q.css(t, "position");) t = t.offsetParent;
                        return t || $.body
                    })
                }
            }), Q.each({
                scrollLeft: "pageXOffset",
                scrollTop: "pageYOffset"
            }, function(t, n) {
                var i = /Y/.test(n);
                Q.fn[t] = function(r) {
                    return Q.access(this, function(t, r, o) {
                        var s = I(t);
                        return o === e ? s ? n in s ? s[n] : s.document.documentElement[r] : t[r] : void(s ? s.scrollTo(i ? Q(s).scrollLeft() : o, i ? o : Q(s).scrollTop()) : t[r] = o)
                    }, t, r, arguments.length, null)
                }
            }), Q.each({
                Height: "height",
                Width: "width"
            }, function(t, n) {
                Q.each({
                    padding: "inner" + t,
                    content: n,
                    "": "outer" + t
                }, function(i, r) {
                    Q.fn[r] = function(r, o) {
                        var s = arguments.length && (i || "boolean" != typeof r),
                            a = i || (r === !0 || o === !0 ? "margin" : "border");
                        return Q.access(this, function(n, i, r) {
                            var o;
                            return Q.isWindow(n) ? n.document.documentElement["client" + t] : 9 === n.nodeType ? (o = n.documentElement, Math.max(n.body["scroll" + t], o["scroll" + t], n.body["offset" + t], o["offset" + t], o["client" + t])) : r === e ? Q.css(n, i, r, a) : Q.style(n, i, r, a)
                        }, n, s ? r : e, s, null)
                    }
                })
            }), t.jQuery = t.$ = Q, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
                return Q
            })
        }(window),
        function() {
            var t, e;
            t = function() {}, e = window.jQuery.noConflict(!0), define("jquery-private", ["jquery"], function(t) {
                return e !== t && null !== console && console.error("jquery-private noConflicted wrong version of jQuery"), t
            })
        }.call(this),
        function() {
            define("cns-jquery", ["jquery"], function(t) {
                return window.cns && window.cns.$ ? window.cns.$ : t
            })
        }(),
        function(t) {
            function e(t, e, n) {
                for (var i = (n || 0) - 1, r = t.length; ++i < r;)
                    if (t[i] === e) return i;
                return -1
            }

            function n(t, e) {
                var n = t.index,
                    i = e.index;
                if (t = t.criteria, e = e.criteria, t !== e) {
                    if (t > e || "undefined" == typeof t) return 1;
                    if (e > t || "undefined" == typeof e) return -1
                }
                return i > n ? -1 : 1
            }

            function i(t) {
                return "\\" + mn[t]
            }

            function r() {}

            function o(t) {
                return t instanceof o ? t : new s(t)
            }

            function s(t) {
                this.__wrapped__ = t
            }

            function a(t, e, n, i) {
                function r() {
                    var i = arguments,
                        u = s ? this : e;
                    if (o || (t = e[a]), n.length && (i = i.length ? (i = jn.call(i), c ? i.concat(n) : n.concat(i)) : n), this instanceof r) {
                        u = l(t.prototype);
                        var d = t.apply(u, i);
                        return k(d) ? d : u
                    }
                    return t.apply(u, i)
                }
                var o = x(t),
                    s = !n,
                    a = e;
                if (s) {
                    var c = i;
                    n = e
                } else if (!o) {
                    if (!i) throw new TypeError;
                    e = t
                }
                return r
            }

            function l(t) {
                return k(t) ? On(t) : {}
            }

            function c(t) {
                return Wn[t]
            }

            function u() {
                var t = (t = o.indexOf) === ce ? e : t;
                return t
            }

            function d(t) {
                return Gn[t]
            }

            function p(t) {
                return An.call(t) == on
            }

            function h(t) {
                if (!t) return t;
                for (var e = 1, n = arguments.length; n > e; e++) {
                    var i = arguments[e];
                    if (i)
                        for (var r in i) t[r] = i[r]
                }
                return t
            }

            function f(t) {
                return k(t) ? Vn(t) ? jn.call(t) : h({}, t) : t
            }

            function m(t) {
                if (!t) return t;
                for (var e = 1, n = arguments.length; n > e; e++) {
                    var i = arguments[e];
                    if (i)
                        for (var r in i) null == t[r] && (t[r] = i[r])
                }
                return t
            }

            function g(t) {
                var e = [];
                return Xn(t, function(t, n) {
                    x(t) && e.push(n)
                }), e.sort()
            }

            function v(t, e) {
                return t ? Tn.call(t, e) : !1
            }

            function _(t) {
                for (var e = -1, n = Yn(t), i = n.length, r = {}; ++e < i;) {
                    var o = n[e];
                    r[t[o]] = o
                }
                return r
            }

            function y(t) {
                return t === !0 || t === !1 || An.call(t) == an
            }

            function b(t) {
                return t ? "object" == typeof t && An.call(t) == ln : !1
            }

            function w(t) {
                return t ? 1 === t.nodeType : !1
            }

            function P(t) {
                if (!t) return !0;
                if (Vn(t) || N(t)) return !t.length;
                for (var e in t)
                    if (Tn.call(t, e)) return !1;
                return !0
            }

            function S(t, e, n, i) {
                if (t === e) return 0 !== t || 1 / t == 1 / e;
                var r = typeof t,
                    s = typeof e;
                if (t === t && (!t || "function" != r && "object" != r) && (!e || "function" != s && "object" != s)) return !1;
                if (null == t || null == e) return t === e;
                var a = An.call(t),
                    l = An.call(e);
                if (a != l) return !1;
                switch (a) {
                    case an:
                    case ln:
                        return +t == +e;
                    case un:
                        return t != +t ? e != +e : 0 == t ? 1 / t == 1 / e : t == +e;
                    case pn:
                    case hn:
                        return t == String(e)
                }
                var c = a == sn;
                if (!c) {
                    if (t instanceof o || e instanceof o) return S(t.__wrapped__ || t, e.__wrapped__ || e, n, i);
                    if (a != dn) return !1;
                    var u = t.constructor,
                        d = e.constructor;
                    if (u != d && !(x(u) && u instanceof u && x(d) && d instanceof d)) return !1
                }
                n || (n = []), i || (i = []);
                for (var p = n.length; p--;)
                    if (n[p] == t) return i[p] == e;
                var h = !0,
                    f = 0;
                if (n.push(t), i.push(e), c) {
                    if (f = e.length, h = f == t.length)
                        for (; f-- && (h = S(t[f], e[f], n, i)););
                    return h
                }
                return Xn(e, function(e, r, o) {
                    return Tn.call(o, r) ? (f++, !(h = Tn.call(t, r) && S(t[r], e, n, i)) && Je) : void 0
                }), h && Xn(t, function(t, e, n) {
                    return Tn.call(n, e) ? !(h = --f > -1) && Je : void 0
                }), h
            }

            function C(t) {
                return Mn(t) && !Fn(parseFloat(t))
            }

            function x(t) {
                return "function" == typeof t
            }

            function k(t) {
                return !(!t || !fn[typeof t])
            }

            function T(t) {
                return E(t) && t != +t
            }

            function L(t) {
                return null === t
            }

            function E(t) {
                return "number" == typeof t || An.call(t) == un
            }

            function A(t) {
                return !(!t || !fn[typeof t]) && An.call(t) == pn
            }

            function N(t) {
                return "string" == typeof t || An.call(t) == hn
            }

            function O(t) {
                return "undefined" == typeof t
            }

            function D(t) {
                var e = u(),
                    n = xn.apply(yn, jn.call(arguments, 1)),
                    i = {};
                return Xn(t, function(t, r) {
                    e(n, r) < 0 && (i[r] = t)
                }), i
            }

            function M(t) {
                for (var e = -1, n = Yn(t), i = n.length, r = Array(i); ++e < i;) {
                    var o = n[e];
                    r[e] = [o, t[o]]
                }
                return r
            }

            function F(t) {
                for (var e = -1, n = xn.apply(yn, jn.call(arguments, 1)), i = n.length, r = {}; ++e < i;) {
                    var o = n[e];
                    o in t && (r[o] = t[o])
                }
                return r
            }

            function R(t) {
                for (var e = -1, n = Yn(t), i = n.length, r = Array(i); ++e < i;) r[e] = t[n[e]];
                return r
            }

            function U(t, e) {
                var n = u(),
                    i = t ? t.length : 0,
                    r = !1;
                return i && "number" == typeof i ? r = n(t, e) > -1 : Zn(t, function(t) {
                    return (r = t === e) && Je
                }), r
            }

            function I(t, e, n) {
                var i = {};
                return e = ke(e, n), B(t, function(t, n, r) {
                    n = String(e(t, n, r)), Tn.call(i, n) ? i[n]++ : i[n] = 1
                }), i
            }

            function q(t, e, n) {
                var i = !0;
                e = ke(e, n);
                var r = -1,
                    o = t ? t.length : 0;
                if ("number" == typeof o)
                    for (; ++r < o && (i = !!e(t[r], r, t)););
                else Zn(t, function(t, n, r) {
                    return !(i = !!e(t, n, r)) && Je
                });
                return i
            }

            function j(t, e, n) {
                var i = [];
                e = ke(e, n);
                var r = -1,
                    o = t ? t.length : 0;
                if ("number" == typeof o)
                    for (; ++r < o;) {
                        var s = t[r];
                        e(s, r, t) && i.push(s)
                    } else Zn(t, function(t, n, r) {
                        e(t, n, r) && i.push(t)
                    });
                return i
            }

            function $(t, e, n) {
                e = ke(e, n);
                var i = -1,
                    r = t ? t.length : 0;
                if ("number" != typeof r) {
                    var o;
                    return Zn(t, function(t, n, i) {
                        return e(t, n, i) ? (o = t, Je) : void 0
                    }), o
                }
                for (; ++i < r;) {
                    var s = t[i];
                    if (e(s, i, t)) return s
                }
            }

            function H(t, e) {
                return re(t, e, !0)
            }

            function B(t, e, n) {
                var i = -1,
                    r = t ? t.length : 0;
                if (e = e && "undefined" == typeof n ? e : ke(e, n), "number" == typeof r)
                    for (; ++i < r && e(t[i], i, t) !== Je;);
                else Zn(t, e)
            }

            function V(t, e, n) {
                var i = {};
                return e = ke(e, n), B(t, function(t, n, r) {
                    n = String(e(t, n, r)), (Tn.call(i, n) ? i[n] : i[n] = []).push(t)
                }), i
            }

            function z(t, e) {
                var n = jn.call(arguments, 2),
                    i = -1,
                    r = "function" == typeof e,
                    o = t ? t.length : 0,
                    s = Array("number" == typeof o ? o : 0);
                return B(t, function(t) {
                    s[++i] = (r ? e : t[e]).apply(t, n)
                }), s
            }

            function Y(t, e, n) {
                var i = -1,
                    r = t ? t.length : 0;
                if (e = ke(e, n), "number" == typeof r)
                    for (var o = Array(r); ++i < r;) o[i] = e(t[i], i, t);
                else o = [], Zn(t, function(t, n, r) {
                    o[++i] = e(t, n, r)
                });
                return o
            }

            function W(t, e, n) {
                var i = -1 / 0,
                    r = i,
                    o = -1,
                    s = t ? t.length : 0;
                if (e || "number" != typeof s) e = ke(e, n), B(t, function(t, n, o) {
                    var s = e(t, n, o);
                    s > i && (i = s, r = t)
                });
                else
                    for (; ++o < s;) {
                        var a = t[o];
                        a > r && (r = a)
                    }
                return r
            }

            function G(t, e, n) {
                var i = 1 / 0,
                    r = i,
                    o = -1,
                    s = t ? t.length : 0;
                if (e || "number" != typeof s) e = ke(e, n), B(t, function(t, n, o) {
                    var s = e(t, n, o);
                    i > s && (i = s, r = t)
                });
                else
                    for (; ++o < s;) {
                        var a = t[o];
                        r > a && (r = a)
                    }
                return r
            }

            function X(t, e) {
                var n = -1,
                    i = t ? t.length : 0;
                if ("number" == typeof i)
                    for (var r = Array(i); ++n < i;) r[n] = t[n][e];
                return r || Y(t, e)
            }

            function Z(t, e, n, i) {
                if (!t) return n;
                var r = arguments.length < 3;
                e = ke(e, i, 4);
                var o = -1,
                    s = t.length;
                if ("number" == typeof s)
                    for (r && (n = t[++o]); ++o < s;) n = e(n, t[o], o, t);
                else Zn(t, function(t, i, o) {
                    n = r ? (r = !1, t) : e(n, t, i, o)
                });
                return n
            }

            function J(t, e, n, i) {
                var r = t,
                    o = t ? t.length : 0,
                    s = arguments.length < 3;
                if ("number" != typeof o) {
                    var a = Yn(t);
                    o = a.length
                }
                return e = ke(e, i, 4), B(t, function(t, i, l) {
                    i = a ? a[--o] : --o, n = s ? (s = !1, r[i]) : e(n, r[i], i, l)
                }), n
            }

            function Q(t, e, n) {
                return e = ke(e, n), j(t, function(t, n, i) {
                    return !e(t, n, i)
                })
            }

            function K(t) {
                var e = -1,
                    n = t ? t.length : 0,
                    i = Array("number" == typeof n ? n : 0);
                return B(t, function(t) {
                    var n = kn(qn() * (++e + 1));
                    i[e] = i[n], i[n] = t
                }), i
            }

            function te(t) {
                var e = t ? t.length : 0;
                return "number" == typeof e ? e : Yn(t).length
            }

            function ee(t, e, n) {
                var i;
                e = ke(e, n);
                var r = -1,
                    o = t ? t.length : 0;
                if ("number" == typeof o)
                    for (; ++r < o && !(i = e(t[r], r, t)););
                else Zn(t, function(t, n, r) {
                    return (i = e(t, n, r)) && Je
                });
                return !!i
            }

            function ne(t, e, i) {
                var r = -1,
                    o = t ? t.length : 0,
                    s = Array("number" == typeof o ? o : 0);
                for (e = ke(e, i), B(t, function(t, n, i) {
                        s[++r] = {
                            criteria: e(t, n, i),
                            index: r,
                            value: t
                        }
                    }), o = s.length, s.sort(n); o--;) s[o] = s[o].value;
                return s
            }

            function ie(t) {
                return Vn(t) ? jn.call(t) : t && "number" == typeof t.length ? Y(t) : R(t)
            }

            function re(t, e, n) {
                return n && P(e) ? null : (n ? $ : j)(t, e)
            }

            function oe(t) {
                for (var e = -1, n = t ? t.length : 0, i = []; ++e < n;) {
                    var r = t[e];
                    r && i.push(r)
                }
                return i
            }

            function se(t) {
                for (var e = -1, n = u(), i = t.length, r = xn.apply(yn, jn.call(arguments, 1)), o = []; ++e < i;) {
                    var s = t[e];
                    n(r, s) < 0 && o.push(s)
                }
                return o
            }

            function ae(t, e, n) {
                if (t) {
                    var i = 0,
                        r = t.length;
                    if ("number" != typeof e && null != e) {
                        var o = -1;
                        for (e = ke(e, n); ++o < r && e(t[o], o, t);) i++
                    } else if (i = e, null == i || n) return t[0];
                    return jn.call(t, 0, In(Un(0, i), r))
                }
            }

            function le(t, e) {
                for (var n = -1, i = t ? t.length : 0, r = []; ++n < i;) {
                    var o = t[n];
                    Vn(o) ? Ln.apply(r, e ? o : le(o)) : r.push(o)
                }
                return r
            }

            function ce(t, n, i) {
                if ("number" == typeof i) {
                    var r = t ? t.length : 0;
                    i = 0 > i ? Un(0, r + i) : i || 0
                } else if (i) {
                    var o = ge(t, n);
                    return t[o] === n ? o : -1
                }
                return t ? e(t, n, i) : -1
            }

            function ue(t, e, n) {
                if (!t) return [];
                var i = 0,
                    r = t.length;
                if ("number" != typeof e && null != e) {
                    var o = r;
                    for (e = ke(e, n); o-- && e(t[o], o, t);) i++
                } else i = null == e || n ? 1 : e || i;
                return jn.call(t, 0, In(Un(0, r - i), r))
            }

            function de(t) {
                var e = arguments,
                    n = e.length,
                    i = -1,
                    r = u(),
                    o = t ? t.length : 0,
                    s = [];
                t: for (; ++i < o;) {
                    var a = t[i];
                    if (r(s, a) < 0) {
                        for (var l = n; --l;)
                            if (r(e[l], a) < 0) continue t;
                        s.push(a)
                    }
                }
                return s
            }

            function pe(t, e, n) {
                if (t) {
                    var i = 0,
                        r = t.length;
                    if ("number" != typeof e && null != e) {
                        var o = r;
                        for (e = ke(e, n); o-- && e(t[o], o, t);) i++
                    } else if (i = e, null == i || n) return t[r - 1];
                    return jn.call(t, Un(0, r - i))
                }
            }

            function he(t, e, n) {
                var i = t ? t.length : 0;
                for ("number" == typeof n && (i = (0 > n ? Un(0, i + n) : In(n, i - 1)) + 1); i--;)
                    if (t[i] === e) return i;
                return -1
            }

            function fe(t, e, n) {
                t = +t || 0, n = +n || 1, null == e && (e = t, t = 0);
                for (var i = -1, r = Un(0, Sn((e - t) / n)), o = Array(r); ++i < r;) o[i] = t, t += n;
                return o
            }

            function me(t, e, n) {
                if ("number" != typeof e && null != e) {
                    var i = 0,
                        r = -1,
                        o = t ? t.length : 0;
                    for (e = ke(e, n); ++r < o && e(t[r], r, t);) i++
                } else i = null == e || n ? 1 : Un(0, e);
                return jn.call(t, i)
            }

            function ge(t, e, n, i) {
                var r = 0,
                    o = t ? t.length : r;
                for (n = n ? ke(n, i, 1) : Re, e = n(e); o > r;) {
                    var s = r + o >>> 1;
                    n(t[s]) < e ? r = s + 1 : o = s
                }
                return r
            }

            function ve(t) {
                return Vn(t) || (arguments[0] = t ? jn.call(t) : yn), _e(xn.apply(yn, arguments))
            }

            function _e(t, e, n, i) {
                var r = -1,
                    o = u(),
                    s = t ? t.length : 0,
                    a = [],
                    l = a;
                for ("boolean" != typeof e && null != e && (i = n, n = e, e = !1), null != n && (l = [], n = ke(n, i)); ++r < s;) {
                    var c = t[r],
                        d = n ? n(c, r, t) : c;
                    (e ? !r || l[l.length - 1] !== d : o(l, d) < 0) && (n && l.push(d), a.push(c))
                }
                return a
            }

            function ye(t) {
                return se(t, jn.call(arguments, 1))
            }

            function be(t) {
                for (var e = -1, n = t ? W(X(arguments, "length")) : 0, i = Array(0 > n ? 0 : n); ++e < n;) i[e] = X(arguments, e);
                return i
            }

            function we(t, e) {
                for (var n = -1, i = t ? t.length : 0, r = {}; ++n < i;) {
                    var o = t[n];
                    e ? r[o] = e[n] : r[o[0]] = o[1]
                }
                return r
            }

            function Pe(t, e) {
                return 1 > t ? e() : function() {
                    return --t < 1 ? e.apply(this, arguments) : void 0
                }
            }

            function Se(t, e) {
                return Bn.fastBind || Nn && arguments.length > 2 ? Nn.call.apply(Nn, arguments) : a(t, e, jn.call(arguments, 2))
            }

            function Ce(t) {
                for (var e = arguments.length > 1 ? xn.apply(yn, jn.call(arguments, 1)) : g(t), n = -1, i = e.length; ++n < i;) {
                    var r = e[n];
                    t[r] = Se(t[r], t)
                }
                return t
            }

            function xe() {
                var t = arguments;
                return function() {
                    for (var e = arguments, n = t.length; n--;) e = [t[n].apply(this, e)];
                    return e[0]
                }
            }

            function ke(t, e, n) {
                if (null == t) return Re;
                var i = typeof t;
                if ("function" != i) {
                    if ("object" != i) return function(e) {
                        return e[t]
                    };
                    var r = Yn(t);
                    return function(e) {
                        for (var n = r.length, i = !1; n-- && (i = e[r[n]] === t[r[n]]););
                        return i
                    }
                }
                return "undefined" == typeof e ? t : 1 === n ? function(n) {
                    return t.call(e, n)
                } : 2 === n ? function(n, i) {
                    return t.call(e, n, i)
                } : 4 === n ? function(n, i, r, o) {
                    return t.call(e, n, i, r, o)
                } : function(n, i, r) {
                    return t.call(e, n, i, r)
                }
            }

            function Te(t, e, n) {
                function i() {
                    a = null, n || (o = t.apply(s, r))
                }
                var r, o, s, a = null;
                return function() {
                    var l = n && !a;
                    return r = arguments, s = this, Cn(a), a = En(i, e), l && (o = t.apply(s, r)), o
                }
            }

            function Le(t) {
                var e = jn.call(arguments, 1);
                return En(function() {
                    t.apply(Xe, e)
                }, 1)
            }

            function Ee(t, e) {
                var n = jn.call(arguments, 2);
                return En(function() {
                    t.apply(Xe, n)
                }, e)
            }

            function Ae(t, e) {
                var n = {};
                return function() {
                    var i = Qe + (e ? e.apply(this, arguments) : arguments[0]);
                    return Tn.call(n, i) ? n[i] : n[i] = t.apply(this, arguments)
                }
            }

            function Ne(t) {
                var e, n;
                return function() {
                    return e ? n : (e = !0, n = t.apply(this, arguments), t = null, n)
                }
            }

            function Oe(t) {
                return a(t, jn.call(arguments, 1))
            }

            function De(t, e) {
                function n() {
                    s = new Date, a = null, r = t.apply(o, i)
                }
                var i, r, o, s = 0,
                    a = null;
                return function() {
                    var l = new Date,
                        c = e - (l - s);
                    return i = arguments, o = this, 0 >= c ? (Cn(a), a = null, s = l, r = t.apply(o, i)) : a || (a = En(n, c)), r
                }
            }

            function Me(t, e) {
                return function() {
                    var n = [t];
                    return Ln.apply(n, arguments), e.apply(this, n)
                }
            }

            function Fe(t) {
                return null == t ? "" : String(t).replace(nn, c)
            }

            function Re(t) {
                return t
            }

            function Ue(t) {
                B(g(t), function(e) {
                    var n = o[e] = t[e];
                    o.prototype[e] = function() {
                        var t = [this.__wrapped__];
                        Ln.apply(t, arguments);
                        var e = n.apply(o, t);
                        return this.__chain__ && (e = new s(e), e.__chain__ = !0), e
                    }
                })
            }

            function Ie() {
                return t._ = wn, this
            }

            function qe(t, e) {
                null == t && null == e && (e = 1), t = +t || 0, null == e ? (e = t, t = 0) : e = +e || 0;
                var n = qn();
                return t % 1 || e % 1 ? t + In(n * (e - t + parseFloat("1e-" + ((n + "").length - 1))), e) : t + kn(n * (e - t + 1))
            }

            function je(t, e) {
                var n = t ? t[e] : null;
                return x(n) ? t[e]() : n
            }

            function $e(t, e, n) {
                var r = o.templateSettings;
                t || (t = ""), n = m({}, n, r);
                var s = 0,
                    a = "__p += '",
                    l = n.variable,
                    c = RegExp((n.escape || en).source + "|" + (n.interpolate || en).source + "|" + (n.evaluate || en).source + "|$", "g");
                t.replace(c, function(e, n, r, o, l) {
                    return a += t.slice(s, l).replace(rn, i), n && (a += "' +\n_.escape(" + n + ") +\n'"), o && (a += "';\n" + o + ";\n__p += '"), r && (a += "' +\n((__t = (" + r + ")) == null ? '' : __t) +\n'"), s = l + e.length, e
                }), a += "';\n", l || (l = "obj", a = "with (" + l + " || {}) {\n" + a + "\n}\n"), a = "function(" + l + ") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" + a + "return __p\n}";
                try {
                    var u = Function("_", "return " + a)(o)
                } catch (d) {
                    throw d.source = a, d
                }
                return e ? u(e) : (u.source = a, u)
            }

            function He(t, e, n) {
                for (var i = -1, r = Array(t > -1 ? t : 0); ++i < t;) r[i] = e.call(n, i);
                return r
            }

            function Be(t) {
                return null == t ? "" : String(t).replace(Ke, d)
            }

            function Ve(t) {
                var e = ++Ze + "";
                return t ? t + e : e
            }

            function ze(t) {
                return t = new s(t), t.__chain__ = !0, t
            }

            function Ye(t, e) {
                return e(t), t
            }

            function We() {
                return this.__chain__ = !0, this
            }

            function Ge() {
                return this.__wrapped__
            }
            var Xe, Ze = 0,
                Je = {},
                Qe = +new Date + "",
                Ke = /&(?:amp|lt|gt|quot|#39);/g,
                tn = /<%=([\s\S]+?)%>/g,
                en = /($^)/,
                nn = /[&<>"']/g,
                rn = /['\n\r\t\u2028\u2029\\]/g,
                on = "[object Arguments]",
                sn = "[object Array]",
                an = "[object Boolean]",
                ln = "[object Date]",
                cn = "[object Function]",
                un = "[object Number]",
                dn = "[object Object]",
                pn = "[object RegExp]",
                hn = "[object String]",
                fn = {
                    "boolean": !1,
                    "function": !0,
                    object: !0,
                    number: !1,
                    string: !1,
                    undefined: !1
                },
                mn = {
                    "\\": "\\",
                    "'": "'",
                    "\n": "n",
                    "\r": "r",
                    "	": "t",
                    "\u2028": "u2028",
                    "\u2029": "u2029"
                },
                gn = fn[typeof exports] && exports,
                vn = fn[typeof module] && module && module.exports == gn && module,
                _n = fn[typeof global] && global;
            !_n || _n.global !== _n && _n.window !== _n || (t = _n);
            var yn = [],
                bn = Object.prototype,
                wn = (String.prototype, t._),
                Pn = RegExp("^" + String(bn.valueOf).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/valueOf|for [^\]]+/g, ".+?") + "$"),
                Sn = Math.ceil,
                Cn = t.clearTimeout,
                xn = yn.concat,
                kn = Math.floor,
                Tn = bn.hasOwnProperty,
                Ln = yn.push,
                En = (bn.propertyIsEnumerable, t.setTimeout),
                An = bn.toString,
                Nn = Pn.test(Nn = An.bind) && Nn,
                On = Pn.test(On = Object.create) && On,
                Dn = Pn.test(Dn = Array.isArray) && Dn,
                Mn = t.isFinite,
                Fn = t.isNaN,
                Rn = Pn.test(Rn = Object.keys) && Rn,
                Un = Math.max,
                In = Math.min,
                qn = Math.random,
                jn = yn.slice,
                $n = Pn.test(t.attachEvent),
                Hn = Nn && !/\n|true/.test(Nn + $n);
            s.prototype = o.prototype;
            var Bn = {};
            if (function() {
                    var t = {
                        0: 1,
                        length: 1
                    };
                    Bn.fastBind = Nn && !Hn, Bn.spliceObjects = (yn.splice.call(t, 0, 1), !t[0])
                }(1), o.templateSettings = {
                    escape: /<%-([\s\S]+?)%>/g,
                    evaluate: /<%([\s\S]+?)%>/g,
                    interpolate: tn,
                    variable: ""
                }, !On) var l = function(t) {
                if (k(t)) {
                    r.prototype = t;
                    var e = new r;
                    r.prototype = null
                }
                return e || {}
            };
            p(arguments) || (p = function(t) {
                return t ? Tn.call(t, "callee") : !1
            });
            var Vn = Dn || function(t) {
                    return t ? "object" == typeof t && An.call(t) == sn : !1
                },
                zn = function(t) {
                    var e, n = t,
                        i = [];
                    if (!n) return i;
                    if (!fn[typeof t]) return i;
                    for (e in n) Tn.call(n, e) && i.push(e);
                    return i
                },
                Yn = Rn ? function(t) {
                    return k(t) ? Rn(t) : []
                } : zn,
                Wn = {
                    "&": "&amp;",
                    "<": "&lt;",
                    ">": "&gt;",
                    '"': "&quot;",
                    "'": "&#39;"
                },
                Gn = _(Wn),
                Xn = function(t, e) {
                    var n, i = t,
                        r = i;
                    if (!i) return r;
                    if (!fn[typeof i]) return r;
                    for (n in i)
                        if (e(i[n], n, t) === Je) return r;
                    return r
                },
                Zn = function(t, e) {
                    var n, i = t,
                        r = i;
                    if (!i) return r;
                    if (!fn[typeof i]) return r;
                    for (n in i)
                        if (Tn.call(i, n) && e(i[n], n, t) === Je) return r;
                    return r
                };
            x(/x/) && (x = function(t) {
                return "function" == typeof t && An.call(t) == cn
            }), o.after = Pe, o.bind = Se, o.bindAll = Ce, o.compact = oe, o.compose = xe, o.countBy = I, o.debounce = Te, o.defaults = m, o.defer = Le, o.delay = Ee, o.difference = se, o.filter = j, o.flatten = le, o.forEach = B, o.functions = g, o.groupBy = V, o.initial = ue, o.intersection = de, o.invert = _, o.invoke = z, o.keys = Yn, o.map = Y, o.max = W, o.memoize = Ae, o.min = G, o.omit = D, o.once = Ne, o.pairs = M, o.partial = Oe, o.pick = F, o.pluck = X, o.range = fe, o.reject = Q, o.rest = me, o.shuffle = K, o.sortBy = ne, o.tap = Ye, o.throttle = De, o.times = He, o.toArray = ie, o.union = ve, o.uniq = _e, o.values = R, o.where = re, o.without = ye, o.wrap = Me, o.zip = be, o.collect = Y, o.drop = me, o.each = B, o.extend = h, o.methods = g, o.object = we, o.select = j, o.tail = me, o.unique = _e, o.chain = ze, o.clone = f, o.contains = U, o.escape = Fe, o.every = q, o.find = $, o.has = v, o.identity = Re, o.indexOf = ce, o.isArguments = p, o.isArray = Vn, o.isBoolean = y, o.isDate = b, o.isElement = w, o.isEmpty = P, o.isEqual = S, o.isFinite = C, o.isFunction = x, o.isNaN = T, o.isNull = L, o.isNumber = E, o.isObject = k, o.isRegExp = A, o.isString = N, o.isUndefined = O, o.lastIndexOf = he, o.mixin = Ue, o.noConflict = Ie, o.random = qe, o.reduce = Z, o.reduceRight = J, o.result = je, o.size = te, o.some = ee, o.sortedIndex = ge, o.template = $e, o.unescape = Be, o.uniqueId = Ve, o.all = q, o.any = ee, o.detect = $, o.findWhere = H, o.foldl = Z, o.foldr = J, o.include = U, o.inject = Z, o.first = ae, o.last = pe, o.take = ae, o.head = ae, o.VERSION = "1.3.1", Ue(o), o.prototype.chain = We, o.prototype.value = Ge, B(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(t) {
                var e = yn[t];
                o.prototype[t] = function() {
                    var t = this.__wrapped__;
                    return e.apply(t, arguments), Bn.spliceObjects || 0 !== t.length || delete t[0], this
                }
            }), B(["concat", "join", "slice"], function(t) {
                var e = yn[t];
                o.prototype[t] = function() {
                    var t = this.__wrapped__,
                        n = e.apply(t, arguments);
                    return this.__chain__ && (n = new s(n), n.__chain__ = !0), n
                }
            }), "function" == typeof define && "object" == typeof define.amd && define.amd ? (t._ = o, define("underscore", [], function() {
                return o
            })) : gn && !gn.nodeType ? vn ? (vn.exports = o)._ = o : gn._ = o : t._ = o
        }(this),
        function(t, e) {
            "undefined" != typeof exports ? e(t, exports, require("underscore")) : "function" == typeof define && define.amd ? define("backbone", ["underscore", "jquery", "exports"], function(n, i, r) {
                t.Backbone = e(t, r, n, i)
            }) : t.Backbone = e(t, {}, t._, t.jQuery || t.Zepto || t.ender || t.$)
        }(this, function(t, e, n, i) {
            var r = t.Backbone,
                o = [],
                s = o.push,
                a = o.slice,
                l = o.splice;
            e.VERSION = "1.0.0", e.$ = i, e.noConflict = function() {
                return t.Backbone = r, this
            }, e.emulateHTTP = !1, e.emulateJSON = !1;
            var c = e.Events = {
                    on: function(t, e, n) {
                        if (!d(this, "on", t, [e, n]) || !e) return this;
                        this._events || (this._events = {});
                        var i = this._events[t] || (this._events[t] = []);
                        return i.push({
                            callback: e,
                            context: n,
                            ctx: n || this
                        }), this
                    },
                    once: function(t, e, i) {
                        if (!d(this, "once", t, [e, i]) || !e) return this;
                        var r = this,
                            o = n.once(function() {
                                r.off(t, o), e.apply(this, arguments)
                            });
                        return o._callback = e, this.on(t, o, i)
                    },
                    off: function(t, e, i) {
                        var r, o, s, a, l, c, u, p;
                        if (!this._events || !d(this, "off", t, [e, i])) return this;
                        if (!t && !e && !i) return this._events = {}, this;
                        for (a = t ? [t] : n.keys(this._events), l = 0, c = a.length; c > l; l++)
                            if (t = a[l], s = this._events[t]) {
                                if (this._events[t] = r = [], e || i)
                                    for (u = 0, p = s.length; p > u; u++) o = s[u], (e && e !== o.callback && e !== o.callback._callback || i && i !== o.context) && r.push(o);
                                r.length || delete this._events[t]
                            }
                        return this
                    },
                    trigger: function(t) {
                        if (!this._events) return this;
                        var e = a.call(arguments, 1);
                        if (!d(this, "trigger", t, e)) return this;
                        var n = this._events[t],
                            i = this._events.all;
                        return n && p(n, e), i && p(i, arguments), this
                    },
                    stopListening: function(t, e, n) {
                        var i = this._listeners;
                        if (!i) return this;
                        var r = !e && !n;
                        "object" == typeof e && (n = this), t && ((i = {})[t._listenerId] = t);
                        for (var o in i) i[o].off(e, n, this), r && delete this._listeners[o];
                        return this
                    }
                },
                u = /\s+/,
                d = function(t, e, n, i) {
                    if (!n) return !0;
                    if ("object" == typeof n) {
                        for (var r in n) t[e].apply(t, [r, n[r]].concat(i));
                        return !1
                    }
                    if (u.test(n)) {
                        for (var o = n.split(u), s = 0, a = o.length; a > s; s++) t[e].apply(t, [o[s]].concat(i));
                        return !1
                    }
                    return !0
                },
                p = function(t, e) {
                    var n, i = -1,
                        r = t.length,
                        o = e[0],
                        s = e[1],
                        a = e[2];
                    switch (e.length) {
                        case 0:
                            for (; ++i < r;)(n = t[i]).callback.call(n.ctx);
                            return;
                        case 1:
                            for (; ++i < r;)(n = t[i]).callback.call(n.ctx, o);
                            return;
                        case 2:
                            for (; ++i < r;)(n = t[i]).callback.call(n.ctx, o, s);
                            return;
                        case 3:
                            for (; ++i < r;)(n = t[i]).callback.call(n.ctx, o, s, a);
                            return;
                        default:
                            for (; ++i < r;)(n = t[i]).callback.apply(n.ctx, e)
                    }
                },
                h = {
                    listenTo: "on",
                    listenToOnce: "once"
                };
            n.each(h, function(t, e) {
                c[e] = function(e, i, r) {
                    var o = this._listeners || (this._listeners = {}),
                        s = e._listenerId || (e._listenerId = n.uniqueId("l"));
                    return o[s] = e, "object" == typeof i && (r = this), e[t](i, r, this), this
                }
            }), c.bind = c.on, c.unbind = c.off, n.extend(e, c);
            var f = e.Model = function(t, e) {
                    var i, r = t || {};
                    e || (e = {}), this.cid = n.uniqueId("c"), this.attributes = {}, n.extend(this, n.pick(e, m)), e.parse && (r = this.parse(r, e) || {}), (i = n.result(this, "defaults")) && (r = n.defaults({}, r, i)), this.set(r, e), this.changed = {}, this.initialize.apply(this, arguments)
                },
                m = ["url", "urlRoot", "collection"];
            n.extend(f.prototype, c, {
                changed: null,
                validationError: null,
                idAttribute: "id",
                initialize: function() {},
                toJSON: function() {
                    return n.clone(this.attributes)
                },
                sync: function() {
                    return e.sync.apply(this, arguments)
                },
                get: function(t) {
                    return this.attributes[t]
                },
                escape: function(t) {
                    return n.escape(this.get(t))
                },
                has: function(t) {
                    return null != this.get(t)
                },
                set: function(t, e, i) {
                    var r, o, s, a, l, c, u, d;
                    if (null == t) return this;
                    if ("object" == typeof t ? (o = t, i = e) : (o = {})[t] = e, i || (i = {}), !this._validate(o, i)) return !1;
                    s = i.unset, l = i.silent, a = [], c = this._changing, this._changing = !0, c || (this._previousAttributes = n.clone(this.attributes), this.changed = {}), d = this.attributes, u = this._previousAttributes, this.idAttribute in o && (this.id = o[this.idAttribute]);
                    for (r in o) e = o[r], n.isEqual(d[r], e) || a.push(r), n.isEqual(u[r], e) ? delete this.changed[r] : this.changed[r] = e, s ? delete d[r] : d[r] = e;
                    if (!l) {
                        a.length && (this._pending = !0);
                        for (var p = 0, h = a.length; h > p; p++) this.trigger("change:" + a[p], this, d[a[p]], i)
                    }
                    if (c) return this;
                    if (!l)
                        for (; this._pending;) this._pending = !1, this.trigger("change", this, i);
                    return this._pending = !1, this._changing = !1, this
                },
                unset: function(t, e) {
                    return this.set(t, void 0, n.extend({}, e, {
                        unset: !0
                    }))
                },
                clear: function(t) {
                    var e = {};
                    for (var i in this.attributes) e[i] = void 0;
                    return this.set(e, n.extend({}, t, {
                        unset: !0
                    }))
                },
                hasChanged: function(t) {
                    return null == t ? !n.isEmpty(this.changed) : n.has(this.changed, t)
                },
                changedAttributes: function(t) {
                    if (!t) return this.hasChanged() ? n.clone(this.changed) : !1;
                    var e, i = !1,
                        r = this._changing ? this._previousAttributes : this.attributes;
                    for (var o in t) n.isEqual(r[o], e = t[o]) || ((i || (i = {}))[o] = e);
                    return i
                },
                previous: function(t) {
                    return null != t && this._previousAttributes ? this._previousAttributes[t] : null
                },
                previousAttributes: function() {
                    return n.clone(this._previousAttributes)
                },
                fetch: function(t) {
                    t = t ? n.clone(t) : {}, void 0 === t.parse && (t.parse = !0);
                    var e = this,
                        i = t.success;
                    return t.success = function(n) {
                        return e.set(e.parse(n, t), t) ? (i && i(e, n, t), void e.trigger("sync", e, n, t)) : !1
                    }, I(this, t), this.sync("read", this, t)
                },
                save: function(t, e, i) {
                    var r, o, s, a = this.attributes;
                    if (null == t || "object" == typeof t ? (r = t, i = e) : (r = {})[t] = e, !(!r || i && i.wait || this.set(r, i))) return !1;
                    if (i = n.extend({
                            validate: !0
                        }, i), !this._validate(r, i)) return !1;
                    r && i.wait && (this.attributes = n.extend({}, a, r)), void 0 === i.parse && (i.parse = !0);
                    var l = this,
                        c = i.success;
                    return i.success = function(t) {
                        l.attributes = a;
                        var e = l.parse(t, i);
                        return i.wait && (e = n.extend(r || {}, e)), n.isObject(e) && !l.set(e, i) ? !1 : (c && c(l, t, i), void l.trigger("sync", l, t, i))
                    }, I(this, i), o = this.isNew() ? "create" : i.patch ? "patch" : "update", "patch" === o && (i.attrs = r), s = this.sync(o, this, i), r && i.wait && (this.attributes = a), s
                },
                destroy: function(t) {
                    t = t ? n.clone(t) : {};
                    var e = this,
                        i = t.success,
                        r = function() {
                            e.trigger("destroy", e, e.collection, t)
                        };
                    if (t.success = function(n) {
                            (t.wait || e.isNew()) && r(), i && i(e, n, t), e.isNew() || e.trigger("sync", e, n, t)
                        }, this.isNew()) return t.success(), !1;
                    I(this, t);
                    var o = this.sync("delete", this, t);
                    return t.wait || r(), o
                },
                url: function() {
                    var t = n.result(this, "urlRoot") || n.result(this.collection, "url") || U();
                    return this.isNew() ? t : t + ("/" === t.charAt(t.length - 1) ? "" : "/") + encodeURIComponent(this.id)
                },
                parse: function(t) {
                    return t
                },
                clone: function() {
                    return new this.constructor(this.attributes)
                },
                isNew: function() {
                    return null == this.id
                },
                isValid: function(t) {
                    return this._validate({}, n.extend(t || {}, {
                        validate: !0
                    }))
                },
                _validate: function(t, e) {
                    if (!e.validate || !this.validate) return !0;
                    t = n.extend({}, this.attributes, t);
                    var i = this.validationError = this.validate(t, e) || null;
                    return i ? (this.trigger("invalid", this, i, n.extend(e || {}, {
                        validationError: i
                    })), !1) : !0
                }
            });
            var g = ["keys", "values", "pairs", "invert", "pick", "omit"];
            n.each(g, function(t) {
                f.prototype[t] = function() {
                    var e = a.call(arguments);
                    return e.unshift(this.attributes), n[t].apply(n, e)
                }
            });
            var v = e.Collection = function(t, e) {
                    e || (e = {}), e.url && (this.url = e.url), e.model && (this.model = e.model), void 0 !== e.comparator && (this.comparator = e.comparator), this._reset(), this.initialize.apply(this, arguments), t && this.reset(t, n.extend({
                        silent: !0
                    }, e))
                },
                _ = {
                    add: !0,
                    remove: !0,
                    merge: !0
                },
                y = {
                    add: !0,
                    merge: !1,
                    remove: !1
                };
            n.extend(v.prototype, c, {
                model: f,
                initialize: function() {},
                toJSON: function(t) {
                    return this.map(function(e) {
                        return e.toJSON(t)
                    })
                },
                sync: function() {
                    return e.sync.apply(this, arguments)
                },
                add: function(t, e) {
                    return this.set(t, n.defaults(e || {}, y))
                },
                remove: function(t, e) {
                    t = n.isArray(t) ? t.slice() : [t], e || (e = {});
                    var i, r, o, s;
                    for (i = 0, r = t.length; r > i; i++) s = this.get(t[i]), s && (delete this._byId[s.id], delete this._byId[s.cid], o = this.indexOf(s), this.models.splice(o, 1), this.length--, e.silent || (e.index = o, s.trigger("remove", s, this, e)), this._removeReference(s));
                    return this
                },
                set: function(t, e) {
                    e = n.defaults(e || {}, _), e.parse && (t = this.parse(t, e)), n.isArray(t) || (t = t ? [t] : []);
                    var i, r, o, a, c, u = e.at,
                        d = this.comparator && null == u && e.sort !== !1,
                        p = n.isString(this.comparator) ? this.comparator : null,
                        h = [],
                        f = [],
                        m = {};
                    for (i = 0, r = t.length; r > i; i++)(o = this._prepareModel(t[i], e)) && ((a = this.get(o)) ? (e.remove && (m[a.cid] = !0), e.merge && (a.set(o.attributes, e), d && !c && a.hasChanged(p) && (c = !0))) : e.add && (h.push(o), o.on("all", this._onModelEvent, this), this._byId[o.cid] = o, null != o.id && (this._byId[o.id] = o)));
                    if (e.remove) {
                        for (i = 0, r = this.length; r > i; ++i) m[(o = this.models[i]).cid] || f.push(o);
                        f.length && this.remove(f, e)
                    }
                    if (h.length && (d && (c = !0), this.length += h.length, null != u ? l.apply(this.models, [u, 0].concat(h)) : s.apply(this.models, h)), c && this.sort({
                            silent: !0
                        }), e.silent) return this;
                    for (i = 0, r = h.length; r > i; i++)(o = h[i]).trigger("add", o, this, e);
                    return c && this.trigger("sort", this, e), this
                },
                reset: function(t, e) {
                    e || (e = {});
                    for (var i = 0, r = this.models.length; r > i; i++) this._removeReference(this.models[i]);
                    return e.previousModels = this.models, this._reset(), this.add(t, n.extend({
                        silent: !0
                    }, e)), e.silent || this.trigger("reset", this, e), this
                },
                push: function(t, e) {
                    return t = this._prepareModel(t, e), this.add(t, n.extend({
                        at: this.length
                    }, e)), t
                },
                pop: function(t) {
                    var e = this.at(this.length - 1);
                    return this.remove(e, t), e
                },
                unshift: function(t, e) {
                    return t = this._prepareModel(t, e), this.add(t, n.extend({
                        at: 0
                    }, e)), t
                },
                shift: function(t) {
                    var e = this.at(0);
                    return this.remove(e, t), e
                },
                slice: function(t, e) {
                    return this.models.slice(t, e)
                },
                get: function(t) {
                    return null == t ? void 0 : this._byId[null != t.id ? t.id : t.cid || t]
                },
                at: function(t) {
                    return this.models[t]
                },
                where: function(t, e) {
                    return n.isEmpty(t) ? e ? void 0 : [] : this[e ? "find" : "filter"](function(e) {
                        for (var n in t)
                            if (t[n] !== e.get(n)) return !1;
                        return !0
                    })
                },
                findWhere: function(t) {
                    return this.where(t, !0)
                },
                sort: function(t) {
                    if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                    return t || (t = {}), n.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(n.bind(this.comparator, this)), t.silent || this.trigger("sort", this, t), this
                },
                sortedIndex: function(t, e, i) {
                    e || (e = this.comparator);
                    var r = n.isFunction(e) ? e : function(t) {
                        return t.get(e)
                    };
                    return n.sortedIndex(this.models, t, r, i)
                },
                pluck: function(t) {
                    return n.invoke(this.models, "get", t)
                },
                fetch: function(t) {
                    t = t ? n.clone(t) : {}, void 0 === t.parse && (t.parse = !0);
                    var e = t.success,
                        i = this;
                    return t.success = function(n) {
                        var r = t.reset ? "reset" : "set";
                        i[r](n, t), e && e(i, n, t), i.trigger("sync", i, n, t)
                    }, I(this, t), this.sync("read", this, t)
                },
                create: function(t, e) {
                    if (e = e ? n.clone(e) : {}, !(t = this._prepareModel(t, e))) return !1;
                    e.wait || this.add(t, e);
                    var i = this,
                        r = e.success;
                    return e.success = function(n) {
                        e.wait && i.add(t, e), r && r(t, n, e)
                    }, t.save(null, e), t
                },
                parse: function(t) {
                    return t
                },
                clone: function() {
                    return new this.constructor(this.models)
                },
                _reset: function() {
                    this.length = 0, this.models = [], this._byId = {}
                },
                _prepareModel: function(t, e) {
                    if (t instanceof f) return t.collection || (t.collection = this), t;
                    e || (e = {}), e.collection = this;
                    var n = new this.model(t, e);
                    return n._validate(t, e) ? n : (this.trigger("invalid", this, t, e), !1)
                },
                _removeReference: function(t) {
                    this === t.collection && delete t.collection, t.off("all", this._onModelEvent, this)
                },
                _onModelEvent: function(t, e, n, i) {
                    ("add" !== t && "remove" !== t || n === this) && ("destroy" === t && this.remove(e, i), e && t === "change:" + e.idAttribute && (delete this._byId[e.previous(e.idAttribute)], null != e.id && (this._byId[e.id] = e)), this.trigger.apply(this, arguments))
                }
            });
            var b = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain"];
            n.each(b, function(t) {
                v.prototype[t] = function() {
                    var e = a.call(arguments);
                    return e.unshift(this.models), n[t].apply(n, e)
                }
            });
            var w = ["groupBy", "countBy", "sortBy"];
            n.each(w, function(t) {
                v.prototype[t] = function(e, i) {
                    var r = n.isFunction(e) ? e : function(t) {
                        return t.get(e)
                    };
                    return n[t](this.models, r, i)
                }
            });
            var P = e.View = function(t) {
                    this.cid = n.uniqueId("view"), this._configure(t || {}), this._ensureElement(), this.initialize.apply(this, arguments), this.delegateEvents()
                },
                S = /^(\S+)\s*(.*)$/,
                C = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
            n.extend(P.prototype, c, {
                tagName: "div",
                $: function(t) {
                    return this.$el.find(t)
                },
                initialize: function() {},
                render: function() {
                    return this
                },
                remove: function() {
                    return this.$el.remove(), this.stopListening(), this
                },
                setElement: function(t, n) {
                    return this.$el && this.undelegateEvents(), this.$el = t instanceof e.$ ? t : e.$(t), this.el = this.$el[0], n !== !1 && this.delegateEvents(), this
                },
                delegateEvents: function(t) {
                    if (!t && !(t = n.result(this, "events"))) return this;
                    this.undelegateEvents();
                    for (var e in t) {
                        var i = t[e];
                        if (n.isFunction(i) || (i = this[t[e]]), i) {
                            var r = e.match(S),
                                o = r[1],
                                s = r[2];
                            i = n.bind(i, this), o += ".delegateEvents" + this.cid, "" === s ? this.$el.on(o, i) : this.$el.on(o, s, i)
                        }
                    }
                    return this
                },
                undelegateEvents: function() {
                    return this.$el.off(".delegateEvents" + this.cid), this
                },
                _configure: function(t) {
                    this.options && (t = n.extend({}, n.result(this, "options"), t)), n.extend(this, n.pick(t, C)), this.options = t
                },
                _ensureElement: function() {
                    if (this.el) this.setElement(n.result(this, "el"), !1);
                    else {
                        var t = n.extend({}, n.result(this, "attributes"));
                        this.id && (t.id = n.result(this, "id")), this.className && (t["class"] = n.result(this, "className"));
                        var i = e.$("<" + n.result(this, "tagName") + ">").attr(t);
                        this.setElement(i, !1)
                    }
                }
            }), e.sync = function(t, i, r) {
                var o = x[t];
                n.defaults(r || (r = {}), {
                    emulateHTTP: e.emulateHTTP,
                    emulateJSON: e.emulateJSON
                });
                var s = {
                    type: o,
                    dataType: "json"
                };
                if (r.url || (s.url = n.result(i, "url") || U()), null != r.data || !i || "create" !== t && "update" !== t && "patch" !== t || (s.contentType = "application/json", s.data = JSON.stringify(r.attrs || i.toJSON(r))), r.emulateJSON && (s.contentType = "application/x-www-form-urlencoded", s.data = s.data ? {
                        model: s.data
                    } : {}), r.emulateHTTP && ("PUT" === o || "DELETE" === o || "PATCH" === o)) {
                    s.type = "POST", r.emulateJSON && (s.data._method = o);
                    var a = r.beforeSend;
                    r.beforeSend = function(t) {
                        return t.setRequestHeader("X-HTTP-Method-Override", o), a ? a.apply(this, arguments) : void 0
                    }
                }
                "GET" === s.type || r.emulateJSON || (s.processData = !1), "PATCH" !== s.type || !window.ActiveXObject || window.external && window.external.msActiveXFilteringEnabled || (s.xhr = function() {
                    return new ActiveXObject("Microsoft.XMLHTTP")
                });
                var l = r.xhr = e.ajax(n.extend(s, r));
                return i.trigger("request", i, l, r), l
            };
            var x = {
                create: "POST",
                update: "PUT",
                patch: "PATCH",
                "delete": "DELETE",
                read: "GET"
            };
            e.ajax = function() {
                return e.$.ajax.apply(e.$, arguments)
            };
            var k = e.Router = function(t) {
                    t || (t = {}), t.routes && (this.routes = t.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
                },
                T = /\((.*?)\)/g,
                L = /(\(\?)?:\w+/g,
                E = /\*\w+/g,
                A = /[\-{}\[\]+?.,\\\^$|#\s]/g;
            n.extend(k.prototype, c, {
                initialize: function() {},
                route: function(t, i, r) {
                    n.isRegExp(t) || (t = this._routeToRegExp(t)), n.isFunction(i) && (r = i, i = ""), r || (r = this[i]);
                    var o = this;
                    return e.history.route(t, function(n) {
                        var s = o._extractParameters(t, n);
                        r && r.apply(o, s), o.trigger.apply(o, ["route:" + i].concat(s)), o.trigger("route", i, s), e.history.trigger("route", o, i, s)
                    }), this
                },
                navigate: function(t, n) {
                    return e.history.navigate(t, n), this
                },
                _bindRoutes: function() {
                    if (this.routes) {
                        this.routes = n.result(this, "routes");
                        for (var t, e = n.keys(this.routes); null != (t = e.pop());) this.route(t, this.routes[t])
                    }
                },
                _routeToRegExp: function(t) {
                    return t = t.replace(A, "\\$&").replace(T, "(?:$1)?").replace(L, function(t, e) {
                        return e ? t : "([^/]+)"
                    }).replace(E, "(.*?)"), new RegExp("^" + t + "$")
                },
                _extractParameters: function(t, e) {
                    var i = t.exec(e).slice(1);
                    return n.map(i, function(t) {
                        return t ? decodeURIComponent(t) : null
                    })
                }
            });
            var N = e.History = function() {
                    this.handlers = [], n.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, this.history = window.history)
                },
                O = /^[#\/]|\s+$/g,
                D = /^\/+|\/+$/g,
                M = /msie [\w.]+/,
                F = /\/$/;
            N.started = !1, n.extend(N.prototype, c, {
                interval: 50,
                getHash: function(t) {
                    var e = (t || this).location.href.match(/#(.*)$/);
                    return e ? e[1] : ""
                },
                getFragment: function(t, e) {
                    if (null == t)
                        if (this._hasPushState || !this._wantsHashChange || e) {
                            t = this.location.pathname;
                            var n = this.root.replace(F, "");
                            t.indexOf(n) || (t = t.substr(n.length))
                        } else t = this.getHash();
                    return t.replace(O, "")
                },
                start: function(t) {
                    if (N.started) throw new Error("Backbone.history has already been started");
                    N.started = !0, this.options = n.extend({}, {
                        root: "/"
                    }, this.options, t), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
                    var i = this.getFragment(),
                        r = document.documentMode,
                        o = M.exec(navigator.userAgent.toLowerCase()) && (!r || 7 >= r);
                    this.root = ("/" + this.root + "/").replace(D, "/"), o && this._wantsHashChange && (this.iframe = e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow, this.navigate(i)), this._hasPushState ? e.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !o ? e.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), this.fragment = i;
                    var s = this.location,
                        a = s.pathname.replace(/[^\/]$/, "$&/") === this.root;
                    return this._wantsHashChange && this._wantsPushState && !this._hasPushState && !a ? (this.fragment = this.getFragment(null, !0), this.location.replace(this.root + this.location.search + "#" + this.fragment), !0) : (this._wantsPushState && this._hasPushState && a && s.hash && (this.fragment = this.getHash().replace(O, ""), this.history.replaceState({}, document.title, this.root + this.fragment + s.search)), this.options.silent ? void 0 : this.loadUrl())
                },
                stop: function() {
                    e.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), clearInterval(this._checkUrlInterval), N.started = !1
                },
                route: function(t, e) {
                    this.handlers.unshift({
                        route: t,
                        callback: e
                    })
                },
                checkUrl: function() {
                    var t = this.getFragment();
                    return t === this.fragment && this.iframe && (t = this.getFragment(this.getHash(this.iframe))), t === this.fragment ? !1 : (this.iframe && this.navigate(t), void(this.loadUrl() || this.loadUrl(this.getHash())))
                },
                loadUrl: function(t) {
                    var e = this.fragment = this.getFragment(t),
                        i = n.any(this.handlers, function(t) {
                            return t.route.test(e) ? (t.callback(e), !0) : void 0
                        });
                    return i
                },
                navigate: function(t, e) {
                    if (!N.started) return !1;
                    if (e && e !== !0 || (e = {
                            trigger: e
                        }), t = this.getFragment(t || ""), this.fragment !== t) {
                        this.fragment = t;
                        var n = this.root + t;
                        if (this._hasPushState) this.history[e.replace ? "replaceState" : "pushState"]({}, document.title, n);
                        else {
                            if (!this._wantsHashChange) return this.location.assign(n);
                            this._updateHash(this.location, t, e.replace), this.iframe && t !== this.getFragment(this.getHash(this.iframe)) && (e.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, t, e.replace))
                        }
                        e.trigger && this.loadUrl(t)
                    }
                },
                _updateHash: function(t, e, n) {
                    if (n) {
                        var i = t.href.replace(/(javascript:|#).*$/, "");
                        t.replace(i + "#" + e)
                    } else t.hash = "#" + e
                }
            }), e.history = new N;
            var R = function(t, e) {
                var i, r = this;
                i = t && n.has(t, "constructor") ? t.constructor : function() {
                    return r.apply(this, arguments)
                }, n.extend(i, r, e);
                var o = function() {
                    this.constructor = i
                };
                return o.prototype = r.prototype, i.prototype = new o, t && n.extend(i.prototype, t), i.__super__ = r.prototype, i
            };
            f.extend = v.extend = k.extend = P.extend = N.extend = R;
            var U = function() {
                    throw new Error('A "url" property or function must be specified')
                },
                I = function(t, e) {
                    var n = e.error;
                    e.error = function(i) {
                        n && n(t, i, e), t.trigger("error", t, i, e)
                    }
                };
            return e
        }),
        function() {
            define("backbone-ext", ["require", "backbone"], function(t) {
                var e;
                return e = t("backbone"), e.ajax = function(t) {
                    var n, i;
                    return n = window.localStorage.getItem("canstar_token"), n && (t.headers = null != (i = t.headers) ? i : {}, _.extend(t.headers, {
                        Authorization: "Bearer " + n
                    })), e.$.ajax.apply(this, arguments)
                }, e
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("components/backbone/AppView", ["require"], function() {
                var e;
                return e = function() {
                    function e() {
                        this.inDom = t(this.inDom, this), this.hideView = t(this.hideView, this), this.showView = t(this.showView, this)
                    }
                    return e.prototype.hiddenViews = [], e.prototype.currentView = {}, e.prototype.showView = function(t, e, n, i) {
                        var r, o, s;
                        return null == n && (n = !0), null == i && (i = !1), r = e.attr("id"), null != this.currentView[r] && this.currentView[r] !== t && this.currentView[r].close(), o = _.contains(this.hiddenViews, t), o && (this.hiddenViews.splice(_.indexOf(this.hiddenViews, t), 1), t.$el.show()), s = _.isEmpty(this.currentView[r]) ? !0 : !1, this.currentView[r] = t, n && this.currentView[r].render(), (!o || o && !this.inDom(t.$el)) && (i ? e.append(this.currentView[r].el) : e.html(this.currentView[r].el)), t.trigger("shown", s)
                    }, e.prototype.hideView = function(t, e) {
                        var n;
                        return e || (e = t.$el.parent()), n = e.attr("id"), t.$el.hide(), this.hiddenViews.push(t), null != this.currentView[n] && this.currentView[n] === t ? delete this.currentView[n] : void 0
                    }, e.prototype.inDom = function(t) {
                        var e;
                        return e = t.parents("html")[0], e && e === document.documentElement ? !0 : !1
                    }, e
                }()
            })
        }.call(this),
        function() {
            define("libraries/Loader", ["require"], function() {
                var t;
                return t = function() {
                    function t() {}
                    return t.prototype.loadCSS = function(e, n) {
                        var i, r;
                        return null == n && (n = null), n && (i = document.querySelectorAll("head link[href*='" + n + "']"), i.length > 0) ? void 0 : (r = document.createElement("link"), r.type = "text/css", r.rel = "stylesheet", r.href = e, document.getElementsByTagName("head")[0].appendChild(r), t)
                    }, t.prototype.getCSS = function(e) {
                        var n;
                        return n = document.createElement("link"), n.type = "text/css", n.rel = "stylesheet", n.href = e, document.getElementsByTagName("head")[0].appendChild(n), t
                    }, t.prototype.buildCSS = function() {
                        return console.log("BuildCSS: ", window.require.s.contexts._.defined)
                    }, t.prototype.loadJS = function(e) {
                        var n;
                        return n = document.createElement("script"), n.type = "text/javascript", n.src = e, document.getElementsByTagName("head")[0].appendChild(n), t
                    }, t
                }()
            })
        }.call(this), define("text-cns", ["module"], function(t) {
            var e, n, i, r, o, s = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
                a = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
                l = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
                c = "undefined" != typeof location && location.href,
                u = (c && location.protocol && location.protocol.replace(/\:/, ""), c && location.hostname, c && (location.port || void 0), {}),
                d = t.config && t.config() || {};
            return e = {
                version: "2.0.12",
                strip: function(t) {
                    if (t) {
                        t = t.replace(a, "");
                        var e = t.match(l);
                        e && (t = e[1])
                    } else t = "";
                    return t
                },
                jsEscape: function(t) {
                    return t.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
                },
                createXhr: d.createXhr || function() {
                    var t, e, n;
                    if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest;
                    if ("undefined" != typeof ActiveXObject)
                        for (e = 0; 3 > e; e += 1) {
                            n = s[e];
                            try {
                                t = new ActiveXObject(n)
                            } catch (i) {}
                            if (t) {
                                s = [n];
                                break
                            }
                        }
                    return t
                },
                parseName: function(t) {
                    var e, n, i, r = !1,
                        o = t.indexOf("."),
                        s = 0 === t.indexOf("./") || 0 === t.indexOf("../");
                    return -1 !== o && (!s || o > 1) ? (e = t.substring(0, o), n = t.substring(o + 1, t.length)) : e = t, i = n || e, o = i.indexOf("!"), -1 !== o && (r = "strip" === i.substring(o + 1), i = i.substring(0, o), n ? n = i : e = i), {
                        moduleName: e,
                        ext: n,
                        strip: r
                    }
                },
                xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,
                useXhr: function(t, n, i, r) {
                    var o, s, a, l = e.xdRegExp.exec(t);
                    return l ? (o = l[2], s = l[3], s = s.split(":"), a = s[1], s = s[0], !(o && o !== n || s && s.toLowerCase() !== i.toLowerCase() || (a || s) && a !== r)) : !0
                },
                finishLoad: function(t, n, i, r) {
                    i = n ? e.strip(i) : i, d.isBuild && (u[t] = i), r(i)
                },
                load: function(t, n, i, r) {
                    if (r && r.isBuild && !r.inlineText) return void i();
                    d.isBuild = r && r.isBuild; {
                        var o = e.parseName(t),
                            s = o.moduleName + (o.ext ? "." + o.ext : ""),
                            a = n.toUrl(s);
                        d.useXhr || e.useXhr
                    }
                    return 0 === a.indexOf("empty:") ? void i() : void e.get(a, function(n) {
                        e.finishLoad(t, o.strip, n, i)
                    }, function(t) {
                        i.error && i.error(t)
                    })
                },
                write: function(t, n, i) {
                    if (u.hasOwnProperty(n)) {
                        var r = e.jsEscape(u[n]);
                        i.asModule(t + "!" + n, "define(function () { return '" + r + "';});\n")
                    }
                },
                writeFile: function(t, n, i, r, o) {
                    var s = e.parseName(n),
                        a = s.ext ? "." + s.ext : "",
                        l = s.moduleName + a,
                        c = i.toUrl(s.moduleName + a) + ".js";
                    e.load(l, i, function() {
                        var n = function(t) {
                            return r(c, t)
                        };
                        n.asModule = function(t, e) {
                            return r.asModule(t, c, e)
                        }, e.write(t, l, n, o)
                    }, o)
                }
            }, "node" === d.env || !d.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] ? (n = require.nodeRequire("fs"), e.get = function(t, e, i) {
                try {
                    var r = n.readFileSync(t, "utf8");
                    0 === r.indexOf("") && (r = r.substring(1)), e(r)
                } catch (o) {
                    i && i(o)
                }
            }) : "xhr" === d.env || !d.env && e.createXhr() ? e.get = function(t, n, i, r) {
                var o, s = e.createXhr();
                if (s.open("GET", t, !0), r)
                    for (o in r) r.hasOwnProperty(o) && s.setRequestHeader(o.toLowerCase(), r[o]);
                d.onXhr && d.onXhr(s, t), s.onreadystatechange = function() {
                    var e, r;
                    4 === s.readyState && (e = s.status || 0, e > 399 && 600 > e ? (r = new Error(t + " HTTP status: " + e), r.xhr = s, i && i(r)) : n(s.responseText), d.onXhrComplete && d.onXhrComplete(s, t))
                }, s.send(null)
            } : "rhino" === d.env || !d.env && "undefined" != typeof Packages && "undefined" != typeof java ? e.get = function(t, e) {
                var n, i, r = "utf-8",
                    o = new java.io.File(t),
                    s = java.lang.System.getProperty("line.separator"),
                    a = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o), r)),
                    l = "";
                try {
                    for (n = new java.lang.StringBuffer, i = a.readLine(), i && i.length() && 65279 === i.charAt(0) && (i = i.substring(1)), null !== i && n.append(i); null !== (i = a.readLine());) n.append(s), n.append(i);
                    l = String(n.toString())
                } finally {
                    a.close()
                }
                e(l)
            } : ("xpconnect" === d.env || !d.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (i = Components.classes, r = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), o = "@mozilla.org/windows-registry-key;1" in i, e.get = function(t, e) {
                var n, s, a, l = {};
                o && (t = t.replace(/\//g, "\\")), a = new FileUtils.File(t);
                try {
                    n = i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream), n.init(a, 1, 0, !1), s = i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream), s.init(n, "utf-8", n.available(), r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), s.readString(n.available(), l), s.close(), n.close(), e(l.value)
                } catch (c) {
                    throw new Error((a && a.path || "") + ": " + c)
                }
            }), e
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/base/View", ["require", "jquery", "underscore", "backbone", "libraries/Loader", "text-cns"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), a = e("underscore"), r = e("backbone"), o = e("libraries/Loader"), e("text-cns"), s = function(r) {
                    function s(n) {
                        this.close = t(this.close, this), this.unbindFromAll = t(this.unbindFromAll, this), this.bindTo = t(this.bindTo, this), this.isExcludedComponent = t(this.isExcludedComponent, this), this._getDynamicTheme = t(this._getDynamicTheme, this);
                        var r, s, l, c, u, d, p, h, f, m, g;
                        d = this, d.cid = a.uniqueId("view"), d._configure(n || {}), d._ensureElement(), r = arguments, d.bindings = [], d.hasInitialized = i.Deferred(), g = this.path.split("/"), m = g[1], g = g[0], c = this.js_path || m, h = this._getDynamicTheme() || n && n.theme || canstar_widget[c] && canstar_widget[c].theme || this.default_theme, f = (n && n.theme_path || this.path).replace(/\/$/, ""), p = n && n.theme_config || {}, l = !1, s = (null != n ? n.theme_path : void 0) ? !0 : !1, h && !s ? (f = f + "/themes/" + h, d.theme_path = f, l = !0) : n && n.theme_path && (f = f + "/" + m), a.isObject(this.templates) ? (u = function(t) {
                            return function(n, i) {
                                var s, c, u, p, v, _, y, b, w, P, S, C, x, k;
                                l && n && "success" === i && (d.theme_config = n, d.excluded_components = a.isArray(n.excluded_components) ? n.excluded_components : []), (null != n ? n.original : void 0) ? _ = "" + n.original + "-theme" : h && (_ = "" + h + "-theme"), _ && d.$el.addClass(_), S = [], P = [], C = {}, x = t.templates;
                                for (p in x) s = x[p], c = f, u = l || "components" !== g ? "" : m + "/", v = u + s.replace(/^!+/g, ""), (null != n ? n.templates : void 0) && !a.contains(n.templates, v) && ((null != n ? n.originalConfig : void 0) && a.contains(null != (k = n.originalConfig) ? k.templates : void 0, v) ? (y = "themes/", b = c.indexOf(y), w = c.substring(0, b + y.length), c = "" + w + n.original, u && (c += "/" + u.slice(0, -1))) : c = t.path), "string" == typeof s && "!" === s.charAt(0) ? (S.push("!" === s.charAt(1) ? "!" + p : p), P.push("text-cns!" + c + "/" + s.replace(/!/g, ""))) : C[p] = s;
                                return e(P, function() {
                                    var t, n, i;
                                    for (d.templates = a.extend({}, C), t = n = 0, i = arguments.length; i > n; t = ++n) p = arguments[t], "!" === S[t].charAt(0) ? d.templates[S[t].substr(1)] = a.template(p) : d.templates[S[t]] = p;
                                    return d.initialize.apply(d, r), d.delegateEvents(), d.hasInitialized.resolve(), d.trigger("constructed"), l ? o.prototype.loadCSS(e.toUrl(f + "/style.min.css"), e.toUrl(f + "/style.min.css")) : void 0
                                })
                            }
                        }(this), l ? i.getJSON(e.toUrl(f + "/config.json"), function(t, n) {
                            var r;
                            return (null != t ? t.original : void 0) ? (r = e.toUrl("" + f + "/../" + t.original + "/config.json"), i.getJSON(r, function(e, n) {
                                return t.originalConfig = e, u(t, n)
                            })) : u(t, n)
                        }).fail(u) : u(p)) : (d.initialize.apply(d, r), d.delegateEvents(), d.hasInitialized.resolve(), d.trigger("constructed"))
                    }
                    return n(s, r), s.prototype._getDynamicTheme = function() {
                        var t, e;
                        return t = new RegExp("[\\?&]theme=([^&#]*)"), e = t.exec(window.location.search), null === e ? void 0 : decodeURIComponent(e[1].replace(/\+/g, " "))
                    }, s.prototype.isExcludedComponent = function(t) {
                        return a.indexOf(this.excluded_components, t) > -1
                    }, s.prototype.bindTo = function(t, e, n) {
                        return t.bind(e, n, this), this.bindings.push({
                            model: t,
                            ev: e,
                            callback: n
                        })
                    }, s.prototype.unbindFromAll = function() {
                        return a.each(this.bindings, function(t) {
                            return t.model.unbind(t.ev, t.callback)
                        }), this.bindings = []
                    }, s.prototype.dispose = function() {
                        return this.unbindFromAll(), this.unbind(), this.remove()
                    }, s.prototype.close = function() {
                        return this.remove(), this.unbind(), null != this.onClose ? this.onClose() : void 0
                    }, s
                }(r.View)
            })
        }.call(this),
        function() {
            define("libraries/Text", ["require", "underscore"], function(t) {
                var e, n;
                return n = t("underscore"), e = function() {
                    function t() {}
                    return t.prototype.ucwords = function(t) {
                        var e;
                        return e = t.toLowerCase(), e.replace(/(^([a-zA-Z\p{M}]))|([ -][a-zA-Z\p{M}])/g, function(t) {
                            return t.toUpperCase()
                        })
                    }, t.prototype.ucwords_ = function(t) {
                        var e;
                        return e = t.replace("_", " "), this.ucwords(e)
                    }, t.prototype.firstSentence = function(t) {
                        return "" + t.split(".")[0] + "."
                    }, t.prototype.firstWords = function(t, e) {
                        return t.split(" ").slice(0, e).join(" ")
                    }, t.prototype.pad = function(t, e, n) {
                        var i;
                        return null == n && (n = "0"), t += "", i = e - t.length, i > 0 ? new Array(i + 1).join(n) + t : t
                    }, t.prototype.replaceAll = function(t, e) {
                        var i;
                        return i = new RegExp(n.keys(e).join("|"), "g"), null != t ? t.replace(i, function(t) {
                            return e[t]
                        }) : void 0
                    }, t.prototype.convertToSlug = function(t) {
                        return t.toLowerCase().replace(/\x20|\.|-+/g, "-").replace(/[^\w-]+/g, "").replace(/^-+|-+$/g, "")
                    }, t.prototype.replaceSpaceWithChar = function(t, e) {
                        var n;
                        return n = new RegExp(/\s/, "g"), t.replace(n, e)
                    }, t.prototype.textHasWhiteSpace = function(t) {
                        var e;
                        return e = new RegExp(/\s/, "g"), t.match(e)
                    }, t.prototype.htmlEscape = function(t) {
                        return String(t).replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                    }, t.prototype.htmlUnescape = function(t) {
                        return String(t).replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&")
                    }, t
                }()
            })
        }.call(this),
        function() {
            ! function(t, e) {
                return "function" == typeof define && define.amd ? define("canstar_widget", ["underscore", "backbone"], function(n, i) {
                    return t.canstar_widget = e(n, i)
                }) : t.canstar_widget = e(_, Backbone)
            }(this, function(t, e) {
                var n, i, r, o, s;
                return n = this.canstar_widget || {}, r = {
                    auth: {
                        base_url: "/widgets/",
                        enabled: !1,
                        urls: {
                            home: "/",
                            login: "/login/",
                            profile: "/user/#dashboard",
                            edit: "/user/#profile",
                            shortlists: "/user/#shortlists",
                            products: "/user/#products"
                        },
                        config: {
                            redirectOnLogin: !0,
                            redirectOnLogout: !1
                        }
                    },
                    faceted_search: {
                        details_url: "/details"
                    },
                    event: t.extend({}, e.Events),
                    debug: !1,
                    abVariant: 0
                }, t.defaults(n, r), t.defaults(n.auth, r.auth), t.defaults(n.auth.urls, r.auth.urls), t.defaults(n.auth.config, r.auth.config), t.defaults(n.faceted_search, r.faceted_search), o = n.faceted_search.category_prefix, i = n.faceted_search.category, o && i && (n.faceted_search.category = "" + o + " " + i, delete n.faceted_search.category_prefix), null != (null != (s = this.cns) ? s.ga_experiment_variant : void 0) && (n.abVariant = this.cns.ga_experiment_variant), n
            })
        }.call(this),
        function() {
            define("libraries/Canstar", ["require", "jquery", "libraries/Text", "canstar_widget"], function(t) {
                var e, n, i, r;
                return e = t("jquery"), i = t("libraries/Text"), r = t("canstar_widget"), n = function() {
                    function t() {}
                    return t.prototype.displayCurrencyOrNA = function(t) {
                        return null != t ? "$" + Number(t).toFixed(2) : "N/A"
                    }, t.prototype.generateReturnLink = function() {
                        var t;
                        return t = "<a class='proceed orange' target='_blank' href='#' onclick='window.close();' >Back to results</a>"
                    }, t.prototype.useObjectPropOrGlobal = function(t, e) {
                        var n;
                        return n = null != t[e] ? t[e] : ("undefined" != typeof window && null !== window ? window[e] : void 0) ? window[e] : null
                    }, t.prototype.globalOrFixture = function(t) {
                        return "undefined" != typeof window && null !== window ? window[t] : void 0
                    }, t.prototype.lazyCompanyLogo = function(t, e, n, i, o) {
                        var s, a;
                        return null == e && (e = "Company logo"), null == i && (i = ""), null == o && (o = null != (null != r ? r.base_url : void 0) ? r.base_url : ""), s = {
                            width: 90,
                            height: 40,
                            "margin-left": 5,
                            size: "small"
                        }, n = _.extend(s, n), "" !== i && (i = "_" + i), a = "<div class='lazy' title=\"" + e + "\" value='" + e + "' style=\"margin-left:" + n["margin-left"] + "px;width:" + n.width + "px;height:" + n.height + 'px;background-size:100%;background-repeat:no-repeat;" data-original="' + o + "assets/image/company/" + n.size + "_" + (null != t ? t.toLowerCase() : void 0) + i + '_logo.png" />'
                    }, t.prototype.companyLogo = function(e, n, i, o, s) {
                        var a, l;
                        return null == n && (n = "Company logo"), null == o && (o = ""), null == s && (s = null != (null != r ? r.base_url : void 0) ? r.base_url : ""), "" !== o && (o = "_" + o), a = {
                            width: 80,
                            size: "small"
                        }, i = _.extend(a, i), l = t.prototype.getLogoImg(e, n, i, "" + s + "assets/image/company/" + i.size + "_" + (null != e ? e.toLowerCase() : void 0) + o + "_logo.png")
                    }, t.prototype.blueCompanyLogo = function(t, n, i, o, s) {
                        var a, l, c, u;
                        return null == n && (n = "Company logo"), null == o && (o = ""), null == s && (s = null != (null != r ? r.base_url : void 0) ? r.base_url : ""), "" !== o && (o = "_" + o), l = {
                            width: 80,
                            size: "small"
                        }, i = _.extend(l, i), c = "" + s + "bluesr/images/brands/blue_" + i.size + "_" + t + o + "_logo.png", a = e.browser && e.browser.msie && parseInt(e.browser.version, 10) <= 9 ? 'alt="' + n + '"' : "onerror=\"this.onerror=null;var span = document.createElement('span');span.innerHTML = '" + n + "';this.style.display = 'none';this.parentNode && this.parentNode.insertBefore(span, this.parentNode.childNodes[0]);\"", u = '<img    src="' + c + '" class="img-responsive" title="' + n + '" value="' + n + '" style="max-width: ' + i.width + 'px;" ' + a + " />"
                    }, t.prototype.getLogoImg = function(t, n, i, r) {
                        var o, s;
                        return null == n && (n = "Company logo"), o = e.browser && e.browser.msie && parseInt(e.browser.version, 10) <= 9 ? 'alt="' + n + '"' : "onerror=\"this.onerror=null;var span = document.createElement('span');span.innerHTML = '" + n + "';this.style.display = 'none';this.parentNode && this.parentNode.insertBefore(span, this.parentNode.childNodes[0]);\"", s = '<img    src="' + r + '" class="img-responsive" title="' + n + '" value="' + n + '" style="width: ' + i.width + 'px;" ' + o + " />"
                    }, t.prototype.starmoon = function(t) {
                        var e, n;
                        return null == t ? null : (t = t.toUpperCase(), n = "STANDARD" === t || "YES" === t || "Y" === t || "B" === t ? "tick" : "NOT AVAILABLE" === t || "NO" === t || "N" === t ? "cross" : "OPTIONAL" === t || "O" === t ? "O" : "LIMITED CIRCUMSTANCES" === t ? "circumstances" : "cross", e = '<img src="' + r.base_url + "assets/image/" + n + '.png"/>')
                    }, t.prototype.onMobile = function() {
                        return e(window).width() < 481
                    }, t.prototype.onTablet = function(t) {
                        return t ? this.onTablet(!1) && !this.onMobile() : e(window).width() <= 768
                    }, t.prototype.lazyStarLogo = function(t, e, n) {
                        var i, o, s, a, l, c, u, d, p;
                        return null == n && (n = null != (null != r ? r.base_url : void 0) ? r.base_url : ""), c = !0, i = {
                            size: "tiny",
                            use_nr_text: !1,
                            nr_text: "Not yet rated",
                            width: "auto",
                            height: "auto",
                            lazy: !1,
                            placeholder: !1
                        }, e = _.extend(i, e), null == t ? null : ("6" === t ? (s = 5, l = "5 Star Rating") : (e.use_nr_text || this.onMobile()) && 0 === Number(t) ? (o = null != (u = e.nr_text) ? u : "Not rated", l = o, c = !1) : (e.use_nr_text || this.onMobile()) && 4.5 === Number(t) || 12 === Number(t) ? (o = null != (d = e.nr_text) ? d : "Rising Star", l = o, c = this.onMobile ? !1 : !0) : (e.use_nr_text || this.onMobile()) && 3.5 === Number(t) ? (o = null != (p = e.nr_text) ? p : "New Product", l = o, c = !1) : (s = t, l = s + " Star Rating"), s = null != s ? s : t, a = "", e.placeholder && (a = "_placeholder"), o = c === !0 ? e.lazy === !0 ? "<div title='" + l + "' value='" + s + "' class='lazy starlogo' style='margin:0 auto;width:" + e.width + "px;height:" + e.height + "px;background-repeat:no-repeat;' data-original=\"" + n + "assets/image/" + s + "star_" + e.size + a + '.png" />' : "<div title='" + l + "' value='" + s + "' class='starlogo' style='width:" + e.width + "px;height:" + e.height + "px;'> <img style='width:auto;height:auto' src=\"" + n + "assets/image/" + s + "star_" + e.size + a + '.png" /></div>' : "<span " + e.class_name + " value='" + s + "' >" + o + "</span>")
                    }, t.prototype.starlogo = function(t, e, n) {
                        var i, o, s, a, l, c;
                        return null == e && (e = {
                            size: "small",
                            use_nr_text: !1,
                            nr_text: "Not yet rated"
                        }), null == n && (n = null != (null != r ? r.base_url : void 0) ? r.base_url : ""), s = !0, null == t ? null : ("6" === t ? o = 5 : (e.use_nr_text || this.onMobile()) && 0 === Number(t) ? (i = null != (a = e.nr_text) ? a : "Not rated", s = !1) : (e.use_nr_text || this.onMobile()) && 4.5 === Number(t) ? (i = null != (l = e.nr_text) ? l : "Rising Star", s = this.onMobile ? !1 : !0) : (e.use_nr_text || this.onMobile()) && 3.5 === Number(t) ? (i = "New Product", s = !1) : (e.use_nr_text || this.onMobile()) && 10 === Number(t) ? (i = null != (c = e.nr_text) ? c : "Not rated", s = !1) : (e.use_nr_text || this.onMobile()) && 11 === Number(t) ? (i = "New Product", s = !1) : o = t, null != e.class_name && (e.class_name = 'class="' + e.class_name + '"'), i = s === !0 ? "<img " + e.class_name + " value='" + o + "'  src=\"" + n + "assets/image/" + o + "star_" + e.size + '.png"/>' : "<span " + e.class_name + " value='" + i + "' >" + i + "</span>")
                    }, t.prototype.convertUrlString = function(t, e) {
                        var n;
                        return null == e && (e = !1), n = e ? t.replace(/'/g, "").replace(/\W/g, "-").toLowerCase() : t.replace(/[\s \&\/]/g, "-").toLowerCase()
                    }, t.prototype.makeUrlAbsolute = function(t) {
                        var e;
                        return e = t.indexOf("//"), -1 === e || e > t.indexOf(".") ? "//" + t : t
                    }, t.prototype.generateRCStarLink = function(t, e, n) {
                        var i;
                        return i = this.convertUrlString("http://www.ratecity.com.au/" + t + "/" + e + "/" + n + "?source=canstar_starrating")
                    }, t.prototype.replaceYNRBValue = function(t, e) {
                        var n, i;
                        if (null == e && (e = "_small"), "Y" === t || "Yes" === t) n = "tick" + e;
                        else if ("N" === t || "No" === t) n = "cross" + e;
                        else if ("R" === t) n = "restricted" + e;
                        else {
                            if ("B" !== t) return null === t ? "N/A" : t;
                            n = "limited" + e
                        }
                        return i = "<img value='" + t + "' src=\"" + r.base_url + "assets/image/" + n + '.png"/>'
                    }, t.prototype.lazyReplaceYNRBValue = function(t, e) {
                        return null == e ? e = "_small" : void 0
                    }, t.prototype.health_inclusions = function(t) {
                        var e, n;
                        return n = "Y" === t ? "tick_small" : "N" === t ? "cross_small" : "R" === t ? "restricted_small" : "B" === t ? "limited_small" : "cross_small", e = "<img value='" + t + "' src=\"" + r.base_url + "assets/image/" + n + '.png"/>'
                    }, t.prototype.health_lppe = function(t) {
                        var e;
                        return null == t ? null : e = "" === t ? "" : "Annual Limit0" === t ? "Annual Limit 0" : "$" + t
                    }, t.prototype.GATrackEvent = function(t, e, n) {
                        var i;
                        return i = "_gaq.push(['_trackEvent', '" + t + "', '" + e + "', '" + n + "']);"
                    }, t.prototype.isSafari = function() {
                        var t;
                        return t = navigator.userAgent.toLowerCase(), -1 !== t.indexOf("safari") ? t.indexOf("chrome") < 0 ? !0 : !1 : void 0
                    }, t.prototype.isIE = function() {
                        var t, e;
                        return t = navigator.appName.indexOf("Internet Explorer"), e = navigator.userAgent.match(/Trident\/.*rv:/), null !== e || -1 !== t ? !0 : !1
                    }, t.prototype.isIE8 = function() {
                        return null != r.bypass_ie8_checks && r.bypass_ie8_checks === !0 ? !1 : e.browser.msie && 8 === parseInt(e.browser.version, 10)
                    }, t.prototype.needsBVisible = function() {
                        return t.prototype.isIE() || t.prototype.isSafari()
                    }, t.prototype.getCSS = function(t) {
                        var e;
                        return e = document.createElement("link"), e.type = "text/css", e.rel = "stylesheet", e.href = t, document.getElementsByTagName("head")[0].appendChild(e)
                    }, t.prototype.paramsFromQueryString = function(t) {
                        var e, n, i, r, o, s, a;
                        if ("" === t) return {};
                        if (s = t.split("?")[1], "" === s) return {};
                        for (e = s.split("&"), r = {}, n = 0; n < e.length;) o = e[n].split("="), n++, 2 === o.length && (i = o[0].replace(/%5B%5D$/, ""), a = decodeURIComponent(o[1].replace(/\+/g, " ")), "undefined" == typeof r[i] ? r[i] = a : "string" == typeof r[i] ? r[i] = [r[i], a] : r[i].push(a));
                        return r
                    }, t.prototype.calcUpfrontFee = function(t) {
                        var e;
                        return e = Number(t.FEESAPPL) + Number(t.FEESVALU) + Number(t.FEESDOCU) + Number(t.FEESLEGL) + Number(t.FEESSECU) + Number(t.FEESSETL)
                    }, t.prototype.displayOngoingFee = function(t) {
                        var e, n;
                        if ("0" !== t.FEESMONT) e = "FEESMONT", n = "m";
                        else if ("0" !== t.FEESQUAR) e = "FEESQUAR", n = "q";
                        else if ("0" !== t.FEESSEMI) e = "FEESSEMI", n = "s";
                        else {
                            if ("0" === t.FEESANNU) return "No fee";
                            e = "FEESANNU", n = "a"
                        }
                        return "$" + t[e] + " " + n
                    }, t.prototype.displayIcon = function(t, n, i) {
                        var r;
                        return null == n && (n = "YES"), null == i && (i = "OPTIONAL"), r = "cross.png", t = e.trim(t).toUpperCase(), n = n.toUpperCase(), i = i.toUpperCase(), t === n ? r = "tick.png" : t === i && (r = "tickstar.png"), r
                    }, t.prototype.maxloanconvert = function(t) {
                        var e;
                        return e = "No Max" === t || "99999999.99" === t || t > "99999999" ? "No max" : "$" + Number(t).toFixed(2)
                    }, t.prototype.minloanconvert = function(t) {
                        var e;
                        return e = "No Min" === t || 0 === t || "0" === t ? "No min" : "$" + Number(t).toFixed(2)
                    }, t.prototype.generateHomeLoanProfile = function(t) {
                        var e, n, i;
                        return n = {
                            res: "",
                            inv: "Investment "
                        }, i = {
                            "var": "Variable Rate ",
                            fxd: "Fixed Rate ",
                            loc: "Revolving Line of Credit"
                        }, e = "" + i[t.rate_type], e += "loc" !== t.rate_type ? "" + n[t.purpose] : "", "loc" !== t.rate_type && (e += "Home Loan"), e += "fxd" === t.rate_type ? " " + t.term + " Year" : ""
                    }, t.prototype.capitaliseWord = function(t) {
                        return t[0].toUpperCase() + t.slice(1)
                    }, t.prototype.loadingDiv = function() {
                        return "<div style='text-align:center'><img src='" + r.base_url + "assets/image/ajax-loader-blue.gif' /></div>"
                    }, t.prototype.tableEmpty = function() {
                        return "<tr><td><div style='text-align:center'>There were no results that matched your preferences</div></td></tr>"
                    }, t.prototype.floor = function(t) {
                        return Math.floor(t * Math.pow(10, 2) + .9) / Math.pow(10, 2)
                    }, t.prototype.validateselector = function(t) {
                        var e;
                        return e = "", e = "Life Insurance" === t ? "undefined" != typeof r.faceted_search.occupation && "2804" === r.faceted_search.occupation ? "Unfortunately we are not currently able to provide quotes for that occupation category. Please contact a Financial Advisor" : "undefined" != typeof r.faceted_search.age && (r.faceted_search.age < 19 || r.faceted_search.age > 59) ? "Please select age between 19 to 59" : "undefined" != typeof r.faceted_search.age && isNaN(r.faceted_search.age) ? "Age needs to be a number" : "" : ""
                    }, t.prototype.validateData = function(t, n) {
                        var i;
                        return i = !0, _.each(n, function(n, r) {
                            return "minNumber" === r && n > t ? i = !1 : "maxNumber" === r && t > n ? i = !1 : "required" !== r || n !== !0 || e.trim(t) ? "numeric" === r && n === !0 && isNaN(t) ? i = !1 : void 0 : i = !1
                        }), i
                    }, t.prototype.shouldBeHidden = function(t, e, n) {
                        if (n && "ne" === n) {
                            if (r.faceted_search[t] !== e) return !0
                        } else if (r.faceted_search[t] === e) return !0;
                        return !1
                    }, t.prototype.gaTrackEvent = function(t, e) {
                        var n, o, s, a;
                        return null == t && (t = {}), null == e && (e = {}), null != t.event_label || e["<Column>"] || "undefined" != typeof console && null !== console && console.error("No event label or placeholder provided"), n = {
                            event_name: "Click Tracking",
                            event_type: "<Category> | <Profile>",
                            event_label: "<Column>"
                        }, _.extend(n, t), _.defaults(e, {
                            "<Category>": (null != (s = r.faceted_search) ? s.category : void 0) || "Unknown Category ",
                            "<Profile>": (null != (a = r.faceted_search) ? a.profile : void 0) || "Unknown Profile "
                        }), o = _.map(n, function(t) {
                            return "string" == typeof t && (t = i.prototype.replaceAll(t, e)), t
                        }), o.unshift("_trackEvent"), "undefined" != typeof _gaq && null !== _gaq ? _gaq.push(o) : void 0
                    }, t.prototype.getQueryStringParam = function(t) {
                        var e;
                        return e = RegExp("[?&]" + t + "=([^&]*)").exec(window.location.search), e && decodeURIComponent(e[1].replace(/\+/g, " "))
                    }, t.prototype.getFees = function(t) {
                        var e, n;
                        return e = "fees", null != t.FEES && (e = "FEES"), n = t[e]
                    }, t.prototype.getTiers = function(t) {
                        var e, n;
                        return n = "tiers", null != t.TIERS && (n = "TIERS"), e = t[n]
                    }, t.prototype.timer = function(t, e) {
                        return window.timers || (window.timers = {}), "start" === e ? window.timers[t] = Date.now() : (window.timers[t] = (Date.now() - window.timers[t]) / 1e3 + " seconds", window.timers[t])
                    }, t.prototype.isDistributedTable = function() {
                        var t, e;
                        return (null != r && null != (t = r.faceted_search) ? t.distributor : void 0) && (null != r && null != (e = r.faceted_search) ? e.table : void 0)
                    }, t.prototype.getTableFilterSegment = function() {
                        var e, n, i;
                        return t.prototype.isDistributedTable() ? "distributor=" + (null != (e = r.faceted_search) ? e.distributor : void 0) + "&table=" + (null != (n = r.faceted_search) ? n.table : void 0) : "collection=" + (null != (i = r.faceted_search) ? i.collection : void 0)
                    }, t.prototype.sortSelect = function(t) {
                        var n, i;
                        return i = t.find("option"), n = _.map(i, function(t) {
                            return {
                                text: e(t).text(),
                                val: e(t).val(),
                                selected: e(t).prop("selected"),
                                placeholder: e(t).data("placeholder")
                            }
                        }), n.sort(function(t, e) {
                            var n, i;
                            return t.placeholder && !e.placeholder ? -1 : !t.placeholder && e.placeholder ? 1 : (n = "" + t.text + "," + t.val, i = "" + e.text + "," + e.val, n > i ? 1 : i > n ? -1 : 0)
                        }), _.each(i, function(t, i) {
                            return t.value = n[i].val, e(t).text(n[i].text), e(t).prop("selected", n[i].selected)
                        })
                    }, t.prototype.popupWindow = function(t, e, n, i) {
                        var r, o;
                        return r = screen.width / 2 - n / 2, o = screen.height / 2 - i / 2, window.open(t, e, "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + n + ", height=" + i + ", top=" + o + ", left=" + r)
                    }, t
                }()
            })
        }.call(this),
        function() {
            define("libraries/Constants", ["require"], function() {
                return {
                    NUM_SIMILAR_PRODUCTS: 3,
                    TABLE_PAGE: "table",
                    DETAILS_PAGE: "details",
                    COMPARE_PAGE: "compare",
                    DETAILS_TYPE_LINK: "link",
                    DETAILS_TYPE_BTN: "button",
                    DETAILS_PAGE_TYPE_BTN: "details_page_button",
                    REDIR_LEAD: "redir_lead"
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/GAQHelper", ["require", "underscore"], function(e) {
                var n, i;
                return i = e("underscore"), n = function() {
                    function e(e) {
                        this.options = null != e ? e : {}, this.conversionTracking = t(this.conversionTracking, this), this.addConversionTracking = t(this.addConversionTracking, this), this.digitalTracking = t(this.digitalTracking, this), this.distributionTracking = t(this.distributionTracking, this), this.defaultOptions = t(this.defaultOptions, this), i.defaults(this.options, this.defaultOptions()), this.resetLegacyEventLabel()
                    }
                    return e.prototype.defaultOptions = function() {
                        var t;
                        return t = {
                            isSimilarProductsLead: !1,
                            isTableSnapshot: !1
                        }
                    }, e.prototype.resetLegacyEventLabel = function() {
                        return this.legacyEventLabelArray = [], this.legacyEventLabelString = ""
                    }, e.prototype.configureLegacyEventLabel = function(t) {
                        return this.legacyEventLabelArray = t, this.processEventLabel(this.legacyEventLabelArray)
                    }, e.prototype.processEventLabel = function(t) {
                        var e, n, r;
                        for (this.legacyEventLabelString = "", n = 0, r = t.length; r > n; n++) e = t[n], this.legacyEventLabelString += e !== i.last(t) ? e + " | " : e;
                        return this.legacyEventLabelString = this.removeQuotes(this.legacyEventLabelString)
                    }, e.prototype.generateGaqTrackerEvents = function(t, e, n, r, o, s, a, l, c) {
                        var u, d, p, h, f, m;
                        return null == t && (t = null), null == o && (o = null), null == s && (s = null), null == a && (a = null), null == l && (l = !1), null == c && (c = {}), u = {
                            unmonetisedOverride: !1
                        }, i.defaults(c, u), i.each(arguments, function(t) {
                            return function(e, n, i) {
                                return "string" == typeof e ? i[n] = t.removeQuotes(e) : void 0
                            }
                        }(this)), d = "", h = "", f = canstar_widget.faceted_search.profile, m = canstar_widget.faceted_search.table, d += null === r || void 0 === r || "" === r ? "_caq.push(['_track_event', 'search:table:leads', { category: '" + m + "', company: '" + e + "', product_name: '" + n + "', profile: '" + f + "' } ]);" : "_caq.push(['_track_event', 'search:table:leads', { category: '" + m + "', company: '" + e + "', product_name: '" + n + "', profile: '" + f + "', prod_id: '" + r + "' } ]);", d += this.distributionTracking(s, e, n), null != t ? null != t.SUPP ? (p = t.SUPP.lead_url.length > 0, p && !c.unmonetisedOverride && (d += this.addConversionTracking(t, l, f))) : "undefined" != typeof console && null !== console && console.error("row.SUPP tag sent to generateGaqTrackerEvents undefined - check arguments") : "undefined" != typeof console && null !== console && console.error("row is undefined"), d += this.digitalTracking(a, o, r, n), this.options.isSimilarProductsLead && (d += this.digitalTracking(a, "Details Page Similar Product", r, n)), d += "var img=document.createElement('img');img.src='https://traffic.outbrain.com/network/trackpxl?advid=33768&action=view';"
                    }, e.prototype.removeQuotes = function(t) {
                        return "string" != typeof t ? ("undefined" != typeof console && null !== console && console.error("" + t + " should be a string"), t) : t.replace(/'|"/, "")
                    }, e.prototype.distributionTracking = function(t, e, n) {
                        var i, r, o;
                        return r = "", o = " | Brand Clicks", i = n, this.options.isTableSnapshot && (i += " | Table Embed"), null !== t && (r = "_gaq.push(['_trackEvent', '" + (t + o) + "', '" + e + "', '" + i + "']);"), r
                    }, e.prototype.digitalTracking = function(t, e, n, i) {
                        var r, o;
                        return o = "", null !== t && null !== e && (0 === this.legacyEventLabelString.length ? (r = null === n ? i : "" + n + " | " + i, o = isProductLink ? "_gaq.push(['_trackEvent', '" + t + "', '" + e + "', '" + r + " | Prod Link']);" : "_gaq.push(['_trackEvent', '" + t + "', '" + e + "', '" + r + "']);") : o = "_gaq.push(['_trackEvent', '" + t + "', '" + e + "', '" + this.legacyEventLabelString + "']);"), o
                    }, e.prototype.addConversionTracking = function(t, e, n) {
                        var i, r, o, s, a, l, c, u;
                        return i = null, -1 === t["Product Name"].indexOf("</a>") && (i = t["Product Name"]), this.conversionTracking(("undefined" != typeof canstar_widget && null !== canstar_widget && null != (r = canstar_widget.faceted_search) ? r.category : void 0) || "Category unknown", i || (null != (o = t.SUPP) ? o.PRODUCT_NAME : void 0), (null != (s = t.SUPP) ? s[null != (a = t.SUPP) ? a.id_field : void 0] : void 0) || t.Apply, (null != (l = t.SUPP) ? l.CO_CODE : void 0) || t.Company, (null != (c = t.SUPP) ? c.COMPANY_NAME : void 0) || (null != (u = t.SUPP) ? u.COMPANY : void 0) || t.Company, e, n)
                    }, e.prototype.conversionTracking = function(t, e, n, i, r, o, s) {
                        var a, l;
                        return a = this.options.isTableSnapshot ? " | Table Embed" : o ? "| Prod Link" : "| Proceed button", s = s ? "| " + s : "", null != t ? (l = "_caq.push(['_track_event', 'Conversion tracking', {} ], '" + i + "', '" + n + "');", l += "_gaq.push(['_trackEvent', 'Conversions | " + t + " " + s + "', '" + r + " | Conversions', '" + (e + a) + "']);") : "undefined" != typeof console && null !== console ? console.error("Vertical is not defined") : void 0
                    }, e
                }()
            })
        }.call(this), define("text", ["module"], function(t) {
            var e, n, i, r, o, s = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
                a = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
                l = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
                c = "undefined" != typeof location && location.href,
                u = c && location.protocol && location.protocol.replace(/\:/, ""),
                d = c && location.hostname,
                p = c && (location.port || void 0),
                h = {},
                f = t.config && t.config() || {};
            return e = {
                version: "2.0.12",
                strip: function(t) {
                    if (t) {
                        t = t.replace(a, "");
                        var e = t.match(l);
                        e && (t = e[1])
                    } else t = "";
                    return t
                },
                jsEscape: function(t) {
                    return t.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
                },
                createXhr: f.createXhr || function() {
                    var t, e, n;
                    if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest;
                    if ("undefined" != typeof ActiveXObject)
                        for (e = 0; 3 > e; e += 1) {
                            n = s[e];
                            try {
                                t = new ActiveXObject(n)
                            } catch (i) {}
                            if (t) {
                                s = [n];
                                break
                            }
                        }
                    return t
                },
                parseName: function(t) {
                    var e, n, i, r = !1,
                        o = t.indexOf("."),
                        s = 0 === t.indexOf("./") || 0 === t.indexOf("../");
                    return -1 !== o && (!s || o > 1) ? (e = t.substring(0, o), n = t.substring(o + 1, t.length)) : e = t, i = n || e, o = i.indexOf("!"), -1 !== o && (r = "strip" === i.substring(o + 1), i = i.substring(0, o), n ? n = i : e = i), {
                        moduleName: e,
                        ext: n,
                        strip: r
                    }
                },
                xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,
                useXhr: function(t, n, i, r) {
                    var o, s, a, l = e.xdRegExp.exec(t);
                    return l ? (o = l[2], s = l[3], s = s.split(":"), a = s[1], s = s[0], !(o && o !== n || s && s.toLowerCase() !== i.toLowerCase() || (a || s) && a !== r)) : !0
                },
                finishLoad: function(t, n, i, r) {
                    i = n ? e.strip(i) : i, f.isBuild && (h[t] = i), r(i)
                },
                load: function(t, n, i, r) {
                    if (r && r.isBuild && !r.inlineText) return void i();
                    f.isBuild = r && r.isBuild;
                    var o = e.parseName(t),
                        s = o.moduleName + (o.ext ? "." + o.ext : ""),
                        a = n.toUrl(s),
                        l = f.useXhr || e.useXhr;
                    return 0 === a.indexOf("empty:") ? void i() : void(!c || l(a, u, d, p) ? e.get(a, function(n) {
                        e.finishLoad(t, o.strip, n, i)
                    }, function(t) {
                        i.error && i.error(t)
                    }) : n([s], function(t) {
                        e.finishLoad(o.moduleName + "." + o.ext, o.strip, t, i)
                    }))
                },
                write: function(t, n, i) {
                    if (h.hasOwnProperty(n)) {
                        var r = e.jsEscape(h[n]);
                        i.asModule(t + "!" + n, "define(function () { return '" + r + "';});\n")
                    }
                },
                writeFile: function(t, n, i, r, o) {
                    var s = e.parseName(n),
                        a = s.ext ? "." + s.ext : "",
                        l = s.moduleName + a,
                        c = i.toUrl(s.moduleName + a) + ".js";
                    e.load(l, i, function() {
                        var n = function(t) {
                            return r(c, t)
                        };
                        n.asModule = function(t, e) {
                            return r.asModule(t, c, e)
                        }, e.write(t, l, n, o)
                    }, o)
                }
            }, "node" === f.env || !f.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] ? (n = require.nodeRequire("fs"), e.get = function(t, e, i) {
                try {
                    var r = n.readFileSync(t, "utf8");
                    0 === r.indexOf("") && (r = r.substring(1)), e(r)
                } catch (o) {
                    i && i(o)
                }
            }) : "xhr" === f.env || !f.env && e.createXhr() ? e.get = function(t, n, i, r) {
                var o, s = e.createXhr();
                if (s.open("GET", t, !0), r)
                    for (o in r) r.hasOwnProperty(o) && s.setRequestHeader(o.toLowerCase(), r[o]);
                f.onXhr && f.onXhr(s, t), s.onreadystatechange = function() {
                    var e, r;
                    4 === s.readyState && (e = s.status || 0, e > 399 && 600 > e ? (r = new Error(t + " HTTP status: " + e), r.xhr = s, i && i(r)) : n(s.responseText), f.onXhrComplete && f.onXhrComplete(s, t))
                }, s.send(null)
            } : "rhino" === f.env || !f.env && "undefined" != typeof Packages && "undefined" != typeof java ? e.get = function(t, e) {
                var n, i, r = "utf-8",
                    o = new java.io.File(t),
                    s = java.lang.System.getProperty("line.separator"),
                    a = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o), r)),
                    l = "";
                try {
                    for (n = new java.lang.StringBuffer, i = a.readLine(), i && i.length() && 65279 === i.charAt(0) && (i = i.substring(1)), null !== i && n.append(i); null !== (i = a.readLine());) n.append(s), n.append(i);
                    l = String(n.toString())
                } finally {
                    a.close()
                }
                e(l)
            } : ("xpconnect" === f.env || !f.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (i = Components.classes, r = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), o = "@mozilla.org/windows-registry-key;1" in i, e.get = function(t, e) {
                var n, s, a, l = {};
                o && (t = t.replace(/\//g, "\\")), a = new FileUtils.File(t);
                try {
                    n = i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream), n.init(a, 1, 0, !1), s = i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream), s.init(n, "utf-8", n.available(), r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), s.readString(n.available(), l), s.close(), n.close(), e(l.value)
                } catch (c) {
                    throw new Error((a && a.path || "") + ": " + c)
                }
            }), e
        }), define("json", ["text"], function(text) {
            function cacheBust(t) {
                return t = t.replace(CACHE_BUST_FLAG, ""), t += t.indexOf("?") < 0 ? "?" : "&", t + CACHE_BUST_QUERY_PARAM + "=" + Math.round(2147483647 * Math.random())
            }
            var CACHE_BUST_QUERY_PARAM = "bust",
                CACHE_BUST_FLAG = "!bust",
                jsonParse = "undefined" != typeof JSON && "function" == typeof JSON.parse ? JSON.parse : function(val) {
                    return eval("(" + val + ")")
                },
                buildMap = {};
            return {
                load: function(t, e, n, i) {
                    !i.isBuild || i.inlineJSON !== !1 && -1 === t.indexOf(CACHE_BUST_QUERY_PARAM + "=") ? text.get(e.toUrl(t), function(e) {
                        i.isBuild ? (buildMap[t] = e, n(e)) : n(jsonParse(e))
                    }, n.error, {
                        accept: "application/json"
                    }) : n(null)
                },
                normalize: function(t) {
                    return -1 === t.indexOf(CACHE_BUST_FLAG) ? t : cacheBust(t)
                },
                write: function(t, e, n) {
                    if (e in buildMap) {
                        var i = buildMap[e];
                        n('define("' + t + "!" + e + '", function(){ return ' + i + ";});\n")
                    }
                }
            }
        }), define("json!config/lead_config.json", function() {
            return {
                advisedlife: {
                    lifebroker: {
                        companies: "all",
                        exclusions: [{
                            company: "CV",
                            url: "http://www.clearview.com.au/page/life-insurance/life-insurance-through-a-financial-adviser"
                        }, {
                            company: "ASG",
                            url: "http://www.asgard.com.au/"
                        }]
                    }
                },
                ws_hlth_fs: {
                    medibank: {
                        companies: ["MBP"]
                    }
                }
            }
        }), define("json!config/handoff_config.json", function() {
            return {
                canstar: {
                    bluemobile: {
                        handoffs: {
                            "http://canstarblue.whistleout.com.au": "whistleout",
                            "https://canstarblue.whistleout.com.au": "whistleout"
                        }
                    }
                }
            }
        }), define("text-cns!libraries/templates/tmpl_proceed_btn.html", [], function() {
            return '<a <% if (typeof(onhover) !== "undefined") { %> title="<%=onhover %>" <% } %> class=\'<% if ( button ) { %> btn btn-sm btn-primary <% } %> proceed\' target=\'_blank\' onmousedown="<%= onmousedown %>" href=\'<%= href %>\'>\n    <% if (text != \'undefined\') { %>\n        <%= text %>\n    <% } else { %>\n        <span class="hidden-xs hidden-sm">Proceed</span><i class="hidden-md hidden-lg fa fa-chevron-right"></i>\n    <% } %>\n</a>\n'
        }), define("text-cns!libraries/templates/tmpl_compare_checkbox.html", [], function() {
            return "<label class=\"tooltip-wrapper control checkbox\">\r\n    <input class=\"compare form-control\" <%= related_product %> data-company = '<%= company_name %>' data-product='<%= product_name %>' data-prod-name='<%= company_product %>' type='checkbox' value='<%= id %>' />\r\n    <span class=\"control-indicator\"></span>\r\n</label>\r\n"
        }), define("text-cns!libraries/templates/tmpl_gold_lead_proceed_btn.html", [], function() {
            return '<a rel="nofollow"\n   target="_blank"\n   href="<%= url %>"\n   class="<%= classes %>"\n   onmousedown="<%= gaTrackerEvents %>">\n    <span class="hidden-xs hidden-sm"><%= LEAD_TEXT %></span>\n    <i class="hidden-md hidden-lg fa fa-chevron-right"></i>\n</a>\n'
        }), define("text-cns!libraries/templates/tmpl_more_details_linkto_link.html", [], function() {
            return '<div>\n    <a rel="nofollow"\n       target="_blank"\n       href="<%= url %>"\n       class="<%= classes %>"\n       onmousedown="<%= gaTrackerEvents %>">\n         <div class="hidden-xs hidden-sm"><%= LEAD_TEXT %></div>\n         <i class="hidden-md hidden-lg fa fa-chevron-right"></i>\n    </a>\n    <div class="hidden-xs hidden-sm"><small class="small-text"><a href=\'<%= url_alt %>\' target="_blank" onmousedown="<%= gaTrackerEventsDetails %>">More Details</a></small></div>\n</div>\n'
        }), define("text-cns!libraries/templates/tmpl_more_details_only_link.html", [], function() {
            return '<div class="small-text">\n    <small class="small-text"><a href=\'<%= url_alt %>\' target="_blank" onmousedown="<%= gaTrackerEventsDetails %>">More Details</a></small>\n    <i class="hidden-md hidden-lg fa fa-chevron-right"></i>\n</div>\n'
        }), define("text-cns!libraries/templates/tmpl_ad_slot.html", [], function() {
            return "<div class=\"ads <%= adClass %>\">\n    <div id='<%= name %>' class=\"center\">\n        <% if( canstar_widget.faceted_search.distributor === 'canstar' ) { %>\n            <script type='text/javascript'>\n                if (typeof googletag !== 'undefined') {\n                    googletag.cmd.push(function() { googletag.display('<%= name %>'); });\n                }\n            </script>\n        <% } %>\n    </div>\n</div>\n"
        }), define("text-cns!libraries/templates/tmpl_proceed_linkto_btn.html", [], function() {
            return '<div>\n    <a rel="nofollow"\n       target="_blank"\n       href="<%= url %>"\n       class="<%= classes %>"\n       onmousedown="<%= gaTrackerEvents %>">\n        <div class="hidden-xs hidden-sm"><%= LEAD_TEXT %></div>\n        <i class="hidden-md hidden-lg fa fa-chevron-right"></i>\n    </a>\n    <div class="hidden-xs hidden-sm"><small class="small-text">on <%= link_location %> website</small></div>\n</div>\n'
        }), define("text-cns!libraries/templates/tmpl_proceed_linkto_btn_details.html", [], function() {
            return '<div>\n    <a rel="nofollow"\n       target="_blank"\n       href="<%= url %>"\n       class="<%= classes %>"\n       onmousedown="<%= gaTrackerEvents %>">\n        <div><%= LEAD_TEXT %></div>\n    </a>\n    <div class="caption-text">\n      <small class="small-text">on <%= link_location %> website</small>\n    </div>\n</div>\n'
        }), define("text-cns!libraries/templates/tmpl_tooltip_text.html", [], function() {
            return "<div class='mobile-data' <%= sortVal %>>\n    <% if (hover) { %>\n    <div class='table-tooltip' <% if(hover_attrs){ print(hover_attrs); }%>>\n        <span class='table-tooltip-text'><%= hover %></span>\n    <% } %>\n        <span class='large-text'><%= text %></span>\n        <div class='subtext'>\n            <span><%= subtext %></span>\n        </div>\n    <% if (hover) { %>\n    </div>\n    <% } %>\n</div>\n"
        }), define("text-cns!libraries/templates/tmpl_blue_sr.html", [], function() {
            return "<div value='<%= starVal %>'>\r\n    <div class='product product-name hidden-sm hidden-md hidden-lg'>\r\n        <%= prodLink %>\r\n    </div>\r\n    <div class='hidden-sm hidden-md hidden-lg'>\r\n        <%= companyLogo %>\r\n    </div>\r\n    <%= stars %>\r\n</div>"
        }), define("text-cns!libraries/templates/tmpl_blue_sr_intable.html", [], function() {
            return "<div value='<%= starVal %>'>\n    <div class='product product-name hidden-sm hidden-md hidden-lg'>\n        <%= prodLink %>\n    </div>\n    <div class='hidden-sm hidden-md hidden-lg'>\n        <%= companyLogo %>\n    </div>\n    <%= stars %>\n</div>\n"
        }), define("text-cns!libraries/templates/tmpl_inclusion_score.html", [], function() {
            return "<div value='<%= scoreVal %>'>\r\n    <img src='<%= scoreImg %>'></img>\r\n    <div class='subtext'>\r\n        <span><%= subtext %></span>\r\n    </div>\r\n</div>\r\n"
        }), define("text-cns!libraries/templates/tmpl_blue_more_details.html", [], function() {
            return '<a value=\'<%=id%>\' class=\'toggle-drawer\' data-open="false" data-text-open="Show More Information<i class=\'fa fa-arrow-down\'></i>" data-text-close="Show Less Information <i class=\'fa fa-arrow-up\'></i>"><span class="changingtext">Show More Information </span><i class=\'fa fa-arrow-down\'></i></a>\n<div value=\'<%=id%>\' class=\'details-drawer\' data-openheight="250">\n<div class="details-col">\n<% _.each({ discounts: discounts, incentives: incentives, others: others }, function(discounts,j) { %>\n  <% if(discounts.count > 0) { %>\n      <div class="details-block others">\n        <b><%=discounts.short_title%></b> <br/>\n        <%  _.each(discounts, function(entries,type){ %>\n          <%  if(type !==\'count\' && type !== \'short_title\') { %>\n            <% if(type != \'null\' && type != \'N/A\' && false ){ %>\n              <span class="details-type-heading"><%=type%></span>\n            <% } %>\n            <% _.each( entries, function(e,i){ %>\n              <div class="details-entry <%=j%>-entry">\n                <% _.each(e.icons, function(icon, i){ %>\n                  <span class="details-item <%=j%>-<%=icon%>" data-key="<%=icon%>" data-value="true">&nbsp;</span>\n                <% }); %>\n                <% if(e.period != \'null\' && e.period != \'N/A\' && false ){ %>\n                  <span class="details-item <%=j%>-period" data-key="period" data-value="<%=e.period%>"><%=e.period %></span>\n                <% } %>\n                <% if(e.amount != \'null\' && e.amount != \'N/A\' && !isNaN(e.amount)){ %>\n                 <span class="details-item <%=j%>-amount" data-key="amount" data-value="<%=e.amount%>"><%=e.amount %>%</span>\n                <% } %>\n                <% if(e.type != \'null\' && e.type != \'N/A\' ){ %>\n                  <span class="details-item <%=j%>-type" data-key="type" data-value="<%=e.type%>"> of <%=e.type %></span>\n                <% } %>\n                <% if(e.incentive != \'null\' && e.incentive != \'N/A\' ){ %>\n                  <span class="details-item <%=j%>-incentive" data-key="incentive" data-value="<%=e.incentive%>" title="<%=e.incentive%>"><%=e.incentive %></span>\n                <% } %>\n                <% if(e.condition != \'null\' && e.condition != \'N/A\' ){ %>\n                  <span class="details-item <%=j%>-condition" data-key="condition" data-value="<%=e.condition%>" title="<%=e.condition%>"><%=e.condition %></span>\n                <% } %>\n              </div>\n            <% }); %>\n          <% } %>\n        <% }); %>\n      </div>\n  <% } %>\n<% }); %>\n</div>\n<% if(tariffs.length >0) { %>\n    <div class="details-block tariffs">\n        <b>Tariff Information</b><br/>\n\n            <div class="details-entry tariff-entry supply-charge">\n                <div class="tariff-name supply-charge">Daily supply charge</div>\n                <div class="tariff-charge supply-charge"><%=parseFloat(supplyCharge).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>day</sub></div>\n            </div>\n        <% _.each(tariffs,function(tariff){\n            tariffName = tariff.TARIFF_NAME;\n            className = tariffName.toLowerCase().replace(/\\s+/g,\'-\');\n            tariffCharge = parseFloat(tariff.USAGPERICOST).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>") ;\n            %>\n\n            <div class="details-entry tariff-entry <%=className%>">\n                <div class="tariff-name <%=className%>"><%=tariffName%></div>\n                <div class="tariff-charge <%=className%>"><%=tariffCharge%> <sup>&#162;</sup>/<sub>kWh</sub></div>\n            </div>\n        <%  }); %>\n    </div>\n<% } %>\n<% if(fees.length > 0){ %>\n    <div class="details-block fees">\n        <b>Fees</b><br/>\n            <%\n            _.each(fees, function(fee, name){\n                %>\n                <div class="details-entry fees-entry <%=fee.name.toLowerCase().replace(/\\s+/g, \'-\') %>" value="<%=fee.value%>">\n                    <div class="fees-name"><%=fee.name%></div>\n                    <div class="fees-charge">\n                        <% if(fee.units == "Dollars"){ %>\n                            <sup>$</sup> <%=fee.value.replace(\'$\',\'\')%>\n                        <% } else if(fee.units == "Percentage") { %>\n                            <%=fee.value.replace("%", "<sub>%</sub>") %>\n                        <% } else { %>\n                            <%=fee.value%>\n                        <% } %>\n                    </div>\n                </div>\n                <%\n\n            });\n            %>\n    </div>\n<% } %>\n<% if(solaroptions.length > 0){ %>\n    <div class="details-block solaroptions">\n        <b>Solar Feed-in Tariffs</b><br/>\n            <%\n            _.each(solaroptions, function(solaroption, name){\n                %>\n                <div class="details-entry solaroptions-entry" data-value="<%=solaroption.SOLARELTFITT%>">\n                    <div class="solaroptions-name retailer-fit">\n                        Retailer\n                    </div>\n                    <div class="solaroptions-charge" data-value="<%=solaroption.SOLARETLFITT%>">\n                        <%=parseFloat(solaroption.SOLARETLFITT).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>kWh</sub>\n                    </div>\n                </div>\n                <div class="details-entry solaroptions-entry" data-value="<%=solaroption.SOLAGOVNOPT1%>">\n                    <div class="solaroptions-name govt-option-1" data-value="<%=solaroption.SOLAGOVNOPT1%>"> Government Option 1</div>\n                    <div class="solaroptions-charge" data-value="<%=solaroption.SOLAGOVNOPT1%>"><%=parseFloat(solaroption.SOLAGOVNOPT1).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>kWh</sub></div>\n                </div>\n                <div class="details-entry solaroptions-entry" data-value="<%=solaroption.SOLAGOVNOPT2%>">\n                    <div class="solaroptions-name govt-option-2" data-value="<%=solaroption.SOLAGOVNOPT2%>"> Government Option 2</div>\n                    <div class="solaroptions-charge" data-value="<%=solaroption.SOLAGOVNOPT2%>"><%=parseFloat(solaroption.SOLAGOVNOPT2).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>kWh</sub></div>\n                </div>\n                <%\n\n            });\n            %>\n    </div>\n<% } %>\n<% if(controlledloads.length > 0 ){ %>\n    <div class="details-block controlledloads">\n        <b>Controlled Load</b><br/>\n\n            <%\n            _.each(controlledloads, function(load, name){\n                %>\n                <div class="details-entry controlledloads-entry">\n                    <div class="controlledloads-name">\n                        <%=load.TARIFF_NAME%>                          </div>\n                    <div class="controlledloads-charge">\n                        <%=parseFloat(load.CONTSUPPPRIC).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>day</sub>\n                        <br/>\n                        <%=parseFloat(load.CONTCONTPRIC).toFixed(2).replace(/\\.(\\d+)$/g, ".<sub>$1</sub>")%> <sup>&#162;</sup>/<sub>kWh</sub></div>\n                </div>\n                <%\n\n            });\n            %>\n    </div>\n<% } %>\n</div>\n'
        }),
        function() {
            define("libraries/templates", ["require", "underscore", "text-cns!libraries/templates/tmpl_proceed_btn.html", "text-cns!libraries/templates/tmpl_compare_checkbox.html", "text-cns!libraries/templates/tmpl_gold_lead_proceed_btn.html", "text-cns!libraries/templates/tmpl_more_details_linkto_link.html", "text-cns!libraries/templates/tmpl_more_details_only_link.html", "text-cns!libraries/templates/tmpl_ad_slot.html", "text-cns!libraries/templates/tmpl_proceed_linkto_btn.html", "text-cns!libraries/templates/tmpl_proceed_linkto_btn_details.html", "text-cns!libraries/templates/tmpl_tooltip_text.html", "text-cns!libraries/templates/tmpl_blue_sr.html", "text-cns!libraries/templates/tmpl_blue_sr_intable.html", "text-cns!libraries/templates/tmpl_inclusion_score.html", "text-cns!libraries/templates/tmpl_blue_more_details.html"], function(t) {
                var e, n, i, r, o, s, a, l, c, u, d, p, h, f, m;
                return m = t("underscore"), h = t("text-cns!libraries/templates/tmpl_proceed_btn.html"), o = t("text-cns!libraries/templates/tmpl_compare_checkbox.html"), a = t("text-cns!libraries/templates/tmpl_gold_lead_proceed_btn.html"), p = t("text-cns!libraries/templates/tmpl_more_details_linkto_link.html"), d = t("text-cns!libraries/templates/tmpl_more_details_only_link.html"), n = t("text-cns!libraries/templates/tmpl_ad_slot.html"), c = t("text-cns!libraries/templates/tmpl_proceed_linkto_btn.html"), u = t("text-cns!libraries/templates/tmpl_proceed_linkto_btn_details.html"), f = t("text-cns!libraries/templates/tmpl_tooltip_text.html"), i = t("text-cns!libraries/templates/tmpl_blue_sr.html"), r = t("text-cns!libraries/templates/tmpl_blue_sr_intable.html"), l = t("text-cns!libraries/templates/tmpl_inclusion_score.html"), s = t("text-cns!libraries/templates/tmpl_blue_more_details.html"), e = function() {
                    function t() {}
                    return t.prototype.ProceedButton = m.template(h), t.prototype.CompareCheckbox = m.template(o), t.prototype.GoldLeadProceedButton = m.template(a), t.prototype.LinkToProceedButton = m.template(c), t.prototype.LinkToProceedButtonDetails = m.template(u), t.prototype.LinkToMoredetailsButton = m.template(p), t.prototype.LinkToMoredetailsonlyButton = m.template(d), t.prototype.TooltipText = m.template(f), t.prototype.BlueSR = m.template(i), t.prototype.BlueSRInTable = m.template(r), t.prototype.InclusionScore = m.template(l), t.prototype.DetailsDrawer = m.template(s), t.prototype.AdSlot = m.template(n), t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/ABTestController", ["require", "canstar_widget", "libraries/Constants"], function(e) {
                var n, i, r;
                return r = e("canstar_widget"), i = e("libraries/Constants"), n = function() {
                    function e() {
                        this.linkToDetails = t(this.linkToDetails, this), this.showSelectorModal = t(this.showSelectorModal, this)
                    }
                    return e.prototype.showSelectorModal = function() {
                        var t;
                        return t = !1, "mortgages" === r.faceted_search.table && r.faceted_search.disable_selector_modal !== !0 && 0 === window.location.search.length && (t = !0), t
                    }, e.prototype.linkToDetails = function(t) {
                        var e, n;
                        return null == t && (t = i.DETAILS_TYPE_LINK), e = !1, n = r.faceted_search.table, ("creditcards" === n || "petinsurance" === n) && 1 === r.abVariant && t === i.DETAILS_TYPE_LINK && (e = !0), e
                    }, e
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Leads", ["require", "jquery", "underscore", "canstar_widget", "libraries/Canstar", "libraries/Constants", "libraries/GAQHelper", "json!config/lead_config.json", "json!config/handoff_config.json", "libraries/templates", "libraries/ABTestController"], function(e) {
                var n, i, r, o, s, a, l, c, u, d, p;
                return n = e("jquery"), p = e("underscore"), d = e("canstar_widget"), r = e("libraries/Canstar"), o = e("libraries/Constants"), s = e("libraries/GAQHelper"), l = e("json!config/lead_config.json"), a = e("json!config/handoff_config.json"), u = e("libraries/templates"), i = e("libraries/ABTestController"), c = function() {
                    function e(e) {
                        this.options = null != e ? e : {}, this.generateLoansProceedLink = t(this.generateLoansProceedLink, this), this._generateMobileWOGATracker = t(this._generateMobileWOGATracker, this), this.generateLifeLink = t(this.generateLifeLink, this), this.addSimilarProducts = t(this.addSimilarProducts, this), this.shouldAddSimilarProducts = t(this.shouldAddSimilarProducts, this), this.isSimilarProductsLead = t(this.isSimilarProductsLead, this), this.getLeadThemeName = t(this.getLeadThemeName, this), this.getExclusionUrl = t(this.getExclusionUrl, this), this.getLeadName = t(this.getLeadName, this), this.isRedirLead = t(this.isRedirLead, this), this.getProceedLinkText = t(this.getProceedLinkText, this), this.getVariantMapDetails = t(this.getVariantMapDetails, this), this.gaqHelper = this.options.gaqHelper, this.gaqHelper || (this.gaqHelper = new s, "undefined" != typeof console && null !== console && console.error("Leads constructed without gaqHelper"))
                    }
                    var c;
                    return e.prototype.templates = {
                        gold_lead_proceed_btn: u.prototype.GoldLeadProceedButton,
                        linkto_proceed_btn: u.prototype.LinkToProceedButton,
                        linkto_proceed_btn_details: u.prototype.LinkToProceedButtonDetails,
                        moredetails_proceed_btn: u.prototype.LinkToMoredetailsButton,
                        more_details_only_link: u.prototype.LinkToMoredetailsonlyButton
                    }, e.prototype.collection = null != d && null != (c = d.faceted_search) ? c.table : void 0, e.prototype.proceed_link_text = '<span class="hidden-xs hidden-sm">Proceed</span><i class="hidden-md hidden-lg fa fa-chevron-right"></i>', e.prototype.proceed_classes = "proceed btn btn-sm btn-primary", e.prototype.details_url = d.faceted_search.details_url, e.prototype.hlauLeadCompanyCoCodes = ["afin", "riwa", "cit", "fmac", "wahl", "lib", "mrm", "hsl", "pepp", "rhc", "rock"], e.prototype.getVariantMapDetails = function(t, e) {
                        var n, i, r, o, s, a, l, c, u, p, h, f, m;
                        if (null != (null != (h = d.faceted_search) ? h.details_variant : void 0) && (a = d.faceted_search.details_variant, null != window.cxApi && a === window.cxApi.NOT_PARTICIPATING && (a = 0)), r = (null != (f = e.SUPP.lead_url) ? f.length : void 0) > 0, c = null != d && null != (m = d.faceted_search) ? m.variant_map : void 0, null != c)
                            for (i = c[0], u = 0, p = c.length; p > u; u++) l = c[u], l.id === a && (i = l);
                        return null != i ? (s = r ? "monetised" : "non_monetised", n = i[s], o = {
                            template: this.templates[n.template],
                            href_data: {
                                classes: t.classes + " ge-monetisation-btn-variant-1 " + n.classes,
                                LEAD_TEXT: 0 === a ? this.getProceedLinkText(n.lead_text) : n.lead_text,
                                link_location: null != e.SUPP[n.link_location] ? "" + e.SUPP[n.link_location] + "'s" : n.link_location,
                                monetised_detail: "moredetails_proceed_btn" === n.template ? !0 : "more_details_only_link" === n.template ? !0 : !1
                            }
                        }) : (t.classes += " btn-primary", t.LEAD_TEXT = "Proceed", o = {
                            template: this.templates.gold_lead_proceed_btn,
                            href_data: t
                        }), o
                    }, e.prototype.getProceedLinkText = function(t) {
                        return "<span class='hidden-xs hidden-sm'>" + t + "</span><i class='hidden-md hidden-lg fa fa-chevron-right'></i>"
                    }, e.prototype.isRedirLead = function(t) {
                        return null != t.SUPP.lead_url && t.SUPP.lead_url === o.REDIR_LEAD
                    }, e.prototype.getLeadName = function(t) {
                        var e, n, i, r;
                        r = l[this.collection];
                        for (n in r) {
                            if (i = r[n], e = p.pluck(i.exclusions, "company"), i.companies && p.indexOf(i.companies, t) > -1) return n;
                            if ("all" === i.companies && -1 === p.indexOf(e, t)) return n
                        }
                        return !1
                    }, e.prototype.getExclusionUrl = function(t) {
                        var e, n, i, r, o, s, a;
                        s = l[this.collection];
                        for (n in s)
                            for (i = s[n], a = i.exclusions, r = 0, o = a.length; o > r; r++)
                                if (e = a[r], e.company === t) return e.url;
                        return !1
                    }, e.prototype.useModal = function(t) {
                        var e;
                        return e = l[this.collection][t], e.isModal === !1 || r.prototype.onMobile() && "lifebroker" !== t ? !1 : !0
                    }, e.prototype.getLeadThemeName = function(t) {
                        var e, n, i;
                        return e = t, (null != (n = d.faceted_search) && null != (i = n.variant) ? i.number : void 0) && e === d.faceted_search.variant.theme && (e += "_" + d.faceted_search.variant.number), e
                    }, e.prototype.isSimilarProductsLead = function(t, e) {
                        return t === o.DETAILS_PAGE && e
                    }, e.prototype.shouldAddSimilarProducts = function(t, e) {
                        return t === o.TABLE_PAGE && e
                    }, e.prototype.addSimilarProducts = function(t, e, i) {
                        var r, o, s;
                        return null == e || null == i ? ("undefined" != typeof console && null !== console && console.error("productsCollection/productId not defined"), t) : (s = e.getSimilarProducts(i), r = p.pluck(s, "id"), o = n.param({
                            similar_products: r
                        }), "" !== o && (t = "" + t + "&" + o), t)
                    }, e.prototype.generateTrackedLink = function(t, e, n, i, r, o, s, a, l) {
                        var c, u, h, f, m, g, v, _, y;
                        return s === !0 ? (h = this.prod_link_classes, v = t, f = " | Prod Link") : (h = this.proceed_classes, v = this.proceed_link_text, f = ""), u = d.faceted_search.category, u || (u = d.faceted_search.table), c = d.base_url, y = this.generateDetailsURL(c, n, i, a, l), y = this.replaceLeadUrl(y, e, l), g = {
                            EVENT_LABEL: "" + u + " | " + r + " | " + o + f,
                            RC_URL: t,
                            LEAD_TEXT: v,
                            url: y,
                            classes: h
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([r, "" + o + f]), m = this.gaqHelper.generateGaqTrackerEvents(e, r, o, n, "" + u + " SR", u, "Leads", s), _ = p.template('<a rel="nofollow" onmousedown="' + m + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), t = _(g)
                    }, e.prototype.generateLifeLink = function(t, e) {
                        var n, i, o, s, a, l, c, u, h, f, m, g;
                        return null == e && (e = !1), g = this.replaceLeadUrl("#", t), n = d.faceted_search.profile || ("undefined" != typeof console && null !== console ? console.error("Missing benefit type") : void 0), o = t.SUPP.COMPANY_NAME || ("undefined" != typeof console && null !== console ? console.error("Missing company") : void 0), f = t.SUPP.PRODUCT_NAME || ("undefined" != typeof console && null !== console ? console.error("Missing product") : void 0), c = e ? "| Prod Link" : "", l = r.prototype.GATrackEvent("Leads", "Life Insurance SR", "Life " + n + "  | " + o + " | " + f + " " + c), h = e ? f : this.proceed_link_text, s = e ? "prod_link" : "proceed btn btn-sm btn-primary", s += " lead lead-page", i = d.faceted_search.category, i || (i = d.faceted_search.table), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Life", o, f]), a = this.gaqHelper.generateGaqTrackerEvents(t, o, "" + n + " | " + f, t.SUPP.PRODUCT_ID, "" + i + " | Life Insurance SR", "Advised Life", "Leads", e), m = p.template('<a rel="nofollow" onmousedown="' + a + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), u = '<a onmousedown="' + a + "\" href='" + g + "' target='_blank' class='" + s + "'>" + h + "</a>"
                    }, e.prototype.generateSuperLink = function(t, n, i, r, s, a, l, c, u, d, h) {
                        var f, m, g, v, _, y, b, w;
                        return null == r && (r = "Proceed"), null == s && (s = !1), null == h && (h = o.DETAILS_TYPE_LINK), g = (null != (w = d.SUPP.lead_url) ? w.length : void 0) > 0, f = s ? "prod_link" : "proceed btn btn-sm", y = this.generateSuperURL(t, n, i, u), y = e.prototype.replaceLeadUrl(y, d), m = {
                            EVENT_LABEL: "Super | " + a + " | " + l + " " + c,
                            RC_URL: b,
                            LEAD_TEXT: r,
                            url: y,
                            classes: f
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Super", a, l + " " + c]), m.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(d, a, l, n, "Super SR Tables", "Super", "Leads", s), h === o.DETAILS_TYPE_BTN ? (_ = this.getVariantMapDetails(m, d), m = p.extend(m, _.href_data), v = _.template) : v = h === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + m.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, b = v(m)
                    }, e.prototype.generateSuperURL = function(t, e, n, i) {
                        var o;
                        return o = "" + t + "redir/super?" + r.prototype.getTableFilterSegment() + "&prod_id=" + e + "&co_code=" + n + "&profile=" + i
                    }, e.prototype.generateHciLink = function(t, e, n, i, r, s, a, l, c, u) {
                        var h, f, m, g, v, _, y;
                        return null == n && (n = "Proceed"), null == i && (i = !1), null == u && (u = o.DETAILS_TYPE_LINK), m = (null != (y = c.SUPP.lead_url) ? y.length : void 0) > 0, h = i ? "prod_link" : "proceed btn btn-sm", f = {
                            EVENT_LABEL: "H&C | " + r + " | " + s + " " + a,
                            RC_URL: _,
                            LEAD_TEXT: n,
                            url: t,
                            classes: h,
                            company: r
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["H&C", r, s + " " + a]), f.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(c, r, s, e, "H&C SR Tables", d.faceted_search.category, "Leads", i), f.gaTrackerEvents += this.gaqHelper.digitalTracking(m ? "Monetised" : "non-Monetised", d.faceted_search.category, e, s), u === o.DETAILS_TYPE_BTN ? (v = this.getVariantMapDetails(f, c), f = p.extend(f, v.href_data), g = v.template) : g = u === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + f.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, _ = g(f)
                    }, e.prototype.generateHciURL = function(t, n, i, r) {
                        var o, s, a;
                        return s = d.faceted_search, r = s.profile, o = {
                            category: s.category
                        }, a = e.prototype.generateDetailsURL(t, n, i, r, o)
                    }, e.prototype.generateTravelLink = function(t, n, i, r, s, a, l, c, u, h, f) {
                        var m, g, v, _, y, b, w, P;
                        return null == r && (r = "Proceed"), null == s && (s = !1), null == f && (f = o.DETAILS_TYPE_LINK), b = this.generateDetailsURL(t, n, i, u), b = e.prototype.replaceLeadUrl(b, h), v = (null != (P = h.SUPP.lead_url) ? P.length : void 0) > 0, m = s ? "prod_link" : "proceed btn btn-sm", g = {
                            EVENT_LABEL: "Travel | " + a + " | " + l + " " + c,
                            RC_URL: w,
                            LEAD_TEXT: r,
                            url: b,
                            classes: m,
                            company: a
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Travel", a, l + " " + c]), g.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(h, a, l, n, "Travel SR Tables", d.faceted_search.category, "Leads", s), g.gaTrackerEvents += this.gaqHelper.digitalTracking(v ? "Monetised" : "non-Monetised", null != d ? d.faceted_search.category : void 0, n, l), f === o.DETAILS_TYPE_BTN ? (y = this.getVariantMapDetails(g, h), g = p.extend(g, y.href_data), _ = y.template) : _ = f === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + g.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, w = _(g)
                    }, e.prototype.generateTravelMoneyLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == o && (o = !1), g = this.generateDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "Travel Money | " + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Travel Money", s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "Travel Money SR Tables", "Travel Money", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generatePetInsuranceLink = function(t, n, r, s, a, l, c, u, h, f, m) {
                        var g, v, _, y, b, w, P, S;
                        return null == s && (s = "Proceed"), null == a && (a = !1), null == m && (m = o.DETAILS_TYPE_LINK), P = this.generateDetailsURL(t, n, r, h), g = a ? "prod_link" : "proceed btn btn-sm", _ = i.prototype.linkToDetails(m), _ || (P = e.prototype.replaceLeadUrl(P, f)), v = {
                            EVENT_LABEL: "Pet Insurance | " + l + " | " + c + " " + u,
                            RC_URL: S,
                            LEAD_TEXT: s,
                            url: P,
                            classes: g,
                            company: l
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Pet Insurance", l, c + " " + u]), y = _ ? {
                            unmonetisedOverride: !0
                        } : {}, v.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(f, l, c, n, "Pet Insurance SR Tables", d.faceted_search.category, "Leads", a, y), m === o.DETAILS_TYPE_BTN ? (w = this.getVariantMapDetails(v, f), v = p.extend(v, w.href_data), b = w.template) : m === o.DETAILS_PAGE_TYPE_BTN ? (b = this.templates.linkto_proceed_btn_details, v.link_location = "" + f.SUPP.COMPANY_NAME + "'s", v.classes += " btn-success", v.LEAD_TEXT = "Get Quote") : b = this.templates.gold_lead_proceed_btn, S = b(v)
                    }, e.prototype.generateLandlordLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var h, f, m, g, v, _, y;
                        return null == o && (o = !1), _ = this.generateDetailsURL(t, n, i, c), _ = e.prototype.replaceLeadUrl(_, u), f = o ? "prod_link" : "proceed btn btn-sm btn-primary", g = {
                            EVENT_LABEL: "Landlord Insurance | " + s + " | " + a + " " + l,
                            RC_URL: y,
                            LEAD_TEXT: r,
                            url: _,
                            classes: f
                        }, h = d.faceted_search.category, h || (h = d.faceted_search.table), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Landlord Insurance", s, a + " " + l]), m = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "" + h + " SR Tables", "Landlord Insurance", "Leads", o), v = p.template('<a rel="nofollow" onmousedown="' + m + '" href="<%=url%>" class="<%=classes%>" target="_blank"><%= LEAD_TEXT %></a>'), y = v(g)
                    }, e.prototype.generateCarLink = function(t, n, i, r, s, a, l, c, u, d, h, f) {
                        var m, g, v, _, y, b, w;
                        return null == r && (r = "Proceed"), null == s && (s = "proceed"), null == h && (h = !1), null == f && (f = o.DETAILS_TYPE_LINK), y = this.generateCarURL(t, n, i, u), y = e.prototype.replaceLeadUrl(y, d), g = (null != (w = d.SUPP.lead_url) ? w.length : void 0) > 0, m = {
                            EVENT_LABEL: "CarInsurance | " + l + " | " + a + " " + c,
                            RC_URL: b,
                            LEAD_TEXT: r,
                            url: y,
                            classes: s,
                            company: l
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["CarInsurance", l, a + " " + c]), m.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(d, l, a, n, "Car Insurance SR Tables", "Car Insurance", "Leads", h), f === o.DETAILS_TYPE_BTN ? (_ = this.getVariantMapDetails(m, d), m = p.extend(m, _.href_data), v = _.template) : v = f === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + m.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, b = v(m)
                    }, e.prototype.generateCarURL = function(t, e, n, i) {
                        var o;
                        return o = "" + t + "redir/car?" + r.prototype.getTableFilterSegment() + "&prod_id=" + e + "&co_code=" + n + "&profile=" + i
                    }, e.prototype.generateLoanLink = function(t, e, n, i, r, o, s, a) {
                        var l, c, u, h, f, m, g, v;
                        return null == i && (i = !1), c = i ? "prod_link" : "proceed btn btn-sm btn-primary", h = {
                            EVENT_LABEL: "" + r + " | " + o + " | " + s,
                            LEAD_TEXT: n,
                            url: t,
                            classes: c
                        }, l = d.faceted_search.category, l || (l = d.faceted_search.table), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([r, o, s]), g = null != (null != d && null != (v = d.faceted_search) ? v.category : void 0) ? d.faceted_search.category : "Loan", u = this.gaqHelper.generateGaqTrackerEvents(e, r, o, a, "" + l + " | RateCity SR", g, "Leads", i), f = p.template('<a rel="nofollow" onmousedown="' + u + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), m = f(h)
                    }, e.prototype.generateDirectLifeLink = function(t, n, i, r, s, a, l, c, u, d, h) {
                        var f, m, g, v, _, y;
                        return null == r && (r = "Proceed"), null == s && (s = !1), null == h && (h = o.DETAILS_TYPE_LINK), _ = this.generateDirectLifeURL(t, n, i, u), _ = e.prototype.replaceLeadUrl(_, d), f = s ? "prod_link" : "proceed btn btn-sm", m = {
                            EVENT_LABEL: "DirectLife| " + a + " | " + l + " " + c,
                            LEAD_TEXT: r,
                            url: _,
                            classes: f,
                            company: a
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["DirectLife", a, l + " " + c]), m.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(d, a, l, n, "Direct Life Insurance SR", "Direct Life", "Leads", s), h === o.DETAILS_TYPE_BTN ? (v = this.getVariantMapDetails(m, d), m = p.extend(m, v.href_data), g = v.template) : g = h === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + m.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, y = g(m)
                    }, e.prototype.generateDirectIncomeLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateDirectIncomeURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "DirectIncome " + s + "| " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["DirectIncome", s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "Direct Income Insurance SR", "Direct Income", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateOnlineShareLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var h, f, m, g, v, _, y;
                        return null == r && (r = "Proceed"), null == o && (o = !1), _ = this.generateDetailsURL(t, n, i, c), _ = e.prototype.replaceLeadUrl(_, u), f = o ? "prod_link" : "proceed btn btn-sm btn-primary", g = {
                            EVENT_LABEL: "OnlineShareTrading| " + s + " | " + a + " " + l,
                            RC_URL: y,
                            LEAD_TEXT: r,
                            url: _,
                            classes: f
                        }, h = d.faceted_search.category, h || (h = d.faceted_search.table), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["OnlineShareTrading", s, a + " " + l]), m = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "" + h + " SR", "Online Share Trading", "Leads", o), v = p.template('<a rel="nofollow" onmousedown="' + m + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), y = v(g)
                    }, e.prototype.generateDirectLifeURL = function(t, e, n, i) {
                        var o;
                        return o = "" + t + "redir/directlife?" + r.prototype.getTableFilterSegment() + "&prod_id=" + e + "&co_code=" + n + "&profile=" + i
                    }, e.prototype.generateDirectIncomeURL = function(t, e, n, i) {
                        var o;
                        return o = "" + t + "redir/details?" + r.prototype.getTableFilterSegment() + "&prod_id=" + e + "&co_code=" + n + "&profile=" + i
                    }, e.prototype.generateMortNZLink = function(t, n, i, r, o, s, a, l, c, u, d) {
                        var h, f, m, g, v, _, y, b;
                        return null == r && (r = "Proceed"), null == o && (o = !1), f = {
                            amount: u
                        }, h = o ? "prod_link" : "proceed btn btn-sm btn-primary", y = this.generateOldDetailsURL(t, n, i, c, f), y = e.prototype.replaceLeadUrl(y, d), g = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: b,
                            LEAD_TEXT: r,
                            url: y,
                            classes: h
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), m = this.gaqHelper.generateGaqTrackerEvents(d, s, a, n, "Home Loans NZ", "Home Loans NZ", "Leads", o), v = window.location.search.replace("?", "").split("&"), p.forEach(v, function(t) {
                            var e, n, i;
                            return i = t.split("="), "referrer" === i[0] ? (n = i[1].toUpperCase(), m = "_gaq.push(['distributedLeads._setAccount', 'UA-3949252-5']);", e = "Home Loans | " + s + " | " + a, m += "_gaq.push(['distributedLeads._trackEvent', 'Leads', '" + n + "', '" + e + "']);") : void 0
                        }), _ = p.template('<a rel="nofollow" onmousedown="' + m + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), b = _(g)
                    }, e.prototype.generateLoanNZLink = function(t, n, i, r, o, s, a, l, c, u, d, h) {
                        var f, m, g, v, _, y, b;
                        return null == r && (r = "Proceed"), null == o && (o = !1), m = {
                            amount: u,
                            term: d
                        }, f = o ? "prod_link" : "proceed btn btn-sm btn-primary", y = this.generateOldDetailsURL(t, n, i, c, m), y = e.prototype.replaceLeadUrl(y, h), v = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: b,
                            LEAD_TEXT: r,
                            url: y,
                            classes: f
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), g = this.gaqHelper.generateGaqTrackerEvents(h, s, a, n, "Personal Loans NZ", "Personal Loans NZ", "Leads", o), _ = p.template('<a rel="nofollow" onmousedown="' + g + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), b = _(v)
                    }, e.prototype.generateMargLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var h, f, m, g, v, _, y;
                        return null == r && (r = "Proceed"), null == o && (o = !1), _ = this.generateDetailsURL(t, n, i, c), _ = e.prototype.replaceLeadUrl(_, u), f = o ? "prod_link" : "proceed btn btn-sm btn-primary", g = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: y,
                            LEAD_TEXT: r,
                            url: _,
                            classes: f
                        }, h = d.faceted_search.category, h || (h = d.faceted_search.table), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), m = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "" + h + " | Margin Lending", "Margin Lending", "Leads", o), v = p.template('<a rel="nofollow" onmousedown="' + m + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), y = v(g)
                    }, e.prototype.generateACPLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "Account Pension SR", "Account Pension", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateIMTLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "International Money Transfers", "International Money Transfers", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateRewardsLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "CC Rewards SR", "CC Rewards", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateBusSavLink = function(t, n, i, r, o, s, a, l, c, u, d) {
                        var h, f, m, g, v, _, y;
                        return null == r && (r = "Proceed"), null == o && (o = !1), f = {
                            amount: u
                        }, h = o ? "prod_link" : "proceed btn btn-sm btn-primary", _ = this.generateDetailsURL(t, n, i, c, f), _ = e.prototype.replaceLeadUrl(_, d), g = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: y,
                            LEAD_TEXT: r,
                            url: _,
                            classes: h
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), m = this.gaqHelper.generateGaqTrackerEvents(d, s, a, n, "Business Savings SR", "Business Savings", "Leads", o), v = p.template('<a rel="nofollow" onmousedown="' + m + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), y = v(g)
                    }, e.prototype.generateBusTransLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "Business Transactions SR", "Business Transactions", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateBuslLink = function(t, n, i, r, o, s, a, l, c, u, d, h, f) {
                        var m, g, v, _, y, b, w, P;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = {
                            amount: u
                        }, m = o ? "prod_link" : "proceed btn btn-sm btn-primary", w = this.generateDetailsURL(t, n, i, c, g), w = e.prototype.replaceLeadUrl(w, f), _ = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: P,
                            LEAD_TEXT: r,
                            CATEGORY_LABEL: d,
                            PROD_EXTRA: "" + h,
                            url: w,
                            classes: m
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), v = this.gaqHelper.generateGaqTrackerEvents(f, s, a, n, d + " SR", d, "Leads", o), b = "Business Loan" === d ? '<a rel="nofollow" onmousedown="' + v + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %><span class="mort-prod-suffix"><%= PROD_EXTRA %></span></a>' : '<a rel="nofollow" onmousedown="' + v + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></span></a>', y = p.template(b), P = y(_)
                    }, e.prototype.generateTermLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m;
                        return null == r && (r = "Proceed"), null == o && (o = "proceed"), f = this.generateDetailsURL(t, n, i, c), f = e.prototype.replaceLeadUrl(f, u), d = {
                            EVENT_LABEL: "Term Deposits | " + s + " | " + a + " " + l,
                            RC_URL: m,
                            LEAD_TEXT: r,
                            url: f,
                            classes: o
                        }, h = p.template('<a rel="nofollow" onmousedown="_gaq.push([\'_trackEvent\', \'Leads\', \'Term Deposits SR Tables\', \'<%= EVENT_LABEL %>\'])" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), m = h(d)
                    }, e.prototype.generateMortLeadDetailsURL = function() {
                        return this._generateDetailsURL.apply(this, arguments)
                    }, e.prototype.generateDetailsURL = function() {
                        return arguments[0] = this.details_url, this._generateDetailsURL.apply(this, arguments)
                    }, e.prototype.generateOldDetailsURL = function(t) {
                        return arguments[0] = "" + t + "details", this._generateDetailsURL.apply(this, arguments)
                    }, e.prototype._generateDetailsURL = function(t, e, n, i, o) {
                        return t = "" + t + "?" + r.prototype.getTableFilterSegment() + "&prod_id=" + e + "&co_code=" + n + "&profile=" + i, p.each(o, function(e, n) {
                            return t += "&" + n + "=" + e
                        }), t
                    }, e.prototype.generateProductParams = function(t) {
                        var e, n, i, r;
                        return i = t.SUPP[t.SUPP.id_field], e = t.SUPP.CO_CODE, r = d.faceted_search.profile, n = {
                            prod_id: i,
                            co_code: e,
                            profile: r
                        }
                    }, e.prototype.replaceLeadUrl = function(t, e, i) {
                        var o, s, a, l, c, u, h, f, m, g, v;
                        if ((null != e && null != (f = e.SUPP) && null != (m = f.lead_url) ? m.length : void 0) > 0 && (t = "" + d.base_url + "lead?u=" + btoa(e.SUPP.lead_url).replace("=", ""), null != (g = e.SUPP.lead_url) ? g.match(/waas.canstar.com.au/) : void 0)) {
                            u = "" + r.prototype.getTableFilterSegment(), l = this.generateProductParams(e, i), c = {}, v = d.stored_selector_params;
                            for (s in v) o = v[s], c[s] = o.value, c["" + s + "_text"] = o.text;
                            p.each(i, function(t, e) {
                                return c[e] = t
                            }), a = p.extend(c, l), h = n.param(a), t = "" + t + "&" + u + "&" + h
                        }
                        return null == t && console.error("No URL passed to Leads::replaceLeadUrl and no lead_url override in row object"), t
                    }, e.prototype.generateCredNZLink = function(t, n, i, r, o, s, a, l, c, u) {
                        var d, h, f, m, g, v;
                        return null == r && (r = "Proceed"), null == o && (o = !1), g = this.generateOldDetailsURL(t, n, i, c), g = e.prototype.replaceLeadUrl(g, u), d = o ? "prod_link" : "proceed btn btn-sm btn-primary", f = {
                            EVENT_LABEL: "" + s + " | " + a + " " + l,
                            RC_URL: v,
                            LEAD_TEXT: r,
                            url: g,
                            classes: d
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, a + " " + l]), h = this.gaqHelper.generateGaqTrackerEvents(u, s, a, n, "Credit Cards NZ", "Credit Cards NZ", "Leads", o), m = p.template('<a rel="nofollow" onmousedown="' + h + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>'), v = m(f)
                    }, e.prototype.generateKiwiBankLeadURL = function(t) {
                        return arguments[0] = "" + t + "refferals/kiwibank", this._generateDetailsURL.apply(this, arguments)
                    }, e.prototype.generateMortUrl = function(t) {
                        var n, i, r, o, s, a, l, c;
                        return n = d.base_url, r = "generateDetailsURL", s = d.faceted_search, a = t.SUPP.SR_PROD_ID, i = t.SUPP.CO_CODE, l = s.profile, o = {
                            amount: s.amount,
                            state: s.state,
                            category: s.category,
                            details_variant: s.details_variant
                        }, "moneymakeover" !== d.faceted_search.distributor && this.hlauLeadCompanyCoCodes.indexOf(i.toLowerCase()) > -1 && (n = "" + d.base_url + "refferals/homeloansau", r = "generateMortLeadDetailsURL"), c = e.prototype[r](n, a, i, l, o)
                    }, e.prototype.generateBlueHandoffUrl = function(t) {
                        var e, n, i;
                        return e = a[d.faceted_search.distributor][d.faceted_search.table].handoffs, i = e[t.substr(0, t.indexOf("/", 8))] || "error", n = "/handoff-pages/" + i + "/?handoff_url=" + encodeURIComponent(t)
                    }, e.prototype.generateMobileWOProdLink = function(t, e, n, i, r, o) {
                        var s;
                        return null == o && (o = null), s = "<div value='" + e + "'> <a target='_blank' href='" + this.generateBlueHandoffUrl(t) + "' data-id='" + o.SUPP.id + "' data-trackevent='product_link' >" + e + "</a> <br /> <span class='subtext'>" + n + "</span> </div>"
                    }, e.prototype.generateMobileWODetailsBtn = function(t, e, n, i, r) {
                        var o;
                        return null == r && (r = null), o = "<div> <a href='" + this.generateBlueHandoffUrl(t, "whistleout") + "' data-id='" + r.SUPP.id + "' data-trackevent='detailsbutton' target='_blank' class='details btn btn-primary btn-xs extratracking'> <span class='hidden-xs hidden-sm'>More Details</span><i class='hidden-md hidden-lg fa fa-chevron-right'></i> </a> </div>"
                    }, e.prototype._generateMobileWOGATracker = function(t, e, n, i) {
                        var r;
                        return null == i && (i = null), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["Blue Mobile", t, n]), r = this.gaqHelper.generateGaqTrackerEvents(i, t, n, e, "Blue Mobile", "Blue Mobile", "Leads")
                    }, e.prototype.generateCredLink = function(t, n, i, r, s, a, l, c, u, h, f, m) {
                        var g, v, _, y, b, w, P, S;
                        return null == r && (r = "Proceed"), null == s && (s = !1), null == f && (f = o.DETAILS_TYPE_LINK), P = this.generateDetailsURL(t, n, i, u, m), w = e.prototype.replaceLeadUrl(P, h), g = s ? "proceed btn btn-sm" : "", v = {
                            EVENT_LABEL: "CreditCards | " + l + " | " + a + " " + c,
                            RC_URL: S,
                            LEAD_TEXT: r,
                            url: w,
                            url_alt: P,
                            classes: g,
                            company: l
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel(["CreditCards", l, a + " " + c]), v.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(h, l, a, n, "Credit Cards SR Tables", "Credit Cards", "Leads", s), f === o.DETAILS_TYPE_BTN ? (y = this.getVariantMapDetails(v, h), v = p.extend(v, y.href_data), _ = y.template, b = null != y.href_data.monetised_detail == !0 ? "Monetised-Details" : b) : f === o.DETAILS_PAGE_TYPE_BTN ? (_ = this.templates.linkto_proceed_btn_details, v.link_location = "" + h.SUPP.COMPANY_NAME + "'s", v.classes += " btn-success", v.LEAD_TEXT = "Go to site") : _ = this.templates.gold_lead_proceed_btn, "Monetised-Details" === b && (v.gaTrackerEventsDetails = v.gaTrackerEvents, v.gaTrackerEventsDetails += this.gaqHelper.digitalTracking(b, d.faceted_search.category, n, a)), S = _(v)
                    }, e.prototype.generateLoansProceedLink = function(t, e, n, i, r, s) {
                        var a, l, c, u, h, f, m, g, v, _, y, b;
                        return null == n && (n = !1), null == i && (i = o.DETAILS_TYPE_LINK), null == r && (r = ""), null == s && (s = !1), l = n ? "" : "proceed btn btn-sm", s && (r += " Compare"), a = d.faceted_search, c = e.SUPP.COMPANY_NAME, m = e.SUPP.PRODUCT_NAME, u = {
                            amount: a.amount,
                            term: a.term
                        }, _ = this.generateDetailsURL(d.base_url, t, e.SUPP.CO_CODE, a.profile, u), _ = this.replaceLeadUrl(_, e), f = (null != (b = e.SUPP.lead_url) ? b.length : void 0) > 0, h = {
                            EVENT_LABEL: "" + a.category + " | " + c + " | " + m + " " + r,
                            url: _,
                            classes: l,
                            company: c
                        }, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([a.category.split(" ").join(), c, m + " " + r]), h.gaTrackerEvents = this.gaqHelper.generateGaqTrackerEvents(e, c, m, t, "" + a.category + " SR Tables", a.category, "Leads", n), i === o.DETAILS_TYPE_BTN ? (v = this.getVariantMapDetails(h, e), h = p.extend(h, v.href_data), g = v.template) : g = i === o.DETAILS_TYPE_LINK ? p.template('<a rel="nofollow" onmousedown="' + h.gaTrackerEvents + '" target="_blank" href="<%=url%>" class="<%=classes%>"><%= LEAD_TEXT %></a>') : this.templates.gold_lead_proceed_btn, y = g(h)
                    }, e
                }()
            })
        }.call(this),
        function(t, e) {
            var n = function(t) {
                    if ("object" != typeof t.document) throw new Error("Cookies.js requires a `window` with a `document` object");
                    var n = function(t, e, i) {
                        return 1 === arguments.length ? n.get(t) : n.set(t, e, i)
                    };
                    return n._document = t.document, n._cacheKeyPrefix = "cookey.", n._maxExpireDate = new Date("Fri, 31 Dec 9999 23:59:59 UTC"), n.defaults = {
                        path: "/",
                        secure: !1
                    }, n.get = function(t) {
                        return n._cachedDocumentCookie !== n._document.cookie && n._renewCache(), n._cache[n._cacheKeyPrefix + t]
                    }, n.set = function(t, i, r) {
                        return r = n._getExtendedOptions(r), r.expires = n._getExpiresDate(i === e ? -1 : r.expires), n._document.cookie = n._generateCookieString(t, i, r), n
                    }, n.expire = function(t, i) {
                        return n.set(t, e, i)
                    }, n._getExtendedOptions = function(t) {
                        return {
                            path: t && t.path || n.defaults.path,
                            domain: t && t.domain || n.defaults.domain,
                            expires: t && t.expires || n.defaults.expires,
                            secure: t && t.secure !== e ? t.secure : n.defaults.secure
                        }
                    }, n._isValidDate = function(t) {
                        return "[object Date]" === Object.prototype.toString.call(t) && !isNaN(t.getTime())
                    }, n._getExpiresDate = function(t, e) {
                        if (e = e || new Date, "number" == typeof t ? t = 1 / 0 === t ? n._maxExpireDate : new Date(e.getTime() + 1e3 * t) : "string" == typeof t && (t = new Date(t)), t && !n._isValidDate(t)) throw new Error("`expires` parameter cannot be converted to a valid Date instance");
                        return t
                    }, n._generateCookieString = function(t, e, n) {
                        t = t.replace(/[^#$&+\^`|]/g, encodeURIComponent), t = t.replace(/\(/g, "%28").replace(/\)/g, "%29"), e = (e + "").replace(/[^!#$&-+\--:<-\[\]-~]/g, encodeURIComponent), n = n || {};
                        var i = t + "=" + e;
                        return i += n.path ? ";path=" + n.path : "", i += n.domain ? ";domain=" + n.domain : "", i += n.expires ? ";expires=" + n.expires.toUTCString() : "", i += n.secure ? ";secure" : ""
                    }, n._getCacheFromString = function(t) {
                        for (var i = {}, r = t ? t.split("; ") : [], o = 0; o < r.length; o++) {
                            var s = n._getKeyValuePairFromCookieString(r[o]);
                            i[n._cacheKeyPrefix + s.key] === e && (i[n._cacheKeyPrefix + s.key] = s.value)
                        }
                        return i
                    }, n._getKeyValuePairFromCookieString = function(t) {
                        var e = t.indexOf("=");
                        return e = 0 > e ? t.length : e, {
                            key: decodeURIComponent(t.substr(0, e)),
                            value: decodeURIComponent(t.substr(e + 1))
                        }
                    }, n._renewCache = function() {
                        n._cache = n._getCacheFromString(n._document.cookie), n._cachedDocumentCookie = n._document.cookie
                    }, n._areEnabled = function() {
                        var t = "cookies.js",
                            e = "1" === n.set(t, 1).get(t);
                        return n.expire(t), e
                    }, n.enabled = n._areEnabled(), n
                },
                i = "object" == typeof t.document ? n(t) : n;
            "function" == typeof define && define.amd ? define("cookies", [], function() {
                return i
            }) : "object" == typeof exports ? ("object" == typeof module && "object" == typeof module.exports && (exports = module.exports = i), exports.Cookies = i) : t.Cookies = i
        }("undefined" == typeof window ? this : window),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Auth", ["require", "underscore", "canstar_widget", "backbone", "cookies"], function(e) {
                var n, i, r, o, s;
                return s = e("underscore"), o = e("canstar_widget"), i = e("backbone"), r = e("cookies"), n = function() {
                    function e() {
                        this.removeStorageItem = t(this.removeStorageItem, this), this.setStorageItem = t(this.setStorageItem, this), this.getStorageItem = t(this.getStorageItem, this), this.setCookie = t(this.setCookie, this), this.getLocalData = t(this.getLocalData, this), this.storeLocalData = t(this.storeLocalData, this), this.hasCookie = t(this.hasCookie, this), this.hasMandatoryKeys = t(this.hasMandatoryKeys, this), this.verifyToken = t(this.verifyToken, this), this.logout = t(this.logout, this), this.partiallyLoggedIn = t(this.partiallyLoggedIn, this), this.loggedIn = t(this.loggedIn, this), this.enforce = t(this.enforce, this)
                    }
                    return e.prototype.mandatoryKeys = ["token", "username", "first_name", "num_shortlists", "num_products", "created_date", "last_login_date", "wealthbricks_dashboard"], e.prototype.storage = window.localStorage, e.prototype.storagePrefix = "canstar_", e.prototype.cookieName = "canstar_login", e.prototype.enforce = function() {
                        return $.when(this.verifyToken()).fail(function() {
                            return window.location.replace(o.auth.urls.login)
                        })
                    }, e.prototype.loggedIn = function() {
                        var t;
                        return this.hasMandatoryKeys() && this.hasCookie() && (null != (t = o.auth) ? t.enabled : void 0) ? !0 : !1
                    }, e.prototype.partiallyLoggedIn = function() {
                        var t, e;
                        return e = this.hasMandatoryKeys(), t = this.hasCookie(), e && !t || !e && t ? !0 : !1
                    }, e.prototype.logout = function() {
                        return r.expire(this.cookieName), s.each(this.mandatoryKeys, function(t) {
                            return function(e) {
                                return t.removeStorageItem(e)
                            }
                        }(this))
                    }, e.prototype.verifyToken = function() {
                        return this.loggedIn() ? i.ajax({
                            url: "" + o.auth.base_url + "api/auth"
                        }).fail(function(t) {
                            return console.log("Token verification failed"), 0 !== t.status ? e.prototype.logout() : void 0
                        }) : $.Deferred().reject()
                    }, e.prototype.hasMandatoryKeys = function() {
                        var t;
                        return t = s.find(this.mandatoryKeys, function(t) {
                            return function(e) {
                                return null === t.getStorageItem(e) ? !0 : void 0
                            }
                        }(this)), "undefined" == typeof t ? !0 : !1
                    }, e.prototype.hasCookie = function() {
                        return r.get(this.cookieName) ? !0 : !1
                    }, e.prototype.storeLocalData = function(t) {
                        return this.hasCookie() || this.setCookie(), s.each(this.mandatoryKeys, function(e) {
                            return function(n) {
                                var i;
                                return i = t[n], "undefined" != typeof i ? e.setStorageItem(n, i) : void 0
                            }
                        }(this))
                    }, e.prototype.getLocalData = function() {
                        return s.reduce(this.mandatoryKeys, function(t) {
                            return function(e, n) {
                                return e[n] = t.getStorageItem(n), e
                            }
                        }(this), {})
                    }, e.prototype.setCookie = function(t) {
                        return null == t && (t = !1), t === !0 ? r.set(this.cookieName, "local", {
                            expires: 1 / 0
                        }) : r.set(this.cookieName, "session")
                    }, e.prototype.getStorageItem = function(t) {
                        return this.storage.getItem(this.storagePrefix + t)
                    }, e.prototype.setStorageItem = function(t, e, n) {
                        var i;
                        return null == n && (n = !1), this.storage.setItem(this.storagePrefix + t, e), n && null != (i = o.event) ? i.trigger("" + t + ":changed") : void 0
                    }, e.prototype.removeStorageItem = function(t) {
                        return this.storage.removeItem(this.storagePrefix + t)
                    }, e
                }()
            })
        }.call(this),
        function() {
            define("libraries/Currency", ["require"], function() {
                var t;
                return t = function() {
                    function t() {}
                    return t.prototype.formatCurrency = function(t, e) {
                        var n, i, r;
                        if (null == e && (e = !1), isNaN(Number(t))) return t;
                        for (t = t.toString().replace(/\$|\,/g, ""), isNaN(t) && (t = "0"), r = Number(t) === Math.abs(t), t = Math.floor(100 * t + .50000000001), n = t % 100, t = Math.floor(t / 100).toString(), 10 > n && (n = "0" + n), i = 0; i < Math.floor((t.length - (1 + i)) / 3);) t = t.substring(0, t.length - (4 * i + 3)) + "," + t.substring(t.length - (4 * i + 3)), i++;
                        return (r ? "" : "-") + "$" + t + (e ? "." + n : "")
                    }, t.prototype.displayRateNA = function(t) {
                        return null != t ? "" + Number(t).toFixed(2) + "%" : "N/A"
                    }, t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Time", ["require"], function() {
                var e;
                return e = function() {
                    function e() {
                        this.tomorrow = t(this.tomorrow, this), this.today = t(this.today, this), this.getTimeStampFromTime = t(this.getTimeStampFromTime, this), this.getPaddedShortDate = t(this.getPaddedShortDate, this), this.getShortDate = t(this.getShortDate, this)
                    }
                    return e.prototype.translateTerm = function(t, e) {
                        var n, i, r, o, s, a;
                        return null == e && (e = !1), r = t % 12, Math.ceil(r) !== r ? (s = Math.ceil(t), this.translateTerm(s, !0)) : (n = "", e && (n = "under "), o = t > 1 ? " months" : " month", i = "", i += n + t + o, a = i)
                    }, e.prototype.getShortDate = function(t) {
                        return t = null != t ? new Date(t) : new Date, t.getDate() + "/" + (t.getMonth() + 1) + "/" + t.getFullYear().toString().substr(2, 2)
                    }, e.prototype.getPaddedShortDate = function(t, e) {
                        return null == t && (t = new Date), null == e && (e = !1), ("0" + t.getDate()).slice(-2) + "/" + ("0" + (t.getMonth() + 1)).slice(-2) + "/" + (e ? t.getFullYear() : String(t.getFullYear()).substr(2, 2))
                    }, e.prototype.getTimeStampFromTime = function(t, e) {
                        var n, i, r, o;
                        return null == e && (e = new Date), i = t.split(":")[0], r = t.split(":")[1], n = new Date(e.getTime()), n.setHours(i), n.setMinutes(r), n.setSeconds(0), o = n.getTime()
                    }, e.prototype.today = function() {
                        return new Date
                    }, e.prototype.tomorrow = function(t) {
                        var e;
                        return null == t && (t = new Date), console.info("tomorrow: ", new Date(t.getTime() + 864e5)), e = new Date(t.getTime() + 864e5), e.setHours(0), e.setMinutes(0), e.setSeconds(1), e
                    }, e
                }()
            })
        }.call(this),
        function(t, e) {
            function n(t) {
                return !!("" === t || t && t.charCodeAt && t.substr)
            }

            function i(t) {
                return d ? d(t) : "[object Array]" === p.call(t)
            }

            function r(t) {
                return t && "[object Object]" === p.call(t)
            }

            function o(t, e) {
                var n;
                t = t || {}, e = e || {};
                for (n in e) e.hasOwnProperty(n) && null == t[n] && (t[n] = e[n]);
                return t
            }

            function s(t, e, n) {
                var i, r, o = [];
                if (!t) return o;
                if (u && t.map === u) return t.map(e, n);
                for (i = 0, r = t.length; r > i; i++) o[i] = e.call(n, t[i], i, t);
                return o
            }

            function a(t, e) {
                return t = Math.round(Math.abs(t)), isNaN(t) ? e : t
            }

            function l(t) {
                var e = c.settings.currency.format;
                return "function" == typeof t && (t = t()), n(t) && t.match("%v") ? {
                    pos: t,
                    neg: t.replace("-", "").replace("%v", "-%v"),
                    zero: t
                } : t && t.pos && t.pos.match("%v") ? t : n(e) ? c.settings.currency.format = {
                    pos: e,
                    neg: e.replace("%v", "-%v"),
                    zero: e
                } : e
            }
            var c = {};
            c.version = "0.4.1", c.settings = {
                currency: {
                    symbol: "$",
                    format: "%s%v",
                    decimal: ".",
                    thousand: ",",
                    precision: 2,
                    grouping: 3
                },
                number: {
                    precision: 0,
                    grouping: 3,
                    thousand: ",",
                    decimal: "."
                }
            };
            var u = Array.prototype.map,
                d = Array.isArray,
                p = Object.prototype.toString,
                h = c.unformat = c.parse = function(t, e) {
                    if (i(t)) return s(t, function(t) {
                        return h(t, e)
                    });
                    if (t = t || 0, "number" == typeof t) return t;
                    e = e || c.settings.number.decimal;
                    var n = new RegExp("[^0-9-" + e + "]", ["g"]),
                        r = parseFloat(("" + t).replace(/\((.*)\)/, "-$1").replace(n, "").replace(e, "."));
                    return isNaN(r) ? 0 : r
                },
                f = c.toFixed = function(t, e) {
                    e = a(e, c.settings.number.precision);
                    var n = Math.pow(10, e);
                    return (Math.round(c.unformat(t) * n) / n).toFixed(e)
                },
                m = c.formatNumber = c.format = function(t, e, n, l) {
                    if (i(t)) return s(t, function(t) {
                        return m(t, e, n, l)
                    });
                    t = h(t);
                    var u = o(r(e) ? e : {
                            precision: e,
                            thousand: n,
                            decimal: l
                        }, c.settings.number),
                        d = a(u.precision),
                        p = 0 > t ? "-" : "",
                        g = parseInt(f(Math.abs(t || 0), d), 10) + "",
                        v = g.length > 3 ? g.length % 3 : 0;
                    return p + (v ? g.substr(0, v) + u.thousand : "") + g.substr(v).replace(/(\d{3})(?=\d)/g, "$1" + u.thousand) + (d ? u.decimal + f(Math.abs(t), d).split(".")[1] : "")
                },
                g = c.formatMoney = function(t, e, n, u, d, p) {
                    if (i(t)) return s(t, function(t) {
                        return g(t, e, n, u, d, p)
                    });
                    t = h(t);
                    var f = o(r(e) ? e : {
                            symbol: e,
                            precision: n,
                            thousand: u,
                            decimal: d,
                            format: p
                        }, c.settings.currency),
                        v = l(f.format),
                        _ = t > 0 ? v.pos : 0 > t ? v.neg : v.zero;
                    return _.replace("%s", f.symbol).replace("%v", m(Math.abs(t), a(f.precision), f.thousand, f.decimal))
                };
            c.formatColumn = function(t, e, u, d, p, f) {
                if (!t) return [];
                var g = o(r(e) ? e : {
                        symbol: e,
                        precision: u,
                        thousand: d,
                        decimal: p,
                        format: f
                    }, c.settings.currency),
                    v = l(g.format),
                    _ = v.pos.indexOf("%s") < v.pos.indexOf("%v") ? !0 : !1,
                    y = 0,
                    b = s(t, function(t) {
                        if (i(t)) return c.formatColumn(t, g);
                        t = h(t);
                        var e = t > 0 ? v.pos : 0 > t ? v.neg : v.zero,
                            n = e.replace("%s", g.symbol).replace("%v", m(Math.abs(t), a(g.precision), g.thousand, g.decimal));
                        return n.length > y && (y = n.length), n
                    });
                return s(b, function(t) {
                    return n(t) && t.length < y ? _ ? t.replace(g.symbol, g.symbol + new Array(y - t.length + 1).join(" ")) : new Array(y - t.length + 1).join(" ") + t : t
                })
            }, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = c), exports.accounting = c) : "function" == typeof define && define.amd ? define("accounting", [], function() {
                return c
            }) : (c.noConflict = function(n) {
                return function() {
                    return t.accounting = n, c.noConflict = e, c
                }
            }(t.accounting), t.accounting = c)
        }(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Transforms", ["require", "jquery", "underscore", "canstar_widget", "libraries/Canstar", "libraries/Constants", "libraries/Currency", "libraries/Leads", "libraries/Text", "libraries/Time", "libraries/GAQHelper", "accounting", "libraries/templates", "libraries/ABTestController"], function(e) {
                var n, i, r, o, s, a, l, c, u, d, p, h, f, m;
                return n = e("jquery"), m = e("underscore"), f = e("canstar_widget"), o = e("libraries/Canstar"), s = e("libraries/Constants"), a = e("libraries/Currency"), c = e("libraries/Leads"), d = e("libraries/Text"), p = e("libraries/Time"), l = e("libraries/GAQHelper"), r = e("accounting"), u = e("libraries/templates"), i = e("libraries/ABTestController"), h = function() {
                    function e(e, n) {
                        this.productsCollection = e, this.options = null != n ? n : {}, this._generateMobileTooltipText = t(this._generateMobileTooltipText, this), this.generateSmallTrailingDecimals = t(this.generateSmallTrailingDecimals, this), this.getMoneyMakeoverDetailsLink = t(this.getMoneyMakeoverDetailsLink, this), this.generateCredNZProdLink = t(this.generateCredNZProdLink, this), this.getCredNZProdLink = t(this.getCredNZProdLink, this), this.getCompareCredNZProdLink = t(this.getCompareCredNZProdLink, this), this.generateCredNZDetailsLink = t(this.generateCredNZDetailsLink, this), this.getCredNZDetailsLink = t(this.getCredNZDetailsLink, this), this.getCompareCredNZDetailsLink = t(this.getCompareCredNZDetailsLink, this), this.getFunDetailsLink = t(this.getFunDetailsLink, this), this._createCredDetailsLink = t(this._createCredDetailsLink, this), this.getCredDetailsPageProceedBtn = t(this.getCredDetailsPageProceedBtn, this), this.getCredDetailsLink = t(this.getCredDetailsLink, this), this.getDepaTranDetailsLink = t(this.getDepaTranDetailsLink, this), this.generateDepaTranProdLink = t(this.generateDepaTranProdLink, this), this.getDepaSavDetailsLink = t(this.getDepaSavDetailsLink, this), this.generateDepaSavProdLink = t(this.generateDepaSavProdLink, this), this._createDepaDetailsLink = t(this._createDepaDetailsLink, this), this.getTermDetailsLink = t(this.getTermDetailsLink, this), this.generateTermProdLink = t(this.generateTermProdLink, this), this.getPCLoanProdLink = t(this.getPCLoanProdLink, this), this.getPCLoanDetailsLink = t(this.getPCLoanDetailsLink, this), this.getPCLoanDetailsCompareLink = t(this.getPCLoanDetailsCompareLink, this), this._createPCLoanDetailsLink = t(this._createPCLoanDetailsLink, this), this.getCompareMortDetailsLink = t(this.getCompareMortDetailsLink, this), this.getMortDetailsLink = t(this.getMortDetailsLink, this), this._createMortDetailsLink = t(this._createMortDetailsLink, this), this.getMortNZDetailsLink = t(this.getMortNZDetailsLink, this), this.generateMortNZProdLink = t(this.generateMortNZProdLink, this), this.getOnlineShareProdLink = t(this.getOnlineShareProdLink, this), this.getOnlineShareDetailsLink = t(this.getOnlineShareDetailsLink, this), this.generateDirectIncomeProdLink = t(this.generateDirectIncomeProdLink, this), this.getDirectIncomeDetailsLink = t(this.getDirectIncomeDetailsLink, this), this.generateDirectLifeProdLink = t(this.generateDirectLifeProdLink, this), this.getDirectLifeDetailsLink = t(this.getDirectLifeDetailsLink, this), this.generateIMTProdLink = t(this.generateIMTProdLink, this), this.getIMTDetailsLink = t(this.getIMTDetailsLink, this), this.generateACPProdLink = t(this.generateACPProdLink, this), this.getACPDetailsLink = t(this.getACPDetailsLink, this), this.generateMargProdLink = t(this.generateMargProdLink, this), this.getMargDetailsLink = t(this.getMargDetailsLink, this), this.generateRewardsProdLink = t(this.generateRewardsProdLink, this), this.getRewardsDetailsLink = t(this.getRewardsDetailsLink, this), this.generateBuslProdLink = t(this.generateBuslProdLink, this), this.getBuslDetailsLink = t(this.getBuslDetailsLink, this), this.generateBusTransProdLink = t(this.generateBusTransProdLink, this), this.getBusTransDetailsLink = t(this.getBusTransDetailsLink, this), this.getTravCredDebProdLink = t(this.getTravCredDebProdLink, this), this.getTravCredDebProceedLink = t(this.getTravCredDebProceedLink, this), this.getTravCredDebLink = t(this.getTravCredDebLink, this), this.getManagedFundsProdLink = t(this.getManagedFundsProdLink, this), this.getManagedFundsProceedLink = t(this.getManagedFundsProceedLink, this), this.getManagedFundsLink = t(this.getManagedFundsLink, this), this.getETFProdLink = t(this.getETFProdLink, this), this.getETFProceedLink = t(this.getETFProceedLink, this), this.getETFLink = t(this.getETFLink, this), this.getBusCredProdLink = t(this.getBusCredProdLink, this), this.getBusCredProceedLink = t(this.getBusCredProceedLink, this), this.getBusCredLink = t(this.getBusCredLink, this), this.generateBusSavProdLink = t(this.generateBusSavProdLink, this), this.getBusSavDetailsLink = t(this.getBusSavDetailsLink, this), this.getLoanNZDetailsLink = t(this.getLoanNZDetailsLink, this), this.getLoanNZProdLink = t(this.getLoanNZProdLink, this), this.getLoanProdLink = t(this.getLoanProdLink, this), this.getFrequencyString = t(this.getFrequencyString, this), this.getPaymentFrequency = t(this.getPaymentFrequency, this), this.getLandlordProceedLink = t(this.getLandlordProceedLink, this), this.getLandlordProdLink = t(this.getLandlordProdLink, this), this.getPetInsuranceDetailsPageProceedBtn = t(this.getPetInsuranceDetailsPageProceedBtn, this), this.getPetInsuranceProceedLink = t(this.getPetInsuranceProceedLink, this), this._createPetInsuranceProceedLink = t(this._createPetInsuranceProceedLink, this), this.getPetInsuranceProdLink = t(this.getPetInsuranceProdLink, this), this.getTravelMoneyProceedLink = t(this.getTravelMoneyProceedLink, this), this.getTravelMoneyProdLink = t(this.getTravelMoneyProdLink, this), this.generateCarCompareProdLink = t(this.generateCarCompareProdLink, this), this.generateCarProdLink = t(this.generateCarProdLink, this), this.getCompareCarDetailsLink = t(this.getCompareCarDetailsLink, this), this.getCarDetailsLink = t(this.getCarDetailsLink, this), this.generateCompareTravelDetailsLink = t(this.generateCompareTravelDetailsLink, this), this.generateCompareSuperDetailsLink = t(this.generateCompareSuperDetailsLink, this), this.generateCompareSuperProdLink = t(this.generateCompareSuperProdLink, this), this.generateCompareHciDetailsLink = t(this.generateCompareHciDetailsLink, this), this.generateCompareHciProdLink = t(this.generateCompareHciProdLink, this), this.getLifeProdLink = t(this.getLifeProdLink, this), this.getLifeDetailsLink = t(this.getLifeDetailsLink, this), this._createCredProdLink = t(this._createCredProdLink, this), this.getCompareCredProdLink = t(this.getCompareCredProdLink, this), this.getFunProdLink = t(this.getFunProdLink, this), this.getCredProdLink = t(this.getCredProdLink, this), this._createHciDetailsUrl = t(this._createHciDetailsUrl, this), this.getHciDetailsLink = t(this.getHciDetailsLink, this), this.generateHciProdLink = t(this.generateHciProdLink, this), this.generateTravelProdLink = t(this.generateTravelProdLink, this), this.getTravelDetailsLink = t(this.getTravelDetailsLink, this), this.generateSuperProdLink = t(this.generateSuperProdLink, this), this.getSuperDetailsLink = t(this.getSuperDetailsLink, this), this.getCreditLimit = t(this.getCreditLimit, this), this.getHealthApply = t(this.getHealthApply, this), this.getHealthProdLink = t(this.getHealthProdLink, this), this.getTickCrossHealthHOSPAMBU = t(this.getTickCrossHealthHOSPAMBU, this), this.getDrawDown = t(this.getDrawDown, this), this.getTickCrossNoBootstrapPIIO = t(this.getTickCrossNoBootstrapPIIO, this), this.getTickCrossPIIO = t(this.getTickCrossPIIO, this), this.getTickCrossAdvanceArrears = t(this.getTickCrossAdvanceArrears, this), this.getTickCrossNoBootstrapAdvanceArrears = t(this.getTickCrossNoBootstrapAdvanceArrears, this), this.getTickCrossTravInsu = t(this.getTickCrossTravInsu, this), this.getTickCrossMargVariable = t(this.getTickCrossMargVariable, this), this.getTickCrossMargLoan6Mth = t(this.getTickCrossMargLoan6Mth, this), this.getTickCrossNoBootstrapOffset = t(this.getTickCrossNoBootstrapOffset, this), this.removeFreq = t(this.removeFreq, this), this.getPenaltyFee = t(this.getPenaltyFee, this), this.getDollarZeroRounded = t(this.getDollarZeroRounded, this), this.getDollarZero = t(this.getDollarZero, this), this.getDollarNADash = t(this.getDollarNADash, this), this.getDollarNARounded = t(this.getDollarNARounded, this), this._getDollarNA = t(this._getDollarNA, this), this.getDollarNA = t(this.getDollarNA, this), this.getPercentFiltered = t(this.getPercentFiltered, this), this.getDollarFiltered = t(this.getDollarFiltered, this), this.getDollarOrNA = t(this.getDollarOrNA, this), this.getDollarRoundedNoMax = t(this.getDollarRoundedNoMax, this), this.getDollarRoundedNoMin = t(this.getDollarRoundedNoMin, this), this.getDollarRounded = t(this.getDollarRounded, this), this.getSMSFSavingsAccountFee = t(this.getSMSFSavingsAccountFee, this), this.getRemoveYears = t(this.getRemoveYears, this), this.getDays = t(this.getDays, this), this.convertDate = t(this.convertDate, this), this.getRemoveFreqFiltered = t(this.getRemoveFreqFiltered, this), this.getRemoveFreq = t(this.getRemoveFreq, this), this.defaultOptions = t(this.defaultOptions, this), m.defaults(this.options, this.defaultOptions()), this.gaqHelper = new l({
                            isTableSnapshot: this.options.isTableSnapshot,
                            isSimilarProductsLead: c.prototype.isSimilarProductsLead(this.options.location, this.options.similarProductsEnabled)
                        }), this.leads = new c({
                            gaqHelper: this.gaqHelper
                        })
                    }
                    var d;
                    return e.prototype.templates = {
                        proceed_btn: u.prototype.ProceedButton,
                        compare_checkbox: u.prototype.CompareCheckbox,
                        gold_lead_proceed_btn: u.prototype.GoldLeadProceedButton,
                        tooltip_text: u.prototype.TooltipText,
                        blue_sr: u.prototype.BlueSR
                    }, e.prototype.proceed_link_text = '<span class="hidden-xs hidden-sm">Proceed</span><i class="hidden-md hidden-lg fa fa-chevron-right"></i>', e.prototype.defaultOptions = function() {
                        return {
                            location: s.TABLE_PAGE,
                            similarProductsEnabled: !1,
                            isTableSnapshot: !1
                        }
                    }, e.prototype.null_span = function(t) {
                        return null == t && (t = -1), "<span value='" + t + "' class='fa fa-minus color-light-grey'></span>"
                    }, e.prototype._createHealthDetailsLink = function(t, e, n, i, r, o, s) {
                        var a, l, c, u, d, p, h, g;
                        return null == s && (s = !1), c = (null != (g = n.SUPP.lead_url) ? g.length : void 0) > 0, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([e.PROD_ID, e.COMPANY_NAME + " " + e.POLICY_NAME]), a = this.gaqHelper.generateGaqTrackerEvents(n, e.COMPANY_NAME, e.POLICY_NAME, e.SR_PROD_ID, o[1], f.faceted_search.category, "Leads", !1), d = "" + f.base_url + "redir?", m.each(e, function(t, e) {
                            return d += "" + e + "=" + encodeURI(t) + "&"
                        }), u = this.leads.isRedirLead(n), c && !u && (d = this.leads.replaceLeadUrl(t, n)), l = {
                            classes: "btn btn-sm " + r,
                            url: d,
                            LEAD_TEXT: i,
                            gaTrackerEvents: a
                        }, h = this.leads.getVariantMapDetails(l, n), l = m.extend(l, h.href_data), p = h.template, t = p(l)
                    }, e.prototype.getPerc2Decimals = function(t) {
                        return null != t ? ("string" == typeof t && (t = t.replace("%", "")), t = "" + Number(t).toFixed(2) + "%") : t = "<span title='Not Applicable' value='" + t + "'>N/A</span>", t
                    }, e.prototype.getRemoveFreq = function(t) {
                        var e;
                        return null != t ? "N/A" === t || "Nil" === t ? t = "<span title='0' >" + t + "</span>" : (e = t.replace(/[^0-9.]/g, ""), t = "<span title='" + Number(e) + "'>$" + Number(e).toFixed(2) + "</span>") : t = "<span title='0' >$0.00</span>", t
                    }, e.prototype.getRemoveFreqFiltered = function(t) {
                        return null != t && (t = "N/A" === t || "Nil" === t ? "<span title='0' >$0</span>" : this.getRemoveFreq(t)), t
                    }, e.prototype.convertDate = function(t) {
                        return t = p.prototype.getShortDate(t)
                    }, e.prototype.getDays = function(t) {
                        return t = "" + t + " days"
                    }, e.prototype.getRemoveYears = function(t) {
                        var e;
                        return e = Number(t.replace(" yrs", "")), isNaN(e) ? "No max" === t ? t = "<span title='999' >" + t + "</span>" : "N/A" === t && (t = "<span title='0' >" + t + "</span>") : t = "<span title='" + e + "' value='" + e + "'>" + e + "</span>", t
                    }, e.prototype.getSMSFSavingsAccountFee = function(t) {
                        return t = t.replace(/[dmfwq]/g, ""), t = isNaN(t) ? "<span title='1' value='1'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", 0, ",") + "</span>"
                    }, e.prototype.getDollarRounded = function(t, e) {
                        return null == e && (e = 0), t = isNaN(t) ? "Unlimited" === t || "Yes" === t ? "<span title='1' value='1'>" + t + "</span>" : "null" === t ? this.getTickCross("N", !0) : "<span title='Not Applicable' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", e, ",") + "</span>"
                    }, e.prototype.getDollarRoundedNoMin = function(t, e) {
                        return null == e && (e = 0), t = isNaN(t) ? "Unlimited" === t || "Yes" === t ? "<span title='1' value='1'>" + t + "</span>" : "null" === t ? "No Min" : "<span title='Not Applicable' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", e, ",") + "</span>"
                    }, e.prototype.getDollarRoundedNoMax = function(t, e) {
                        return null == e && (e = 0), t = "99999999.99" === t ? "No Max" : isNaN(t) ? "Unlimited" === t || "Yes" === t ? "<span title='1' value='1'>" + t + "</span>" : "<span title='Not Applicable' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", e, ",") + "</span>"
                    }, e.prototype.getDollarOrNA = function(t) {
                        return t = isNaN(t) ? "<span title='Not Applicable' value='0'>N/A</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", 0, ",") + "</span>"
                    }, e.prototype.getDollarFiltered = function(t) {
                        return t = null === t || "Nil" === t || "N/A" === t ? "<span title='Not Applicable' value='0'>$0</span>" : this.getDollarNA(t)
                    }, e.prototype.getPercentFiltered = function(t) {
                        return t = null === t || "Nil" === t || "N/A" === t ? "<span title='Not Applicable' value='0'>0%</span>" : this.getPercent(t)
                    }, e.prototype.getDollarNA = function(t, e) {
                        var n;
                        return null == e && (e = 2), isNaN(t) ? "Unlimited" === t || "Yes" === t ? t = "<span title='1' value='1'>" + t + "</span>" : "null" === t ? t = this.getTickCross("N", !0) : !isNaN(t) && (null != t ? t.indexOf("$") : void 0) > 0 ? (n = t.split("$")[1], t = "<span title='" + n + "' value='" + n + "'> " + r.formatMoney(n, "$", e, ",") + "</span>") : t = "<span title='Not Applicable' value='0'>" + t + "</span>" : t = "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", e, ",") + "</span>", t
                    }, e.prototype.getDollarComma = function(t) {
                        var e;
                        return e = this.getDollarNA(t), e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
                    }, e.prototype._getDollarNA = function(t) {
                        return t = isNaN(t) ? "<span title='0' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", ",") + "</span>"
                    }, e.prototype.getDollarNARounded = function(t) {
                        var e, n;
                        return e = 0, n = t, isNaN(t) || (n = Math.round(t)), this.getDollarNA(n, e)
                    }, e.prototype.getDollarNADash = function(t, e) {
                        var n;
                        return null == e && (e = 2), t = isNaN(t) ? "Unlimited" === t || "Yes" === t ? "<span title='1' value='1'>" + t + "</span>" : "null" === t ? this.getTickCross("N", !0) : "N/A" === t ? n = '<i class="fa fa-minus" style="color: #aaa;"></i>' : "<span title='Not Applicable' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", e, ",") + "</span>"
                    }, e.prototype.getDollarZero = function(t, e, n, i) {
                        return null == i && (i = 2), t = isNaN(t) ? "Nil" === t || "N/A" === t ? "<span title='0' value='0'>$0</span>" : "<span title='Not Applicable' value='0'>" + t + "</span>" : "<span title='" + t + "' value='" + t + "'> " + r.formatMoney(t, "$", i, ",") + "</span>"
                    }, e.prototype.getDollarZeroRounded = function(t, e) {
                        return this.getDollarZero(t, e, "", 0)
                    }, e.prototype.getPenaltyFee = function(t) {
                        return ('<span class="fa fa-minus color-light-grey"></span>' === t || "Nil" === t) && (t = "$0"), t
                    }, e.prototype.getSpan = function(t, e) {
                        return "<span title='" + t + "' value='" + t + "'>" + e + "</span>"
                    }, e.prototype.removeFreq = function(t) {
                        var e;
                        return e = t, "N/A" !== t && "Nil" !== t && (e = Number(t.replace("m", ""))), e
                    }, e.prototype.getBusSavFee = function(t, e) {
                        var n, i;
                        return n = Number(f.faceted_search.amount), t = this.getDollarNARounded(this.removeFreq(e.SUPP.COSTBASF, e)), i = e.SUPP.EXMPBABF, "N/A" !== i && n >= Number(i) && (t = this.getSpan(0, "Nil")), t
                    }, e.prototype.getBusTransFee = function(t, e) {
                        return this.getDollarZeroRounded(this.removeFreq(t, e))
                    }, e.prototype.getFreeTransactions = function(t, n) {
                        var i, r, o;
                        return t = "No", "Yes" === n.SUPP.IFRTFREE ? (o = "d" === n.SUPP.IFRTPERD ? "day" : "month", r = Number(n.SUPP.IFRTNFTR), i = r + " per " + o, t = e.prototype.getSpan(r, i)) : t = e.prototype.getTickCross(t), t
                    }, e.prototype.getSpecialOffers = function(t, e) {
                        var n, i, r, o, s, a, l, c, u, d, p, h, f;
                        return u = e.SUPP.OFFSDETA, s = e.SUPP.OFFSEXPI, c = e.SUPP.FEESONGW, h = e.SUPP.INFOBTIR, p = e.SUPP.INFOBTOP, r = e.SUPP.INFOCINT, i = e.SUPP.INFOCINP, l = "", f = "", o = "", t = '<i class="fa fa-minus" style="color: #aaa;"></i>', "N/A" !== u ? (a = "Ongoing", "N/A" !== s && (a = s), t = '<span title="0" value="0">' + u + "<br></br>Expiry: " + a + "</span>") : (d = !1, "Yes" === c && (l = "Annual fee waived in 1st year.", d = !0), "N/A" !== h && (f = "" + h + " on purchases for " + p + ".", d = !0), "N/A" !== r && (o = "" + r + " on balance transfers for " + i + ".", d = !0), d && (n = [l, f, o].join(" "), t = '<span title="0" value="0">' + n + "</span>")), t
                    }, e.prototype.getMortProdLinkWithSuffix = function(t, e) {
                        return t = this.getMortProdLink(t, e), "" + t + " <span class='mort-prod-suffix'>| " + this.getMortSuffix(e.SUPP.INFOFXVR, e) + "</span>"
                    }, e.prototype.getMortProdLink = function(t, e) {
                        return this.createMortProdLink(t, e, !1)
                    }, e.prototype.getCompareMortProdLink = function(t, e) {
                        return this.createMortProdLink(t, e, !0)
                    }, e.prototype.createMortProdLink = function(t, e, i) {
                        var r, o, s, a, l, c, u, d, p, h, g;
                        return h = this.leads.generateMortUrl(e), this.leads.shouldAddSimilarProducts(this.options.location, this.options.similarProductsEnabled) && (h = this.leads.addSimilarProducts(h, this.productsCollection, e.id)), h = this.leads.replaceLeadUrl(h, e), u = "", r = -1 === e["Product Name"].indexOf("<span>") ? e["Product Name"] : n(e["Product Name"]).find("a").text(), d = i ? "Prod Link Compare" : "Prod Link", s = f.faceted_search.category, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([s, e.SUPP.COMPANY_NAME, r, d]), a = e.SUPP.COMPANY_NAME, l = this.gaqHelper.generateGaqTrackerEvents(e, e.SUPP.COMPANY_NAME, r, e.SUPP.SR_PROD_ID, "" + s + " | RateCity SR", f.faceted_search.category, "Leads", !0), c = (null != (g = e.SUPP.lead_url) ? g.length : void 0) > 0, l += this.gaqHelper.digitalTracking(c ? "Monetised" : "non-Monetised", f.faceted_search.category, e.SUPP.SR_PROD_ID, r), p = window.location.search.replace("?", "").split("&"), m.forEach(p, function(t) {
                            var e, n, i;
                            return i = t.split("="), "referrer" === i[0] ? (n = i[1].toUpperCase(), l = "_gaq.push(['distributedLeads._setAccount', 'UA-3949252-5']);", e = "Home Loans | " + a + " | " + r, l += "_gaq.push(['distributedLeads._trackEvent', 'Leads', '" + n + "', '" + e + "']);") : void 0
                        }), o = "try{__adroll.record_user({'adroll_segments': 'a1753d9d'})}catch(err){};", l += o, t = "<span value='" + t + "'><a target='_blank'" + (' onmousedown="' + l + '" ') + ('href="' + h + '">' + t + "</a></span>")
                    }, e.prototype.getMortSuffix = function(t, e) {
                        return "Fixed" === t && (t += " for " + e.SUPP.MAX_TIME_YEARS + " years"), t
                    }, e.prototype._createDepaProdLink = function(t, e) {
                        var i, r, o, s, a, l, c;
                        return o = {
                            amount: f.faceted_search.amount
                        }, c = this.leads.generateDetailsURL(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, f.faceted_search.profile, o), c = this.leads.replaceLeadUrl(c, e), r = f.faceted_search.category, a = "", i = -1 === e["Product Name"].indexOf("<span>") ? e["Product Name"] : n(e["Product Name"]).find("a").text(), l = "Prod Link", this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([r, e.SUPP.COMPANY_NAME, i, l]), s = this.gaqHelper.generateGaqTrackerEvents(e, e.SUPP.COMPANY_NAME, i, e.SUPP.SR_PROD_ID, "" + r + " | RateCity SR", "Savings Accounts", "Leads", !0), t = "<span><a target='_blank' onmousedown=\"" + s + "\" href='" + c + "'>" + t + "</a></span>"
                    }, e.prototype.escapeString = function(t) {
                        return t.replace(/'/g, "&#146;")
                    }, e.prototype.getTickCrossOffset = function(t) {
                        var e;
                        return e = "Full" === t || "Partial" === t ? '<span title="Included" class="fa fa-check color-primary" style="width: 20px; height: 20px; " value="1"></span>' : '<span title="Not Available" class="fa fa-times color-danger" style="width: 20px; height: 20px; " value="0"></span>'
                    }, e.prototype.getTickCrossNoBootstrapOffset = function(t) {
                        return t = e.prototype.getTickCrossNoBootstrap("Full" === t || "Partial" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossMargLoan6Mth = function(t) {
                        return t = e.prototype.getTickCrossNoBootstrap("6" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossMargVariable = function(t) {
                        return t = e.prototype.getTickCrossNoBootstrap("Variable" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossTravInsu = function(t, n) {
                        return t = "No" !== n.SUPP.TRAVACTI && "null" !== n.SUPP.ACTIVATE_METHOD ? e.prototype.getTickCrossNoBootstrap("Domestic and International" === t || "International" === t ? "Y" : "N") + "<br/>" + n.SUPP.ACTIVATE_METHOD : e.prototype.getTickCrossNoBootstrap("Domestic and International" === t || "International" === t ? "Y" : "N")
                    }, e.prototype.getRemovePercent = function(t) {
                        var e, n;
                        return n = t.replace("%", ""), e = "<span title='" + n + "' value='" + t + "'>" + t + "</span>"
                    }, e.prototype.getScoreIndicator = function(t) {
                        var e;
                        return e = "1" === t ? '<span title="1" style="width: 20px; height: 20px; " value="1"><img title="Standard coverage according to Canstar Research" src="' + f.base_url + 'assets/image/life-pill-2.png"/></span>' : "0" === t ? '<span title="0" style="width: 20px; height: 20px; " value="0"><img title="Not available" src="' + f.base_url + 'assets/image/life-NA.png"/></span>' : "2" === t ? '<span title="2" style="width: 20px; height: 20px; " value="2"><img title="Good coverage according to Canstar Research" src="' + f.base_url + 'assets/image/life-pill-3.png"/></span>' : "3" === t ? '<span title="3" style="width: 20px; height: 20px; " value="3"><img title="Very good coverage according to Canstar Research" src="' + f.base_url + 'assets/image/life-pill-4.png"/></span>' : '<span title="4" style="width: 20px; height: 20px; " value="4"><img title="Excellent coverage according to Canstar Research" src="' + f.base_url + 'assets/image/life-pill-5.png"/></span>'
                    }, e.prototype.getTickCrossForNone = function(t) {
                        var e;
                        return e = t, "Premium None" === t && (e = this.getTickCross("N")), e
                    }, e.prototype.getTickCross = function(t, e) {
                        var n;
                        return null == e && (e = !0), n = t, "Y" === t || "Yes" === t || "Standard" === t ? n = e ? '<span title="Included" class="fa fa-check color-primary" style="width: 20px; height: 20px;" value="1"></span>' : '<span title="Included" style="width: 20px; height: 20px;" value="0"><i class="fa fa-check color-primary"></i></span>' : null === t && "Health" === f.faceted_search.category ? n = '<span title="Consult provider"  style="width: 20px; height: 20px; font-size:12px">Consult provider</span>' : "N" === t || null === t || "No" === t || "Not available" === t ? n = e ? '<span title="Not Available" style="width: 20px; height: 20px;" value="0"><i class="fa fa-times color-danger"></i></span>' : '<span title="Not Available" style="width: 20px; height: 20px; "><i class="fa fa-times color-danger"></i></span>' : "R" === t ? n = '<span title="Restricted" style="width: 20px; height: 20px;" value="-1"><i class="fa fa-unlock-alt color-warning"></i></span>' : "B" === t ? n = '<span title="Limited" style="width: 20px; height: 20px;" value="0"><i class="fa fa-clock-o"></i></span>' : "Optional" === t ? n = '<span title="Optional" style="width: 20px; height: 20px;" value="0"><i class="fa fa-circle-o color-warning"></i></span>' : "Not Available" === t ? n = '<span title="Not Included" style="width: 20px; height: 20px;" value="-2"><i class="fa fa-times color-danger"></i></span>' : m.isArray(t) && (t = m.toArray(t), n = t.length > 0 ? e ? '<span title="Included" class="fa fa-check color-primary" style="width: 20px; height: 20px;" value="1"></span>' : '<span title="Included" style="width: 20px; height: 20px;" value="0"><i class="fa fa-check color-primary"></i></span>' : e ? '<span title="Not Available" style="width: 20px; height: 20px;" value="0"><i class="fa fa-times color-danger"></i></span>' : '<span title="Not Available" style="width: 20px; height: 20px; "><i class="fa fa-times color-danger"></i></span>'), n
                    }, e.prototype.getTickCrossNoBootstrap = function(t) {
                        return this.getTickCross(t, !1)
                    }, e.prototype.getTickCrossDash = function(t) {
                        var e;
                        return e = "N/A" === t ? '<i class="fa fa-minus" style="color: #aaa;"></i>' : this.getTickCross(t)
                    }, e.prototype.getHealthLeadIcon = function(t) {
                        var e;
                        return e = t, "Y" === t || "Yes" === t || "Standard" === t ? e = '<span  value="#{value}"><i class="fa fa-check color-primary"></i></span>' : "N" === t || "No" === t || "Not available" === t ? e = '<span  value="#{value}"><i class="fa fa-times color-danger"></i></span>' : null === t ? e = "Consult provider" : "R" === t ? e = '<span  value="#{value}"><i class="fa fa-unlock-alt color-warning"></i></span>' : "B" === t ? e = '<span  value="#{value}"><i class="fa fa-clock-o"></i></span>' : "Not Available" === t && (e = '<span  value="#{value}"><i class="fa fa-times color-danger"></i></span>'), e
                    }, e.prototype.getSmallStarRating = function(t) {
                        return d(t, {
                            size: "small"
                        })
                    }, e.prototype.getLargeStarRating = function(t) {
                        return d(t, {
                            size: "large",
                            width: 142,
                            height: 27
                        })
                    }, e.prototype.getLargeNormalStarRating = function(t) {
                        return d(t, {
                            size: "large",
                            width: 142,
                            height: 27,
                            lazy: !1
                        })
                    }, e.prototype.getMediumStarRating = function(t) {
                        var e;
                        return e = d(t, {
                            size: "medium",
                            placeholder: !0,
                            height: 22,
                            lazy: !1
                        })
                    }, e.prototype.getMediumBlueStarRating = function(t) {
                        return d(t, {
                            size: "medium"
                        }, "blue")
                    }, e.prototype.getStarRating = function(t) {
                        return d(t)
                    }, d = function(t, e, n) {
                        var i;
                        return null !== t && "string" == typeof t && (t = t.replace(/^\s+|\s+$/g, "").toLowerCase()), i = function() {
                            switch (t) {
                                case "*":
                                case "1 star product":
                                    return 1;
                                case "* *":
                                case "2 star product":
                                    return 2;
                                case "* * *":
                                case "3 star product":
                                    return 3;
                                case "* * * *":
                                case "4 star product":
                                    return 4;
                                case "* * * * *":
                                case "5 star product":
                                    return 5;
                                case "10":
                                case null:
                                case "rising star":
                                case "not rated":
                                case "Not rated":
                                case "null":
                                case -12:
                                    return '<span title="Not Rated" value="-1">Not rated</span>';
                                case "New":
                                case "11":
                                case -11:
                                    return '<span title="New Product" value="0">New product</span>';
                                case "12":
                                case "4.5":
                                case -10:
                                    return '<span title="Rising star" value="-1">Rising star</span>';
                                case -99:
                                    return '<span title="Canstar doesnt rate fixed loans" value="-2" style="text-align:center; font-size:12px">Canstar does not rate<br/> fixed loans</span>';
                                default:
                                    return t
                            }
                        }(), isNaN(parseInt(i)) || (n && (i = "" + n + "_" + i), i = o.prototype.lazyStarLogo(i, e)), i
                    }, e.prototype.getCompanyImage = function(t, e) {
                        return t = o.prototype.companyLogo(t, e.SUPP.COMPANY_NAME, null, null, "https://snapshots.canstar.com.au/widgets/")
                    }, e.prototype.getCarCompanyImage = function(t, e) {
                        return t = o.prototype.companyLogo(t, e.SUPP.COMPANY, null, null, "https://snapshots.canstar.com.au/widgets/")
                    }, e.prototype.getMortCompanyImage = function(t, e) {
                        var i, r, s, a, l, c;
                        return l = "", i = -1 === e["Product Name"].indexOf("<span>") ? e["Product Name"] : n(e["Product Name"]).find("a").text(), s = "" + f.faceted_search.category + " | " + e.SUPP.COMPANY_NAME + " | " + i + " | Logo Link", s = this.escapeString(s), this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([f.faceted_search.category, e.SUPP.COMPANY_NAME, i, "Logo Link"]), r = e.SUPP.COMPANY_NAME, a = this.gaqHelper.generateGaqTrackerEvents(e, r, i, e.SUPP.SR_PROD_ID, "RateCity SR", "Savings Accounts", "Leads", !0), c = window.location.search.replace("?", "").split("&"), m.forEach(c, function(t) {
                            var e, n, o;
                            return o = t.split("="), "referrer" === o[0] ? (n = o[1].toUpperCase(), a = "_gaq.push(['distributedLeads._setAccount', 'UA-3949252-5']);", e = "Home Loans | " + r + " | " + i, a += "_gaq.push(['distributedLeads._trackEvent', 'Leads', '" + n + "', '" + e + "']);") : void 0
                        }), t = "<a value='" + t + "' rel='nofollow'  onmousedown=\"" + a + "\" target='_blank' href='" + e.SUPP.RC_URL + "'>" + o.prototype.lazyCompanyLogo(t, e.SUPP.COMPANY_NAME, null, null, "https://snapshots.canstar.com.au/widgets/") + "</a>"
                    }, e.prototype.getLargeCompanyImage = function(t, e) {
                        return t = o.prototype.lazyCompanyLogo(t, e.SUPP.COMPANY_NAME, {
                            width: 145,
                            height: 60,
                            size: "large"
                        }, null, "https://snapshots.canstar.com.au/widgets/")
                    }, e.prototype.getLargeNormalCompanyImage = function(t, e) {
                        return t = o.prototype.companyLogo(t, e.SUPP.COMPANY_NAME, {
                            width: 145,
                            height: 60,
                            size: "large"
                        }, null, "https://snapshots.canstar.com.au/widgets/")
                    }, e.prototype.getFullSizeCompanyImage = function(t, e) {
                        var n;
                        return t = "kiwi" === (null != (n = e.SUPP.CO_CODE) ? n.toLowerCase() : void 0) ? o.prototype.companyLogo(t, e.SUPP.COMPANY_NAME, {
                            width: 78,
                            height: 78,
                            size: "large"
                        }, null, "http://www.canstar.com.au/widgets/") : o.prototype.companyLogo(t, e.SUPP.COMPANY_NAME, {
                            width: 220,
                            height: 78,
                            size: "large"
                        }, null, "http://www.canstar.com.au/widgets/")
                    }, e.prototype.getBON = function(t) {
                        var e;
                        return e = "B" === t || "Y" === t ? '<span title="Included" style="width: 20px; height: 20px;" value="2"><i class="fa fa-check color-primary"></i></span>' : "O" === t ? '<span title="Option is available at an additional cost" style="width: 20px; height: 20px;" value="1"><i class="fa fa-circle-o color-warning"></i></span>' : '<span title="Not Included" style="width: 20px; height: 20px;" value="0"><i class="fa fa-times color-danger"></i></span>'
                    }, e.prototype.getDirectBON = function(t) {
                        var e;
                        return e = "B" === t || "Y" === t ? '<span title="Included" style="width: 20px; height: 20px; " value="2"><i class="fa fa-check color-primary"></i></span>' : "O" === t ? '<span title="Option is available at an additional cost" style="width: 20px; height: 20px; " value="1"><i class="fa fa-circle-o color-warning"></i></span>' : '<span title="Not Included" style="width: 20px; height: 20px; " value="0"><i class="fa fa-times color-danger"></i></span>'
                    }, e.prototype.getRCLeadHref = function(t, e) {
                        return this.createRCLeadHref(t, e, !1)
                    }, e.prototype.getCompareRCLeadHref = function(t, e) {
                        return this.createRCLeadHref(t, e, !0)
                    }, e.prototype.createRCLeadHref = function(t, e, i) {
                        var r, o, s, a, l, c, u, d, p, h, g, v, _, y, b, w, P, S, C;
                        return h = "", r = -1 === e["Product Name"].indexOf("</a>") ? e["Product Name"] : n(e["Product Name"]).find("a").addBack("a").text(), g = i ? " | Compare" : "", t = this.leads.replaceLeadUrl(t, e), s = f.faceted_search.category, this.gaqHelper.resetLegacyEventLabel(), a = e.SUPP.COMPANY_NAME, this.gaqHelper.configureLegacyEventLabel([f.faceted_search.category, a, r + g]), p = e.SUPP.PROD_ID ? e.SUPP.PROD_ID : e.SUPP.SR_PROD_ID, c = this.gaqHelper.generateGaqTrackerEvents(e, e.SUPP.COMPANY_NAME, r, p, "" + s + " | RateCity SR", f.faceted_search.category, "Leads", !1), "Home Loans" === (null != (w = f.faceted_search) ? w.category : void 0) && (v = window.location.search.replace("?", "").split("&"), m.forEach(v, function(t) {
                            var e, n, i;
                            return i = t.split("="), "referrer" === i[0] ? (n = i[1].toUpperCase(), c = "_gaq.push(['distributedLeads._setAccount', 'UA-3949252-5']);", e = "Home Loans | " + a + " | " + r, c += "_gaq.push(['distributedLeads._trackEvent', 'Leads', '" + n + "', '" + e + "']);") : void 0
                        })), d = (null != (P = e.SUPP.lead_url) ? P.length : void 0) > 0, l = "btn btn-sm proceed", u = {
                            classes: l,
                            url: t,
                            LEAD_TEXT: f.faceted_search.lead_text ? f.faceted_search.lead_text : this.proceed_link_text,
                            gaTrackerEvents: c
                        }, b = f.faceted_search.category, "Home Loans" === b ? (u.gaTrackerEvents += this.gaqHelper.digitalTracking(d ? "Monetised" : "non-Monetised", b, p, r), o = "try{__adroll.record_user({'adroll_segments': 'a1753d9d'})}catch(err){};", u.gaTrackerEvents += o) : u.classes += " btn-primary", "canstar" === (null != (S = f.faceted_search) ? S.distributor : void 0) && "mortgages" === (null != (C = f.faceted_search) ? C.table : void 0) ? (y = this.leads.getVariantMapDetails(u, e), u = m.extend(u, y.href_data), _ = y.template) : _ = this.templates.gold_lead_proceed_btn, t = _(u)
                    }, e.prototype.getTickCrossNoBootstrapAdvanceArrears = function(t) {
                        return t = e.prototype.getTickCrossNoBootstrap("Advance" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossAdvanceArrears = function(t) {
                        return t = e.prototype.getTickCross("Advance" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossPIIO = function(t) {
                        return t = e.prototype.getTickCross("IO" === t || "Both" === t ? "Y" : "N")
                    }, e.prototype.getTickCrossNoBootstrapPIIO = function(t) {
                        return t = e.prototype.getTickCrossNoBootstrap("IO" === t || "Both" === t ? "Y" : "N")
                    }, e.prototype.getDrawDown = function(t, e) {
                        return "N/A" === t ? "" + a.prototype.formatCurrency(e.SUPP.CONSCOST, !1) + " per draw" : a.prototype.formatCurrency(t, !1)
                    }, e.prototype.getTickCrossHealthHOSPAMBU = function(t) {
                        return t = e.prototype.getTickCross("Full" === t ? "Y" : "N")
                    }, e.prototype.getHealthProdLink = function(t, e) {
                        var n, i, r, o, s, a, l;
                        return r = (null != (l = e.SUPP.lead_url) ? l.length : void 0) > 0, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([e.SUPP.PROD_ID, e.SUPP.COMPANY_NAME + " " + e.SUPP.POLICY_NAME, "Prod Link"]), n = m.clone(e.SUPP), n.distributor = f.faceted_search.distributor, n.table = f.faceted_search.table, a = m.reduce(f.stored_selector_params, function(t, e, n) {
                            return t[n] = e.value, t
                        }, {}), m.defaults(n, a), i = this.gaqHelper.generateGaqTrackerEvents(e, n.COMPANY_NAME, n.POLICY_NAME, n.PROD_ID, "BUPA" === e.SUPP.CO_CODE ? "BUPA" : "CompareHealthSR", f.faceted_search.category, "Leads", !0), i += this.gaqHelper.digitalTracking(r ? "Monetised" : "non-Monetised", f.faceted_search.category, e.SUPP.PROD_ID, e.PRODUCT_NAME, "Prod Link"), s = "" + f.base_url + "redir?", m.each(n, function(t, e) {
                            return s += "" + e + "=" + encodeURI(t) + "&"
                        }), o = this.leads.isRedirLead(e), r && !o && (s = this.leads.replaceLeadUrl(t, e)), this.templates.proceed_btn({
                            button: !1,
                            onmousedown: i,
                            href: s,
                            text: t
                        })
                    }, e.prototype.getHealthApply = function(t, e) {
                        var n, i, r;
                        return this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([e.SUPP.PROD_ID, e.SUPP.COMPANY_NAME + " " + e.SUPP.POLICY_NAME]), i = this.gaqHelper.generateGaqTrackerEvents(e, e.SUPP.COMPANY_NAME, e.SUPP.POLICY_NAME, e.SUPP.PROD_ID, "CompareHealthSR", "Health Insurance", "Leads", !1), n = m.clone(e.SUPP), n.distributor = f.faceted_search.distributor, n.table = f.faceted_search.table, r = m.reduce(f.stored_selector_params, function(t, e, n) {
                            return t[n] = e.value, t
                        }, {}), m.defaults(n, r), n.STATE_ID = e.SUPP.STATE, this._createHealthDetailsLink(t, n, e, this.proceed_link_text, "proceed", ["Leads", "BUPA" === e.SUPP.CO_CODE ? "BUPA" : "CompareHealthSR", "" + e.SUPP.PROD_ID + " | " + e.SUPP.COMPANY_NAME + " " + e.SUPP.POLICY_NAME + " "], !0)
                    }, e.prototype.getDollar = function(t) {
                        var e;
                        return e = (Number(t) || 0).toFixed(2), "<span title=" + e + (" value='" + e + "'>$") + e + "</span>"
                    }, e.prototype.getDollarRound = function(t) {
                        var e;
                        return e = (Number(t) || 0).toFixed(0), "<span title='" + e + "' value='" + e + "' title='" + e + "'>$" + e + "</span>"
                    }, e.prototype.getDollarMillions = function(t) {
                        var e;
                        return e = +t / 1e6, e = this.getDollarNA(e), e + "M"
                    }, e.prototype.getDollarNANil = function(t) {
                        return n.isNumeric(t) ? t = "$" + Number(t).toFixed(2) : "Nil" === t && (t = "$" + Number(0).toFixed(2)), t
                    }, e.prototype.getDollarNANilPercent = function(t) {
                        return n.isNumeric(t) ? t = "$" + Number(t).toFixed(2) : "Nil" === t ? t = "$" + Number(0).toFixed(2) : void 0
                    }, e.prototype.getDollarCross = function(t) {
                        return t = "N/A" === t ? e.prototype.getTickCross("N") : e.prototype.getDollarNA(t)
                    }, e.prototype.get100Percent = function(t) {
                        return n.isNumeric(t) && (t = "" + Number(100 * t).toFixed(2) + "%"), t
                    }, e.prototype.getPercent = function(t) {
                        return n.isNumeric(t) ? t = "" + Number(t).toFixed(2) + "%" : "null" === t && (t = '<i class="fa fa-minus" style="color: #aaa;"></i>'), t
                    }, e.prototype.getDollarOrPercent = function(t) {
                        var e, n;
                        return e = t, n = /%$/, "N/A" === t || "Not Included" === t ? e = "-" : n.test(t) || (e = this.getDollarRound(t)), e
                    }, e.prototype.getEntryAge = function(t) {
                        var e;
                        return e = t, "E50" === t ? e = "Early Fifties" : "L50" === t ? e = "Late Fifties" : "E60" === t ? e = "Early Sixties" : "L60" === t ? e = "Late Sixties" : "E70" === t && (e = "Seventy Plus"), e
                    }, e.prototype.getCreditLimit = function(t, e) {
                        var n, i;
                        return i = t, n = e.SUPP.INFOMAXL, "No max" !== n && (n = this.getDollarRound(Number(n).toFixed())), "No min" !== i && (i = this.getDollarRound(Number(i).toFixed())), "" + i + " - " + n
                    }, e.prototype.getPercentNoDecimal = function(t) {
                        var e;
                        return e = null != t ? t.replace("%", "") : void 0, n.isNumeric(e) && (t = "" + Number(e).toFixed(0) + "%"), t
                    }, e.prototype.getNumberOrDash = function(t) {
                        var e;
                        return e = t, n.isNumeric(t) ? this.getNumber(t) : e = "-", e
                    }, e.prototype.getLoanRepaymentType = function(t) {
                        return t = "P+I" === t ? "Principal + Interest" : "IO" === t ? "Interest Only" : "P + I / IO"
                    }, e.prototype.getNumber = function(t) {
                        var e;
                        return "N/A" === t ? (t = 0, e = "Not Applicable") : (t = "" + Number(t), e = t), "<span title=" + e + (" value='" + e + "'>") + t + "</span>"
                    }, e.prototype.getNumberMonth = function(t) {
                        var e;
                        return e = "N/A" === t ? '<span title="Not Applicable" value="#{Not Applicable}">' + t + "</span>" : "No" === t ? '<span title="Not Available" value="#{Not Available}" class="fa fa-times color-danger" style="width: 20px; height: 20px; "></span>' : e = '<span title="' + t.substr(0, 2) + '" value="#{value.substr(0,2)}">' + t + "</span>"
                    }, e.prototype.getNumberHours = function(t) {
                        var e;
                        return e = "N/A" === t ? '<span title="Not Applicable" >' + t + "</span>" : '<span title="' + t.replace(" hrs", "") + '" value="' + t.replace(" hrs", "") + '" >' + t + "</span>"
                    }, e.prototype.getNAMaxSort = function(t) {
                        var e;
                        return e = "N/A" === t ? '<span title="Not Applicable" value="Not Applicable">' + t + "</span>" : n.isNumeric(t) ? '<span title="' + t + '" value="#{value}">$' + t + "</span>" : '<span title="0" value="0">' + t + "</span>"
                    }, e.prototype.getDollarRoundNoMaxSort = function(t) {
                        var e, i;
                        return "No max" === t ? i = '<span title="No Max" value="No Max">' + t + "</span>" : n.isNumeric(t) ? (e = (Number(t) || 0).toFixed(0), i = "<span title=" + e + (" value='" + e + "' title='" + e + "'>$") + e + "</span>") : i = '<span title="0" value="0">' + t + "</span>", i
                    }, e.prototype.getNoMaxSort = function(t) {
                        var e;
                        return e = "No max" === t ? '<span title="No Max" value="No Max">' + t + "</span>" : n.isNumeric(t) ? '<span title="' + t + '" value="#{value}">' + t + "</span>" : '<span title="0" value="0">' + t + "</span>"
                    }, e.prototype.getSuperAdminFee = function(t, i) {
                        return t = n.isNumeric(t) ? "$" + t : e.prototype.getPercent(i.SUPP.ADMI1PER)
                    }, e.prototype.getSuperInvFee = function(t, i) {
                        return t = n.isNumeric(t) ? e.prototype.getDollar(t) : e.prototype.getPercent(i.SUPP.INVE1PER)
                    }, e.prototype.getSuperMembFee = function(t, i) {
                        return t = n.isNumeric(t) ? e.prototype.getDollar(t) : e.prototype.getPercent(i.SUPP.MEMB1PER)
                    }, e.prototype.getVwMortFEESAPPLDolPerc = function(t, n) {
                        return t = "FEESAPPL" === n.SUPP.FEE_PERCENT_TYPE ? e.prototype.getPercent(n.SUPP.FEE_PERCENT) : e.prototype.getDollar(t)
                    }, e.prototype.getLoanFEESAPPLDolPerc = function(t, n) {
                        return t = "FEESAPPL" === n.SUPP.FEE_PERCENT_TYPE ? e.prototype.getDollar(n.SUPP.FEE_PERCENT / 100 * f.faceted_search.amount) : "0" === t ? "$0" : e.prototype.getDollar(t)
                    }, e.prototype.getSuperDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateSuperLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.generateSuperProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateSuperLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e, s.DETAILS_TYPE_LINK)
                    }, e.prototype.getTravelDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTravelLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", e.SUPP.PROFILE_NAME, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.generateTravelProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTravelLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", e.SUPP.PROFILE_NAME, e)
                    }, e.prototype.generateHciProdLink = function(t, e) {
                        var n, i;
                        return i = this._createHciDetailsUrl(t, e), n = this.leads.generateHciLink(i, e.SUPP.SR_PROD_ID, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, " | Prod Link", f.faceted_search.profile, e, s.DETAILS_TYPE_LINK)
                    }, e.prototype.getHciDetailsLink = function(t, e) {
                        var n, i;
                        return i = this._createHciDetailsUrl(t, e), n = this.leads.generateHciLink(i, t, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, "", f.faceted_search.profile, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype._createHciDetailsUrl = function(t, e) {
                        var n;
                        return n = this.leads.generateHciURL(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, f.faceted_search.profile, e), this.leads.shouldAddSimilarProducts(this.options.location, this.options.similarProductsEnabled) && (n = this.leads.addSimilarProducts(n, this.productsCollection, e.id)), n = this.leads.replaceLeadUrl(n, e)
                    }, e.prototype.getCredProdLink = function(t, e) {
                        return this._createCredProdLink(t, e, !1)
                    }, e.prototype.getFunProdLink = function(t, e) {
                        return this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, !0, f.faceted_search.profile)
                    }, e.prototype.getCompareCredProdLink = function(t, e) {
                        return this._createCredProdLink(t, e, !0)
                    }, e.prototype._createCredProdLink = function(t, e, r) {
                        var o, s, a, l, c, u, d, p, h;
                        return null == r && (r = !1), l = {
                            amount: f.faceted_search.amount
                        }, h = this.leads.generateDetailsURL(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, f.faceted_search.profile, l), u = i.prototype.linkToDetails(), u || (h = this.leads.replaceLeadUrl(h, e)), p = "", o = -1 === e["Product Name"].indexOf("<span>") ? e["Product Name"] : n(e["Product Name"]).find("a").text(), a = r ? "Prod Link Compare" : "Prod Link", s = f.faceted_search.category, this.gaqHelper.resetLegacyEventLabel(), this.gaqHelper.configureLegacyEventLabel([f.faceted_search.category, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, a]), d = u ? {
                            unmonetisedOverride: !0
                        } : {}, c = this.gaqHelper.generateGaqTrackerEvents(e, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, e.SUPP.SR_PROD_ID, "" + s + " | RateCity SR", f.faceted_search.category, "Leads", !0, d), t = "<a value='" + t + "' target='_blank' onmousedown=\"" + c + "\" href='" + h + "'>" + t + "</a>"
                    }, e.prototype.getLifeDetailsLink = function(t, e) {
                        return this.leads.generateLifeLink(e, !1)
                    }, e.prototype.getLifeProdLink = function(t, e) {
                        return this.leads.generateLifeLink(e, !0)
                    }, e.prototype.generateCompareHciProdLink = function(t, e) {
                        var n, i;
                        return i = this._createHciDetailsUrl(t, e), n = this.leads.generateHciLink(i, e.SUPP.SR_PROD_ID, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, "| Prod Link Compare", f.faceted_search.profile, e, s.DETAILS_TYPE_LINK)
                    }, e.prototype.generateCompareHciDetailsLink = function(t, e) {
                        var n, i;
                        return i = this._createHciDetailsUrl(t, e), n = this.leads.generateHciLink(i, t, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, "", f.faceted_search.profile, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.generateCompareSuperProdLink = function(t, e) {
                        var n;
                        return "MERM" === e.SUPP.CO_CODE && (e.SUPP.lead_url = "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=14645206&PluID=0&ord=[timestamp]"), n = this.leads.generateSuperLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Prod Link Compare", f.faceted_search.profile, e)
                    }, e.prototype.generateCompareSuperDetailsLink = function(t, e) {
                        var n;
                        return "MERM" === e.SUPP.CO_CODE && (e.SUPP.lead_url = "http://bs.serving-sys.com/BurstingPipe/adServer.bs?cn=tf&c=20&mc=click&pli=14645206&PluID=0&ord=[timestamp]"), n = this.leads.generateSuperLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Compare", f.faceted_search.profile, e)
                    }, e.prototype.generateCompareTravelDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTravelLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Compare", e.SUPP.PROFILE_NAME, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.getCarDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateCarLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, "proceed btn btn-sm", e.SUPP.PROD_NAME, e.SUPP.COMPANY, "", f.faceted_search.star_profile, e, !1, s.DETAILS_TYPE_BTN)
                    }, e.prototype.getCompareCarDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateCarLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, "proceed-alt btn btn-sm", e.SUPP.PROD_NAME, e.SUPP.COMPANY, "| Compare", f.faceted_search.star_profile, e, !1, s.DETAILS_TYPE_BTN)
                    }, e.prototype.generateCarProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateCarLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, "prod_link", e.SUPP.PROD_NAME, e.SUPP.COMPANY, " | Prod Link ", f.faceted_search.star_profile, e, !0, s.DETAILS_TYPE_LINK)
                    }, e.prototype.generateCarCompareProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateCarLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, "prod_link", e.SUPP.PROD_NAME, e.SUPP.COMPANY, " | Prod Link Compare", f.faceted_search.star_profile, e, !0, s.DETAILS_TYPE_LINK)
                    }, e.prototype.compareCheckbox = function(t, e) {
                        var i, r, o, s;
                        return r = "", i = e.SUPP.id_field, t = e.SUPP[i] || e.SUPP.SR_PROD_ID || t, r = (null != e["Product Name"]) > 0 && e["Product Name"].indexOf("</form>") > -1 ? n(e["Product Name"]).find('input[name="POLICY_NAME"]').val() : (null != e["Product Name"]) > 0 && e["Product Name"].indexOf("</a>") > -1 ? n(e["Product Name"]).find("a").addBack("a").text() : e["Product Name"], o = e.SUPP.COMPANY_NAME + " - " + r, s = "", null != e.SUPP.related_product_id && (s = ' data-related-prod-image="' + e.SUPP.related_product_image + '" data-related-company-name="' + e.SUPP.related_company_name + '" data-related-prod-id="' + e.SUPP.related_product_id + '" data-related-prod-name="' + e.SUPP.related_product_name + '" '), this.templates.compare_checkbox({
                            company_name: e.SUPP.COMPANY_NAME,
                            product_name: r,
                            company_product: o,
                            id: t,
                            related_product: s
                        })
                    }, e.prototype.notProvided = function(t) {
                        return t ? "<span title='" + t + "' value='" + t + "'>" + t + "</span>" : "<span title='Not Provided' value='Not Provided'>Not Provided</span>"
                    }, e.prototype.numericSort = function(t) {
                        var e;
                        return e = Number(t.replace(/^\D+|\D+$/g, "")), isNaN(e) && (e = 0), "<span title='" + e + "' value='" + e + "''>" + t + "</span>"
                    }, e.prototype.getTravelMoneyFee = function(t, e, i) {
                        var o;
                        return /%\s*$/.test(t) ? o = parseFloat(t) : n.isNumeric(t) ? (o = t, t = n.inArray(i, ["Maximum No. of Currencies Loaded"]) > -1 ? r.formatMoney(t, "", 0) : r.formatMoney(t, "$", 0)) : o = "N/A" === t ? "Not Applicable" : 0, t = "<span title='" + o + "' value='" + o + "'>" + t + "</span>"
                    }, e.prototype.getTravelMoneyProdLink = function(t, e) {
                        return this.leads.generateTravelMoneyLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Prod Link", f.faceted_search.profile, e)
                    }, e.prototype.getTravelMoneyProceedLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTravelMoneyLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.getPetInsuranceProdLink = function(t, e) {
                        return this.leads.generatePetInsuranceLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Prod Link", f.faceted_search.profile, e)
                    }, e.prototype._createPetInsuranceProceedLink = function(t, e, n, i) {
                        return null == i && (i = !1), this.leads.generatePetInsuranceLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, i, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e, n)
                    }, e.prototype.getPetInsuranceProceedLink = function(t, e) {
                        return this._createPetInsuranceProceedLink(t, e, s.DETAILS_TYPE_BTN, !1)
                    }, e.prototype.getPetInsuranceDetailsPageProceedBtn = function(t, e) {
                        return this._createPetInsuranceProceedLink(t, e, s.DETAILS_PAGE_TYPE_BTN, !1)
                    }, e.prototype.getLandlordProdLink = function(t, e) {
                        return this.leads.generateLandlordLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Prod Link", f.faceted_search.profile, e)
                    }, e.prototype.getLandlordProceedLink = function(t, e) {
                        var n;
                        return n = this.leads.generateLandlordLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.getLoanFee = function(t, e, i) {
                        var o, s;
                        return t = "string" == typeof t ? t.replace("$", "") : "N/A", o = /\s*to|-\s*/, o.test(t) && (s = parseFloat(t.split(o)[0]), n.inArray(i, ["Minimum Current Rate", "Comparison Rate", "Comparison Rate&nbsp;*"]) > -1 && (t = t.split(o)[0])), /%\s*$/.test(t) ? s = parseFloat(t) : n.isNumeric(t) ? (s = t, t = n.inArray(i, ["Minimum Current Rate", "Comparison Rate", "Comparison Rate&nbsp;*"]) > -1 ? r.formatMoney(t, "", 2) + "%" : "Monthly Repayment" === i ? "N/A" === t ? "N/A" : "$" + t : r.formatMoney(t, "$", 2)) : s = "N/A" === t ? "Not Applicable" : 0, t = "<span title='" + s + "' value='" + s + "'>" + t + "</span>"
                    }, e.prototype.getPaymentFrequency = function(t) {
                        var e, n, i, r, o, s;
                        if ("string" == typeof t) {
                            for (i = "", e = t.split(" "), n = 0, o = 0, s = e.length; s > o; o++) r = e[o], n >= 1 && (i += ", "), i += this.getFrequencyString(r), n += 1;
                            return i
                        }
                        return "N/A"
                    }, e.prototype.getFrequencyString = function(t) {
                        switch (t) {
                            case "d":
                                return "Daily";
                            case "w":
                                return "Weekly";
                            case "f":
                                return "Fortnightly";
                            case "m":
                                return "Monthly";
                            case "q":
                                return "Quarterly";
                            case "s":
                                return "Semi-annually";
                            case "a":
                                return "Annually";
                            default:
                                return "N/A"
                        }
                    }, e.prototype.getLoanProdLink = function(t, e) {
                        var n, i, r;
                        return n = f.faceted_search, i = {
                            amount: n.amount,
                            term: n.term
                        }, r = this.leads.generateDetailsURL(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, n.profile, i), r = this.leads.replaceLeadUrl(r, e), this.leads.generateLoanLink(r, e, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " Prod Link ", e.SUPP.PROD_ID)
                    }, e.prototype.getLoanNZProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateLoanNZLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, f.faceted_search.amount, f.faceted_search.term, e)
                    }, e.prototype.getLoanNZDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateLoanNZLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, f.faceted_search.amount, f.faceted_search.term, e)
                    }, e.prototype.getBusSavDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBusSavLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, f.faceted_search.amount, e)
                    }, e.prototype.generateBusSavProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBusSavLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, f.faceted_search.amount, e)
                    }, e.prototype.getBusCredLink = function(t, e, n) {
                        var i;
                        return i = {
                            amount: f.faceted_search.amount
                        }, this.leads.generateTrackedLink(t, e, e.SUPP.PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, n, f.faceted_search.profile, i)
                    }, e.prototype.getBusCredProceedLink = function(t, e) {
                        return this.getBusCredLink(t, e, !1)
                    }, e.prototype.getBusCredProdLink = function(t, e) {
                        return this.getBusCredLink(t, e, !0)
                    }, e.prototype.getETFLink = function(t, e, n) {
                        return this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.FUNDNAME, n, f.faceted_search.profile)
                    }, e.prototype.getETFProceedLink = function(t, e) {
                        return this.getETFLink(t, e, !1)
                    }, e.prototype.getETFProdLink = function(t, e) {
                        return this.getETFLink(t, e, !0)
                    }, e.prototype.getManagedFundsLink = function(t, e, n) {
                        return this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.FUNDNAME, n, f.faceted_search.profile)
                    }, e.prototype.getManagedFundsProceedLink = function(t, e) {
                        return this.getManagedFundsLink(t, e, !1)
                    }, e.prototype.getManagedFundsProdLink = function(t, e) {
                        return this.getManagedFundsLink(t, e, !0)
                    }, e.prototype.getTravCredDebLink = function(t, e, n) {
                        return this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, n, f.faceted_search.profile)
                    }, e.prototype.getTravCredDebProceedLink = function(t, e) {
                        return this.getTravCredDebLink(t, e, !1)
                    }, e.prototype.getTravCredDebProdLink = function(t, e) {
                        return this.getTravCredDebLink(t, e, !0)
                    }, e.prototype.getBusTransDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBusTransLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateBusTransProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBusTransLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getBuslDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBuslLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, f.faceted_search.amount, f.faceted_search.category, "", e)
                    }, e.prototype.generateBuslProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateBuslLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, f.faceted_search.amount, f.faceted_search.category, e.SUPP.PROD_EXTRA, e)
                    }, e.prototype.getRewardsDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateRewardsLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME + " | " + e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateRewardsProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateRewardsLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME + " | " + e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getMargDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateMargLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.TYPE_PROD_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateMargProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateMargLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.TYPE_PROD_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getACPDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateACPLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.TYPE_PROD_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateACPProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateACPLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "| Prod Link", f.faceted_search.profile, e)
                    }, e.prototype.getIMTDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateIMTLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateIMTProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateIMTLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getDirectLifeDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateDirectLifeLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.generateDirectLifeProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateDirectLifeLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e, s.DETAILS_TYPE_LINK)
                    }, e.prototype.getDirectIncomeDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateDirectIncomeLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.BENEFIT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.generateDirectIncomeProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateDirectIncomeLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.BENEFIT_NAME, "| Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getOnlineShareDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateOnlineShareLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype.getOnlineShareProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateOnlineShareLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.checkDollarPercent = function(t) {
                        var e;
                        return e = ["N/A", "Nil"], e.indexOf(t) > -1 || t.indexOf("%") > -1 ? t : "$" + t
                    }, e.prototype.getRewdLinkedCard = function(t) {
                        var e;
                        return e = -1 === t.indexOf("<br/>") ? t : "See Details page"
                    }, e.prototype.generateMortNZProdLink = function(t, e) {
                        var n, i;
                        return i = e.SUPP.INFOFXVR, "variable" === i.toLowerCase().trim() && (i = "Floating Rate"), n = this.leads.generateMortNZLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.TYPE_PROD_NAME + " | " + e.SUPP.PRODUCT_NAME, " | Prod Link ", f.faceted_search.profile, f.faceted_search.amount, e), "" + n + " <span class='mort-prod-suffix'>| " + this.getMortSuffix(i, e) + "</span>"
                    }, e.prototype.getMortNZDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateMortNZLink(f.base_url, e.SUPP.PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.TYPE_PROD_NAME, "", f.faceted_search.profile, f.faceted_search.amount, e)
                    }, e.prototype._createMortDetailsLink = function(t, e, n) {
                        var i;
                        return i = this.leads.generateMortUrl(e), this.leads.shouldAddSimilarProducts(this.options.location, this.options.similarProductsEnabled) && (i = this.leads.addSimilarProducts(i, this.productsCollection, e.id)), this.createRCLeadHref(i, e, n)
                    }, e.prototype.getMortDetailsLink = function(t, e) {
                        return this._createMortDetailsLink(t, e, !1)
                    }, e.prototype.getCompareMortDetailsLink = function(t, e) {
                        return this._createMortDetailsLink(t, e, !0)
                    }, e.prototype._createPCLoanDetailsLink = function(t, e, n) {
                        var i, r, o;
                        return i = f.faceted_search, r = {
                            amount: i.amount,
                            term: i.term
                        }, o = this.leads.generateDetailsURL(f.base_url, t, e.SUPP.CO_CODE, i.profile, r), o = this.leads.replaceLeadUrl(o, e), this.createRCLeadHref(o, e, n)
                    }, e.prototype.getPCLoanDetailsCompareLink = function(t, e) {
                        return this.leads.generateLoansProceedLink(t, e, !1, s.DETAILS_TYPE_BTN, !0)
                    }, e.prototype.getPCLoanDetailsLink = function(t, e) {
                        return this.leads.generateLoansProceedLink(t, e, !1, s.DETAILS_TYPE_BTN, !1)
                    }, e.prototype.getPCLoanProdLink = function(t, e) {
                        return this.leads.generateLoansProceedLink(t, e, !0, s.DETAILS_TYPE_LINK, !1)
                    }, e.prototype.generateTermProdLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTermLink(f.base_url, e.SUPP.ID, e.SUPP.CO_CODE, t, "prod_link", e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, " | Prod Link ", f.faceted_search.profile, e)
                    }, e.prototype.getTermDetailsLink = function(t, e) {
                        var n;
                        return n = this.leads.generateTermLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, "proceed btn btn-sm btn-primary", e.SUPP.COMPANY_NAME, e.SUPP.PROD_NAME, "", f.faceted_search.profile, e)
                    }, e.prototype._createDepaDetailsLink = function(t, e) {
                        var n, i;
                        return n = {
                            amount: f.faceted_search.amount
                        }, i = this.leads.generateDetailsURL(f.base_url, t, e.SUPP.CO_CODE, f.faceted_search.profile, n), i = this.leads.replaceLeadUrl(i, e), this.createRCLeadHref(i, e, !1)
                    }, e.prototype.generateDepaSavProdLink = function(t, e) {
                        return this._createDepaProdLink(t, e)
                    }, e.prototype.getDepaSavDetailsLink = function(t, e) {
                        return this._createDepaDetailsLink(t, e)
                    }, e.prototype.generateDepaTranProdLink = function(t, e) {
                        return this._createDepaProdLink(t, e)
                    }, e.prototype.getDepaTranDetailsLink = function(t, e) {
                        return this._createDepaDetailsLink(t, e)
                    }, e.prototype.getCredDetailsLink = function(t, e) {
                        return this._createCredDetailsLink(t, e, s.DETAILS_TYPE_BTN)
                    }, e.prototype.getCredDetailsPageProceedBtn = function(t, e) {
                        return this._createCredDetailsLink(t, e, s.DETAILS_PAGE_TYPE_BTN)
                    }, e.prototype._createCredDetailsLink = function(t, e, n) {
                        var i, r;
                        return i = {
                            amount: f.faceted_search.amount
                        }, r = this.leads.generateCredLink(f.base_url, t, e.SUPP.CO_CODE, this.proceed_link_text, !0, e.SUPP.PRODUCT_NAME, e.SUPP.COMPANY_NAME, "", f.faceted_search.profile, e, n, i)
                    }, e.prototype.getFunDetailsLink = function(t, e) {
                        return this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, !1, f.faceted_search.profile)
                    }, e.prototype.getCompareCredNZDetailsLink = function(t, e) {
                        return this.generateCredNZDetailsLink(t, e, !0)
                    }, e.prototype.getCredNZDetailsLink = function(t, e) {
                        return this.generateCredNZDetailsLink(t, e, !1)
                    }, e.prototype.generateCredNZDetailsLink = function(t, e, n) {
                        var i, r;
                        return null == n && (n = !1), i = n ? "| Compare" : "", r = this.leads.generateCredNZLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, this.proceed_link_text, !1, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, i, f.faceted_search.profile, e)
                    }, e.prototype.getCompareCredNZProdLink = function(t, e) {
                        return this.generateCredNZProdLink(t, e, !0)
                    }, e.prototype.getCredNZProdLink = function(t, e) {
                        return this.generateCredNZProdLink(t, e, !1)
                    }, e.prototype.generateCredNZProdLink = function(t, e, n) {
                        var i, r;
                        return null == n && (n = !1), i = n ? "| Prod Link Compare" : "| Prod Link", r = this.leads.generateCredNZLink(f.base_url, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, t, !0, e.SUPP.COMPANY_NAME, e.SUPP.PRODUCT_NAME, i, f.faceted_search.profile, e)
                    }, e.prototype.getMoneyMakeoverDetailsLink = function(t, e) {
                        var n, i, r;
                        return i = e.SUPP.SR_PROD_ID || e.SUPP.PROD_ID, n = {
                            amount: f.faceted_search.amount
                        }, r = this.leads.generateDetailsURL(f.base_url, i, e.SUPP.CO_CODE, f.faceted_search.profile, n), this.createRCLeadHref(r, e, !1)
                    }, e.prototype.transformHipRepHlth = function(t, e) {
                        var n;
                        return n = t, "Y" === e.SUPP.HOSPJTALFULL || "Y" === e.SUPP.HOSPJTHKFULL ? n = this.getTickCross("Y", !1) : "N" === e.SUPP.HOSPJTHKFULL ? n = this.getTickCross("N", !1) : "B" === e.SUPP.HOSPJTHKFULL ? n = this.getTickCross("B", !1) : "R" === e.SUPP.HOSPJTHKFULL && (n = this.getTickCross("R", !1)), n
                    }, e.prototype.getDiscountRefundType = function(t) {
                        var e;
                        return e = t, ("Premium None" === t || "None" === t) && (e = "No Discount/Refund"), e
                    }, e.prototype.TerminalIsBenefit = function(t) {
                        var e;
                        return e = t, "Standard" === t ? e = this.getTickCross("Yes") : "Optional" === t ? e = this.getTickCross("Yes") : ("No" === t || "Not available" === t) && (e = this.getTickCross("Not Available")), e
                    }, e.prototype.accDeathCover = function(t) {
                        var e;
                        return e = t, "1" === t ? e = "1 x Sum Insured" : "2" === t ? e = "2 x Sum Insured" : "3" === t ? e = "3 x Sum Insured" : "N/A" === t && (e = this.getTickCross("N")), e
                    }, e.prototype.getCurrencyConversionRate = function(t) {
                        var e, n;
                        return e = t, n = t, "Nil" === t ? (e = "No Fee", n = 0) : "N/A" === t && (e = "-", n = "N/A"), '<div value="' + n + '">' + e + "</div>"
                    }, e.prototype.getIntroOffer = function(t, e) {
                        var n, i;
                        return i = t, n = e.SUPP.INFOCINP, "N/A" === i && "N/A" === n ? '<i class="fa fa-minus" style="color: #aaa;"></i>' : (n = n.split(" ")[0], "" + i + " for " + n + " months")
                    }, e.prototype.displayAnnualFee = function(t, e) {
                        return t = this.getDollarRound(t), "Yes" === e.SUPP.FEESONGW && (t += " waived in first year"), t
                    }, e.prototype.getTickCrossAndNa = function(t) {
                        var e;
                        return e = this.getTickCross("N/A" === t ? "N" : t)
                    }, e.prototype.getTickCrossNa = function(t) {
                        return "N/A" === t && (t = this.getTickCross("N")), t
                    }, e.prototype.getNoPerformanceFee = function(t) {
                        return t = "null" === t || "0" === t ? this.getTickCross("N", !0) : this.getTickCross("Y", !0)
                    }, e.prototype.generateOshcProdLink = function(t, e) {
                        var n;
                        return n = {
                            sr_profile: f.faceted_search.sr_profile
                        }, this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.POLICY_NAME, !0, f.faceted_search.profile, n)
                    }, e.prototype.generateOshcDetailsLink = function(t, e) {
                        var n;
                        return n = {
                            sr_profile: f.faceted_search.sr_profile
                        }, this.leads.generateTrackedLink(t, e, e.SUPP.SR_PROD_ID, e.SUPP.CO_CODE, e.SUPP.COMPANY_NAME, e.SUPP.POLICY_NAME, !1, f.faceted_search.profile, n)
                    }, e.prototype.mbsPercentage = function(t) {
                        return "null" === t ? this.null_span() : (t = this.getPercentNoDecimal(t), "" + t + " of MBS")
                    }, e.prototype.getMobileData = function(t, e) {
                        var n, i, r, o, s, l, c;
                        return "null" === t ? this.null_span() : (n = parseFloat(Number(t).toFixed(2)), l = this.generateSmallTrailingDecimals(n), s = "GB<br />", r = "Data per ", r += "Yes" === e.SUPP.GENLVRNTMNTH ? "month" : "1" === e.SUPP.GENLVRNTRENW ? "day" : "" + e.SUPP.GENLVRNTRENW + " days:", r += "<br/>* " + (e.SUPP.ALOWDATATOTL + e.SUPP.ALOWDATAUNIT) + " (plan)", "null" !== e.SUPP.ADDNDATATOTL && (r += "<br />* " + (e.SUPP.ADDNDATATOTL + e.SUPP.ADDNDATAUNIT) + " (" + e.SUPP.ADDNINFOTYPE + ")"), null !== e.SUPP.ALOWDATAINCOFFR && e.SUPP.ALOWDATAINCOFFR > 0 && (r += "<br/>* " + (e.SUPP.OFFRDATAAMNT + e.SUPP.OFFRDATAUNTS) + " (bonus offer)"), r += "<br/><br/>(NOTE: 1 GB = 1024MB)<br/>", "null" !== e.SUPP.FEESDATACOST && (i = a.prototype.formatCurrency(e.SUPP.FEESDATACOST, !0), r += "<br />Additonal data charged at " + i + " per " + e.SUPP.FEESDATAUNIT), r += "<br />For full product inclusions see provider CIS.<br/>(Critical Information Summary)", c = "data-id='" + e.SUPP.id + "'", o = this._generateMobileTooltipText(l, n, s, r, c))
                    }, e.prototype.getMobileCost = function(t, e) {
                        var n, i, r, o, s, l, c, u;
                        return "null" === t ? this.null_span() : (n = parseFloat(Number(t).toFixed(2)), s = parseFloat(Number(t).toFixed(0)), r = n === s ? n : this.generateSmallTrailingDecimals(n), c = "<sup>$</sup>" + r, "No" === e.SUPP.GENLVRNTMNTH ? (u = a.prototype.formatCurrency(e.SUPP.GENLVRNTCOST, !0), u.match(/\.00/) && (u = a.prototype.formatCurrency(e.SUPP.GENLVRNTCOST, !1)), l = u, l += "1" === e.SUPP.GENLVRNTRENW ? " / day" : " / " + e.SUPP.GENLVRNTRENW + " days") : "null" !== e.SUPP.GENLCONTPERD && "Yes" === e.SUPP.GENLVRNTMNTH && (i = "" + a.prototype.formatCurrency(e.SUPP.CONTRACTTOTALCOST, !0), i.match(/\.00/) && (i = "" + a.prototype.formatCurrency(e.SUPP.CONTRACTTOTALCOST, !1)), l = "Min. total cost " + i + " over " + e.SUPP.GENLCONTPERD + " ", l += e.SUPP.GENLCONTPERD < 2 ? "month " : "months "), "null" !== e.SUPP.SETUPFEE && (l += "<br />+ $" + e.SUPP.SETUPFEE + " setup fee"), o = this._generateMobileTooltipText(c, n, l))
                    }, e.prototype.getMobileWOProdLink = function(t, e) {
                        var n, i, r, o;
                        return o = e.SUPP.PRODUCT_NAME, "null" !== e.SUPP.ADDON_DETAIL && (o += " + " + e.SUPP.ADDON_DETAIL), r = "" + e.SUPP.GENLCONTTYPE + ", ", "No" === e.SUPP.GENLVRNTMNTH ? (n = a.prototype.formatCurrency(e.SUPP.GENLVRNTCOST, !0), n.match(/\.00/) && (n = a.prototype.formatCurrency(e.SUPP.GENLVRNTCOST, !1)), r += "" + n + " for " + e.SUPP.GENLVRNTRENW + " days") : (n = a.prototype.formatCurrency(e.SUPP.AVERAGEMONTHLYCOST, !0), n.match(/\.00/) && (n = a.prototype.formatCurrency(e.SUPP.AVERAGEMONTHLYCOST, !1)), r += "" + n + " per month"), e.SUPP.GENLCONTPERD > 1 && (r += ", " + e.SUPP.GENLCONTPERD + " month contract"), i = c.prototype.generateMobileWOProdLink(e.SUPP.HANDOFF_URL, o, r, e.SUPP.COMPANY_NAME, e.SUPP.SR_PROD_ID, e)
                    }, e.prototype.getMobileWODetailsBtn = function(t, e) {
                        var n;
                        return n = this.leads.generateMobileWODetailsBtn(e.SUPP.HANDOFF_URL, e.SUPP.COMPANY_NAME, e.SUPP.SR_PROD_ID, e.SUPP.PRODUCT_NAME, e)
                    }, e.prototype.getMobileOffer = function(t) {
                        var e;
                        return e = "null" === t ? "" : "<span class='subtext not-empty'>" + t + "</span>"
                    }, e.prototype.generateSmallTrailingDecimals = function(t) {
                        var e, n, i;
                        return i = Math.floor(t), e = ("" + (t % 1).toFixed(2)).replace(/^0./, ""), n = "" + i + "<sub>." + e + "</sub>"
                    }, e.prototype._generateMobileTooltipText = function(t, e, n, i, r) {
                        var o, s;
                        return null == r && (r = null), s = null != e ? "value='" + e + "' name='" + e + "'" : "", o = this.templates.tooltip_text({
                            sortVal: s,
                            text: t,
                            subtext: n,
                            hover: i,
                            hover_attrs: r
                        })
                    }, e.prototype.getSuperPerformanceOV = function(t, e) {
                        var n;
                        return n = this._getSuperPerformance(t, e, !0)
                    }, e.prototype.getSuperPerformancePerf = function(t) {
                        var e;
                        return e = "null" === t ? '<i class="fa fa-minus" style="color: #b6b6b6;"></i>' : this._getSuperPerformance(t)
                    }, e.prototype.getSuperPerformanceOne = function(t, e) {
                        return t = this._getSuperPerformance(t, e)
                    }, e.prototype._getSuperPerformance = function(t, e, n) {
                        var i;
                        return null == n && (n = !1), i = t, i = "null" === t ? "<small style='color:#b6b6b6;' value='N/A'>Contact<br/>" + e.SUPP.COMPANY_NAME + "</small>" : /^-/.test(t) ? "" + t : "+" + t, "null" !== t && n && (i += "<br/>" + e.SUPP.HISTNAME), i
                    }, e.prototype.getEnergyProdLink = function(t, e) {
                        var n, i, r, o, s, a, l;
                        return r = "null" !== (null != (s = e.SUPP) ? s.PLAN_SECOND_NAME : void 0) && (null != (a = e.SUPP) && null != (l = a.PLAN_SECOND_NAME) ? l.length : void 0) > 1 ? e.SUPP.PLAN_SECOND_NAME : e.SUPP.PLAN_NAME, n = {
                            amount: e["Estimated Yearly Cost"]
                        }, o = c.prototype.generateDetailsURL(f.base_url, e.SUPP.PLAN_ID, e.SUPP.CO_CODE, f.faceted_search.profile, n), i = "<a target='_blank' href='" + o + "'>" + r + "</a>"
                    }, e.prototype.getHideButton = function(t) {
                        var e;
                        return e = "<a class='exclude-row' value='" + t + "' title='Hide this result'><i class='fa fa-close'></i></a>"
                    }, e.prototype.getEnergyContract = function(t, e) {
                        var n, i, r, o, s, a;
                        return i = e.SUPP.FEESFEESTERF, s = "N/A" === i ? "" : "$" + i + " early exit fee", n = t.split(" "), o = parseInt(n[0]), isNaN(o) ? (a = "<sub>No Min. Term</sub>", o = 0) : (a = n[1].toLowerCase(), "s" !== a[a.length - 1] && o > 1 && (a = "" + a + "s"), a = "" + o + " <sub>" + a.substr(0, 1).toUpperCase() + a.substr(1) + "</sub>"), r = this._generateMobileTooltipText(a, o, s)
                    }, e.prototype.getEnergyDetailsBtn = function(t, e) {
                        var n, i, r;
                        return n = {
                            amount: e["Estimated Yearly Cost"]
                        }, r = this.leads.generateDetailsURL(f.base_url, e.SUPP.PLAN_ID, e.SUPP.CO_CODE, f.faceted_search.profile, n), i = "<a target='_blank' class='details btn btn-primary btn-xs extratracking' data-id='" + e.SUPP.id + "' data-trackevent='detailsbutton' href='" + r + "'><span class='hidden-sm hidden-xs'>More Details</span><i class='fa fa-chevron-right hidden-md hidden-lg'></i></a>"
                    }, e.prototype.getEnergyCompareFeeDollars = function(t) {
                        var e;
                        return e = "N/A" === t || "null" === t ? "<span class='fa fa-minus color-light-grey'></span>" : "<sup>$</sup> " + t.replace("$", "")
                    }, e.prototype.getEnergyCompareFeePercentage = function(t) {
                        var e;
                        return e = "N/A" === t || "null" === t || "undefined" == typeof t ? "<span value='0' class='fa fa-minus color-light-grey'></span>" : "" + t.replace("%", "") + "<sub>%</sub>"
                    }, e.prototype.getBankNonBank = function(t) {
                        switch (t) {
                            case "Bank":
                                t = "Bank";
                                break;
                            case "Building Society":
                                t = "Bank";
                                break;
                            case "Credit Union":
                                t = "Bank";
                                break;
                            case "Mutual Bank":
                                t = "Bank";
                                break;
                            default:
                                t = "Non-Bank"
                        }
                        return t
                    }, e
                }()
            })
        }.call(this),
        function(t, e) {
            "undefined" != typeof exports ? e() : "function" == typeof define && define.amd ? define("jStat", [], function() {
                return e()
            }) : t.jStat = e()
        }(this, function() {
            return this.j$ = this.jStat = function(t, e) {
                    function n(e, n) {
                        var i = e > n ? e : n;
                        return t.pow(10, 17 - ~~(t.log(i > 0 ? i : -i) * t.LOG10E))
                    }

                    function r(t) {
                        return "[object Function]" === h.call(t)
                    }

                    function o(t) {
                        return "number" == typeof t && t === t
                    }

                    function s(t) {
                        return d.apply([], t)
                    }

                    function a() {
                        return new a._init(arguments)
                    }

                    function l() {
                        return 0
                    }

                    function c() {
                        return 1
                    }

                    function u(t, e) {
                        return t === e ? 1 : 0
                    }
                    var d = Array.prototype.concat,
                        p = Array.prototype.slice,
                        h = Object.prototype.toString,
                        f = Array.isArray || function(t) {
                            return "[object Array]" === h.call(t)
                        };
                    a.fn = a.prototype, a._init = function(t) {
                        var e;
                        if (f(t[0]))
                            if (f(t[0][0])) {
                                r(t[1]) && (t[0] = a.map(t[0], t[1]));
                                for (var e = 0; e < t[0].length; e++) this[e] = t[0][e];
                                this.length = t[0].length
                            } else this[0] = r(t[1]) ? a.map(t[0], t[1]) : t[0], this.length = 1;
                        else if (o(t[0])) this[0] = a.seq.apply(null, t), this.length = 1;
                        else {
                            if (t[0] instanceof a) return a(t[0].toArray());
                            this[0] = [], this.length = 1
                        }
                        return this
                    }, a._init.prototype = a.prototype, a._init.constructor = a, a.utils = {
                        calcRdx: n,
                        isArray: f,
                        isFunction: r,
                        isNumber: o,
                        toVector: s
                    }, a.extend = function(t) {
                        var e, n;
                        if (1 === arguments.length) {
                            for (n in t) a[n] = t[n];
                            return this
                        }
                        for (var e = 1; e < arguments.length; e++)
                            for (n in arguments[e]) t[n] = arguments[e][n];
                        return t
                    }, a.rows = function(t) {
                        return t.length || 1
                    }, a.cols = function(t) {
                        return t[0].length || 1
                    }, a.dimensions = function(t) {
                        return {
                            rows: a.rows(t),
                            cols: a.cols(t)
                        }
                    }, a.row = function(t, e) {
                        return f(e) ? e.map(function(e) {
                            return a.row(t, e)
                        }) : t[e]
                    }, a.rowa = function(t, e) {
                        return a.row(t, e)
                    }, a.col = function(t, e) {
                        if (f(e)) {
                            var n = a.arange(t.length).map(function() {
                                return new Array(e.length)
                            });
                            return e.forEach(function(e, i) {
                                a.arange(t.length).forEach(function(r) {
                                    n[r][i] = t[r][e]
                                })
                            }), n
                        }
                        for (var i = new Array(t.length), r = 0; r < t.length; r++) i[r] = [t[r][e]];
                        return i
                    }, a.cola = function(t, e) {
                        return a.col(t, e).map(function(t) {
                            return t[0]
                        })
                    }, a.diag = function(t) {
                        for (var e = a.rows(t), n = new Array(e), i = 0; e > i; i++) n[i] = [t[i][i]];
                        return n
                    }, a.antidiag = function(t) {
                        for (var e = a.rows(t) - 1, n = new Array(e), i = 0; e >= 0; e--, i++) n[i] = [t[i][e]];
                        return n
                    }, a.transpose = function(t) {
                        var e, n, i, r, o, s = [];
                        f(t[0]) || (t = [t]), n = t.length, i = t[0].length;
                        for (var o = 0; i > o; o++) {
                            for (e = new Array(n), r = 0; n > r; r++) e[r] = t[r][o];
                            s.push(e)
                        }
                        return 1 === s.length ? s[0] : s
                    }, a.map = function(t, e, n) {
                        var i, r, o, s, a;
                        for (f(t[0]) || (t = [t]), r = t.length, o = t[0].length, s = n ? t : new Array(r), i = 0; r > i; i++)
                            for (s[i] || (s[i] = new Array(o)), a = 0; o > a; a++) s[i][a] = e(t[i][a], i, a);
                        return 1 === s.length ? s[0] : s
                    }, a.cumreduce = function(t, e, n) {
                        var i, r, o, s, a;
                        for (f(t[0]) || (t = [t]), r = t.length, o = t[0].length, s = n ? t : new Array(r), i = 0; r > i; i++)
                            for (s[i] || (s[i] = new Array(o)), o > 0 && (s[i][0] = t[i][0]), a = 1; o > a; a++) s[i][a] = e(s[i][a - 1], t[i][a]);
                        return 1 === s.length ? s[0] : s
                    }, a.alter = function(t, e) {
                        return a.map(t, e, !0)
                    }, a.create = function(t, e, n) {
                        var i, o, s = new Array(t);
                        r(e) && (n = e, e = t);
                        for (var i = 0; t > i; i++)
                            for (s[i] = new Array(e), o = 0; e > o; o++) s[i][o] = n(i, o);
                        return s
                    }, a.zeros = function(t, e) {
                        return o(e) || (e = t), a.create(t, e, l)
                    }, a.ones = function(t, e) {
                        return o(e) || (e = t), a.create(t, e, c)
                    }, a.rand = function(e, n) {
                        return o(n) || (n = e), a.create(e, n, t.random)
                    }, a.identity = function(t, e) {
                        return o(e) || (e = t), a.create(t, e, u)
                    }, a.symmetric = function(t) {
                        var e, n, i = t.length;
                        if (t.length !== t[0].length) return !1;
                        for (e = 0; i > e; e++)
                            for (n = 0; i > n; n++)
                                if (t[n][e] !== t[e][n]) return !1;
                        return !0
                    }, a.clear = function(t) {
                        return a.alter(t, l)
                    }, a.seq = function(t, e, i, o) {
                        r(o) || (o = !1);
                        var s, a = [],
                            l = n(t, e),
                            c = (e * l - t * l) / ((i - 1) * l),
                            u = t;
                        for (s = 0; e >= u; s++, u = (t * l + c * l * s) / l) a.push(o ? o(u, s) : u);
                        return a
                    }, a.arange = function(t, n, r) {
                        var o = [];
                        if (r = r || 1, n === e && (n = t, t = 0), t === n || 0 === r) return [];
                        if (n > t && 0 > r) return [];
                        if (t > n && r > 0) return [];
                        if (r > 0)
                            for (i = t; n > i; i += r) o.push(i);
                        else
                            for (i = t; i > n; i += r) o.push(i);
                        return o
                    }, a.slice = function() {
                        function t(t, n, i, r) {
                            var o, s = [],
                                l = t.length;
                            if (n === e && i === e && r === e) return a.copy(t);
                            if (n = n || 0, i = i || t.length, n = n >= 0 ? n : l + n, i = i >= 0 ? i : l + i, r = r || 1, n === i || 0 === r) return [];
                            if (i > n && 0 > r) return [];
                            if (n > i && r > 0) return [];
                            if (r > 0)
                                for (o = n; i > o; o += r) s.push(t[o]);
                            else
                                for (o = n; o > i; o += r) s.push(t[o]);
                            return s
                        }

                        function n(e, n) {
                            if (n = n || {}, o(n.row)) {
                                if (o(n.col)) return e[n.row][n.col];
                                var i = a.rowa(e, n.row),
                                    r = n.col || {};
                                return t(i, r.start, r.end, r.step)
                            }
                            if (o(n.col)) {
                                var s = a.cola(e, n.col),
                                    l = n.row || {};
                                return t(s, l.start, l.end, l.step)
                            }
                            var l = n.row || {},
                                r = n.col || {},
                                c = t(e, l.start, l.end, l.step);
                            return c.map(function(e) {
                                return t(e, r.start, r.end, r.step)
                            })
                        }
                        return n
                    }(), a.sliceAssign = function(n, i, r) {
                        if (o(i.row)) {
                            if (o(i.col)) return n[i.row][i.col] = r;
                            i.col = i.col || {}, i.col.start = i.col.start || 0, i.col.end = i.col.end || n[0].length, i.col.step = i.col.step || 1;
                            var s = a.arange(i.col.start, t.min(n.length, i.col.end), i.col.step),
                                l = i.row;
                            return s.forEach(function(t, e) {
                                n[l][t] = r[e]
                            }), n
                        }
                        if (o(i.col)) {
                            i.row = i.row || {}, i.row.start = i.row.start || 0, i.row.end = i.row.end || n.length, i.row.step = i.row.step || 1;
                            var c = a.arange(i.row.start, t.min(n[0].length, i.row.end), i.row.step),
                                u = i.col;
                            return c.forEach(function(t, e) {
                                n[t][u] = r[e]
                            }), n
                        }
                        r[0].length === e && (r = [r]), i.row.start = i.row.start || 0, i.row.end = i.row.end || n.length, i.row.step = i.row.step || 1, i.col.start = i.col.start || 0, i.col.end = i.col.end || n[0].length, i.col.step = i.col.step || 1;
                        var c = a.arange(i.row.start, t.min(n.length, i.row.end), i.row.step),
                            s = a.arange(i.col.start, t.min(n[0].length, i.col.end), i.col.step);
                        return c.forEach(function(t, e) {
                            s.forEach(function(i, o) {
                                n[t][i] = r[e][o]
                            })
                        }), n
                    }, a.diagonal = function(t) {
                        var e = a.zeros(t.length, t.length);
                        return t.forEach(function(t, n) {
                            e[n][n] = t
                        }), e
                    }, a.copy = function(t) {
                        return t.map(function(t) {
                            return o(t) ? t : t.map(function(t) {
                                return t
                            })
                        })
                    };
                    var m = a.prototype;
                    return m.length = 0, m.push = Array.prototype.push, m.sort = Array.prototype.sort, m.splice = Array.prototype.splice, m.slice = Array.prototype.slice, m.toArray = function() {
                            return this.length > 1 ? p.call(this) : p.call(this)[0]
                        }, m.map = function(t, e) {
                            return a(a.map(this, t, e))
                        }, m.cumreduce = function(t, e) {
                            return a(a.cumreduce(this, t, e))
                        }, m.alter = function(t) {
                            return a.alter(this, t), this
                        },
                        function(t) {
                            for (var e = 0; e < t.length; e++)(function(t) {
                                m[t] = function(e) {
                                    var n, i = this;
                                    return e ? (setTimeout(function() {
                                        e.call(i, m[t].call(i))
                                    }), this) : (n = a[t](this), f(n) ? a(n) : n)
                                }
                            })(t[e])
                        }("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),
                        function(t) {
                            for (var e = 0; e < t.length; e++)(function(t) {
                                m[t] = function(e, n) {
                                    var i = this;
                                    return n ? (setTimeout(function() {
                                        n.call(i, m[t].call(i, e))
                                    }), this) : a(a[t](this, e))
                                }
                            })(t[e])
                        }("row col".split(" ")),
                        function(t) {
                            for (var e = 0; e < t.length; e++)(function(t) {
                                m[t] = new Function("return jStat(jStat." + t + ".apply(null, arguments));")
                            })(t[e])
                        }("create zeros ones rand identity".split(" ")), a
                }(Math),
                function(t, e) {
                    function n(t, e) {
                        return t - e
                    }

                    function i(t, n, i) {
                        return e.max(n, e.min(t, i))
                    }
                    var r = t.utils.isFunction;
                    t.sum = function s(t) {
                        for (var s = 0, e = t.length; --e >= 0;) s += t[e];
                        return s
                    }, t.sumsqrd = function(t) {
                        for (var e = 0, n = t.length; --n >= 0;) e += t[n] * t[n];
                        return e
                    }, t.sumsqerr = function(e) {
                        for (var n, i = t.mean(e), r = 0, o = e.length; --o >= 0;) n = e[o] - i, r += n * n;
                        return r
                    }, t.sumrow = function(t) {
                        for (var e = 0, n = t.length; --n >= 0;) e += t[n];
                        return e
                    }, t.product = function(t) {
                        for (var e = 1, n = t.length; --n >= 0;) e *= t[n];
                        return e
                    }, t.min = function(t) {
                        for (var e = t[0], n = 0; ++n < t.length;) t[n] < e && (e = t[n]);
                        return e
                    }, t.max = function(t) {
                        for (var e = t[0], n = 0; ++n < t.length;) t[n] > e && (e = t[n]);
                        return e
                    }, t.unique = function(t) {
                        for (var e = {}, n = [], i = 0; i < t.length; i++) e[t[i]] || (e[t[i]] = !0, n.push(t[i]));
                        return n
                    }, t.mean = function(e) {
                        return t.sum(e) / e.length
                    }, t.meansqerr = function(e) {
                        return t.sumsqerr(e) / e.length
                    }, t.geomean = function(n) {
                        return e.pow(t.product(n), 1 / n.length)
                    }, t.median = function(t) {
                        var e = t.length,
                            i = t.slice().sort(n);
                        return 1 & e ? i[e / 2 | 0] : (i[e / 2 - 1] + i[e / 2]) / 2
                    }, t.cumsum = function(e) {
                        return t.cumreduce(e, function(t, e) {
                            return t + e
                        })
                    }, t.cumprod = function(e) {
                        return t.cumreduce(e, function(t, e) {
                            return t * e
                        })
                    }, t.diff = function(t) {
                        for (var e, n = [], i = t.length, e = 1; i > e; e++) n.push(t[e] - t[e - 1]);
                        return n
                    }, t.rank = function(t) {
                        for (var e = t.length, i = t.slice().sort(n), r = new Array(e), o = 0; e > o; o++) {
                            var s = i.indexOf(t[o]),
                                a = i.lastIndexOf(t[o]);
                            if (s === a) var l = s;
                            else var l = (s + a) / 2;
                            r[o] = l + 1
                        }
                        return r
                    }, t.mode = function(t) {
                        for (var e, i = t.length, r = t.slice().sort(n), o = 1, s = 0, a = 0, l = [], e = 0; i > e; e++) r[e] === r[e + 1] ? o++ : (o > s ? (l = [r[e]], s = o, a = 0) : o === s && (l.push(r[e]), a++), o = 1);
                        return 0 === a ? l[0] : l
                    }, t.range = function(e) {
                        return t.max(e) - t.min(e)
                    }, t.variance = function(e, n) {
                        return t.sumsqerr(e) / (e.length - (n ? 1 : 0))
                    }, t.deviation = function(e) {
                        for (var n = t.mean(e), i = e.length, r = new Array(i), o = 0; i > o; o++) r[o] = e[o] - n;
                        return r
                    }, t.stdev = function(n, i) {
                        return e.sqrt(t.variance(n, i))
                    }, t.meandev = function(n) {
                        for (var i, r = 0, o = t.mean(n), i = n.length - 1; i >= 0; i--) r += e.abs(n[i] - o);
                        return r / n.length
                    }, t.meddev = function(n) {
                        for (var i, r = 0, o = t.median(n), i = n.length - 1; i >= 0; i--) r += e.abs(n[i] - o);
                        return r / n.length
                    }, t.coeffvar = function(e) {
                        return t.stdev(e) / t.mean(e)
                    }, t.quartiles = function(t) {
                        var i = t.length,
                            r = t.slice().sort(n);
                        return [r[e.round(i / 4) - 1], r[e.round(i / 2) - 1], r[e.round(3 * i / 4) - 1]]
                    }, t.quantiles = function(t, r, o, s) {
                        var a, l, c, u, d, p, h = t.slice().sort(n),
                            f = [r.length],
                            m = t.length;
                        "undefined" == typeof o && (o = 3 / 8), "undefined" == typeof s && (s = 3 / 8);
                        for (var a = 0; a < r.length; a++) l = r[a], c = o + l * (1 - o - s), u = m * l + c, d = e.floor(i(u, 1, m - 1)), p = i(u - d, 0, 1), f[a] = (1 - p) * h[d - 1] + p * h[d];
                        return f
                    }, t.percentile = function(t, e) {
                        var i = t.slice().sort(n),
                            r = e * (i.length - 1),
                            o = parseInt(r),
                            s = r - o;
                        return o + 1 < i.length ? i[o] * (1 - s) + i[o + 1] * s : i[o]
                    }, t.percentileOfScore = function(t, e, n) {
                        var i, r, o = 0,
                            s = t.length,
                            a = !1;
                        "strict" === n && (a = !0);
                        for (var r = 0; s > r; r++) i = t[r], (a && e > i || !a && e >= i) && o++;
                        return o / s
                    }, t.histogram = function(n, i) {
                        for (var r, o = t.min(n), s = i || 4, a = (t.max(n) - o) / s, l = n.length, i = [], r = 0; s > r; r++) i[r] = 0;
                        for (var r = 0; l > r; r++) i[e.min(e.floor((n[r] - o) / a), s - 1)] += 1;
                        return i
                    }, t.covariance = function(e, n) {
                        for (var i, r = t.mean(e), o = t.mean(n), s = e.length, a = new Array(s), i = 0; s > i; i++) a[i] = (e[i] - r) * (n[i] - o);
                        return t.sum(a) / (s - 1)
                    }, t.corrcoeff = function(e, n) {
                        return t.covariance(e, n) / t.stdev(e, 1) / t.stdev(n, 1)
                    }, t.spearmancoeff = function(n, i) {
                        n = t.rank(n), i = t.rank(i);
                        var r = t.deviation(n),
                            o = t.deviation(i);
                        return t.sum(r.map(function(t, e) {
                            return t * o[e]
                        })) / e.sqrt(t.sum(r.map(function(t) {
                            return e.pow(t, 2)
                        })) * t.sum(o.map(function(t) {
                            return e.pow(t, 2)
                        })))
                    }, t.stanMoment = function(n, i) {
                        for (var r = t.mean(n), o = t.stdev(n), s = n.length, a = 0, l = 0; s > l; l++) a += e.pow((n[l] - r) / o, i);
                        return a / n.length
                    }, t.skewness = function(e) {
                        return t.stanMoment(e, 3)
                    }, t.kurtosis = function(e) {
                        return t.stanMoment(e, 4) - 3
                    };
                    var o = t.prototype;
                    ! function(e) {
                        for (var n = 0; n < e.length; n++)(function(e) {
                            o[e] = function(n, i) {
                                var s = [],
                                    a = 0,
                                    l = this;
                                if (r(n) && (i = n, n = !1), i) return setTimeout(function() {
                                    i.call(l, o[e].call(l, n))
                                }), this;
                                if (this.length > 1) {
                                    for (l = n === !0 ? this : this.transpose(); a < l.length; a++) s[a] = t[e](l[a]);
                                    return s
                                }
                                return t[e](this[0], n)
                            }
                        })(e[n])
                    }("cumsum cumprod".split(" ")),
                    function(e) {
                        for (var n = 0; n < e.length; n++)(function(e) {
                            o[e] = function(n, i) {
                                var s = [],
                                    a = 0,
                                    l = this;
                                if (r(n) && (i = n, n = !1), i) return setTimeout(function() {
                                    i.call(l, o[e].call(l, n))
                                }), this;
                                if (this.length > 1) {
                                    for ("sumrow" !== e && (l = n === !0 ? this : this.transpose()); a < l.length; a++) s[a] = t[e](l[a]);
                                    return n === !0 ? t[e](t.utils.toVector(s)) : s
                                }
                                return t[e](this[0], n)
                            }
                        })(e[n])
                    }("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),
                    function(e) {
                        for (var n = 0; n < e.length; n++)(function(e) {
                            o[e] = function() {
                                var n = [],
                                    i = 0,
                                    s = this,
                                    a = Array.prototype.slice.call(arguments);
                                if (r(a[a.length - 1])) {
                                    var l = a[a.length - 1],
                                        c = a.slice(0, a.length - 1);
                                    return setTimeout(function() {
                                        l.call(s, o[e].apply(s, c))
                                    }), this
                                }
                                var l = void 0,
                                    u = function(n) {
                                        return t[e].apply(s, [n].concat(a))
                                    };
                                if (this.length > 1) {
                                    for (s = s.transpose(); i < s.length; i++) n[i] = u(s[i]);
                                    return n
                                }
                                return u(this[0])
                            }
                        })(e[n])
                    }("quantiles percentileOfScore".split(" "))
                }(this.jStat, Math),
                function(t, e) {
                    t.gammaln = function(t) {
                            var n, i, r, o = 0,
                                s = [76.18009172947146, -86.50532032941678, 24.01409824083091, -1.231739572450155, .001208650973866179, -5395239384953e-18],
                                a = 1.000000000190015;
                            for (r = (i = n = t) + 5.5, r -= (n + .5) * e.log(r); 6 > o; o++) a += s[o] / ++i;
                            return e.log(2.5066282746310007 * a / n) - r
                        }, t.gammafn = function(t) {
                            var n, i, r, o, s = [-1.716185138865495, 24.76565080557592, -379.80425647094563, 629.3311553128184, 866.9662027904133, -31451.272968848367, -36144.413418691176, 66456.14382024054],
                                a = [-30.8402300119739, 315.35062697960416, -1015.1563674902192, -3107.771671572311, 22538.11842098015, 4755.846277527881, -134659.9598649693, -115132.2596755535],
                                l = !1,
                                c = 0,
                                u = 0,
                                d = 0,
                                p = t;
                            if (0 >= p) {
                                if (o = p % 1 + 3.6e-16, !o) return 1 / 0;
                                l = (1 & p ? -1 : 1) * e.PI / e.sin(e.PI * o), p = 1 - p
                            }
                            r = p, i = 1 > p ? p++ : (p -= c = (0 | p) - 1) - 1;
                            for (var n = 0; 8 > n; ++n) d = (d + s[n]) * i, u = u * i + a[n];
                            if (o = d / u + 1, p > r) o /= r;
                            else if (r > p)
                                for (var n = 0; c > n; ++n) o *= p, p++;
                            return l && (o = l / o), o
                        }, t.gammap = function(e, n) {
                            return t.lowRegGamma(e, n) * t.gammafn(e)
                        }, t.lowRegGamma = function(n, i) {
                            var r, o = t.gammaln(n),
                                s = n,
                                a = 1 / n,
                                l = a,
                                c = i + 1 - n,
                                u = 1 / 1e-30,
                                d = 1 / c,
                                p = d,
                                h = 1,
                                f = -~(8.5 * e.log(n >= 1 ? n : 1 / n) + .4 * n + 17);
                            if (0 > i || 0 >= n) return 0 / 0;
                            if (n + 1 > i) {
                                for (; f >= h; h++) a += l *= i / ++s;
                                return a * e.exp(-i + n * e.log(i) - o)
                            }
                            for (; f >= h; h++) r = -h * (h - n), c += 2, d = r * d + c, u = c + r / u, d = 1 / d, p *= d * u;
                            return 1 - p * e.exp(-i + n * e.log(i) - o)
                        }, t.factorialln = function(e) {
                            return 0 > e ? 0 / 0 : t.gammaln(e + 1)
                        }, t.factorial = function(e) {
                            return 0 > e ? 0 / 0 : t.gammafn(e + 1)
                        }, t.combination = function(n, i) {
                            return n > 170 || i > 170 ? e.exp(t.combinationln(n, i)) : t.factorial(n) / t.factorial(i) / t.factorial(n - i)
                        }, t.combinationln = function(e, n) {
                            return t.factorialln(e) - t.factorialln(n) - t.factorialln(e - n)
                        }, t.permutation = function(e, n) {
                            return t.factorial(e) / t.factorial(e - n)
                        }, t.betafn = function(n, i) {
                            return 0 >= n || 0 >= i ? void 0 : n + i > 170 ? e.exp(t.betaln(n, i)) : t.gammafn(n) * t.gammafn(i) / t.gammafn(n + i)
                        }, t.betaln = function(e, n) {
                            return t.gammaln(e) + t.gammaln(n) - t.gammaln(e + n)
                        }, t.betacf = function(t, n, i) {
                            var r, o, s, a, l = 1e-30,
                                c = 1,
                                u = n + i,
                                d = n + 1,
                                p = n - 1,
                                h = 1,
                                f = 1 - u * t / d;
                            for (e.abs(f) < l && (f = l), f = 1 / f, a = f; 100 >= c && (r = 2 * c, o = c * (i - c) * t / ((p + r) * (n + r)), f = 1 + o * f, e.abs(f) < l && (f = l), h = 1 + o / h, e.abs(h) < l && (h = l), f = 1 / f, a *= f * h, o = -(n + c) * (u + c) * t / ((n + r) * (d + r)), f = 1 + o * f, e.abs(f) < l && (f = l), h = 1 + o / h, e.abs(h) < l && (h = l), f = 1 / f, s = f * h, a *= s, !(e.abs(s - 1) < 3e-7)); c++);
                            return a
                        }, t.gammapinv = function(n, i) {
                            var r, o, s, a, l, c, u, d = 0,
                                p = i - 1,
                                h = 1e-8,
                                f = t.gammaln(i);
                            if (n >= 1) return e.max(100, i + 100 * e.sqrt(i));
                            if (0 >= n) return 0;
                            for (i > 1 ? (c = e.log(p), u = e.exp(p * (c - 1) - f), l = .5 > n ? n : 1 - n, s = e.sqrt(-2 * e.log(l)), r = (2.30753 + .27061 * s) / (1 + s * (.99229 + .04481 * s)) - s, .5 > n && (r = -r), r = e.max(.001, i * e.pow(1 - 1 / (9 * i) - r / (3 * e.sqrt(i)), 3))) : (s = 1 - i * (.253 + .12 * i), r = s > n ? e.pow(n / s, 1 / i) : 1 - e.log(1 - (n - s) / (1 - s))); 12 > d; d++) {
                                if (0 >= r) return 0;
                                if (o = t.lowRegGamma(i, r) - n, s = i > 1 ? u * e.exp(-(r - p) + p * (e.log(r) - c)) : e.exp(-r + p * e.log(r) - f), a = o / s, r -= s = a / (1 - .5 * e.min(1, a * ((i - 1) / r - 1))), 0 >= r && (r = .5 * (r + s)), e.abs(s) < h * r) break
                            }
                            return r
                        }, t.erf = function(t) {
                            var n, i, r, o, s = [-1.3026537197817094, .6419697923564902, .019476473204185836, -.00956151478680863, -.000946595344482036, .000366839497852761, 42523324806907e-18, -20278578112534e-18, -1624290004647e-18, 130365583558e-17, 1.5626441722e-8, -8.5238095915e-8, 6.529054439e-9, 5.059343495e-9, -9.91364156e-10, -2.27365122e-10, 9.6467911e-11, 2.394038e-12, -6.886027e-12, 8.94487e-13, 3.13092e-13, -1.12708e-13, 3.81e-16, 7.106e-15, -1.523e-15, -9.4e-17, 1.21e-16, -2.8e-17],
                                a = s.length - 1,
                                l = !1,
                                c = 0,
                                u = 0;
                            for (0 > t && (t = -t, l = !0), n = 2 / (2 + t), i = 4 * n - 2; a > 0; a--) r = c, c = i * c - u + s[a], u = r;
                            return o = n * e.exp(-t * t + .5 * (s[0] + i * c) - u), l ? o - 1 : 1 - o
                        }, t.erfc = function(e) {
                            return 1 - t.erf(e)
                        }, t.erfcinv = function(n) {
                            var i, r, o, s, a = 0;
                            if (n >= 2) return -100;
                            if (0 >= n) return 100;
                            for (s = 1 > n ? n : 2 - n, o = e.sqrt(-2 * e.log(s / 2)), i = -.70711 * ((2.30753 + .27061 * o) / (1 + o * (.99229 + .04481 * o)) - o); 2 > a; a++) r = t.erfc(i) - s, i += r / (1.1283791670955126 * e.exp(-i * i) - i * r);
                            return 1 > n ? i : -i
                        }, t.ibetainv = function(n, i, r) {
                            var o, s, a, l, c, u, d, p, h, f, m, g = 1e-8,
                                v = i - 1,
                                _ = r - 1,
                                y = 0;
                            if (0 >= n) return 0;
                            if (n >= 1) return 1;
                            for (i >= 1 && r >= 1 ? (a = .5 > n ? n : 1 - n, l = e.sqrt(-2 * e.log(a)), d = (2.30753 + .27061 * l) / (1 + l * (.99229 + .04481 * l)) - l, .5 > n && (d = -d), p = (d * d - 3) / 6, h = 2 / (1 / (2 * i - 1) + 1 / (2 * r - 1)), f = d * e.sqrt(p + h) / h - (1 / (2 * r - 1) - 1 / (2 * i - 1)) * (p + 5 / 6 - 2 / (3 * h)), d = i / (i + r * e.exp(2 * f))) : (o = e.log(i / (i + r)), s = e.log(r / (i + r)), l = e.exp(i * o) / i, c = e.exp(r * s) / r, f = l + c, d = l / f > n ? e.pow(i * f * n, 1 / i) : 1 - e.pow(r * f * (1 - n), 1 / r)), m = -t.gammaln(i) - t.gammaln(r) + t.gammaln(i + r); 10 > y; y++) {
                                if (0 === d || 1 === d) return d;
                                if (u = t.ibeta(d, i, r) - n, l = e.exp(v * e.log(d) + _ * e.log(1 - d) + m), c = u / l, d -= l = c / (1 - .5 * e.min(1, c * (v / d - _ / (1 - d)))), 0 >= d && (d = .5 * (d + l)), d >= 1 && (d = .5 * (d + l + 1)), e.abs(l) < g * d && y > 0) break
                            }
                            return d
                        }, t.ibeta = function(n, i, r) {
                            var o = 0 === n || 1 === n ? 0 : e.exp(t.gammaln(i + r) - t.gammaln(i) - t.gammaln(r) + i * e.log(n) + r * e.log(1 - n));
                            return 0 > n || n > 1 ? !1 : (i + 1) / (i + r + 2) > n ? o * t.betacf(n, i, r) / i : 1 - o * t.betacf(1 - n, r, i) / r
                        }, t.randn = function(n, i) {
                            var r, o, s, a, l;
                            if (i || (i = n), n) return t.create(n, i, function() {
                                return t.randn()
                            });
                            do r = e.random(), o = 1.7156 * (e.random() - .5), s = r - .449871, a = e.abs(o) + .386595, l = s * s + a * (.196 * a - .25472 * s); while (l > .27597 && (l > .27846 || o * o > -4 * e.log(r) * r * r));
                            return o / r
                        }, t.randg = function(n, i, r) {
                            var o, s, a, l, c, u, d = n;
                            if (r || (r = i), n || (n = 1), i) return u = t.zeros(i, r), u.alter(function() {
                                return t.randg(n)
                            }), u;
                            1 > n && (n += 1), o = n - 1 / 3, s = 1 / e.sqrt(9 * o);
                            do {
                                do c = t.randn(), l = 1 + s * c; while (0 >= l);
                                l = l * l * l, a = e.random()
                            } while (a > 1 - .331 * e.pow(c, 4) && e.log(a) > .5 * c * c + o * (1 - l + e.log(l)));
                            if (n == d) return o * l;
                            do a = e.random(); while (0 === a);
                            return e.pow(a, 1 / d) * o * l
                        },
                        function(e) {
                            for (var n = 0; n < e.length; n++)(function(e) {
                                t.fn[e] = function() {
                                    return t(t.map(this, function(n) {
                                        return t[e](n)
                                    }))
                                }
                            })(e[n])
                        }("gammaln gammafn factorial factorialln".split(" ")),
                        function(e) {
                            for (var n = 0; n < e.length; n++)(function(e) {
                                t.fn[e] = function() {
                                    return t(t[e].apply(null, arguments))
                                }
                            })(e[n])
                        }("randn".split(" "))
                }(this.jStat, Math),
                function(t, e) {
                    function n(t) {
                        return t / e.abs(t)
                    }! function(e) {
                        for (var n = 0; n < e.length; n++)(function(e) {
                            t[e] = function(t, e, n) {
                                    return this instanceof arguments.callee ? (this._a = t, this._b = e, this._c = n, this) : new arguments.callee(t, e, n)
                                }, t.fn[e] = function(n, i, r) {
                                    var o = t[e](n, i, r);
                                    return o.data = this, o
                                }, t[e].prototype.sample = function(n) {
                                    var i = this._a,
                                        r = this._b,
                                        o = this._c;
                                    return n ? t.alter(n, function() {
                                        return t[e].sample(i, r, o)
                                    }) : t[e].sample(i, r, o)
                                },
                                function(n) {
                                    for (var i = 0; i < n.length; i++)(function(n) {
                                        t[e].prototype[n] = function(i) {
                                            var r = this._a,
                                                o = this._b,
                                                s = this._c;
                                            return i || 0 === i || (i = this.data), "number" != typeof i ? t.fn.map.call(i, function(i) {
                                                return t[e][n](i, r, o, s)
                                            }) : t[e][n](i, r, o, s)
                                        }
                                    })(n[i])
                                }("pdf cdf inv".split(" ")),
                                function(n) {
                                    for (var i = 0; i < n.length; i++)(function(n) {
                                        t[e].prototype[n] = function() {
                                            return t[e][n](this._a, this._b, this._c)
                                        }
                                    })(n[i])
                                }("mean median mode variance".split(" "))
                        })(e[n])
                    }("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular".split(" ")), t.extend(t.beta, {
                        pdf: function(n, i, r) {
                            return n > 1 || 0 > n ? 0 : 1 == i && 1 == r ? 1 : 512 > i && 512 > r ? e.pow(n, i - 1) * e.pow(1 - n, r - 1) / t.betafn(i, r) : e.exp((i - 1) * e.log(n) + (r - 1) * e.log(1 - n) - t.betaln(i, r))
                        },
                        cdf: function(e, n, i) {
                            return e > 1 || 0 > e ? 1 * (e > 1) : t.ibeta(e, n, i)
                        },
                        inv: function(e, n, i) {
                            return t.ibetainv(e, n, i)
                        },
                        mean: function(t, e) {
                            return t / (t + e)
                        },
                        median: function(e, n) {
                            return t.ibetainv(.5, e, n)
                        },
                        mode: function(t, e) {
                            return (t - 1) / (t + e - 2)
                        },
                        sample: function(e, n) {
                            var i = t.randg(e);
                            return i / (i + t.randg(n))
                        },
                        variance: function(t, n) {
                            return t * n / (e.pow(t + n, 2) * (t + n + 1))
                        }
                    }), t.extend(t.centralF, {
                        pdf: function(n, i, r) {
                            var o, s, a;
                            return 0 > n ? 0 : 2 >= i ? 0 === n && 2 > i ? 1 / 0 : 0 === n && 2 === i ? 1 : e.sqrt(e.pow(i * n, i) * e.pow(r, r) / e.pow(i * n + r, i + r)) / (n * t.betafn(i / 2, r / 2)) : (o = i * n / (r + n * i), s = r / (r + n * i), a = i * s / 2, a * t.binomial.pdf((i - 2) / 2, (i + r - 2) / 2, o))
                        },
                        cdf: function(e, n, i) {
                            return 0 > e ? 0 : t.ibeta(n * e / (n * e + i), n / 2, i / 2)
                        },
                        inv: function(e, n, i) {
                            return i / (n * (1 / t.ibetainv(e, n / 2, i / 2) - 1))
                        },
                        mean: function(t, e) {
                            return e > 2 ? e / (e - 2) : void 0
                        },
                        mode: function(t, e) {
                            return t > 2 ? e * (t - 2) / (t * (e + 2)) : void 0
                        },
                        sample: function(e, n) {
                            var i = 2 * t.randg(e / 2),
                                r = 2 * t.randg(n / 2);
                            return i / e / (r / n)
                        },
                        variance: function(t, e) {
                            return 4 >= e ? void 0 : 2 * e * e * (t + e - 2) / (t * (e - 2) * (e - 2) * (e - 4))
                        }
                    }), t.extend(t.cauchy, {
                        pdf: function(t, n, i) {
                            return 0 > i ? 0 : i / (e.pow(t - n, 2) + e.pow(i, 2)) / e.PI
                        },
                        cdf: function(t, n, i) {
                            return e.atan((t - n) / i) / e.PI + .5
                        },
                        inv: function(t, n, i) {
                            return n + i * e.tan(e.PI * (t - .5))
                        },
                        median: function(t) {
                            return t
                        },
                        mode: function(t) {
                            return t
                        },
                        sample: function(n, i) {
                            return t.randn() * e.sqrt(1 / (2 * t.randg(.5))) * i + n
                        }
                    }), t.extend(t.chisquare, {
                        pdf: function(n, i) {
                            return 0 > n ? 0 : 0 === n && 2 === i ? .5 : e.exp((i / 2 - 1) * e.log(n) - n / 2 - i / 2 * e.log(2) - t.gammaln(i / 2))
                        },
                        cdf: function(e, n) {
                            return 0 > e ? 0 : t.lowRegGamma(n / 2, e / 2)
                        },
                        inv: function(e, n) {
                            return 2 * t.gammapinv(e, .5 * n)
                        },
                        mean: function(t) {
                            return t
                        },
                        median: function(t) {
                            return t * e.pow(1 - 2 / (9 * t), 3)
                        },
                        mode: function(t) {
                            return t - 2 > 0 ? t - 2 : 0
                        },
                        sample: function(e) {
                            return 2 * t.randg(e / 2)
                        },
                        variance: function(t) {
                            return 2 * t
                        }
                    }), t.extend(t.exponential, {
                        pdf: function(t, n) {
                            return 0 > t ? 0 : n * e.exp(-n * t)
                        },
                        cdf: function(t, n) {
                            return 0 > t ? 0 : 1 - e.exp(-n * t)
                        },
                        inv: function(t, n) {
                            return -e.log(1 - t) / n
                        },
                        mean: function(t) {
                            return 1 / t
                        },
                        median: function(t) {
                            return 1 / t * e.log(2)
                        },
                        mode: function() {
                            return 0
                        },
                        sample: function(t) {
                            return -1 / t * e.log(e.random())
                        },
                        variance: function(t) {
                            return e.pow(t, -2)
                        }
                    }), t.extend(t.gamma, {
                        pdf: function(n, i, r) {
                            return 0 > n ? 0 : 0 === n && 1 === i ? 1 / r : e.exp((i - 1) * e.log(n) - n / r - t.gammaln(i) - i * e.log(r))
                        },
                        cdf: function(e, n, i) {
                            return 0 > e ? 0 : t.lowRegGamma(n, e / i)
                        },
                        inv: function(e, n, i) {
                            return t.gammapinv(e, n) * i
                        },
                        mean: function(t, e) {
                            return t * e
                        },
                        mode: function(t, e) {
                            return t > 1 ? (t - 1) * e : void 0
                        },
                        sample: function(e, n) {
                            return t.randg(e) * n
                        },
                        variance: function(t, e) {
                            return t * e * e
                        }
                    }), t.extend(t.invgamma, {
                        pdf: function(n, i, r) {
                            return 0 >= n ? 0 : e.exp(-(i + 1) * e.log(n) - r / n - t.gammaln(i) + i * e.log(r))
                        },
                        cdf: function(e, n, i) {
                            return 0 >= e ? 0 : 1 - t.lowRegGamma(n, i / e)
                        },
                        inv: function(e, n, i) {
                            return i / t.gammapinv(1 - e, n)
                        },
                        mean: function(t, e) {
                            return t > 1 ? e / (t - 1) : void 0
                        },
                        mode: function(t, e) {
                            return e / (t + 1)
                        },
                        sample: function(e, n) {
                            return n / t.randg(e)
                        },
                        variance: function(t, e) {
                            return 2 >= t ? void 0 : e * e / ((t - 1) * (t - 1) * (t - 2))
                        }
                    }), t.extend(t.kumaraswamy, {
                        pdf: function(t, n, i) {
                            return 0 === t && 1 === n ? i : 1 === t && 1 === i ? n : e.exp(e.log(n) + e.log(i) + (n - 1) * e.log(t) + (i - 1) * e.log(1 - e.pow(t, n)))
                        },
                        cdf: function(t, n, i) {
                            return 0 > t ? 0 : t > 1 ? 1 : 1 - e.pow(1 - e.pow(t, n), i)
                        },
                        inv: function(t, n, i) {
                            return e.pow(1 - e.pow(1 - t, 1 / i), 1 / n)
                        },
                        mean: function(e, n) {
                            return n * t.gammafn(1 + 1 / e) * t.gammafn(n) / t.gammafn(1 + 1 / e + n)
                        },
                        median: function(t, n) {
                            return e.pow(1 - e.pow(2, -1 / n), 1 / t)
                        },
                        mode: function(t, n) {
                            return t >= 1 && n >= 1 && 1 !== t && 1 !== n ? e.pow((t - 1) / (t * n - 1), 1 / t) : void 0
                        },
                        variance: function() {
                            throw new Error("variance not yet implemented")
                        }
                    }), t.extend(t.lognormal, {
                        pdf: function(t, n, i) {
                            return 0 >= t ? 0 : e.exp(-e.log(t) - .5 * e.log(2 * e.PI) - e.log(i) - e.pow(e.log(t) - n, 2) / (2 * i * i))
                        },
                        cdf: function(n, i, r) {
                            return 0 > n ? 0 : .5 + .5 * t.erf((e.log(n) - i) / e.sqrt(2 * r * r))
                        },
                        inv: function(n, i, r) {
                            return e.exp(-1.4142135623730951 * r * t.erfcinv(2 * n) + i)
                        },
                        mean: function(t, n) {
                            return e.exp(t + n * n / 2)
                        },
                        median: function(t) {
                            return e.exp(t)
                        },
                        mode: function(t, n) {
                            return e.exp(t - n * n)
                        },
                        sample: function(n, i) {
                            return e.exp(t.randn() * i + n)
                        },
                        variance: function(t, n) {
                            return (e.exp(n * n) - 1) * e.exp(2 * t + n * n)
                        }
                    }), t.extend(t.noncentralt, {
                        pdf: function(n, i, r) {
                            var o = 1e-14;
                            return e.abs(r) < o ? t.studentt.pdf(n, i) : e.abs(n) < o ? e.exp(t.gammaln((i + 1) / 2) - r * r / 2 - .5 * e.log(e.PI * i) - t.gammaln(i / 2)) : i / n * (t.noncentralt.cdf(n * e.sqrt(1 + 2 / i), i + 2, r) - t.noncentralt.cdf(n, i, r))
                        },
                        cdf: function(n, i, r) {
                            var o = 1e-14,
                                s = 200;
                            if (e.abs(r) < o) return t.studentt.cdf(n, i);
                            var a = !1;
                            0 > n && (a = !0, r = -r);
                            for (var l = t.normal.cdf(-r, 0, 1), c = o + 1, u = c, d = n * n / (n * n + i), p = 0, h = e.exp(-r * r / 2), f = e.exp(-r * r / 2 - .5 * e.log(2) - t.gammaln(1.5)) * r; s > p || u > o || c > o;) u = c, p > 0 && (h *= r * r / (2 * p), f *= r * r / (2 * (p + .5))), c = h * t.beta.cdf(d, p + .5, i / 2) + f * t.beta.cdf(d, p + 1, i / 2), l += .5 * c, p++;
                            return a ? 1 - l : l
                        }
                    }), t.extend(t.normal, {
                        pdf: function(t, n, i) {
                            return e.exp(-.5 * e.log(2 * e.PI) - e.log(i) - e.pow(t - n, 2) / (2 * i * i))
                        },
                        cdf: function(n, i, r) {
                            return .5 * (1 + t.erf((n - i) / e.sqrt(2 * r * r)))
                        },
                        inv: function(e, n, i) {
                            return -1.4142135623730951 * i * t.erfcinv(2 * e) + n
                        },
                        mean: function(t) {
                            return t
                        },
                        median: function(t) {
                            return t
                        },
                        mode: function(t) {
                            return t
                        },
                        sample: function(e, n) {
                            return t.randn() * n + e
                        },
                        variance: function(t, e) {
                            return e * e
                        }
                    }), t.extend(t.pareto, {
                        pdf: function(t, n, i) {
                            return n > t ? 0 : i * e.pow(n, i) / e.pow(t, i + 1)
                        },
                        cdf: function(t, n, i) {
                            return n > t ? 0 : 1 - e.pow(n / t, i)
                        },
                        inv: function(t, n, i) {
                            return n / e.pow(1 - t, 1 / i)
                        },
                        mean: function(t, n) {
                            return 1 >= n ? void 0 : n * e.pow(t, n) / (n - 1)
                        },
                        median: function(t, n) {
                            return t * n * e.SQRT2
                        },
                        mode: function(t) {
                            return t
                        },
                        variance: function(t, n) {
                            return 2 >= n ? void 0 : t * t * n / (e.pow(n - 1, 2) * (n - 2))
                        }
                    }), t.extend(t.studentt, {
                        pdf: function(n, i) {
                            return i = i > 1e100 ? 1e100 : i, 1 / (e.sqrt(i) * t.betafn(.5, i / 2)) * e.pow(1 + n * n / i, -((i + 1) / 2))
                        },
                        cdf: function(n, i) {
                            var r = i / 2;
                            return t.ibeta((n + e.sqrt(n * n + i)) / (2 * e.sqrt(n * n + i)), r, r)
                        },
                        inv: function(n, i) {
                            var r = t.ibetainv(2 * e.min(n, 1 - n), .5 * i, .5);
                            return r = e.sqrt(i * (1 - r) / r), n > .5 ? r : -r
                        },
                        mean: function(t) {
                            return t > 1 ? 0 : void 0
                        },
                        median: function() {
                            return 0
                        },
                        mode: function() {
                            return 0
                        },
                        sample: function(n) {
                            return t.randn() * e.sqrt(n / (2 * t.randg(n / 2)))
                        },
                        variance: function(t) {
                            return t > 2 ? t / (t - 2) : t > 1 ? 1 / 0 : void 0
                        }
                    }), t.extend(t.weibull, {
                        pdf: function(t, n, i) {
                            return 0 > t || 0 > n || 0 > i ? 0 : i / n * e.pow(t / n, i - 1) * e.exp(-e.pow(t / n, i))
                        },
                        cdf: function(t, n, i) {
                            return 0 > t ? 0 : 1 - e.exp(-e.pow(t / n, i))
                        },
                        inv: function(t, n, i) {
                            return n * e.pow(-e.log(1 - t), 1 / i)
                        },
                        mean: function(e, n) {
                            return e * t.gammafn(1 + 1 / n)
                        },
                        median: function(t, n) {
                            return t * e.pow(e.log(2), 1 / n)
                        },
                        mode: function(t, n) {
                            return 1 >= n ? 0 : t * e.pow((n - 1) / n, 1 / n)
                        },
                        sample: function(t, n) {
                            return t * e.pow(-e.log(e.random()), 1 / n)
                        },
                        variance: function(n, i) {
                            return n * n * t.gammafn(1 + 2 / i) - e.pow(t.weibull.mean(n, i), 2)
                        }
                    }), t.extend(t.uniform, {
                        pdf: function(t, e, n) {
                            return e > t || t > n ? 0 : 1 / (n - e)
                        },
                        cdf: function(t, e, n) {
                            return e > t ? 0 : n > t ? (t - e) / (n - e) : 1
                        },
                        inv: function(t, e, n) {
                            return e + t * (n - e)
                        },
                        mean: function(t, e) {
                            return .5 * (t + e)
                        },
                        median: function(e, n) {
                            return t.mean(e, n)
                        },
                        mode: function() {
                            throw new Error("mode is not yet implemented")
                        },
                        sample: function(t, n) {
                            return t / 2 + n / 2 + (n / 2 - t / 2) * (2 * e.random() - 1)
                        },
                        variance: function(t, n) {
                            return e.pow(n - t, 2) / 12
                        }
                    }), t.extend(t.binomial, {
                        pdf: function(n, i, r) {
                            return 0 === r || 1 === r ? i * r === n ? 1 : 0 : t.combination(i, n) * e.pow(r, n) * e.pow(1 - r, i - n)
                        },
                        cdf: function(e, n, i) {
                            var r = [],
                                o = 0;
                            if (0 > e) return 0;
                            if (n > e) {
                                for (; e >= o; o++) r[o] = t.binomial.pdf(o, n, i);
                                return t.sum(r)
                            }
                            return 1
                        }
                    }), t.extend(t.negbin, {
                        pdf: function(n, i, r) {
                            return n !== n >>> 0 ? !1 : 0 > n ? 0 : t.combination(n + i - 1, i - 1) * e.pow(1 - r, n) * e.pow(r, i)
                        },
                        cdf: function(e, n, i) {
                            var r = 0,
                                o = 0;
                            if (0 > e) return 0;
                            for (; e >= o; o++) r += t.negbin.pdf(o, n, i);
                            return r
                        }
                    }), t.extend(t.hypgeom, {
                        pdf: function(n, i, r, o) {
                            if (n !== n | 0) return !1;
                            if (0 > n || r - (i - o) > n) return 0;
                            if (n > o || n > r) return 0;
                            if (2 * r > i) return 2 * o > i ? t.hypgeom.pdf(i - r - o + n, i, i - r, i - o) : t.hypgeom.pdf(o - n, i, i - r, o);
                            if (2 * o > i) return t.hypgeom.pdf(r - n, i, r, i - o);
                            if (o > r) return t.hypgeom.pdf(n, i, o, r);
                            for (var s = 1, a = 0, l = 0; n > l; l++) {
                                for (; s > 1 && o > a;) s *= 1 - r / (i - a), a++;
                                s *= (o - l) * (r - l) / ((l + 1) * (i - r - o + l + 1))
                            }
                            for (; o > a; a++) s *= 1 - r / (i - a);
                            return e.min(1, e.max(0, s))
                        },
                        cdf: function(n, i, r, o) {
                            if (0 > n || r - (i - o) > n) return 0;
                            if (n >= o || n >= r) return 1;
                            if (2 * r > i) return 2 * o > i ? t.hypgeom.cdf(i - r - o + n, i, i - r, i - o) : 1 - t.hypgeom.cdf(o - n - 1, i, i - r, o);
                            if (2 * o > i) return 1 - t.hypgeom.cdf(r - n - 1, i, r, i - o);
                            if (o > r) return t.hypgeom.cdf(n, i, o, r);
                            for (var s = 1, a = 1, l = 0, c = 0; n > c; c++) {
                                for (; s > 1 && o > l;) {
                                    var u = 1 - r / (i - l);
                                    a *= u, s *= u, l++
                                }
                                a *= (o - c) * (r - c) / ((c + 1) * (i - r - o + c + 1)), s += a
                            }
                            for (; o > l; l++) s *= 1 - r / (i - l);
                            return e.min(1, e.max(0, s))
                        }
                    }), t.extend(t.poisson, {
                        pdf: function(n, i) {
                            return 0 > i || n % 1 !== 0 || 0 > n ? 0 : e.pow(i, n) * e.exp(-i) / t.factorial(n)
                        },
                        cdf: function(e, n) {
                            var i = [],
                                r = 0;
                            if (0 > e) return 0;
                            for (; e >= r; r++) i.push(t.poisson.pdf(r, n));
                            return t.sum(i)
                        },
                        mean: function(t) {
                            return t
                        },
                        variance: function(t) {
                            return t
                        },
                        sample: function(t) {
                            var n = 1,
                                i = 0,
                                r = e.exp(-t);
                            do i++, n *= e.random(); while (n > r);
                            return i - 1
                        }
                    }), t.extend(t.triangular, {
                        pdf: function(t, e, n, i) {
                            return e >= n || e > i || i > n ? 0 / 0 : e > t || t > n ? 0 : i > t ? 2 * (t - e) / ((n - e) * (i - e)) : t === i ? 2 / (n - e) : 2 * (n - t) / ((n - e) * (n - i))
                        },
                        cdf: function(t, n, i, r) {
                            return n >= i || n > r || r > i ? 0 / 0 : n >= t ? 0 : t >= i ? 1 : r >= t ? e.pow(t - n, 2) / ((i - n) * (r - n)) : 1 - e.pow(i - t, 2) / ((i - n) * (i - r))
                        },
                        inv: function(t, n, i, r) {
                            return n >= i || n > r || r > i ? 0 / 0 : (r - n) / (i - n) >= t ? n + (i - n) * e.sqrt(t * ((r - n) / (i - n))) : n + (i - n) * (1 - e.sqrt((1 - t) * (1 - (r - n) / (i - n))))
                        },
                        mean: function(t, e, n) {
                            return (t + e + n) / 3
                        },
                        median: function(t, n, i) {
                            return (t + n) / 2 >= i ? n - e.sqrt((n - t) * (n - i)) / e.sqrt(2) : i > (t + n) / 2 ? t + e.sqrt((n - t) * (i - t)) / e.sqrt(2) : void 0
                        },
                        mode: function(t, e, n) {
                            return n
                        },
                        sample: function(t, n, i) {
                            var r = e.random();
                            return (i - t) / (n - t) > r ? t + e.sqrt(r * (n - t) * (i - t)) : n - e.sqrt((1 - r) * (n - t) * (n - i))
                        },
                        variance: function(t, e, n) {
                            return (t * t + e * e + n * n - t * e - t * n - e * n) / 18
                        }
                    }), t.extend(t.laplace, {
                        pdf: function(t, n, i) {
                            return 0 >= i ? 0 : e.exp(-e.abs(t - n) / i) / (2 * i)
                        },
                        cdf: function(t, n, i) {
                            return 0 >= i ? 0 : n > t ? .5 * e.exp((t - n) / i) : 1 - .5 * e.exp(-(t - n) / i)
                        },
                        mean: function(t) {
                            return t
                        },
                        median: function(t) {
                            return t
                        },
                        mode: function(t) {
                            return t
                        },
                        variance: function(t, e) {
                            return 2 * e * e
                        },
                        sample: function(t, i) {
                            var r = e.random() - .5;
                            return t - i * n(r) * e.log(1 - 2 * e.abs(r))
                        }
                    })
                }(this.jStat, Math),
                function(t, e) {
                    function n(e) {
                        return o(e) || e instanceof t
                    }
                    var r = Array.prototype.push,
                        o = t.utils.isArray;
                    t.extend({
                            add: function(e, i) {
                                return n(i) ? (n(i[0]) || (i = [i]), t.map(e, function(t, e, n) {
                                    return t + i[e][n]
                                })) : t.map(e, function(t) {
                                    return t + i
                                })
                            },
                            subtract: function(e, i) {
                                return n(i) ? (n(i[0]) || (i = [i]), t.map(e, function(t, e, n) {
                                    return t - i[e][n] || 0
                                })) : t.map(e, function(t) {
                                    return t - i
                                })
                            },
                            divide: function(e, i) {
                                return n(i) ? (n(i[0]) || (i = [i]), t.multiply(e, t.inv(i))) : t.map(e, function(t) {
                                    return t / i
                                })
                            },
                            multiply: function(e, i) {
                                var r, o, s, a, l, c, u, d;
                                if (void 0 === e.length && void 0 === i.length) return e * i;
                                if (l = e.length, c = e[0].length, u = t.zeros(l, s = n(i) ? i[0].length : c), d = 0, n(i)) {
                                    for (; s > d; d++)
                                        for (r = 0; l > r; r++) {
                                            for (a = 0, o = 0; c > o; o++) a += e[r][o] * i[o][d];
                                            u[r][d] = a
                                        }
                                    return 1 === l && 1 === d ? u[0][0] : u
                                }
                                return t.map(e, function(t) {
                                    return t * i
                                })
                            },
                            outer: function(e, n) {
                                return t.multiply(e.map(function(t) {
                                    return [t]
                                }), [n])
                            },
                            dot: function(e, i) {
                                n(e[0]) || (e = [e]), n(i[0]) || (i = [i]);
                                for (var r, o, s = 1 === e[0].length && 1 !== e.length ? t.transpose(e) : e, a = 1 === i[0].length && 1 !== i.length ? t.transpose(i) : i, l = [], c = 0, u = s.length, d = s[0].length; u > c; c++) {
                                    for (l[c] = [], r = 0, o = 0; d > o; o++) r += s[c][o] * a[c][o];
                                    l[c] = r
                                }
                                return 1 === l.length ? l[0] : l
                            },
                            pow: function(n, i) {
                                return t.map(n, function(t) {
                                    return e.pow(t, i)
                                })
                            },
                            exp: function(n) {
                                return t.map(n, function(t) {
                                    return e.exp(t)
                                })
                            },
                            log: function(n) {
                                return t.map(n, function(t) {
                                    return e.log(t)
                                })
                            },
                            abs: function(n) {
                                return t.map(n, function(t) {
                                    return e.abs(t)
                                })
                            },
                            norm: function(t, i) {
                                var r = 0,
                                    o = 0;
                                for (isNaN(i) && (i = 2), n(t[0]) && (t = t[0]); o < t.length; o++) r += e.pow(e.abs(t[o]), i);
                                return e.pow(r, 1 / i)
                            },
                            angle: function(n, i) {
                                return e.acos(t.dot(n, i) / (t.norm(n) * t.norm(i)))
                            },
                            aug: function(t, e) {
                                for (var n = [], i = 0; i < t.length; i++) n.push(t[i].slice());
                                for (var i = 0; i < n.length; i++) r.apply(n[i], e[i]);
                                return n
                            },
                            inv: function(e) {
                                for (var n, i = e.length, r = e[0].length, o = t.identity(i, r), s = t.gauss_jordan(e, o), a = [], l = 0; i > l; l++)
                                    for (a[l] = [], n = r; n < s[0].length; n++) a[l][n - r] = s[l][n];
                                return a
                            },
                            det: function(t) {
                                var e, n = t.length,
                                    i = 2 * n,
                                    r = new Array(i),
                                    o = n - 1,
                                    s = i - 1,
                                    a = o - n + 1,
                                    l = s,
                                    c = 0,
                                    u = 0;
                                if (2 === n) return t[0][0] * t[1][1] - t[0][1] * t[1][0];
                                for (; i > c; c++) r[c] = 1;
                                for (var c = 0; n > c; c++) {
                                    for (e = 0; n > e; e++) r[0 > a ? a + n : a] *= t[c][e], r[n > l ? l + n : l] *= t[c][e], a++, l--;
                                    a = --o - n + 1, l = --s
                                }
                                for (var c = 0; n > c; c++) u += r[c];
                                for (; i > c; c++) u -= r[c];
                                return u
                            },
                            gauss_elimination: function(n, i) {
                                var r, o, s, a, l = 0,
                                    c = 0,
                                    u = n.length,
                                    d = n[0].length,
                                    p = 1,
                                    h = 0,
                                    f = [];
                                n = t.aug(n, i), r = n[0].length;
                                for (var l = 0; u > l; l++) {
                                    for (o = n[l][l], c = l, a = l + 1; d > a; a++) o < e.abs(n[a][l]) && (o = n[a][l], c = a);
                                    if (c != l)
                                        for (a = 0; r > a; a++) s = n[l][a], n[l][a] = n[c][a], n[c][a] = s;
                                    for (c = l + 1; u > c; c++)
                                        for (p = n[c][l] / n[l][l], a = l; r > a; a++) n[c][a] = n[c][a] - p * n[l][a]
                                }
                                for (var l = u - 1; l >= 0; l--) {
                                    for (h = 0, c = l + 1; u - 1 >= c; c++) h += f[c] * n[l][c];
                                    f[l] = (n[l][r - 1] - h) / n[l][l]
                                }
                                return f
                            },
                            gauss_jordan: function(n, i) {
                                for (var r = t.aug(n, i), o = r.length, s = r[0].length, a = 0; o > a; a++) {
                                    for (var l = a, u = a + 1; o > u; u++) e.abs(r[u][a]) > e.abs(r[l][a]) && (l = u);
                                    var d = r[a];
                                    r[a] = r[l], r[l] = d;
                                    for (var u = a + 1; o > u; u++) {
                                        c = r[u][a] / r[a][a];
                                        for (var p = a; s > p; p++) r[u][p] -= r[a][p] * c
                                    }
                                }
                                for (var a = o - 1; a >= 0; a--) {
                                    c = r[a][a];
                                    for (var u = 0; a > u; u++)
                                        for (var p = s - 1; p > a - 1; p--) r[u][p] -= r[a][p] * r[u][a] / c;
                                    r[a][a] /= c;
                                    for (var p = o; s > p; p++) r[a][p] /= c
                                }
                                return r
                            },
                            triaUpSolve: function(e, n) {
                                var i, r = e[0].length,
                                    o = t.zeros(1, r)[0],
                                    s = !1;
                                return void 0 != n[0].length && (n = n.map(function(t) {
                                    return t[0]
                                }), s = !0), t.arange(r - 1, -1, -1).forEach(function(s) {
                                    i = t.arange(s + 1, r).map(function(t) {
                                        return o[t] * e[s][t]
                                    }), o[s] = (n[s] - t.sum(i)) / e[s][s]
                                }), s ? o.map(function(t) {
                                    return [t]
                                }) : o
                            },
                            triaLowSolve: function(e, n) {
                                var i, r = e[0].length,
                                    o = t.zeros(1, r)[0],
                                    s = !1;
                                return void 0 != n[0].length && (n = n.map(function(t) {
                                    return t[0]
                                }), s = !0), t.arange(r).forEach(function(r) {
                                    i = t.arange(r).map(function(t) {
                                        return e[r][t] * o[t]
                                    }), o[r] = (n[r] - t.sum(i)) / e[r][r]
                                }), s ? o.map(function(t) {
                                    return [t]
                                }) : o
                            },
                            lu: function(e) {
                                var n, r = e.length,
                                    o = t.identity(r),
                                    s = t.zeros(e.length, e[0].length);
                                return t.arange(r).forEach(function(t) {
                                    s[0][t] = e[0][t]
                                }), t.arange(1, r).forEach(function(a) {
                                    t.arange(a).forEach(function(i) {
                                        n = t.arange(i).map(function(t) {
                                            return o[a][t] * s[t][i]
                                        }), o[a][i] = (e[a][i] - t.sum(n)) / s[i][i]
                                    }), t.arange(a, r).forEach(function(r) {
                                        n = t.arange(a).map(function(t) {
                                            return o[a][t] * s[t][r]
                                        }), s[a][r] = e[i][r] - t.sum(n)
                                    })
                                }), [o, s]
                            },
                            cholesky: function(n) {
                                var i, r = n.length,
                                    o = t.zeros(n.length, n[0].length);
                                return t.arange(r).forEach(function(s) {
                                    i = t.arange(s).map(function(t) {
                                        return e.pow(o[s][t], 2)
                                    }), o[s][s] = e.sqrt(n[s][s] - t.sum(i)), t.arange(s + 1, r).forEach(function(e) {
                                        i = t.arange(s).map(function(t) {
                                            return o[s][t] * o[e][t]
                                        }), o[e][s] = (n[s][e] - t.sum(i)) / o[s][s]
                                    })
                                }), o
                            },
                            gauss_jacobi: function(n, i, r, o) {
                                for (var s, a, l, c, u = 0, d = 0, p = n.length, h = [], f = [], m = []; p > u; u++)
                                    for (h[u] = [], f[u] = [], m[u] = [], d = 0; p > d; d++) u > d ? (h[u][d] = n[u][d], f[u][d] = m[u][d] = 0) : d > u ? (f[u][d] = n[u][d], h[u][d] = m[u][d] = 0) : (m[u][d] = n[u][d], h[u][d] = f[u][d] = 0);
                                for (l = t.multiply(t.multiply(t.inv(m), t.add(h, f)), -1), a = t.multiply(t.inv(m), i), s = r, c = t.add(t.multiply(l, r), a), u = 2; e.abs(t.norm(t.subtract(c, s))) > o;) s = c, c = t.add(t.multiply(l, s), a), u++;
                                return c
                            },
                            gauss_seidel: function(n, i, r, o) {
                                for (var s, a, l, c, u, d = 0, p = n.length, h = [], f = [], m = []; p > d; d++)
                                    for (h[d] = [], f[d] = [], m[d] = [], s = 0; p > s; s++) d > s ? (h[d][s] = n[d][s], f[d][s] = m[d][s] = 0) : s > d ? (f[d][s] = n[d][s], h[d][s] = m[d][s] = 0) : (m[d][s] = n[d][s], h[d][s] = f[d][s] = 0);
                                for (c = t.multiply(t.multiply(t.inv(t.add(m, h)), f), -1), l = t.multiply(t.inv(t.add(m, h)), i), a = r, u = t.add(t.multiply(c, r), l), d = 2; e.abs(t.norm(t.subtract(u, a))) > o;) a = u, u = t.add(t.multiply(c, a), l), d += 1;
                                return u
                            },
                            SOR: function(n, i, r, o, s) {
                                for (var a, l, c, u, d, p = 0, h = n.length, f = [], m = [], g = []; h > p; p++)
                                    for (f[p] = [], m[p] = [], g[p] = [], a = 0; h > a; a++) p > a ? (f[p][a] = n[p][a], m[p][a] = g[p][a] = 0) : a > p ? (m[p][a] = n[p][a], f[p][a] = g[p][a] = 0) : (g[p][a] = n[p][a], f[p][a] = m[p][a] = 0);
                                for (u = t.multiply(t.inv(t.add(g, t.multiply(f, s))), t.subtract(t.multiply(g, 1 - s), t.multiply(m, s))), c = t.multiply(t.multiply(t.inv(t.add(g, t.multiply(f, s))), i), s), l = r, d = t.add(t.multiply(u, r), c), p = 2; e.abs(t.norm(t.subtract(d, l))) > o;) l = d, d = t.add(t.multiply(u, l), c), p++;
                                return d
                            },
                            householder: function(n) {
                                for (var i, r, o, s, a, l = n.length, c = n[0].length, u = 0, d = [], p = []; l - 1 > u; u++) {
                                    for (i = 0, s = u + 1; c > s; s++) i += n[s][u] * n[s][u];
                                    for (a = n[u + 1][u] > 0 ? -1 : 1, i = a * e.sqrt(i), r = e.sqrt((i * i - n[u + 1][u] * i) / 2), d = t.zeros(l, 1), d[u + 1][0] = (n[u + 1][u] - i) / (2 * r), o = u + 2; l > o; o++) d[o][0] = n[o][u] / (2 * r);
                                    p = t.subtract(t.identity(l, c), t.multiply(t.multiply(d, t.transpose(d)), 2)), n = t.multiply(p, t.multiply(n, p))
                                }
                                return n
                            },
                            QR: function() {
                                function e(e) {
                                    var n = e.length,
                                        i = t.norm(e, 2),
                                        r = t.zeros(1, n)[0];
                                    r[0] = 1;
                                    var o = t.add(t.multiply(t.multiply(r, i), -1), e),
                                        s = t.norm(o, 2),
                                        a = t.divide(o, s),
                                        l = t.subtract(t.identity(n), t.multiply(t.outer(a, a), 2));
                                    return l
                                }

                                function n(n) {
                                    var i = n[0].length,
                                        r = [];
                                    t.arange(i).forEach(function(i) {
                                        var o = t.slice(n, {
                                                row: {
                                                    start: i
                                                },
                                                col: i
                                            }),
                                            s = e(o),
                                            a = t.identity(n.length);
                                        a = t.sliceAssign(a, {
                                            row: {
                                                start: i
                                            },
                                            col: {
                                                start: i
                                            }
                                        }, s), n = t.multiply(a, n), r.push(a)
                                    });
                                    var o = r.reduce(function(e, n) {
                                            return t.multiply(e, n)
                                        }),
                                        s = n;
                                    return [o, s]
                                }
                                return n
                            }(),
                            lstsq: function() {
                                function e(e) {
                                    e = t.copy(e);
                                    var n = e.length,
                                        i = t.identity(n);
                                    return t.arange(n - 1, -1, -1).forEach(function(n) {
                                        t.sliceAssign(i, {
                                            row: n
                                        }, t.divide(t.slice(i, {
                                            row: n
                                        }), e[n][n])), t.sliceAssign(e, {
                                            row: n
                                        }, t.divide(t.slice(e, {
                                            row: n
                                        }), e[n][n])), t.arange(n).forEach(function(r) {
                                            var o = t.multiply(e[r][n], -1),
                                                s = t.slice(e, {
                                                    row: r
                                                }),
                                                a = t.multiply(t.slice(e, {
                                                    row: n
                                                }), o);
                                            t.sliceAssign(e, {
                                                row: r
                                            }, t.add(s, a));
                                            var l = t.slice(i, {
                                                    row: r
                                                }),
                                                c = t.multiply(t.slice(i, {
                                                    row: n
                                                }), o);
                                            t.sliceAssign(i, {
                                                row: r
                                            }, t.add(l, c))
                                        })
                                    }), i
                                }

                                function n(n, i) {
                                    var r = !1;
                                    void 0 === i[0].length && (i = i.map(function(t) {
                                        return [t]
                                    }), r = !0);
                                    var o = t.QR(n),
                                        s = o[0],
                                        a = o[1],
                                        l = n[0].length,
                                        c = t.slice(s, {
                                            col: {
                                                end: l
                                            }
                                        }),
                                        u = t.slice(a, {
                                            row: {
                                                end: l
                                            }
                                        }),
                                        d = e(u),
                                        p = t.multiply(t.multiply(d, t.transpose(c)), i);
                                    return r ? p.map(function(t) {
                                        return t[0]
                                    }) : p
                                }
                                return n
                            }(),
                            jacobi: function(n) {
                                for (var i, r, o, s, a, l, c, u, d = 1, p = 0, h = n.length, f = t.identity(h, h), m = []; 1 === d;) {
                                    p++, l = n[0][1], s = 0, a = 1;
                                    for (var r = 0; h > r; r++)
                                        for (o = 0; h > o; o++) r != o && l < e.abs(n[r][o]) && (l = e.abs(n[r][o]), s = r, a = o);
                                    c = n[s][s] === n[a][a] ? n[s][a] > 0 ? e.PI / 4 : -e.PI / 4 : e.atan(2 * n[s][a] / (n[s][s] - n[a][a])) / 2, u = t.identity(h, h), u[s][s] = e.cos(c), u[s][a] = -e.sin(c), u[a][s] = e.sin(c), u[a][a] = e.cos(c), f = t.multiply(f, u), i = t.multiply(t.multiply(t.inv(u), n), u), n = i, d = 0;
                                    for (var r = 1; h > r; r++)
                                        for (o = 1; h > o; o++) r != o && e.abs(n[r][o]) > .001 && (d = 1)
                                }
                                for (var r = 0; h > r; r++) m.push(n[r][r]);
                                return [f, m]
                            },
                            rungekutta: function(t, e, n, i, r, o) {
                                var s, a, l, c, u;
                                if (2 === o)
                                    for (; n >= i;) s = e * t(i, r), a = e * t(i + e, r + s), l = r + (s + a) / 2, r = l, i += e;
                                if (4 === o)
                                    for (; n >= i;) s = e * t(i, r), a = e * t(i + e / 2, r + s / 2), c = e * t(i + e / 2, r + a / 2), u = e * t(i + e, r + c), l = r + (s + 2 * a + 2 * c + u) / 6, r = l, i += e;
                                return r
                            },
                            romberg: function(t, n, i, r) {
                                for (var o, s, a, l, c, u = 0, d = (i - n) / 2, p = [], h = [], f = []; r / 2 > u;) {
                                    for (c = t(n), a = n, l = 0; i >= a; a += d, l++) p[l] = a;
                                    for (o = p.length, a = 1; o - 1 > a; a++) c += (a % 2 !== 0 ? 4 : 2) * t(p[a]);
                                    c = d / 3 * (c + t(i)), f[u] = c, d /= 2, u++
                                }
                                for (s = f.length, o = 1; 1 !== s;) {
                                    for (a = 0; s - 1 > a; a++) h[a] = (e.pow(4, o) * f[a + 1] - f[a]) / (e.pow(4, o) - 1);
                                    s = h.length, f = h, h = [], o++
                                }
                                return f
                            },
                            richardson: function(t, n, i, r) {
                                function o(t, e) {
                                    for (var n, i = 0, r = t.length; r > i; i++) t[i] === e && (n = i);
                                    return n
                                }
                                for (var s, a, l, c, u, d = (t.length, e.abs(i - t[o(t, i) + 1])), p = 0, h = [], f = []; r >= d;) s = o(t, i + r), a = o(t, i), h[p] = (n[s] - 2 * n[a] + n[2 * a - s]) / (r * r), r /= 2, p++;
                                for (c = h.length, l = 1; 1 != c;) {
                                    for (u = 0; c - 1 > u; u++) f[u] = (e.pow(4, l) * h[u + 1] - h[u]) / (e.pow(4, l) - 1);
                                    c = f.length, h = f, f = [], l++
                                }
                                return h
                            },
                            simpson: function(t, e, n, i) {
                                for (var r, o = (n - e) / i, s = t(e), a = [], l = e, c = 0, u = 1; n >= l; l += o, c++) a[c] = l;
                                for (r = a.length; r - 1 > u; u++) s += (u % 2 !== 0 ? 4 : 2) * t(a[u]);
                                return o / 3 * (s + t(n))
                            },
                            hermite: function(t, e, n, i) {
                                for (var r, o = t.length, s = 0, a = 0, l = [], c = [], u = [], d = []; o > a; a++) {
                                    for (l[a] = 1, r = 0; o > r; r++) a != r && (l[a] *= (i - t[r]) / (t[a] - t[r]));
                                    for (c[a] = 0, r = 0; o > r; r++) a != r && (c[a] += 1 / (t[a] - t[r]));
                                    u[a] = (1 - 2 * (i - t[a]) * c[a]) * l[a] * l[a], d[a] = (i - t[a]) * l[a] * l[a], s += u[a] * e[a] + d[a] * n[a]
                                }
                                return s
                            },
                            lagrange: function(t, e, n) {
                                for (var i, r, o = 0, s = 0, a = t.length; a > s; s++) {
                                    for (r = e[s], i = 0; a > i; i++) s != i && (r *= (n - t[i]) / (t[s] - t[i]));
                                    o += r
                                }
                                return o
                            },
                            cubic_spline: function(e, n, i) {
                                for (var r, o = e.length, s = 0, a = [], l = [], c = [], u = [], d = [], p = [], h = []; o - 1 > s; s++) d[s] = e[s + 1] - e[s];
                                c[0] = 0;
                                for (var s = 1; o - 1 > s; s++) c[s] = 3 / d[s] * (n[s + 1] - n[s]) - 3 / d[s - 1] * (n[s] - n[s - 1]);
                                for (var s = 1; o - 1 > s; s++) a[s] = [], l[s] = [], a[s][s - 1] = d[s - 1], a[s][s] = 2 * (d[s - 1] + d[s]), a[s][s + 1] = d[s], l[s][0] = c[s];
                                for (u = t.multiply(t.inv(a), l), r = 0; o - 1 > r; r++) p[r] = (n[r + 1] - n[r]) / d[r] - d[r] * (u[r + 1][0] + 2 * u[r][0]) / 3, h[r] = (u[r + 1][0] - u[r][0]) / (3 * d[r]);
                                for (r = 0; o > r && !(e[r] > i); r++);
                                return r -= 1, n[r] + (i - e[r]) * p[r] + t.sq(i - e[r]) * u[r] + (i - e[r]) * t.sq(i - e[r]) * h[r]
                            },
                            gauss_quadrature: function() {
                                throw new Error("gauss_quadrature not yet implemented")
                            },
                            PCA: function(e) {
                                for (var n, i, r = e.length, o = e[0].length, s = 0, a = [], l = [], c = [], u = [], d = [], p = [], h = [], f = [], m = [], g = [], s = 0; r > s; s++) a[s] = t.sum(e[s]) / o;
                                for (var s = 0; o > s; s++)
                                    for (h[s] = [], n = 0; r > n; n++) h[s][n] = e[n][s] - a[n];
                                h = t.transpose(h);
                                for (var s = 0; r > s; s++)
                                    for (f[s] = [], n = 0; r > n; n++) f[s][n] = t.dot([h[s]], [h[n]]) / (o - 1);
                                c = t.jacobi(f), m = c[0], l = c[1], g = t.transpose(m);
                                for (var s = 0; s < l.length; s++)
                                    for (n = s; n < l.length; n++) l[s] < l[n] && (i = l[s], l[s] = l[n], l[n] = i, u = g[s], g[s] = g[n], g[n] = u);
                                p = t.transpose(h);
                                for (var s = 0; r > s; s++)
                                    for (d[s] = [], n = 0; n < p.length; n++) d[s][n] = t.dot([g[s]], [p[n]]);
                                return [e, l, g, d]
                            }
                        }),
                        function(e) {
                            for (var n = 0; n < e.length; n++)(function(e) {
                                t.fn[e] = function(n, i) {
                                    var r = this;
                                    return i ? (setTimeout(function() {
                                        i.call(r, t.fn[e].call(r, n))
                                    }, 15), this) : "number" == typeof t[e](this, n) ? t[e](this, n) : t(t[e](this, n))
                                }
                            })(e[n])
                        }("add divide multiply subtract dot pow exp log abs norm angle".split(" "))
                }(this.jStat, Math),
                function(t, e) {
                    function n(t, n, i, r) {
                        if (t > 1 || i > 1 || 0 >= t || 0 >= i) throw new Error("Proportions should be greater than 0 and less than 1");
                        var o = (t * n + i * r) / (n + r),
                            s = e.sqrt(o * (1 - o) * (1 / n + 1 / r));
                        return (t - i) / s
                    }
                    var i = [].slice,
                        r = t.utils.isNumber,
                        o = t.utils.isArray;
                    t.extend({
                        zscore: function() {
                            var e = i.call(arguments);
                            return r(e[1]) ? (e[0] - e[1]) / e[2] : (e[0] - t.mean(e[1])) / t.stdev(e[1], e[2])
                        },
                        ztest: function() {
                            var n, r = i.call(arguments);
                            return o(r[1]) ? (n = t.zscore(r[0], r[1], r[3]), 1 === r[2] ? t.normal.cdf(-e.abs(n), 0, 1) : 2 * t.normal.cdf(-e.abs(n), 0, 1)) : r.length > 2 ? (n = t.zscore(r[0], r[1], r[2]), 1 === r[3] ? t.normal.cdf(-e.abs(n), 0, 1) : 2 * t.normal.cdf(-e.abs(n), 0, 1)) : (n = r[0], 1 === r[1] ? t.normal.cdf(-e.abs(n), 0, 1) : 2 * t.normal.cdf(-e.abs(n), 0, 1))
                        }
                    }), t.extend(t.fn, {
                        zscore: function(t, e) {
                            return (t - this.mean()) / this.stdev(e)
                        },
                        ztest: function(n, i, r) {
                            var o = e.abs(this.zscore(n, r));
                            return 1 === i ? t.normal.cdf(-o, 0, 1) : 2 * t.normal.cdf(-o, 0, 1)
                        }
                    }), t.extend({
                        tscore: function() {
                            var n = i.call(arguments);
                            return 4 === n.length ? (n[0] - n[1]) / (n[2] / e.sqrt(n[3])) : (n[0] - t.mean(n[1])) / (t.stdev(n[1], !0) / e.sqrt(n[1].length))
                        },
                        ttest: function() {
                            var n, o = i.call(arguments);
                            return 5 === o.length ? (n = e.abs(t.tscore(o[0], o[1], o[2], o[3])), 1 === o[4] ? t.studentt.cdf(-n, o[3] - 1) : 2 * t.studentt.cdf(-n, o[3] - 1)) : r(o[1]) ? (n = e.abs(o[0]), 1 == o[2] ? t.studentt.cdf(-n, o[1] - 1) : 2 * t.studentt.cdf(-n, o[1] - 1)) : (n = e.abs(t.tscore(o[0], o[1])), 1 == o[2] ? t.studentt.cdf(-n, o[1].length - 1) : 2 * t.studentt.cdf(-n, o[1].length - 1))
                        }
                    }), t.extend(t.fn, {
                        tscore: function(t) {
                            return (t - this.mean()) / (this.stdev(!0) / e.sqrt(this.cols()))
                        },
                        ttest: function(n, i) {
                            return 1 === i ? 1 - t.studentt.cdf(e.abs(this.tscore(n)), this.cols() - 1) : 2 * t.studentt.cdf(-e.abs(this.tscore(n)), this.cols() - 1)
                        }
                    }), t.extend({
                        anovafscore: function() {
                            var n, r, o, s, a, l, c, u, d = i.call(arguments);
                            if (1 === d.length) {
                                a = new Array(d[0].length);
                                for (var c = 0; c < d[0].length; c++) a[c] = d[0][c];
                                d = a
                            }
                            if (2 === d.length) return t.variance(d[0]) / t.variance(d[1]);
                            r = new Array;
                            for (var c = 0; c < d.length; c++) r = r.concat(d[c]);
                            o = t.mean(r), n = 0;
                            for (var c = 0; c < d.length; c++) n += d[c].length * e.pow(t.mean(d[c]) - o, 2);
                            n /= d.length - 1, l = 0;
                            for (var c = 0; c < d.length; c++)
                                for (s = t.mean(d[c]), u = 0; u < d[c].length; u++) l += e.pow(d[c][u] - s, 2);
                            return l /= r.length - d.length, n / l
                        },
                        anovaftest: function() {
                            var e, n, o, s, a = i.call(arguments);
                            if (r(a[0])) return 1 - t.centralF.cdf(a[0], a[1], a[2]);
                            anovafscore = t.anovafscore(a), e = a.length - 1, o = 0;
                            for (var s = 0; s < a.length; s++) o += a[s].length;
                            return n = o - e - 1, 1 - t.centralF.cdf(anovafscore, e, n)
                        },
                        ftest: function(e, n, i) {
                            return 1 - t.centralF.cdf(e, n, i)
                        }
                    }), t.extend(t.fn, {
                        anovafscore: function() {
                            return t.anovafscore(this.toArray())
                        },
                        anovaftes: function() {
                            for (var e, n = 0, e = 0; e < this.length; e++) n += this[e].length;
                            return t.ftest(this.anovafscore(), this.length - 1, n - this.length)
                        }
                    }), t.extend({
                        normalci: function() {
                            var n, r = i.call(arguments),
                                o = new Array(2);
                            return n = e.abs(4 === r.length ? t.normal.inv(r[1] / 2, 0, 1) * r[2] / e.sqrt(r[3]) : t.normal.inv(r[1] / 2, 0, 1) * t.stdev(r[2]) / e.sqrt(r[2].length)), o[0] = r[0] - n, o[1] = r[0] + n, o
                        },
                        tci: function() {
                            var n, r = i.call(arguments),
                                o = new Array(2);
                            return n = e.abs(4 === r.length ? t.studentt.inv(r[1] / 2, r[3] - 1) * r[2] / e.sqrt(r[3]) : t.studentt.inv(r[1] / 2, r[2].length - 1) * t.stdev(r[2], !0) / e.sqrt(r[2].length)), o[0] = r[0] - n, o[1] = r[0] + n, o
                        },
                        significant: function(t, e) {
                            return e > t
                        }
                    }), t.extend(t.fn, {
                        normalci: function(e, n) {
                            return t.normalci(e, n, this.toArray())
                        },
                        tci: function(e, n) {
                            return t.tci(e, n, this.toArray())
                        }
                    }), t.extend(t.fn, {
                        oneSidedDifferenceOfProportions: function(e, i, r, o) {
                            var s = n(e, i, r, o);
                            return t.ztest(s, 1)
                        },
                        twoSidedDifferenceOfProportions: function(e, i, r, o) {
                            var s = n(e, i, r, o);
                            return t.ztest(s, 2)
                        }
                    })
                }(this.jStat, Math), this.jStat.models = function() {
                    function t(t, n) {
                        return e(t, n)
                    }

                    function t(t) {
                        var n = t[0].length,
                            i = jStat.arange(n).map(function(i) {
                                var r = jStat.arange(n).filter(function(t) {
                                    return t !== i
                                });
                                return e(jStat.col(t, i).map(function(t) {
                                    return t[0]
                                }), jStat.col(t, r))
                            });
                        return i
                    }

                    function e(t, e) {
                        var n = t.length,
                            i = e[0].length - 1,
                            r = n - i - 1,
                            o = jStat.lstsq(e, t),
                            s = jStat.multiply(e, o.map(function(t) {
                                return [t]
                            })).map(function(t) {
                                return t[0]
                            }),
                            a = jStat.subtract(t, s),
                            l = jStat.mean(t),
                            c = jStat.sum(s.map(function(t) {
                                return Math.pow(t - l, 2)
                            })),
                            u = jStat.sum(t.map(function(t, e) {
                                return Math.pow(t - s[e], 2)
                            })),
                            d = c + u,
                            p = c / d;
                        return {
                            exog: e,
                            endog: t,
                            nobs: n,
                            df_model: i,
                            df_resid: r,
                            coef: o,
                            predict: s,
                            resid: a,
                            ybar: l,
                            SST: d,
                            SSE: c,
                            SSR: u,
                            R2: p
                        }
                    }

                    function n(e) {
                        var n = t(e.exog),
                            i = Math.sqrt(e.SSR / e.df_resid),
                            r = n.map(function(t) {
                                var e = t.SST,
                                    n = t.R2;
                                return i / Math.sqrt(e * (1 - n))
                            }),
                            o = e.coef.map(function(t, e) {
                                return (t - 0) / r[e]
                            }),
                            s = o.map(function(t) {
                                var n = jStat.studentt.cdf(t, e.df_resid);
                                return 2 * (n > .5 ? 1 - n : n)
                            }),
                            a = jStat.studentt.inv(.975, e.df_resid),
                            l = e.coef.map(function(t, e) {
                                var n = a * r[e];
                                return [t - n, t + n]
                            });
                        return {
                            se: r,
                            t: o,
                            p: s,
                            sigmaHat: i,
                            interval95: l
                        }
                    }

                    function i(t) {
                        var e = t.R2 / t.df_model / ((1 - t.R2) / t.df_resid),
                            n = function(t, e, n) {
                                return jStat.beta.cdf(t / (n / e + t), e / 2, n / 2)
                            },
                            i = 1 - n(e, t.df_model, t.df_resid);
                        return {
                            F_statistic: e,
                            pvalue: i
                        }
                    }

                    function r(t, r) {
                        var o = e(t, r),
                            s = n(o),
                            a = i(o),
                            l = 1 - (1 - o.rsquared) * ((o.nobs - 1) / o.df_resid);
                        return o.t = s, o.f = a, o.adjust_R2 = l, o
                    }
                    return {
                        ols: r
                    }
                }(), this.jStat
        }),
        function(t, e) {
            "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define("moment", e) : t.moment = e()
        }(this, function() {
            function t() {
                return Ti.apply(null, arguments)
            }

            function e(t) {
                Ti = t
            }

            function n() {
                return {
                    empty: !1,
                    unusedTokens: [],
                    unusedInput: [],
                    overflow: -2,
                    charsLeftOver: 0,
                    nullInput: !1,
                    invalidMonth: null,
                    invalidFormat: !1,
                    userInvalidated: !1,
                    iso: !1
                }
            }

            function i(t) {
                return "[object Array]" === Object.prototype.toString.call(t)
            }

            function r(t) {
                return "[object Date]" === Object.prototype.toString.call(t) || t instanceof Date
            }

            function o(t, e) {
                var n, i = [];
                for (n = 0; n < t.length; ++n) i.push(e(t[n], n));
                return i
            }

            function s(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }

            function a(t, e) {
                for (var n in e) s(e, n) && (t[n] = e[n]);
                return s(e, "toString") && (t.toString = e.toString), s(e, "valueOf") && (t.valueOf = e.valueOf), t
            }

            function l(t, e, n, i) {
                return Ce(t, e, n, i, !0).utc()
            }

            function c(t) {
                return null == t._isValid && (t._isValid = !isNaN(t._d.getTime()) && t._pf.overflow < 0 && !t._pf.empty && !t._pf.invalidMonth && !t._pf.nullInput && !t._pf.invalidFormat && !t._pf.userInvalidated, t._strict && (t._isValid = t._isValid && 0 === t._pf.charsLeftOver && 0 === t._pf.unusedTokens.length && void 0 === t._pf.bigHour)), t._isValid
            }

            function u(t) {
                var e = l(0 / 0);
                return null != t ? a(e._pf, t) : e._pf.userInvalidated = !0, e
            }

            function d(t, e) {
                var n, i, r;
                if ("undefined" != typeof e._isAMomentObject && (t._isAMomentObject = e._isAMomentObject), "undefined" != typeof e._i && (t._i = e._i), "undefined" != typeof e._f && (t._f = e._f), "undefined" != typeof e._l && (t._l = e._l), "undefined" != typeof e._strict && (t._strict = e._strict), "undefined" != typeof e._tzm && (t._tzm = e._tzm), "undefined" != typeof e._isUTC && (t._isUTC = e._isUTC), "undefined" != typeof e._offset && (t._offset = e._offset), "undefined" != typeof e._pf && (t._pf = e._pf), "undefined" != typeof e._locale && (t._locale = e._locale), Ei.length > 0)
                    for (n in Ei) i = Ei[n], r = e[i], "undefined" != typeof r && (t[i] = r);
                return t
            }

            function p(e) {
                d(this, e), this._d = new Date(+e._d), Ai === !1 && (Ai = !0, t.updateOffset(this), Ai = !1)
            }

            function h(t) {
                return t instanceof p || null != t && s(t, "_isAMomentObject")
            }

            function f(t) {
                var e = +t,
                    n = 0;
                return 0 !== e && isFinite(e) && (n = e >= 0 ? Math.floor(e) : Math.ceil(e)), n
            }

            function m(t, e, n) {
                var i, r = Math.min(t.length, e.length),
                    o = Math.abs(t.length - e.length),
                    s = 0;
                for (i = 0; r > i; i++)(n && t[i] !== e[i] || !n && f(t[i]) !== f(e[i])) && s++;
                return s + o
            }

            function g() {}

            function v(t) {
                return t ? t.toLowerCase().replace("_", "-") : t
            }

            function _(t) {
                for (var e, n, i, r, o = 0; o < t.length;) {
                    for (r = v(t[o]).split("-"), e = r.length, n = v(t[o + 1]), n = n ? n.split("-") : null; e > 0;) {
                        if (i = y(r.slice(0, e).join("-"))) return i;
                        if (n && n.length >= e && m(r, n, !0) >= e - 1) break;
                        e--
                    }
                    o++
                }
                return null
            }

            function y(t) {
                var e = null;
                if (!Ni[t] && "undefined" != typeof module && module && module.exports) try {
                    e = Li._abbr, require("./locale/" + t), b(e)
                } catch (n) {}
                return Ni[t]
            }

            function b(t, e) {
                var n;
                return t && (n = "undefined" == typeof e ? P(t) : w(t, e), n && (Li = n)), Li._abbr
            }

            function w(t, e) {
                return null !== e ? (e.abbr = t, Ni[t] || (Ni[t] = new g), Ni[t].set(e), b(t), Ni[t]) : (delete Ni[t], null)
            }

            function P(t) {
                var e;
                if (t && t._locale && t._locale._abbr && (t = t._locale._abbr), !t) return Li;
                if (!i(t)) {
                    if (e = y(t)) return e;
                    t = [t]
                }
                return _(t)
            }

            function S(t, e) {
                var n = t.toLowerCase();
                Oi[n] = Oi[n + "s"] = Oi[e] = t
            }

            function C(t) {
                return "string" == typeof t ? Oi[t] || Oi[t.toLowerCase()] : void 0
            }

            function x(t) {
                var e, n, i = {};
                for (n in t) s(t, n) && (e = C(n), e && (i[e] = t[n]));
                return i
            }

            function k(e, n) {
                return function(i) {
                    return null != i ? (L(this, e, i), t.updateOffset(this, n), this) : T(this, e)
                }
            }

            function T(t, e) {
                return t._d["get" + (t._isUTC ? "UTC" : "") + e]()
            }

            function L(t, e, n) {
                return t._d["set" + (t._isUTC ? "UTC" : "") + e](n)
            }

            function E(t, e) {
                var n;
                if ("object" == typeof t)
                    for (n in t) this.set(n, t[n]);
                else if (t = C(t), "function" == typeof this[t]) return this[t](e);
                return this
            }

            function A(t, e, n) {
                for (var i = "" + Math.abs(t), r = t >= 0; i.length < e;) i = "0" + i;
                return (r ? n ? "+" : "" : "-") + i
            }

            function N(t, e, n, i) {
                var r = i;
                "string" == typeof i && (r = function() {
                    return this[i]()
                }), t && (Ri[t] = r), e && (Ri[e[0]] = function() {
                    return A(r.apply(this, arguments), e[1], e[2])
                }), n && (Ri[n] = function() {
                    return this.localeData().ordinal(r.apply(this, arguments), t)
                })
            }

            function O(t) {
                return t.match(/\[[\s\S]/) ? t.replace(/^\[|\]$/g, "") : t.replace(/\\/g, "")
            }

            function D(t) {
                var e, n, i = t.match(Di);
                for (e = 0, n = i.length; n > e; e++) i[e] = Ri[i[e]] ? Ri[i[e]] : O(i[e]);
                return function(r) {
                    var o = "";
                    for (e = 0; n > e; e++) o += i[e] instanceof Function ? i[e].call(r, t) : i[e];
                    return o
                }
            }

            function M(t, e) {
                return t.isValid() ? (e = F(e, t.localeData()), Fi[e] || (Fi[e] = D(e)), Fi[e](t)) : t.localeData().invalidDate()
            }

            function F(t, e) {
                function n(t) {
                    return e.longDateFormat(t) || t
                }
                var i = 5;
                for (Mi.lastIndex = 0; i >= 0 && Mi.test(t);) t = t.replace(Mi, n), Mi.lastIndex = 0, i -= 1;
                return t
            }

            function R(t, e, n) {
                Ji[t] = "function" == typeof e ? e : function(t) {
                    return t && n ? n : e
                }
            }

            function U(t, e) {
                return s(Ji, t) ? Ji[t](e._strict, e._locale) : new RegExp(I(t))
            }

            function I(t) {
                return t.replace("\\", "").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(t, e, n, i, r) {
                    return e || n || i || r
                }).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")
            }

            function q(t, e) {
                var n, i = e;
                for ("string" == typeof t && (t = [t]), "number" == typeof e && (i = function(t, n) {
                        n[e] = f(t)
                    }), n = 0; n < t.length; n++) Qi[t[n]] = i
            }

            function j(t, e) {
                q(t, function(t, n, i, r) {
                    i._w = i._w || {}, e(t, i._w, i, r)
                })
            }

            function $(t, e, n) {
                null != e && s(Qi, t) && Qi[t](e, n._a, n, t)
            }

            function H(t, e) {
                return new Date(Date.UTC(t, e + 1, 0)).getUTCDate()
            }

            function B(t) {
                return this._months[t.month()]
            }

            function V(t) {
                return this._monthsShort[t.month()]
            }

            function z(t, e, n) {
                var i, r, o;
                for (this._monthsParse || (this._monthsParse = [], this._longMonthsParse = [], this._shortMonthsParse = []), i = 0; 12 > i; i++) {
                    if (r = l([2e3, i]), n && !this._longMonthsParse[i] && (this._longMonthsParse[i] = new RegExp("^" + this.months(r, "").replace(".", "") + "$", "i"), this._shortMonthsParse[i] = new RegExp("^" + this.monthsShort(r, "").replace(".", "") + "$", "i")), n || this._monthsParse[i] || (o = "^" + this.months(r, "") + "|^" + this.monthsShort(r, ""), this._monthsParse[i] = new RegExp(o.replace(".", ""), "i")), n && "MMMM" === e && this._longMonthsParse[i].test(t)) return i;
                    if (n && "MMM" === e && this._shortMonthsParse[i].test(t)) return i;
                    if (!n && this._monthsParse[i].test(t)) return i
                }
            }

            function Y(t, e) {
                var n;
                return "string" == typeof e && (e = t.localeData().monthsParse(e), "number" != typeof e) ? t : (n = Math.min(t.date(), H(t.year(), e)), t._d["set" + (t._isUTC ? "UTC" : "") + "Month"](e, n), t)
            }

            function W(e) {
                return null != e ? (Y(this, e), t.updateOffset(this, !0), this) : T(this, "Month")
            }

            function G() {
                return H(this.year(), this.month())
            }

            function X(t) {
                var e, n = t._a;
                return n && -2 === t._pf.overflow && (e = n[tr] < 0 || n[tr] > 11 ? tr : n[er] < 1 || n[er] > H(n[Ki], n[tr]) ? er : n[nr] < 0 || n[nr] > 24 || 24 === n[nr] && (0 !== n[ir] || 0 !== n[rr] || 0 !== n[or]) ? nr : n[ir] < 0 || n[ir] > 59 ? ir : n[rr] < 0 || n[rr] > 59 ? rr : n[or] < 0 || n[or] > 999 ? or : -1, t._pf._overflowDayOfYear && (Ki > e || e > er) && (e = er), t._pf.overflow = e), t
            }

            function Z(e) {
                t.suppressDeprecationWarnings === !1 && "undefined" != typeof console && console.warn && console.warn("Deprecation warning: " + e)
            }

            function J(t, e) {
                var n = !0;
                return a(function() {
                    return n && (Z(t), n = !1), e.apply(this, arguments)
                }, e)
            }

            function Q(t, e) {
                lr[t] || (Z(e), lr[t] = !0)
            }

            function K(t) {
                var e, n, i = t._i,
                    r = cr.exec(i);
                if (r) {
                    for (t._pf.iso = !0, e = 0, n = ur.length; n > e; e++)
                        if (ur[e][1].exec(i)) {
                            t._f = ur[e][0] + (r[6] || " ");
                            break
                        }
                    for (e = 0, n = dr.length; n > e; e++)
                        if (dr[e][1].exec(i)) {
                            t._f += dr[e][0];
                            break
                        }
                    i.match(Gi) && (t._f += "Z"), _e(t)
                } else t._isValid = !1
            }

            function te(e) {
                var n = pr.exec(e._i);
                return null !== n ? void(e._d = new Date(+n[1])) : (K(e), void(e._isValid === !1 && (delete e._isValid, t.createFromInputFallback(e))))
            }

            function ee(t, e, n, i, r, o, s) {
                var a = new Date(t, e, n, i, r, o, s);
                return 1970 > t && a.setFullYear(t), a
            }

            function ne(t) {
                var e = new Date(Date.UTC.apply(null, arguments));
                return 1970 > t && e.setUTCFullYear(t), e
            }

            function ie(t) {
                return re(t) ? 366 : 365
            }

            function re(t) {
                return t % 4 === 0 && t % 100 !== 0 || t % 400 === 0
            }

            function oe() {
                return re(this.year())
            }

            function se(t, e, n) {
                var i, r = n - e,
                    o = n - t.day();
                return o > r && (o -= 7), r - 7 > o && (o += 7), i = xe(t).add(o, "d"), {
                    week: Math.ceil(i.dayOfYear() / 7),
                    year: i.year()
                }
            }

            function ae(t) {
                return se(t, this._week.dow, this._week.doy).week
            }

            function le() {
                return this._week.dow
            }

            function ce() {
                return this._week.doy
            }

            function ue(t) {
                var e = this.localeData().week(this);
                return null == t ? e : this.add(7 * (t - e), "d")
            }

            function de(t) {
                var e = se(this, 1, 4).week;
                return null == t ? e : this.add(7 * (t - e), "d")
            }

            function pe(t, e, n, i, r) {
                var o, s, a = ne(t, 0, 1).getUTCDay();
                return a = 0 === a ? 7 : a, n = null != n ? n : r, o = r - a + (a > i ? 7 : 0) - (r > a ? 7 : 0), s = 7 * (e - 1) + (n - r) + o + 1, {
                    year: s > 0 ? t : t - 1,
                    dayOfYear: s > 0 ? s : ie(t - 1) + s
                }
            }

            function he(t) {
                var e = Math.round((this.clone().startOf("day") - this.clone().startOf("year")) / 864e5) + 1;
                return null == t ? e : this.add(t - e, "d")
            }

            function fe(t, e, n) {
                return null != t ? t : null != e ? e : n
            }

            function me(t) {
                var e = new Date;
                return t._useUTC ? [e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate()] : [e.getFullYear(), e.getMonth(), e.getDate()]
            }

            function ge(t) {
                var e, n, i, r, o = [];
                if (!t._d) {
                    for (i = me(t), t._w && null == t._a[er] && null == t._a[tr] && ve(t), t._dayOfYear && (r = fe(t._a[Ki], i[Ki]), t._dayOfYear > ie(r) && (t._pf._overflowDayOfYear = !0), n = ne(r, 0, t._dayOfYear), t._a[tr] = n.getUTCMonth(), t._a[er] = n.getUTCDate()), e = 0; 3 > e && null == t._a[e]; ++e) t._a[e] = o[e] = i[e];
                    for (; 7 > e; e++) t._a[e] = o[e] = null == t._a[e] ? 2 === e ? 1 : 0 : t._a[e];
                    24 === t._a[nr] && 0 === t._a[ir] && 0 === t._a[rr] && 0 === t._a[or] && (t._nextDay = !0, t._a[nr] = 0), t._d = (t._useUTC ? ne : ee).apply(null, o), null != t._tzm && t._d.setUTCMinutes(t._d.getUTCMinutes() - t._tzm), t._nextDay && (t._a[nr] = 24)
                }
            }

            function ve(t) {
                var e, n, i, r, o, s, a;
                e = t._w, null != e.GG || null != e.W || null != e.E ? (o = 1, s = 4, n = fe(e.GG, t._a[Ki], se(xe(), 1, 4).year), i = fe(e.W, 1), r = fe(e.E, 1)) : (o = t._locale._week.dow, s = t._locale._week.doy, n = fe(e.gg, t._a[Ki], se(xe(), o, s).year), i = fe(e.w, 1), null != e.d ? (r = e.d, o > r && ++i) : r = null != e.e ? e.e + o : o), a = pe(n, i, r, s, o), t._a[Ki] = a.year, t._dayOfYear = a.dayOfYear
            }

            function _e(e) {
                if (e._f === t.ISO_8601) return void K(e);
                e._a = [], e._pf.empty = !0;
                var n, i, r, o, s, a = "" + e._i,
                    l = a.length,
                    c = 0;
                for (r = F(e._f, e._locale).match(Di) || [], n = 0; n < r.length; n++) o = r[n], i = (a.match(U(o, e)) || [])[0], i && (s = a.substr(0, a.indexOf(i)), s.length > 0 && e._pf.unusedInput.push(s), a = a.slice(a.indexOf(i) + i.length), c += i.length), Ri[o] ? (i ? e._pf.empty = !1 : e._pf.unusedTokens.push(o), $(o, i, e)) : e._strict && !i && e._pf.unusedTokens.push(o);
                e._pf.charsLeftOver = l - c, a.length > 0 && e._pf.unusedInput.push(a), e._pf.bigHour === !0 && e._a[nr] <= 12 && (e._pf.bigHour = void 0), e._a[nr] = ye(e._locale, e._a[nr], e._meridiem), ge(e), X(e)
            }

            function ye(t, e, n) {
                var i;
                return null == n ? e : null != t.meridiemHour ? t.meridiemHour(e, n) : null != t.isPM ? (i = t.isPM(n), i && 12 > e && (e += 12), i || 12 !== e || (e = 0), e) : e
            }

            function be(t) {
                var e, i, r, o, s;
                if (0 === t._f.length) return t._pf.invalidFormat = !0, void(t._d = new Date(0 / 0));
                for (o = 0; o < t._f.length; o++) s = 0, e = d({}, t), null != t._useUTC && (e._useUTC = t._useUTC), e._pf = n(), e._f = t._f[o], _e(e), c(e) && (s += e._pf.charsLeftOver, s += 10 * e._pf.unusedTokens.length, e._pf.score = s, (null == r || r > s) && (r = s, i = e));
                a(t, i || e)
            }

            function we(t) {
                if (!t._d) {
                    var e = x(t._i);
                    t._a = [e.year, e.month, e.day || e.date, e.hour, e.minute, e.second, e.millisecond], ge(t)
                }
            }

            function Pe(t) {
                var e, n = t._i,
                    r = t._f;
                return t._locale = t._locale || P(t._l), null === n || void 0 === r && "" === n ? u({
                    nullInput: !0
                }) : ("string" == typeof n && (t._i = n = t._locale.preparse(n)), h(n) ? new p(X(n)) : (i(r) ? be(t) : r ? _e(t) : Se(t), e = new p(X(t)), e._nextDay && (e.add(1, "d"), e._nextDay = void 0), e))
            }

            function Se(e) {
                var n = e._i;
                void 0 === n ? e._d = new Date : r(n) ? e._d = new Date(+n) : "string" == typeof n ? te(e) : i(n) ? (e._a = o(n.slice(0), function(t) {
                    return parseInt(t, 10)
                }), ge(e)) : "object" == typeof n ? we(e) : "number" == typeof n ? e._d = new Date(n) : t.createFromInputFallback(e)
            }

            function Ce(t, e, i, r, o) {
                var s = {};
                return "boolean" == typeof i && (r = i, i = void 0), s._isAMomentObject = !0, s._useUTC = s._isUTC = o, s._l = i, s._i = t, s._f = e, s._strict = r, s._pf = n(), Pe(s)
            }

            function xe(t, e, n, i) {
                return Ce(t, e, n, i, !1)
            }

            function ke(t, e) {
                var n, r;
                if (1 === e.length && i(e[0]) && (e = e[0]), !e.length) return xe();
                for (n = e[0], r = 1; r < e.length; ++r) e[r][t](n) && (n = e[r]);
                return n
            }

            function Te() {
                var t = [].slice.call(arguments, 0);
                return ke("isBefore", t)
            }

            function Le() {
                var t = [].slice.call(arguments, 0);
                return ke("isAfter", t)
            }

            function Ee(t) {
                var e = x(t),
                    n = e.year || 0,
                    i = e.quarter || 0,
                    r = e.month || 0,
                    o = e.week || 0,
                    s = e.day || 0,
                    a = e.hour || 0,
                    l = e.minute || 0,
                    c = e.second || 0,
                    u = e.millisecond || 0;
                this._milliseconds = +u + 1e3 * c + 6e4 * l + 36e5 * a, this._days = +s + 7 * o, this._months = +r + 3 * i + 12 * n, this._data = {}, this._locale = P(), this._bubble()
            }

            function Ae(t) {
                return t instanceof Ee
            }

            function Ne(t, e) {
                N(t, 0, 0, function() {
                    var t = this.utcOffset(),
                        n = "+";
                    return 0 > t && (t = -t, n = "-"), n + A(~~(t / 60), 2) + e + A(~~t % 60, 2)
                })
            }

            function Oe(t) {
                var e = (t || "").match(Gi) || [],
                    n = e[e.length - 1] || [],
                    i = (n + "").match(vr) || ["-", 0, 0],
                    r = +(60 * i[1]) + f(i[2]);
                return "+" === i[0] ? r : -r
            }

            function De(e, n) {
                var i, o;
                return n._isUTC ? (i = n.clone(), o = (h(e) || r(e) ? +e : +xe(e)) - +i, i._d.setTime(+i._d + o), t.updateOffset(i, !1), i) : xe(e).local()
            }

            function Me(t) {
                return 15 * -Math.round(t._d.getTimezoneOffset() / 15)
            }

            function Fe(e, n) {
                var i, r = this._offset || 0;
                return null != e ? ("string" == typeof e && (e = Oe(e)), Math.abs(e) < 16 && (e = 60 * e), !this._isUTC && n && (i = Me(this)), this._offset = e, this._isUTC = !0, null != i && this.add(i, "m"), r !== e && (!n || this._changeInProgress ? Je(this, Ye(e - r, "m"), 1, !1) : this._changeInProgress || (this._changeInProgress = !0, t.updateOffset(this, !0), this._changeInProgress = null)), this) : this._isUTC ? r : Me(this)
            }

            function Re(t, e) {
                return null != t ? ("string" != typeof t && (t = -t), this.utcOffset(t, e), this) : -this.utcOffset()
            }

            function Ue(t) {
                return this.utcOffset(0, t)
            }

            function Ie(t) {
                return this._isUTC && (this.utcOffset(0, t), this._isUTC = !1, t && this.subtract(Me(this), "m")), this
            }

            function qe() {
                return this._tzm ? this.utcOffset(this._tzm) : "string" == typeof this._i && this.utcOffset(Oe(this._i)), this
            }

            function je(t) {
                return t = t ? xe(t).utcOffset() : 0, (this.utcOffset() - t) % 60 === 0
            }

            function $e() {
                return this.utcOffset() > this.clone().month(0).utcOffset() || this.utcOffset() > this.clone().month(5).utcOffset()
            }

            function He() {
                if (this._a) {
                    var t = this._isUTC ? l(this._a) : xe(this._a);
                    return this.isValid() && m(this._a, t.toArray()) > 0
                }
                return !1
            }

            function Be() {
                return !this._isUTC
            }

            function Ve() {
                return this._isUTC
            }

            function ze() {
                return this._isUTC && 0 === this._offset
            }

            function Ye(t, e) {
                var n, i, r, o = t,
                    a = null;
                return Ae(t) ? o = {
                    ms: t._milliseconds,
                    d: t._days,
                    M: t._months
                } : "number" == typeof t ? (o = {}, e ? o[e] = t : o.milliseconds = t) : (a = _r.exec(t)) ? (n = "-" === a[1] ? -1 : 1, o = {
                    y: 0,
                    d: f(a[er]) * n,
                    h: f(a[nr]) * n,
                    m: f(a[ir]) * n,
                    s: f(a[rr]) * n,
                    ms: f(a[or]) * n
                }) : (a = yr.exec(t)) ? (n = "-" === a[1] ? -1 : 1, o = {
                    y: We(a[2], n),
                    M: We(a[3], n),
                    d: We(a[4], n),
                    h: We(a[5], n),
                    m: We(a[6], n),
                    s: We(a[7], n),
                    w: We(a[8], n)
                }) : null == o ? o = {} : "object" == typeof o && ("from" in o || "to" in o) && (r = Xe(xe(o.from), xe(o.to)), o = {}, o.ms = r.milliseconds, o.M = r.months), i = new Ee(o), Ae(t) && s(t, "_locale") && (i._locale = t._locale), i
            }

            function We(t, e) {
                var n = t && parseFloat(t.replace(",", "."));
                return (isNaN(n) ? 0 : n) * e
            }

            function Ge(t, e) {
                var n = {
                    milliseconds: 0,
                    months: 0
                };
                return n.months = e.month() - t.month() + 12 * (e.year() - t.year()), t.clone().add(n.months, "M").isAfter(e) && --n.months, n.milliseconds = +e - +t.clone().add(n.months, "M"), n
            }

            function Xe(t, e) {
                var n;
                return e = De(e, t), t.isBefore(e) ? n = Ge(t, e) : (n = Ge(e, t), n.milliseconds = -n.milliseconds, n.months = -n.months), n
            }

            function Ze(t, e) {
                return function(n, i) {
                    var r, o;
                    return null === i || isNaN(+i) || (Q(e, "moment()." + e + "(period, number) is deprecated. Please use moment()." + e + "(number, period)."), o = n, n = i, i = o), n = "string" == typeof n ? +n : n, r = Ye(n, i), Je(this, r, t), this
                }
            }

            function Je(e, n, i, r) {
                var o = n._milliseconds,
                    s = n._days,
                    a = n._months;
                r = null == r ? !0 : r, o && e._d.setTime(+e._d + o * i), s && L(e, "Date", T(e, "Date") + s * i), a && Y(e, T(e, "Month") + a * i), r && t.updateOffset(e, s || a)
            }

            function Qe(t) {
                var e = t || xe(),
                    n = De(e, this).startOf("day"),
                    i = this.diff(n, "days", !0),
                    r = -6 > i ? "sameElse" : -1 > i ? "lastWeek" : 0 > i ? "lastDay" : 1 > i ? "sameDay" : 2 > i ? "nextDay" : 7 > i ? "nextWeek" : "sameElse";
                return this.format(this.localeData().calendar(r, this, xe(e)))
            }

            function Ke() {
                return new p(this)
            }

            function tn(t, e) {
                var n;
                return e = C("undefined" != typeof e ? e : "millisecond"), "millisecond" === e ? (t = h(t) ? t : xe(t), +this > +t) : (n = h(t) ? +t : +xe(t), n < +this.clone().startOf(e))
            }

            function en(t, e) {
                var n;
                return e = C("undefined" != typeof e ? e : "millisecond"), "millisecond" === e ? (t = h(t) ? t : xe(t), +t > +this) : (n = h(t) ? +t : +xe(t), +this.clone().endOf(e) < n)
            }

            function nn(t, e, n) {
                return this.isAfter(t, n) && this.isBefore(e, n)
            }

            function rn(t, e) {
                var n;
                return e = C(e || "millisecond"), "millisecond" === e ? (t = h(t) ? t : xe(t), +this === +t) : (n = +xe(t), +this.clone().startOf(e) <= n && n <= +this.clone().endOf(e))
            }

            function on(t) {
                return 0 > t ? Math.ceil(t) : Math.floor(t)
            }

            function sn(t, e, n) {
                var i, r, o = De(t, this),
                    s = 6e4 * (o.utcOffset() - this.utcOffset());
                return e = C(e), "year" === e || "month" === e || "quarter" === e ? (r = an(this, o), "quarter" === e ? r /= 3 : "year" === e && (r /= 12)) : (i = this - o, r = "second" === e ? i / 1e3 : "minute" === e ? i / 6e4 : "hour" === e ? i / 36e5 : "day" === e ? (i - s) / 864e5 : "week" === e ? (i - s) / 6048e5 : i), n ? r : on(r)
            }

            function an(t, e) {
                var n, i, r = 12 * (e.year() - t.year()) + (e.month() - t.month()),
                    o = t.clone().add(r, "months");
                return 0 > e - o ? (n = t.clone().add(r - 1, "months"), i = (e - o) / (o - n)) : (n = t.clone().add(r + 1, "months"), i = (e - o) / (n - o)), -(r + i)
            }

            function ln() {
                return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
            }

            function cn() {
                var t = this.clone().utc();
                return 0 < t.year() && t.year() <= 9999 ? "function" == typeof Date.prototype.toISOString ? this.toDate().toISOString() : M(t, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : M(t, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
            }

            function un(e) {
                var n = M(this, e || t.defaultFormat);
                return this.localeData().postformat(n)
            }

            function dn(t, e) {
                return Ye({
                    to: this,
                    from: t
                }).locale(this.locale()).humanize(!e)
            }

            function pn(t) {
                return this.from(xe(), t)
            }

            function hn(t) {
                var e;
                return void 0 === t ? this._locale._abbr : (e = P(t), null != e && (this._locale = e), this)
            }

            function fn() {
                return this._locale
            }

            function mn(t) {
                switch (t = C(t)) {
                    case "year":
                        this.month(0);
                    case "quarter":
                    case "month":
                        this.date(1);
                    case "week":
                    case "isoWeek":
                    case "day":
                        this.hours(0);
                    case "hour":
                        this.minutes(0);
                    case "minute":
                        this.seconds(0);
                    case "second":
                        this.milliseconds(0)
                }
                return "week" === t && this.weekday(0), "isoWeek" === t && this.isoWeekday(1), "quarter" === t && this.month(3 * Math.floor(this.month() / 3)), this
            }

            function gn(t) {
                return t = C(t), void 0 === t || "millisecond" === t ? this : this.startOf(t).add(1, "isoWeek" === t ? "week" : t).subtract(1, "ms")
            }

            function vn() {
                return +this._d - 6e4 * (this._offset || 0)
            }

            function _n() {
                return Math.floor(+this / 1e3)
            }

            function yn() {
                return this._offset ? new Date(+this) : this._d
            }

            function bn() {
                var t = this;
                return [t.year(), t.month(), t.date(), t.hour(), t.minute(), t.second(), t.millisecond()]
            }

            function wn() {
                return c(this)
            }

            function Pn() {
                return a({}, this._pf)
            }

            function Sn() {
                return this._pf.overflow
            }

            function Cn(t, e) {
                N(0, [t, t.length], 0, e)
            }

            function xn(t, e, n) {
                return se(xe([t, 11, 31 + e - n]), e, n).week
            }

            function kn(t) {
                var e = se(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
                return null == t ? e : this.add(t - e, "y")
            }

            function Tn(t) {
                var e = se(this, 1, 4).year;
                return null == t ? e : this.add(t - e, "y")
            }

            function Ln() {
                return xn(this.year(), 1, 4)
            }

            function En() {
                var t = this.localeData()._week;
                return xn(this.year(), t.dow, t.doy)
            }

            function An(t) {
                return null == t ? Math.ceil((this.month() + 1) / 3) : this.month(3 * (t - 1) + this.month() % 3)
            }

            function Nn(t, e) {
                if ("string" == typeof t)
                    if (isNaN(t)) {
                        if (t = e.weekdaysParse(t), "number" != typeof t) return null
                    } else t = parseInt(t, 10);
                return t
            }

            function On(t) {
                return this._weekdays[t.day()]
            }

            function Dn(t) {
                return this._weekdaysShort[t.day()]
            }

            function Mn(t) {
                return this._weekdaysMin[t.day()]
            }

            function Fn(t) {
                var e, n, i;
                for (this._weekdaysParse || (this._weekdaysParse = []), e = 0; 7 > e; e++)
                    if (this._weekdaysParse[e] || (n = xe([2e3, 1]).day(e), i = "^" + this.weekdays(n, "") + "|^" + this.weekdaysShort(n, "") + "|^" + this.weekdaysMin(n, ""), this._weekdaysParse[e] = new RegExp(i.replace(".", ""), "i")), this._weekdaysParse[e].test(t)) return e
            }

            function Rn(t) {
                var e = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                return null != t ? (t = Nn(t, this.localeData()), this.add(t - e, "d")) : e
            }

            function Un(t) {
                var e = (this.day() + 7 - this.localeData()._week.dow) % 7;
                return null == t ? e : this.add(t - e, "d")
            }

            function In(t) {
                return null == t ? this.day() || 7 : this.day(this.day() % 7 ? t : t - 7)
            }

            function qn(t, e) {
                N(t, 0, 0, function() {
                    return this.localeData().meridiem(this.hours(), this.minutes(), e)
                })
            }

            function jn(t, e) {
                return e._meridiemParse
            }

            function $n(t) {
                return "p" === (t + "").toLowerCase().charAt(0)
            }

            function Hn(t, e, n) {
                return t > 11 ? n ? "pm" : "PM" : n ? "am" : "AM"
            }

            function Bn(t) {
                N(0, [t, 3], 0, "millisecond")
            }

            function Vn() {
                return this._isUTC ? "UTC" : ""
            }

            function zn() {
                return this._isUTC ? "Coordinated Universal Time" : ""
            }

            function Yn(t) {
                return xe(1e3 * t)
            }

            function Wn() {
                return xe.apply(null, arguments).parseZone()
            }

            function Gn(t, e, n) {
                var i = this._calendar[t];
                return "function" == typeof i ? i.call(e, n) : i
            }

            function Xn(t) {
                var e = this._longDateFormat[t];
                return !e && this._longDateFormat[t.toUpperCase()] && (e = this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function(t) {
                    return t.slice(1)
                }), this._longDateFormat[t] = e), e
            }

            function Zn() {
                return this._invalidDate
            }

            function Jn(t) {
                return this._ordinal.replace("%d", t)
            }

            function Qn(t) {
                return t
            }

            function Kn(t, e, n, i) {
                var r = this._relativeTime[n];
                return "function" == typeof r ? r(t, e, n, i) : r.replace(/%d/i, t)
            }

            function ti(t, e) {
                var n = this._relativeTime[t > 0 ? "future" : "past"];
                return "function" == typeof n ? n(e) : n.replace(/%s/i, e)
            }

            function ei(t) {
                var e, n;
                for (n in t) e = t[n], "function" == typeof e ? this[n] = e : this["_" + n] = e;
                this._ordinalParseLenient = new RegExp(this._ordinalParse.source + "|" + /\d{1,2}/.source)
            }

            function ni(t, e, n, i) {
                var r = P(),
                    o = l().set(i, e);
                return r[n](o, t)
            }

            function ii(t, e, n, i, r) {
                if ("number" == typeof t && (e = t, t = void 0), t = t || "", null != e) return ni(t, e, n, r);
                var o, s = [];
                for (o = 0; i > o; o++) s[o] = ni(t, o, n, r);
                return s
            }

            function ri(t, e) {
                return ii(t, e, "months", 12, "month")
            }

            function oi(t, e) {
                return ii(t, e, "monthsShort", 12, "month")
            }

            function si(t, e) {
                return ii(t, e, "weekdays", 7, "day")
            }

            function ai(t, e) {
                return ii(t, e, "weekdaysShort", 7, "day")
            }

            function li(t, e) {
                return ii(t, e, "weekdaysMin", 7, "day")
            }

            function ci() {
                var t = this._data;
                return this._milliseconds = $r(this._milliseconds), this._days = $r(this._days), this._months = $r(this._months), t.milliseconds = $r(t.milliseconds), t.seconds = $r(t.seconds), t.minutes = $r(t.minutes), t.hours = $r(t.hours), t.months = $r(t.months), t.years = $r(t.years), this
            }

            function ui(t, e, n, i) {
                var r = Ye(e, n);
                return t._milliseconds += i * r._milliseconds, t._days += i * r._days, t._months += i * r._months, t._bubble()
            }

            function di(t, e) {
                return ui(this, t, e, 1)
            }

            function pi(t, e) {
                return ui(this, t, e, -1)
            }

            function hi() {
                var t, e, n, i = this._milliseconds,
                    r = this._days,
                    o = this._months,
                    s = this._data,
                    a = 0;
                return s.milliseconds = i % 1e3, t = on(i / 1e3), s.seconds = t % 60, e = on(t / 60), s.minutes = e % 60, n = on(e / 60), s.hours = n % 24, r += on(n / 24), a = on(fi(r)), r -= on(mi(a)), o += on(r / 30), r %= 30, a += on(o / 12), o %= 12, s.days = r, s.months = o, s.years = a, this
            }

            function fi(t) {
                return 400 * t / 146097
            }

            function mi(t) {
                return 146097 * t / 400
            }

            function gi(t) {
                var e, n, i = this._milliseconds;
                if (t = C(t), "month" === t || "year" === t) return e = this._days + i / 864e5, n = this._months + 12 * fi(e), "month" === t ? n : n / 12;
                switch (e = this._days + Math.round(mi(this._months / 12)), t) {
                    case "week":
                        return e / 7 + i / 6048e5;
                    case "day":
                        return e + i / 864e5;
                    case "hour":
                        return 24 * e + i / 36e5;
                    case "minute":
                        return 24 * e * 60 + i / 6e4;
                    case "second":
                        return 24 * e * 60 * 60 + i / 1e3;
                    case "millisecond":
                        return Math.floor(24 * e * 60 * 60 * 1e3) + i;
                    default:
                        throw new Error("Unknown unit " + t)
                }
            }

            function vi() {
                return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * f(this._months / 12)
            }

            function _i(t) {
                return function() {
                    return this.as(t)
                }
            }

            function yi(t) {
                return t = C(t), this[t + "s"]()
            }

            function bi(t) {
                return function() {
                    return this._data[t]
                }
            }

            function wi() {
                return on(this.days() / 7)
            }

            function Pi(t, e, n, i, r) {
                return r.relativeTime(e || 1, !!n, t, i)
            }

            function Si(t, e, n) {
                var i = Ye(t).abs(),
                    r = io(i.as("s")),
                    o = io(i.as("m")),
                    s = io(i.as("h")),
                    a = io(i.as("d")),
                    l = io(i.as("M")),
                    c = io(i.as("y")),
                    u = r < ro.s && ["s", r] || 1 === o && ["m"] || o < ro.m && ["mm", o] || 1 === s && ["h"] || s < ro.h && ["hh", s] || 1 === a && ["d"] || a < ro.d && ["dd", a] || 1 === l && ["M"] || l < ro.M && ["MM", l] || 1 === c && ["y"] || ["yy", c];
                return u[2] = e, u[3] = +t > 0, u[4] = n, Pi.apply(null, u)
            }

            function Ci(t, e) {
                return void 0 === ro[t] ? !1 : void 0 === e ? ro[t] : (ro[t] = e, !0)
            }

            function xi(t) {
                var e = this.localeData(),
                    n = Si(this, !t, e);
                return t && (n = e.pastFuture(+this, n)), e.postformat(n)
            }

            function ki() {
                var t = oo(this.years()),
                    e = oo(this.months()),
                    n = oo(this.days()),
                    i = oo(this.hours()),
                    r = oo(this.minutes()),
                    o = oo(this.seconds() + this.milliseconds() / 1e3),
                    s = this.asSeconds();
                return s ? (0 > s ? "-" : "") + "P" + (t ? t + "Y" : "") + (e ? e + "M" : "") + (n ? n + "D" : "") + (i || r || o ? "T" : "") + (i ? i + "H" : "") + (r ? r + "M" : "") + (o ? o + "S" : "") : "P0D"
            }
            var Ti, Li, Ei = t.momentProperties = [],
                Ai = !1,
                Ni = {},
                Oi = {},
                Di = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,
                Mi = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,
                Fi = {},
                Ri = {},
                Ui = /\d/,
                Ii = /\d\d/,
                qi = /\d{3}/,
                ji = /\d{4}/,
                $i = /[+-]?\d{6}/,
                Hi = /\d\d?/,
                Bi = /\d{1,3}/,
                Vi = /\d{1,4}/,
                zi = /[+-]?\d{1,6}/,
                Yi = /\d+/,
                Wi = /[+-]?\d+/,
                Gi = /Z|[+-]\d\d:?\d\d/gi,
                Xi = /[+-]?\d+(\.\d{1,3})?/,
                Zi = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
                Ji = {},
                Qi = {},
                Ki = 0,
                tr = 1,
                er = 2,
                nr = 3,
                ir = 4,
                rr = 5,
                or = 6;
            N("M", ["MM", 2], "Mo", function() {
                return this.month() + 1
            }), N("MMM", 0, 0, function(t) {
                return this.localeData().monthsShort(this, t)
            }), N("MMMM", 0, 0, function(t) {
                return this.localeData().months(this, t)
            }), S("month", "M"), R("M", Hi), R("MM", Hi, Ii), R("MMM", Zi), R("MMMM", Zi), q(["M", "MM"], function(t, e) {
                e[tr] = f(t) - 1
            }), q(["MMM", "MMMM"], function(t, e, n, i) {
                var r = n._locale.monthsParse(t, i, n._strict);
                null != r ? e[tr] = r : n._pf.invalidMonth = t
            });
            var sr = "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
                ar = "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
                lr = {};
            t.suppressDeprecationWarnings = !1;
            var cr = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
                ur = [
                    ["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/],
                    ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/],
                    ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/],
                    ["GGGG-[W]WW", /\d{4}-W\d{2}/],
                    ["YYYY-DDD", /\d{4}-\d{3}/]
                ],
                dr = [
                    ["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d+/],
                    ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/],
                    ["HH:mm", /(T| )\d\d:\d\d/],
                    ["HH", /(T| )\d\d/]
                ],
                pr = /^\/?Date\((\-?\d+)/i;
            t.createFromInputFallback = J("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.", function(t) {
                t._d = new Date(t._i + (t._useUTC ? " UTC" : ""))
            }), N(0, ["YY", 2], 0, function() {
                return this.year() % 100
            }), N(0, ["YYYY", 4], 0, "year"), N(0, ["YYYYY", 5], 0, "year"), N(0, ["YYYYYY", 6, !0], 0, "year"), S("year", "y"), R("Y", Wi), R("YY", Hi, Ii), R("YYYY", Vi, ji), R("YYYYY", zi, $i), R("YYYYYY", zi, $i), q(["YYYY", "YYYYY", "YYYYYY"], Ki), q("YY", function(e, n) {
                n[Ki] = t.parseTwoDigitYear(e)
            }), t.parseTwoDigitYear = function(t) {
                return f(t) + (f(t) > 68 ? 1900 : 2e3)
            };
            var hr = k("FullYear", !1);
            N("w", ["ww", 2], "wo", "week"), N("W", ["WW", 2], "Wo", "isoWeek"), S("week", "w"), S("isoWeek", "W"), R("w", Hi), R("ww", Hi, Ii), R("W", Hi), R("WW", Hi, Ii), j(["w", "ww", "W", "WW"], function(t, e, n, i) {
                e[i.substr(0, 1)] = f(t)
            });
            var fr = {
                dow: 0,
                doy: 6
            };
            N("DDD", ["DDDD", 3], "DDDo", "dayOfYear"), S("dayOfYear", "DDD"), R("DDD", Bi), R("DDDD", qi), q(["DDD", "DDDD"], function(t, e, n) {
                n._dayOfYear = f(t)
            }), t.ISO_8601 = function() {};
            var mr = J("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548", function() {
                    var t = xe.apply(null, arguments);
                    return this > t ? this : t
                }),
                gr = J("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548", function() {
                    var t = xe.apply(null, arguments);
                    return t > this ? this : t
                });
            Ne("Z", ":"), Ne("ZZ", ""), R("Z", Gi), R("ZZ", Gi), q(["Z", "ZZ"], function(t, e, n) {
                n._useUTC = !0, n._tzm = Oe(t)
            });
            var vr = /([\+\-]|\d\d)/gi;
            t.updateOffset = function() {};
            var _r = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,
                yr = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;
            Ye.fn = Ee.prototype;
            var br = Ze(1, "add"),
                wr = Ze(-1, "subtract");
            t.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ";
            var Pr = J("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.", function(t) {
                return void 0 === t ? this.localeData() : this.locale(t)
            });
            N(0, ["gg", 2], 0, function() {
                return this.weekYear() % 100
            }), N(0, ["GG", 2], 0, function() {
                return this.isoWeekYear() % 100
            }), Cn("gggg", "weekYear"), Cn("ggggg", "weekYear"), Cn("GGGG", "isoWeekYear"), Cn("GGGGG", "isoWeekYear"), S("weekYear", "gg"), S("isoWeekYear", "GG"), R("G", Wi), R("g", Wi), R("GG", Hi, Ii), R("gg", Hi, Ii), R("GGGG", Vi, ji), R("gggg", Vi, ji), R("GGGGG", zi, $i), R("ggggg", zi, $i), j(["gggg", "ggggg", "GGGG", "GGGGG"], function(t, e, n, i) {
                e[i.substr(0, 2)] = f(t)
            }), j(["gg", "GG"], function(e, n, i, r) {
                n[r] = t.parseTwoDigitYear(e)
            }), N("Q", 0, 0, "quarter"), S("quarter", "Q"), R("Q", Ui), q("Q", function(t, e) {
                e[tr] = 3 * (f(t) - 1)
            }), N("D", ["DD", 2], "Do", "date"), S("date", "D"), R("D", Hi), R("DD", Hi, Ii), R("Do", function(t, e) {
                return t ? e._ordinalParse : e._ordinalParseLenient
            }), q(["D", "DD"], er), q("Do", function(t, e) {
                e[er] = f(t.match(Hi)[0], 10)
            });
            var Sr = k("Date", !0);
            N("d", 0, "do", "day"), N("dd", 0, 0, function(t) {
                return this.localeData().weekdaysMin(this, t)
            }), N("ddd", 0, 0, function(t) {
                return this.localeData().weekdaysShort(this, t)
            }), N("dddd", 0, 0, function(t) {
                return this.localeData().weekdays(this, t)
            }), N("e", 0, 0, "weekday"), N("E", 0, 0, "isoWeekday"), S("day", "d"), S("weekday", "e"), S("isoWeekday", "E"), R("d", Hi), R("e", Hi), R("E", Hi), R("dd", Zi), R("ddd", Zi), R("dddd", Zi), j(["dd", "ddd", "dddd"], function(t, e, n) {
                var i = n._locale.weekdaysParse(t);
                null != i ? e.d = i : n._pf.invalidWeekday = t
            }), j(["d", "e", "E"], function(t, e, n, i) {
                e[i] = f(t)
            });
            var Cr = "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
                xr = "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
                kr = "Su_Mo_Tu_We_Th_Fr_Sa".split("_");
            N("H", ["HH", 2], 0, "hour"), N("h", ["hh", 2], 0, function() {
                return this.hours() % 12 || 12
            }), qn("a", !0), qn("A", !1), S("hour", "h"), R("a", jn), R("A", jn), R("H", Hi), R("h", Hi), R("HH", Hi, Ii), R("hh", Hi, Ii), q(["H", "HH"], nr), q(["a", "A"], function(t, e, n) {
                n._isPm = n._locale.isPM(t), n._meridiem = t
            }), q(["h", "hh"], function(t, e, n) {
                e[nr] = f(t), n._pf.bigHour = !0
            });
            var Tr = /[ap]\.?m?\.?/i,
                Lr = k("Hours", !0);
            N("m", ["mm", 2], 0, "minute"), S("minute", "m"), R("m", Hi), R("mm", Hi, Ii), q(["m", "mm"], ir);
            var Er = k("Minutes", !1);
            N("s", ["ss", 2], 0, "second"), S("second", "s"), R("s", Hi), R("ss", Hi, Ii), q(["s", "ss"], rr);
            var Ar = k("Seconds", !1);
            N("S", 0, 0, function() {
                return ~~(this.millisecond() / 100)
            }), N(0, ["SS", 2], 0, function() {
                return ~~(this.millisecond() / 10)
            }), Bn("SSS"), Bn("SSSS"), S("millisecond", "ms"), R("S", Bi, Ui), R("SS", Bi, Ii), R("SSS", Bi, qi), R("SSSS", Yi), q(["S", "SS", "SSS", "SSSS"], function(t, e) {
                e[or] = f(1e3 * ("0." + t))
            });
            var Nr = k("Milliseconds", !1);
            N("z", 0, 0, "zoneAbbr"), N("zz", 0, 0, "zoneName");
            var Or = p.prototype;
            Or.add = br, Or.calendar = Qe, Or.clone = Ke, Or.diff = sn, Or.endOf = gn, Or.format = un, Or.from = dn, Or.fromNow = pn, Or.get = E, Or.invalidAt = Sn, Or.isAfter = tn, Or.isBefore = en, Or.isBetween = nn, Or.isSame = rn, Or.isValid = wn, Or.lang = Pr, Or.locale = hn, Or.localeData = fn, Or.max = gr, Or.min = mr, Or.parsingFlags = Pn, Or.set = E, Or.startOf = mn, Or.subtract = wr, Or.toArray = bn, Or.toDate = yn, Or.toISOString = cn, Or.toJSON = cn, Or.toString = ln, Or.unix = _n, Or.valueOf = vn, Or.year = hr, Or.isLeapYear = oe, Or.weekYear = kn, Or.isoWeekYear = Tn, Or.quarter = Or.quarters = An, Or.month = W, Or.daysInMonth = G, Or.week = Or.weeks = ue, Or.isoWeek = Or.isoWeeks = de, Or.weeksInYear = En, Or.isoWeeksInYear = Ln, Or.date = Sr, Or.day = Or.days = Rn, Or.weekday = Un, Or.isoWeekday = In, Or.dayOfYear = he, Or.hour = Or.hours = Lr, Or.minute = Or.minutes = Er, Or.second = Or.seconds = Ar, Or.millisecond = Or.milliseconds = Nr, Or.utcOffset = Fe, Or.utc = Ue, Or.local = Ie, Or.parseZone = qe, Or.hasAlignedHourOffset = je, Or.isDST = $e, Or.isDSTShifted = He, Or.isLocal = Be, Or.isUtcOffset = Ve, Or.isUtc = ze, Or.isUTC = ze, Or.zoneAbbr = Vn, Or.zoneName = zn, Or.dates = J("dates accessor is deprecated. Use date instead.", Sr), Or.months = J("months accessor is deprecated. Use month instead", W), Or.years = J("years accessor is deprecated. Use year instead", hr), Or.zone = J("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779", Re);
            var Dr = Or,
                Mr = {
                    sameDay: "[Today at] LT",
                    nextDay: "[Tomorrow at] LT",
                    nextWeek: "dddd [at] LT",
                    lastDay: "[Yesterday at] LT",
                    lastWeek: "[Last] dddd [at] LT",
                    sameElse: "L"
                },
                Fr = {
                    LTS: "h:mm:ss A",
                    LT: "h:mm A",
                    L: "MM/DD/YYYY",
                    LL: "MMMM D, YYYY",
                    LLL: "MMMM D, YYYY LT",
                    LLLL: "dddd, MMMM D, YYYY LT"
                },
                Rr = "Invalid date",
                Ur = "%d",
                Ir = /\d{1,2}/,
                qr = {
                    future: "in %s",
                    past: "%s ago",
                    s: "a few seconds",
                    m: "a minute",
                    mm: "%d minutes",
                    h: "an hour",
                    hh: "%d hours",
                    d: "a day",
                    dd: "%d days",
                    M: "a month",
                    MM: "%d months",
                    y: "a year",
                    yy: "%d years"
                },
                jr = g.prototype;
            jr._calendar = Mr, jr.calendar = Gn, jr._longDateFormat = Fr, jr.longDateFormat = Xn, jr._invalidDate = Rr, jr.invalidDate = Zn, jr._ordinal = Ur, jr.ordinal = Jn, jr._ordinalParse = Ir, jr.preparse = Qn, jr.postformat = Qn, jr._relativeTime = qr, jr.relativeTime = Kn, jr.pastFuture = ti, jr.set = ei, jr.months = B, jr._months = sr, jr.monthsShort = V, jr._monthsShort = ar, jr.monthsParse = z, jr.week = ae, jr._week = fr, jr.firstDayOfYear = ce, jr.firstDayOfWeek = le, jr.weekdays = On, jr._weekdays = Cr, jr.weekdaysMin = Mn, jr._weekdaysMin = kr, jr.weekdaysShort = Dn, jr._weekdaysShort = xr, jr.weekdaysParse = Fn, jr.isPM = $n, jr._meridiemParse = Tr, jr.meridiem = Hn, b("en", {
                ordinalParse: /\d{1,2}(th|st|nd|rd)/,
                ordinal: function(t) {
                    var e = t % 10,
                        n = 1 === f(t % 100 / 10) ? "th" : 1 === e ? "st" : 2 === e ? "nd" : 3 === e ? "rd" : "th";
                    return t + n
                }
            }), t.lang = J("moment.lang is deprecated. Use moment.locale instead.", b), t.langData = J("moment.langData is deprecated. Use moment.localeData instead.", P);
            var $r = Math.abs,
                Hr = _i("ms"),
                Br = _i("s"),
                Vr = _i("m"),
                zr = _i("h"),
                Yr = _i("d"),
                Wr = _i("w"),
                Gr = _i("M"),
                Xr = _i("y"),
                Zr = bi("milliseconds"),
                Jr = bi("seconds"),
                Qr = bi("minutes"),
                Kr = bi("hours"),
                to = bi("days"),
                eo = bi("months"),
                no = bi("years"),
                io = Math.round,
                ro = {
                    s: 45,
                    m: 45,
                    h: 22,
                    d: 26,
                    M: 11
                },
                oo = Math.abs,
                so = Ee.prototype;
            so.abs = ci, so.add = di, so.subtract = pi, so.as = gi, so.asMilliseconds = Hr, so.asSeconds = Br, so.asMinutes = Vr, so.asHours = zr, so.asDays = Yr, so.asWeeks = Wr, so.asMonths = Gr, so.asYears = Xr, so.valueOf = vi, so._bubble = hi, so.get = yi, so.milliseconds = Zr, so.seconds = Jr, so.minutes = Qr, so.hours = Kr, so.days = to, so.weeks = wi, so.months = eo, so.years = no, so.humanize = xi, so.toISOString = ki, so.toString = ki, so.toJSON = ki, so.locale = hn, so.localeData = fn, so.toIsoString = J("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)", ki), so.lang = Pr, N("X", 0, 0, "unix"), N("x", 0, 0, "valueOf"), R("x", Wi), R("X", Xi), q("X", function(t, e, n) {
                n._d = new Date(1e3 * parseFloat(t, 10))
            }), q("x", function(t, e, n) {
                n._d = new Date(f(t))
            }), t.version = "2.10.2", e(xe), t.fn = Dr, t.min = Te, t.max = Le, t.utc = l, t.unix = Yn, t.months = ri, t.isDate = r, t.locale = b, t.invalid = u, t.duration = Ye, t.isMoment = h, t.weekdays = si, t.parseZone = Wn, t.localeData = P, t.isDuration = Ae, t.monthsShort = oi, t.weekdaysMin = li, t.defineLocale = w, t.weekdaysShort = ai, t.normalizeUnits = C, t.relativeTimeThreshold = Ci;
            var ao = t;
            return ao
        }),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Calculators", ["require", "jquery", "underscore", "canstar_widget", "libraries/Canstar", "libraries/Transforms", "libraries/Currency", "libraries/Text", "accounting", "libraries/templates", "jStat", "moment"], function(e) {
                var n, i, r, o, s, a, l, c, u, d, p, h;
                return n = e("jquery"), h = e("underscore"), u = e("canstar_widget"), o = e("libraries/Canstar"), c = e("libraries/Transforms"), s = e("libraries/Currency"), l = e("libraries/Text"), i = e("accounting"), a = e("libraries/templates"), d = e("jStat"), p = e("moment"), r = function() {
                    function e(e) {
                        this.preCalculations = e, this.getMobileStarRating = t(this.getMobileStarRating, this), this.getEnergyStarRating = t(this.getEnergyStarRating, this), this._getBlueStarRating = t(this._getBlueStarRating, this), this.getInclusionScore = t(this.getInclusionScore, this), this.calculateInclusionScore = t(this.calculateInclusionScore, this), this.onshFee15kTrade = t(this.onshFee15kTrade, this), this.hospPharmRebate = t(this.hospPharmRebate, this), this.oshcPremium = t(this.oshcPremium, this), this.getComplimentaryTravelInsurance = t(this.getComplimentaryTravelInsurance, this), this.getCashAdvanceFeeInt = t(this.getCashAdvanceFeeInt, this), this.getCashAdvanceFee = t(this.getCashAdvanceFee, this), this.params = o.prototype.paramsFromQueryString(window.location.search)
                    }
                    return e.prototype.templates = {
                        tooltip_text: a.prototype.TooltipText,
                        blue_sr: a.prototype.BlueSR,
                        blue_sr_intable: a.prototype.BlueSRInTable,
                        inclusion_score: a.prototype.InclusionScore,
                        details_drawer: a.prototype.DetailsDrawer
                    }, e.prototype.null_span = function(t) {
                        return null == t && (t = -1), "<span value='" + t + "' class='fa fa-minus color-light-grey'></span>"
                    }, e.prototype.getUpfrontFee = function(t) {
                        var e, n, i;
                        return e = u.faceted_search.amount, n = o.prototype.getFees(t), i = "$0.00", h.each(n, function(t) {
                            return t.MIN_AMOUNT <= e && e <= t.MAX_AMOUNT ? i = "$" + Number(t.UPFRONT_FEE).toFixed(2) : void 0
                        }), i
                    }, e.prototype.getDischargeFee = function(t) {
                        var e, n, i;
                        return e = u.faceted_search.amount, n = o.prototype.getFees(t), i = "$0.00", h.each(n, function(t) {
                            return t.MIN_AMOUNT <= e && e <= t.MAX_AMOUNT ? i = "$" + Number(t.FEESDSCH).toFixed(2) : void 0
                        }), i
                    }, e.prototype.getFunPayFreqOpt = function(t) {
                        var e, n, i;
                        return e = [], "Yes" === t.SUPP.POLIPYMTFORT && e.push("Fortnightly"), "Yes" === t.SUPP.POLIPYMTMONT && e.push("Monthly"), "Yes" === t.SUPP.POLIPYMTANNU && e.push("Yearly"), i = e[0], e.length > 1 && (i = e.join(", "), n = i.lastIndexOf(","), i = i.substring(0, n) + " and" + i.substring(n + 1)), i
                    }, e.prototype.getBuslAnnFee = function(t) {
                        var e, n, i;
                        return e = u.faceted_search.amount, n = t.fees, i = "$0.00", h.each(n, function(t) {
                            return Number(t.MIN_AMOUNT) <= e && e <= Number(t.MAX_AMOUNT) && "percent" === t.TYPE ? i = "" + Number(t.ANNUAL_FEE).toFixed(2) + "%" : Number(t.MIN_AMOUNT) <= e && e <= Number(t.MAX_AMOUNT) && "dollar" === t.TYPE ? i = "$" + Number(t.ANNUAL_FEE).toFixed(2) : void 0
                        }), i
                    }, e.prototype.getBuslFEEAPPL = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = t.fees, i = "$0.00", h.each(n, function(t) {
                            return Number(t.MIN_AMOUNT) <= e && e <= Number(t.MAX_AMOUNT) && "percent" === t.APPL_TYPE ? i = "" + Number(t.FEESAPPL).toFixed(2) + "%" : Number(t.MIN_AMOUNT) <= e && e <= Number(t.MAX_AMOUNT) && "dollar" === t.APPL_TYPE ? i = "$" + Number(t.FEESAPPL).toFixed(2) : void 0
                        }), i
                    }, e.prototype.getBusTransRate = function(t) {
                        var e, n, i;
                        return "Low transactor" === u.faceted_search.profile ? e = 5e3 : "High transactor" === u.faceted_search.profile && (e = 1e4), i = "0.00%", n = o.prototype.getTiers(t), h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.TOTAL_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getTotalRate = function(t, e) {
                        var n, i;
                        return i = 0, n = o.prototype.getTiers(t), h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = Number(t.TOTAL_RATE) : void 0
                        }), c.prototype.getPercent(i)
                    }, e.prototype.getIntBasis = function(t, e) {
                        var n, i, r;
                        return i = o.prototype.getTiers(t), e = Number(u.faceted_search.amount), n = "", h.each(i, function(t) {
                            return console.log(e, Number(t.MIN_DEPOSIT), Number(t.MAX_DEPOSIT)), Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? n = t.INT_BASIS : void 0
                        }), r = function() {
                            switch (n) {
                                case "E":
                                    return "Entire";
                                case "P":
                                    return "Portion";
                                default:
                                    return "N/A"
                            }
                        }()
                    }, e.prototype.getBusSavRate5K = function(t) {
                        return this.getTotalRate(t, 5e3)
                    }, e.prototype.getBusSavRate10K = function(t) {
                        return this.getTotalRate(t, 1e4)
                    }, e.prototype.getBusSavRate25K = function(t) {
                        return this.getTotalRate(t, 25e3)
                    }, e.prototype.getBusSavRate50K = function(t) {
                        return this.getTotalRate(t, 5e4)
                    }, e.prototype.getBusSavRate100K = function(t) {
                        return this.getTotalRate(t, 1e5)
                    }, e.prototype.getOngoingFee = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), i = "$0.00", n = o.prototype.getFees(t), h.each(n, function(t) {
                            return Number(t.MIN_AMOUNT) <= e && e <= Number(t.MAX_AMOUNT) ? i = "$" + Number(t.ONGOING_FEE).toFixed(2) : void 0
                        }), i
                    }, e.prototype.expandFreq = function(t) {
                        var e;
                        return e = function() {
                            switch (t) {
                                case "d":
                                    return "Daily";
                                case "m":
                                    return "Monthly";
                                case "q":
                                    return "Every 3 months";
                                case "s":
                                    return "Every 6 months";
                                case "a":
                                    return "Annually";
                                default:
                                    return t
                            }
                        }()
                    }, e.prototype.getIntCalcFreq = function(t) {
                        return this.expandFreq(t.SUPP.CONDINCA)
                    }, e.prototype.getIntPaidFreq = function(t) {
                        return this.expandFreq(t.SUPP.CONDINPA)
                    }, e.prototype.getDepaRate = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "0.00%", h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.TOTAL_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getDepaBonusRate = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "0.00%", h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.BONUS_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getDepaPromoBonusRate = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "0.00%", h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.PROMO_BONUS_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getDepaCondBonusRate = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "0.00%", h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.COND_BONUS_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getDepaIntRate = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "0.00%", h.each(n, function(t) {
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? i = "" + Number(t.INT_RATE).toFixed(2) + "%" : void 0
                        }), i
                    }, e.prototype.getDepaMaxInt = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = o.prototype.getTiers(t), i = "N/A", h.each(n, function(t) {
                            var n;
                            return Number(t.MIN_DEPOSIT) <= e && e <= Number(t.MAX_DEPOSIT) ? (n = t.TOTAL_RATE / 365 / 100 * 30 * e, i = "$" + Number(n).toFixed(2)) : void 0
                        }), i
                    }, e.prototype.getWeeklyRepayment = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = 1 + Number(t["Current Rate"].replace("%", "")) / 100, i = "N/A", i = "$" + (n * e / 1560).toFixed(2)
                    }, e.prototype.getMonthlyRepayment = function(t) {
                        var e, n, i;
                        return e = Number(u.faceted_search.amount), n = 1 + Number(t["Current Rate"].replace("%", "")) / 100, i = "N/A", i = "$" + (n * e / 360).toFixed(2)
                    }, e.prototype.getVwMortAnnualFee = function(t) {
                        var e;
                        return e = parseInt(t.SUPP.FEESMONT) + parseInt(t.SUPP.FEESQUAR) + parseInt(t.SUPP.FEESSEMI) + parseInt(t.SUPP.FEESANNU) > 0 ? c.prototype.getDollar(12 * parseInt(t.SUPP.FEESMONT) + 4 * parseInt(t.SUPP.FEESQUAR) + 2 * parseInt(t.SUPP.FEESSEMI) + parseInt(t.SUPP.FEESANNU)) : "FEESANNU" === t.SUPP.FEE_PERCENT_TYPE ? c.prototype.getPercent(t.SUPP.FEE_PERCENT) : "FEESSEMI" === t.SUPP.FEE_PERCENT_TYPE ? c.prototype.getPercent(2 * t.SUPP.FEE_PERCENT) : "FEESQUAR" === t.SUPP.FEE_PERCENT_TYPE ? c.prototype.getPercent(4 * t.SUPP.FEE_PERCENT) : "FEESMONT" === t.SUPP.FEE_PERCENT_TYPE ? c.prototype.getPercent(12 * t.SUPP.FEE_PERCENT) : c.prototype.getDollar(0)
                    }, e.prototype.getACPAnnualCost = function(t) {
                        var e;
                        return e = c.prototype.getDollarNA("STARSTARLOWB" === t.SUPP.STAR_PROFILE ? t.SUPP.CHGSCHGSADDI_NUM : "STARSTARMEDB" === t.SUPP.STAR_PROFILE ? t.SUPP.CHGSCHGSADD2_NUM : t.SUPP.CHGSCHGSADD3_NUM)
                    }, e.prototype.getMonthlyRepaymentCompound = function(t) {
                        var e, i, r, s, a, l, c, d, p, h, f, m;
                        if (r = u.faceted_search, f = r.repayment_type, e = u.faceted_search.amount, m = 30, "string" == typeof e && (e = e.replace(/,/, "")), p = "object" == typeof t ? (t.SUPP.AAPRRATE || t.SUPP.PERLRATE).replace("%", "") : t, c = null, "IO" === f) c = o.prototype.floor(Number(e * (p / 12) / 100));
                        else {
                            if (d = /\s*to|-\s*/, d.test(p)) return h = p.split(d), c = "$" + this.getMonthlyRepaymentCompound(h[0]) + " to " + this.getMonthlyRepaymentCompound(n.trim(h[1]));
                            for (e = u.faceted_search.amount, l = Number(p) / 1200, i = 1, a = 1 + l, s = 0; s < 12 * Number(m);) i *= a, s++;
                            c = o.prototype.floor(Number(e) * l / (1 - 1 / i))
                        }
                        return "$" + c.toFixed(2)
                    }, e.prototype.getMonthlyRepaymentLoan = function(t) {
                        var e, n, i, r, o, s, a, l, c, d, p, h, f, m, g, v;
                        return h = "N/A", m = t.SUPP, n = parseInt(u.faceted_search.term, 10), e = parseInt(u.faceted_search.amount, 10), s = parseInt(m.MAX_YEARS, 10), d = parseInt(m.MIN_YEARS, 10), r = parseInt(m.MAX_MONTHS, 10), l = parseInt(m.MIN_MONTHS, 10), i = parseInt(m.MAX_AMOUNT, 10), a = parseInt(m.MIN_AMOUNT, 10), c = m.MIN_STD_TERM_DAYS, o = m.MAX_STD_TERM_DAYS, p = n / 30, f = m.MIN_RATE / 1200, v = !0, g = i >= e && e >= a ? !0 : !1, v && g && (h = -f * e * Math.pow(1 + f, p) / (1 - Math.pow(1 + f, p)), h = "$" + h.toFixed(2)), h
                    }, e.prototype.blueBrandProduct = function(t) {
                        var e, n, i, r;
                        return i = "<span>" + t.SUPP.brand + "<br/>" + t.SUPP.part_number + "</span>", e = "_gaq.push(['_trackEvent', 'Product Tables', '" + u.faceted_search.category + "', '" + t.SUPP.brand + ", " + t.SUPP.part_number + "-ProdLink'])", r = "/appliances/air-conditioners/" + l.prototype.convertToSlug(t.SUPP.title), n = "<a href='" + r + "' onclick=\"" + e + '">' + i + "</a>", "" + n + "<br/>" + c.prototype.getStarRatingBlue(t.SUPP.rating)
                    }, e.prototype.dobToAgeRange = function(t) {
                        var e, n, i, r, o, s, a, l;
                        return o = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], l = new Date, i = new Date(t.birthyear.value, h.indexOf(o, t.month.value)), e = l.getFullYear() - i.getFullYear(), r = l.getMonth() - i.getMonth(), (0 > r || 0 === r && l.getDate() < i.getDate()) && e--, a = [{
                            label: "Under 35 years",
                            start: 0,
                            end: 34
                        }, {
                            label: "35 - 50 years",
                            start: 35,
                            end: 50
                        }, {
                            label: "Over 50 years",
                            start: 51,
                            end: 999
                        }], n = "", e >= 61 && "Couples" === t.cover_for.value ? n = "Over 60 years" : (s = h.find(a, function() {
                            return function(t) {
                                return t.start <= e && e <= t.end ? !0 : void 0
                            }
                        }(this)), n = null != s ? s.label : void 0), n
                    }, e.prototype.getCanstarLeadHref = function(t) {
                        var e, n, i, r;
                        return r = "", "http://www.canstar.com.au" !== t.SUPP.lead_url && (r = ' style="background-color: gold" '), e = {
                            style: r,
                            lead_url: t.SUPP.lead_url,
                            lead_text: "Go to Site"
                        }, n = h.template('<a rel="nofollow" <%= style %> target="_blank" href="<%= lead_url %>" class="proceed green"><%= lead_text %></a>'), i = n(e)
                    }, e.prototype.getMerchRewardAmt = function(t) {
                        var e, n, i, r, o, s;
                        return e = "N/A", s = t.SUPP, n = parseInt(u.faceted_search.card_spend, 10), i = s.PXRRRMER, o = s.PXRRRM60, r = s.PXRRRM12, 1e3 === n ? e = i : 2e3 === n ? isNaN(i) || (e = 2 * i) : 5e3 === n ? e = o : 1e4 === n && (e = r), e = "$" + e
                    }, e.prototype.getAnnualTotalFees = function(t) {
                        var e, n, i, r;
                        return n = "0", r = t.SUPP, e = parseInt(r.FEESONGF, 10), i = parseInt(r.FEESANNP, 10), n = i > 0 ? e + i : e, n = "$" + n
                    }, e.prototype.getPurchaseRate = function(t) {
                        var e, n, i, r, o, s, a, l, c, d, p;
                        return i = t.SUPP.INFOCINT, n = t.SUPP.INFOCINP, c = t.SUPP.INFORATE, s = null != u && null != (p = u.faceted_search) ? p.profile : void 0, l = -1 !== c.indexOf("%") ? 1 * c.replace("%", "") : "N/A", "N/A" !== i && "N/A" !== n ? (r = -1 !== n.indexOf("mths") ? 1 * n.replace("mths", "") : 1 * n, e = 1 * i.replace("%", ""), o = 12, d = e + o / r, a = "<div>" + i + '</div> <small class="small-alt-text">for</small> ' + n + ' <small class="small-alt-text">then ' + c + "</small>") : (d = l, a = "<div>" + c + "</div>"), ("Low Interest" === s || "Low Fee" === s) && (d = l), a = '<div value="' + d + '">' + a + "</div>"
                    }, e.prototype.getBalanceTransfer = function(t) {
                        var e, n, i, r, o, s, a, l, c, u, d;
                        return r = t.SUPP.INFOBTIR, e = t.SUPP.INFOBTOP, c = t.SUPP.INFOBTRR, d = t.SUPP.FEESBALT, i = c, u = c, -1 !== c.indexOf("%") && (u = 1 * c.replace("%", "")), "N/A" !== e && (s = "Life" === e ? 36 : -1 !== e.indexOf("mths") ? 1 * e.replace("mths", "") : !1, o = 1 * r.replace("%", ""), s !== !1 ? (l = 12, a = l / s, u = o + a) : u = o, i = "" + r + '<div><small class="small-alt-text">for</small> ' + e + ' <small class="small-alt-text">then ' + c + "</small></div>", "N/A" !== d && "Nil" !== d && (-1 === d.indexOf("%") && (d = "$" + parseFloat(d).toFixed(0)), i += "<div><small>Upfront fee " + d + " applies</small></div>")), "N/A" === i && (i = "-"), n = '<div value="' + u + '">' + i + "</div>"
                    }, e.prototype.getAnnualFeeCC = function(t) {
                        var e, i, r, o, s, a, l, c, d, p, h, f;
                        return r = Number(12 * parseFloat(u.faceted_search.amount.replace("/[,$]/", ""))), p = Number(t.SUPP.FEESREDA), l = Number(t.SUPP.CRED_FEES_WAIV), e = n.isNumeric(t.SUPP.REWD_FEES_ANNP) ? t.SUPP.REWD_FEES_ANNP : 0, c = Number(t.SUPP.FEESONGF), d = t.SUPP.FEESONGW, i = Number(c + Number(e)), f = Number(p + Number(e)), a = n.isNumeric(l) && r > l, s = "Yes" === d && !a, h = n.isNumeric(p) && !a, o = h ? "$" + i + '<br /><small class="small-alt-text">$' + f + " in first year</small>" : s ? "$" + i + '<br /><small class="small-alt-text">$' + e + " in first year</small>" : a ? "$" + e + '<br /><small class="small-alt-text">$' + c + " waived due to spend</small>" : "$" + i, o = '<div value="' + i + '">' + o + "</div>"
                    }, e.prototype.getApproximateCostCC = function(t) {
                        var e, n, r, o, s, a, l, c, d, p, h, f, m, g;
                        return d = 3, o = "N/A" === t.SUPP.INFOCINP ? "0 mths" : t.SUPP.INFOCINP, o = "Life" === o ? 12 * d : 1 * o.replace(" mths", ""), r = "N/A" === t.SUPP.INFOCINT ? "0%" : t.SUPP.INFOCINT, r = r.slice(0, -1) / 100, s = "N/A" === t.SUPP.INFORATE ? "0%" : t.SUPP.INFORATE, s = s.slice(0, -1) / 100, e = t.SUPP.FEESONGF, c = "N/A" === t.SUPP.CRED_FEES_WAIV ? !1 : t.SUPP.CRED_FEES_WAIV, g = t.SUPP.FEESONGW, l = 1 * u.faceted_search.amount, a = l, n = u.faceted_search.profile, c !== !1 && l >= c ? f = 0 : ("Yes" === g && (d = d--), f = e * d), f = 5 * Math.round(f / 5), m = 0, m = o >= 12 * d ? a * r * d : a * d * (r * o + s * (12 * d - o)) / (12 * d), p = f + m, h = i.formatMoney(p, "$", 0), '<div value="' + p + '">' + h + "</div>"
                    }, e.prototype.getCCExtras = function(t) {
                        var e;
                        return e = "", "Yes" === t.SUPP.REWDRWSP && (e += "<div>- Rewards program</div>"), "Yes" === t.SUPP.PRCFEXWT && (e += "<div>- Extended Warranty</div>"), "Yes" === t.SUPP.PRCFFTIS && (e += "<div>- Travel Insurance</div>"), "" === e && (e = "-"), e = '<div value="' + e + '">' + e + "</div>"
                    }, e.prototype._getCCStarRating = function(t, e, n) {
                        var i, r, o, s, a, l, d, p, h, f, m, g;
                        if (null == n && (n = "medium"), s = u.faceted_search, l = s.profile, a = Number(null != (m = s.amount) ? m.replace("$", "") : void 0), i = void 0, i = "Rewards" === l || "Frequent Flyer" === l ? {
                                12e3: {
                                    min: 0,
                                    max: 1500
                                },
                                24e3: {
                                    min: 1500,
                                    max: 2500
                                },
                                36e3: {
                                    min: 2500,
                                    max: 4e3
                                },
                                6e4: {
                                    min: 4e3,
                                    max: 7500
                                },
                                12e4: {
                                    min: 7500,
                                    max: 15e3
                                },
                                25e4: {
                                    min: 15e3,
                                    max: 99999
                                }
                            } : {
                                12e3: {
                                    min: 0,
                                    max: 1500
                                },
                                24e3: {
                                    min: 1500,
                                    max: 3500
                                },
                                6e4: {
                                    min: 3500,
                                    max: 7500
                                },
                                12e4: {
                                    min: 7500,
                                    max: 15e3
                                },
                                25e4: {
                                    min: 15e3,
                                    max: 99999
                                }
                            }, p = {
                                Rewards: {
                                    12e3: "STARGENP",
                                    24e3: "STARGENS",
                                    36e3: "STARGE36",
                                    6e4: "STARGE60",
                                    12e4: "STARG120",
                                    25e4: "STARG120"
                                },
                                "Frequent Flyer": {
                                    12e3: "STARFL12",
                                    24e3: "STARFLYP",
                                    36e3: "STARFL36",
                                    6e4: "STARFLYS",
                                    12e4: "STARF120",
                                    25e4: "STARF120"
                                },
                                Premium: {
                                    12e3: "PREM_24K_SR",
                                    24e3: "PREM_24K_SR",
                                    6e4: "PREM_60K_SR",
                                    12e4: "PREM_120K_SR",
                                    25e4: "PREM_120K_SR"
                                }
                            }, h = void 0, "Low Interest" === l) h = "LOW_RATE_SR";
                        else if ("Low Fee" === l) h = "LOW_FEE_SR";
                        else
                            for (r in i)
                                if (o = i[r], o.max > a && a >= o.min) {
                                    h = p[l][r];
                                    break
                                } return void 0 === h && "undefined" != typeof console && null !== console && console.error("Could not find star rating tag"), f = null != (g = t.SUPP[h]) ? g : null, u.debug === !0 ? h || "Tag not found" : (d = "", d = "large" === n ? c.prototype.getLargeStarRating(f) : "small" === n ? c.prototype.getSmallStarRating(f) : c.prototype.getMediumStarRating(f))
                    }, e.prototype.getMedCCStarRating = function(t, e) {
                        return this._getCCStarRating(t, e, "medium")
                    }, e.prototype.getLargeCCStarRating = function(t, e) {
                        return this._getCCStarRating(t, e, "large")
                    }, e.prototype.getSmallCCStarRating = function(t, e) {
                        return this._getCCStarRating(t, e, "small")
                    }, e.prototype.getPointsPerDollarCC = function(t) {
                        var e, n, i, r, o, s, a, l;
                        return i = t.SUPP.EARNEARN, e = t.SUPP.EARNBRAN, o = t.SUPP.EAR2EAR2, n = t.SUPP.EAR2BRAN, r = "null" === i || "N/A" === i ? "" : "" + i + ' <small class="small-alt-text">on ' + e + "</small>", s = "null" === o || "N/A" === o ? "" : "" + o + ' <small class="small-alt-text">on ' + n + "</small>", -1 !== n.indexOf("visa") || -1 !== n.indexOf("mastercard") ? (a = "" + s + "<br />" + r, l = o) : (a = "" + r + "<br />" + s, l = i), "" === r && "" === s ? a = "-" : (a = a.replace(/american express/gi, "Amex"), a = a.replace(/mastercard/gi, "MC"), a = '<div value="' + l + '">' + a + "</div>"), a
                    }, e.prototype.getLimitationsCC = function(t) {
                        return this._showPointsCapped(t, !0)
                    }, e.prototype.showPointsCapped = function(t) {
                        return this._showPointsCapped(t)
                    }, e.prototype._showPointsCapped = function(t, e) {
                        var n, r, o, s, a, l, c, u, d, p, f;
                        return null == e && (e = !1), r = ["No max", "N/A"], u = t.SUPP.CAPPCAPM, p = t.SUPP.CAPPCAPY, n = t.SUPP.CAPPBASE, -1 === h.indexOf(r, u) ? (d = i.formatMoney(u, "", 0, ","), d = "Dollars" === n ? "$" + d : "" + d + " " + n, l = "" + d.toLowerCase() + " per month", a = u) : -1 === h.indexOf(r, p) ? (f = i.formatMoney(p, "", 0, ","), f = "Dollars" === n ? "$" + f : "" + f + " " + n, l = "" + f.toLowerCase() + " per year", a = p) : (l = "-", a = "999999999"), e && ("-" !== l ? (c = !1, l = '<ul style="text-align:left; max-width:215px;"><li>Points capped at ' + l + "</li>") : (c = !0, l = '<ul style="text-align:left; max-width: 215px;">'), s = t.SUPP.XPIRLIFE, "Never expire" !== s && "N/A" !== s && "-" !== l ? (c === !1 && (o = "padding-top:5px;"), l += '<li style="' + o + '">Points Expire at ' + s + "</li></ul>") : c === !0 && (l = "-")), l = '<div value="' + a + '" class="three-quarter-text">' + l + "</div>"
                    }, e.prototype.getCCAnnualValueRewards = function(t) {
                        var e, n, i, r, o, s, a, l, c, d, p, h, f, m, g, v;
                        if (a = u.faceted_search.reward_types, e = 12 * u.faceted_search.amount, s = !1, h = "", d = {
                                "Cash / Vouchers": ["PXRRRC", "PXRRRS"],
                                "Shopping at Rewards Store": ["PXRRRM"],
                                "Lifestyle / Entertainment / Food": ["PXRRRL", "PXRRRE", "PXRRRF"]
                            }, o = {
                                "Cash / Vouchers": ["PXRRRCSH", "PXRRRSHO"],
                                "Shopping at Rewards Store": ["PXRRRMER"],
                                "Lifestyle / Entertainment / Food": ["PXRRRLIF", "PXRRRENT", "PXRRRFUD"]
                            }, 12e3 >= e ? m = o[a] : e >= 24e3 && e > 12e3 ? (m = o[a], s = !0) : (m = d[a], h = e > 6e4 ? "12" : "60"), null != m) {
                            g = 0, v = 0;
                            for (r in m) c = m[r], p = c + h, f = 1 * t.SUPP[p], isNaN(f) || 0 === f || (g++, s && (f = 2 * f), v += f);
                            0 === g ? (n = "-", l = "N/A") : (n = v / g, n = 5 * Math.round(n / 5), l = n, n = "$" + n)
                        } else n = "-", l = "N/A";
                        return i = '<div value="' + l + '">' + n + "</div>"
                    }, e.prototype.getAirlinePtsPerDollarCC = function(t) {
                        var e, n, r, o, s, a, l, c, d, p, h, f, m;
                        if (n = {
                                Qantas: "FFLYQANT",
                                Virgin: "FFLYVELO",
                                Emirates: "FFLYEMIR",
                                Etihad: "FFLYETIH",
                                Singapore: "FFLYSING",
                                Malaysia: "FFLYMALA",
                                "Air New Zealand": "FFLYAIRN",
                                "Cathay Pacific": "FFLYCATH",
                                Jetstar: "FFLYJETS",
                                "Virgin Atlantic": "FFLYVIAT",
                                "Thai Airlines": "FFLYTHAI",
                                "Korean Air": "FFLYKORE",
                                "Delta Airlines": "FFLYDELT",
                                "American Air": "FFLYAMER"
                            }, h = u.faceted_search.airline, p = n[h], a = ["null", "N/A"], c = '<div value="N/A">-</div>', r = t.SUPP[p], l = 1 * t.SUPP.EARNEARN, o = null, s = "-", f = -1, -1 === a.indexOf(r) && n.hasOwnProperty(h)) o = 1 * r;
                        else
                            for (e in n) m = n[e], r = t.SUPP[m], -1 === a.indexOf(r) && (d = t.SUPP[m], (null === o || d > o) && (o = 1 * d, h = e));
                        return null !== o && (o = l / o, f = o, o % 1 !== 0 && (o = i.formatNumber(o, 2, "", ".")), s = "" + o + "<br />" + h), c = '<div value="' + f + '">' + s + "</div>"
                    }, e.prototype.getDollarVal = function(t) {
                        return n.isNumeric(t) ? t = "$" + Number(t).toFixed(2) : "Nil" === t ? t = "$" + Number(0).toFixed(2) : "N/A" === t && (t = ""), t
                    }, e.prototype.getATMWithdrawalFee = function(t) {
                        var e, n;
                        return n = t.SUPP, e = "", "Nil" !== n.FEESIATM && "N/A" !== n.FEESIATM && "null" !== n.FEESIATM && (e = this.getDollarVal(n.FEESIATM)), "Nil" !== n.FEESIATP && "N/A" !== n.FEESIATP && "" !== e ? e = "Greater of " + e + " or " + n.FEESIATP : "Nil" !== n.FEESIATP && "N/A" !== n.FEESIATP && "" !== e && (e = n.FEESIATP), "Nil" !== n.FEESFCCC && "N/A" !== n.FEESFCCC && "" !== e ? e = e + ", plus " + n.FEESFCCC : "Nil" !== n.FEESFCCC && "N/A" !== n.FEESFCCC && "" === e && (e = n.FEESFCCC), e
                    }, e.prototype.getOvATMWithdrawalFee = function(t) {
                        var e, n;
                        return n = t.SUPP, e = "", "null" !== n.COSTINTA && "Nil" !== n.COSTINTA && (e = this.getDollarVal(n.COSTINTA)), "null" !== n.COSTCNVF && ("Nil" !== n.COSTCNVF && "N/A" !== n.COSTCNVF && "" !== e ? e = e + ", plus " + n.COSTCNVF : "Nil" !== n.COSTCNVF && "N/A" !== n.COSTCNVF && "" === e && (e = n.COSTCNVF)), "" === e && (e = "Nil"), e
                    }, e.prototype.getOverseasPurchaseFee = function(t) {
                        var e, n;
                        return n = t.SUPP, e = "", "null" !== n.COSTCCFE && "Nil" !== n.COSTCCFE && "N/A" !== n.COSTCCFE && (e = n.COSTCCFE), "null" !== n.COSTINTE && "Nil" !== n.COSTINTE && (e = "" !== e ? this.getDollarVal(n.COSTINTE) + ", plus " + e : this.getDollarVal(n.COSTINTE)), "" === e && (e = "Nil"), e
                    }, e.prototype.getSignUpBonusCC = function(t) {
                        var e, n, r, o, s, a, l, c, u;
                        return e = t.SUPP.OFFSOFFR, l = t.SUPP.OFFSCPVG, s = t.SUPP.OFFSELIG, o = t.SUPP.OFFSPERD, "N/A" === e || "N/A" === l || "N/A" === s || "N/A" === o ? '<div value="N/A">-</div>' : (c = "Points" === l ? "pts" : l, a = e, n = "N/A" !== e && -1 === e.indexOf("%"), n && (e = i.formatMoney(e, "", 0, ",")), n && "Points" !== l && "N/A" !== l && (e = "$" + e), r = "<div>" + e + " " + c + '</div> <small class="small-alt-text">once you ' + s.toLowerCase() + " " + o.toLowerCase() + '</small> <div><small class="tiny-text">conditions apply</small></div>', u = '<div value="' + a + '">' + r + "</div> ")
                    }, e.prototype.getApprovalTimeOnlineCC = function(t) {
                        var e, n, i;
                        switch (e = t.SUPP.ZAPPAPPO) {
                            case "N/A":
                                i = "N/A";
                                break;
                            case "Immediate":
                                i = 0;
                                break;
                            case "Same day":
                                i = 23.99;
                                break;
                            default:
                                -1 !== e.indexOf("days") ? i = 24 * e.replace("days", "") : -1 !== e.indexOf("hrs") && (i = 1 * e.replace("hrs", ""))
                        }
                        return n = '<div value="' + i + '"><div>' + e + "</div></div>"
                    }, e.prototype.getBalanceTransferOffer = function(t) {
                        var e, n;
                        return n = t.SUPP.INFOBTIR, e = t.SUPP.INFOBTOP, "N/A" !== n && null != e ? n + " for " + e.split(" ")[0] + " months" : n
                    }, e.prototype.getCashAdvanceFee = function(t) {
                        var e, n, i, r;
                        return e = t.SUPP.FEESCAFA, n = t.SUPP.FEESCOPC, null != e && "N/A" !== e && (i = -1 === e.indexOf("%") ? c.prototype.getDollarNANil(e) : e), null != n && "N/A" !== n && (r = -1 === n.indexOf("%") ? c.prototype.getDollarNANil(n) : n), null != i && null != r ? "" + i + " or " + r + " which ever is greater" : i ? "" + i : r ? "" + r : void 0
                    }, e.prototype.getCashAdvanceFeeInt = function(t) {
                        var e, n, i, r;
                        return e = t.SUPP.FEESIATM, n = t.SUPP.FEESIATP, null != e && "N/A" !== e && (i = -1 === e.indexOf("%") ? c.prototype.getDollarNANil(e) : e), null != n && "N/A" !== n && (r = -1 === n.indexOf("%") ? c.prototype.getDollarNANil(n) : n), null != i && null != r ? "" + i + " or " + r + " which ever is greater" : i ? "" + i : r ? "" + r : void 0
                    }, e.prototype.getComplimentaryTravelInsurance = function(t) {
                        var e, n;
                        return e = t.SUPP.PRCFFTIS, n = t.SUPP.PRCFTIDI, "Yes" === e ? "N/A" === n ? c.prototype.getTickCrossDash("Yes") : n : c.prototype.getTickCrossDash(e)
                    }, e.prototype.oshcPremium = function(t) {
                        var e, n, i;
                        return n = u.faceted_search.sr_profile, i = function() {
                            switch (!1) {
                                case "15" !== n:
                                    return "OVERPRE1";
                                case "16" !== n:
                                    return "OVERPRE2";
                                case "17" !== n:
                                    return "OVERPRE3";
                                case "18" !== n:
                                    return "OVERPRE4";
                                case "19" !== n:
                                    return "OVERPRE5"
                            }
                        }(), e = t.SUPP[i], (null == e || "null" === e) && (e = this.null_span()), e
                    }, e.prototype.hospPharmRebate = function(t) {
                        var e, n, i, r;
                        return r = t.SUPP.PHARREBA, e = t.SUPP.PHARCOPA, i = t.SUPP.PHARPEPO, "null" === r ? this.null_span() : "N/A" === r ? "N/A" : (n = c.prototype.getPercentNoDecimal(r), "N/A" !== e && "null" !== e && (n += " after copayment of $" + e), "N/A" !== i && "null" !== i && (n += " limited to $" + i), "<span value='" + r + "'>" + n + "</span>")
                    }, e.prototype.onshFee15kTrade = function(t) {
                        var e, n, i;
                        return e = t.SUPP.FEESO1FD, i = t.SUPP.FEESO1FP, "null" === e && "null" === i ? ("undefined" != typeof console && null !== console && console.error("Both dollar and percentage fees null"), this.null_span()) : (n = 0, n = "null" === i ? e : "null" === e ? i / 100 * 15e3 : 1 * e + i / 100 * 15e3, n = Number(n).toFixed(2), isNaN(n) ? ("undefined" != typeof console && null !== console && console.error("Bad fee values"), this.null_span()) : "$" + n)
                    }, e.prototype._getBCCStarRating = function(t, e, n) {
                        var i, r, o, s, a, l, d, p, h, f, m, g;
                        if (null == n && (n = "medium"), s = u.faceted_search, l = s.profile, a = Number(null != (m = s.amount) ? m.replace("$", "") : void 0), i = {
                                36e3: {
                                    min: 0,
                                    max: 4e3
                                },
                                6e4: {
                                    min: 4e3,
                                    max: 7500
                                },
                                12e4: {
                                    min: 7500,
                                    max: 15e3
                                },
                                25e4: {
                                    min: 15e3,
                                    max: 99999
                                }
                            }, p = {
                                Rewards: {
                                    36e3: "STARGE36",
                                    6e4: "STARCS60",
                                    12e4: "STARC120",
                                    25e4: "STARC250"
                                },
                                "Frequent Flyer": {
                                    36e3: "STARFL36",
                                    6e4: "STARFLYS",
                                    12e4: "STARF120",
                                    25e4: "STARF250"
                                }
                            }, h = void 0, "Low Interest" === l) h = "BUS_REVOLVER_SR";
                        else if ("Low Fee" === l) h = "LOW_FEE_SR";
                        else
                            for (r in i)
                                if (o = i[r], o.max > a && a >= o.min) {
                                    h = p[l][r];
                                    break
                                } return void 0 === h && "undefined" != typeof console && null !== console && console.error("Could not find star rating tag"), f = null != (g = t.SUPP[h]) ? g : null, u.debug === !0 ? h || "Tag not found" : (d = "", d = "large" === n ? c.prototype.getLargeStarRating(f) : "small" === n ? c.prototype.getSmallStarRating(f) : c.prototype.getMediumStarRating(f))
                    }, e.prototype.getMedBCCStarRating = function(t, e) {
                        return this._getBCCStarRating(t, e, "medium")
                    }, e.prototype.getLargeBCCStarRating = function(t, e) {
                        return this._getBCCStarRating(t, e, "large")
                    }, e.prototype.getSmallBCCStarRating = function(t, e) {
                        return this._getBCCStarRating(t, e, "small")
                    }, e.prototype.getWOCallsTotal = function(t) {
                        var e;
                        return e = parseInt(t.calls_num.value) * parseInt(t.calls_length.value) * .5
                    }, e.prototype.calculateInclusionScore = function(t) {
                        var e, n, i, r, s, a, l, c, u, d, p, h, f;
                        return c = o.prototype.paramsFromQueryString(window.location.search), p = .1, f = .1, h = .8, n = t.SUPP.ALLOWCALLMONTHMINS - c.calls_num * c.calls_length, u = t.SUPP.ALLOWSMSMONTH - c.sms, i = t.SUPP.ALLOWDATAMONTHGB - .001 * c.data, s = 0, "Yes" === t.SUPP.ALOWOVRLDOLR && "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLCALL ? s = t.SUPP.ALOWOVRLTOTL - c.calls_num * t.SUPP.FEESCALLFLAG - c.calls_length * c.calls_num * t.SUPP.FEESCALLCOST - c.sms * t.SUPP.FEESSMSSCOST : "Yes" === t.SUPP.ALOWOVRLDOLR && "Yes" === t.SUPP.ALOWOVRLCALL && "No" === t.SUPP.ALOWOVRLSMSM && (s = t.SUPP.ALOWOVRLTOTL - c.calls_num * t.SUPP.FEESCALLFLAG - (c.calls_length * c.calls_num + t.SUPP.FEESCALLCOST)), e = "Yes" === t.SUPP.ALOWCALLULTD || n > c.calls_num * c.calls_length ? 1 : .9 * (t.SUPP.ALLOWCALLMONTHMINS / (t.SUPP.ALLOWCALLMONTHMINS - n) - 1), d = "Yes" === t.SUPP.ALOWSMSMULTD || u > c.sms ? 1 : .9 * (t.SUPP.ALLOWSMSMONTH / (t.SUPP.ALLOWSMSMONTH - u) - 1), r = i > .001 * c.data ? 1 : .9 * (t.SUPP.ALLOWDATAMONTHGB / (t.SUPP.ALLOWDATAMONTHGB - i) - 1), a = s > t.SUPP.ALLOWDOLLARMONTH - s ? 1 : "0" === t.SUPP.ALLOWDOLLARMONTH ? 0 : .9 * (t.SUPP.ALLOWDOLLARMONTH / (t.SUPP.ALLOWDOLLARMONTH - s) - 1), l = a > 0 ? (p + f) * a + h * r : f * d + h * r + p * e
                    }, e.prototype.getInclusionScore = function(t) {
                        var e, n, i, r, o;
                        return i = this.calculateInclusionScore(t), o = .5 * Math.round(10 * (i + 1)), n = String(o).replace(".", "-"), r = t.SUPP.ALLOWSUBTEXT.replace(/[\d\.]+[GM]B/g, "" + (t.SUPP.ALOWDATAPERPRD + t.SUPP.ALOWDATAUNIT)), r += "<br/>-- " + t.SUPP.GENLVRNTTEXT + " --", e = this.templates.inclusion_score({
                            scoreVal: o,
                            scoreImg: "" + u.base_url + "assets/image/inc-scor-" + n + ".png",
                            subtext: r
                        })
                    }, e.prototype.getBlueCompanyImage = function(t) {
                        var e;
                        return e = o.prototype.blueCompanyLogo(t.SUPP.CO_CODE, t.SUPP.COMPANY_NAME, null, null, "http://cdn.canstarblue.com.au/")
                    }, e.prototype.getBlueLargeCompanyImage = function(t) {
                        var e;
                        return e = o.prototype.blueCompanyLogo(t.SUPP.CO_CODE, t.SUPP.COMPANY_NAME, {
                            width: 180,
                            size: "small"
                        }, null, "http://cdn.canstarblue.com.au/")
                    }, e.prototype.getMobileHoverText = function(t, e) {
                        var n, i, r, o, a, l, c;
                        return c = "", null != e && null == e.alt_noun && (e.alt_noun = e.noun), null != e && null == e.alt_tag && (e.alt_tag = e.tag), o = "ALOW" + e.tag + "ULTD", i = "ALOWOVRL" + e.tag, r = "ALOW" + e.tag + "TOTL", n = "FEES" + e.alt_tag + "COST", "Yes" === t.SUPP[o] ? c += "Unlimited SMS's included, per billing period" : (c += "Yes" === t.SUPP.ALOWOVRLDOLR && "Yes" === t.SUPP[i] ? "" + e.plural + " are included up to a shared total of $" + t.SUPP.ALOWOVRLTOTL : "" + t.SUPP[r] + " " + e.alt_noun + " included in plan, per billing period", a = s.prototype.formatCurrency(t.SUPP[n], !0), l = s.prototype.formatCurrency(t.SUPP.FEESCALLFLAG, !0), "null" !== a && (c += "<br />Costs: " + a + "/" + e.alt_noun, "null" !== l && "$0.00" !== l && (c += ", with " + l + " flagfall"))), c += "<br />Full product inclusions can be found in the provider CIS."
                    }, e.prototype.getMobileSMS = function(t) {
                        var e, n, i, r;
                        return i = this.getMobileSMSRaw(t, !0, 2), e = this.getMobileHoverText(t, {
                            tag: "SMSM",
                            alt_tag: "SMSS",
                            noun: "SMS",
                            plural: "SMS's"
                        }), r = "shared" === i.suffix ? i.subtext : i.suffix, "Unlimited" !== i.text && (r = "" + r + "<br/>Average SMS per month"), n = c.prototype._generateMobileTooltipText(i.text, i.value, r, e)
                    }, e.prototype.getMobileSMSRaw = function(t, e, n) {
                        var i, r, o, s, a, l, u, d, p, f;
                        return null == e && (e = !1), null == n && (n = 2), f = "SMS", p = "", u = 0, i = "No" === t.SUPP.GENLVRNTMNTH && "null" !== t.SUPP.GENLVRNTRENW && "Yes" === t.SUPP.ALOWOVRLSMSM && e ? t.SUPP.GENLVRNTRENW / 30.5 : 1, o = e ? "ALLOWSMSMONTH" : "ALOWSMSMTOTL", "Yes" === t.SUPP.ALOWSMSMULTD ? (s = "Unlimited", u = 1e6) : 0 !== t.SUPP[o] && "null" !== t.SUPP[o] ? (s = "" + Math.floor(parseFloat(t.SUPP[o])), u = parseFloat(t.SUPP[o])) : "null" !== t.SUPP.ALOWOVRLTOTL ? (l = parseFloat(+t.SUPP.ALOWOVRLTOTL) * i, s = n > 0 ? "<sup>$</sup>" + c.prototype.generateSmallTrailingDecimals(l.toFixed(n)) : "<sup>$</sup>" + l.toFixed(n), "Yes" === t.SUPP.ALOWOVRLDOLR && "Yes" === t.SUPP.ALOWOVRLSMSM && (r = h.countBy(["Yes" === t.SUPP.ALOWOVRLCALL, "Yes" === t.SUPP.ALOWOVRLSMSM, "Yes" === t.SUPP.ALOWOVRLDATA]), d = r["true"], u = t.SUPP.ALOWOVRLTOTL / d / t.SUPP.FEESSMSSCOST), "Yes" === t.SUPP.ALOWOVRLCALL && "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLDATA ? (p = "**Shared limit: Calls, SMS & Data", f = "shared") : "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLCALL ? (p = "**Shared limit, Calls & SMS", f = "shared") : "Yes" === t.SUPP.ALOWOVRLDATA && "Yes" === t.SUPP.ALOWOVRLSMSM && (p = "**Shared limit, SMS & Data", f = "shared")) : (s = "N/A", u = 0), a = {
                            text: s,
                            value: u,
                            suffix: f,
                            subtext: p
                        }
                    }, e.prototype.getMobileMins = function(t) {
                        var e, n, i, r;
                        return e = this.getMobileMinsRaw(t, !0, 2), n = this.getMobileHoverText(t, {
                            tag: "CALL",
                            noun: "Call",
                            alt_noun: "mins",
                            plural: "Calls"
                        }), r = "shared" === e.suffix ? e.subtext : e.suffix, "Unlimited" !== e.text && (r = "" + r + "<br/>Average calls per month"), i = c.prototype._generateMobileTooltipText(e.text, e.value, r, n)
                    }, e.prototype.getMobileMinsRaw = function(t, e, n) {
                        var i, r, s, a, l, u, d, p, f, m, g, v;
                        return null == e && (e = !1), null == n && (n = 2), v = "", g = "", f = 0, i = "No" === t.SUPP.GENLVRNTMNTH && "null" !== t.SUPP.GENLVRNTRENW && "Yes" === t.SUPP.ALOWOVRLSMSM && e ? t.SUPP.GENLVRNTRENW / 30.5 : 1, d = e ? "ALLOWCALLMONTHMINS" : "ALOWCALLTOTL", "Yes" === t.SUPP.ALOWCALLULTD ? (f = 1e6, l = "Unlimited", v = "calls") : "null" !== t.SUPP[d] && 0 !== t.SUPP[d] ? (l = "" + Math.floor(parseFloat(t.SUPP[d])), v = "mins", f = parseFloat(t.SUPP[d])) : "null" !== t.SUPP.ALOWOVRLTOTL ? (u = parseFloat(+t.SUPP.ALOWOVRLTOTL) * i, l = n > 0 ? "$" + c.prototype.generateSmallTrailingDecimals(u.toFixed(n)) : "$" + u.toFixed(n), "Yes" === t.SUPP.ALOWOVRLDOLR && "Yes" === t.SUPP.ALOWOVRLCALL && (a = h.countBy(["Yes" === t.SUPP.ALOWOVRLCALL, "Yes" === t.SUPP.ALOWOVRLSMSM, "Yes" === t.SUPP.ALOWOVRLDATA]), m = a["true"], p = o.prototype.paramsFromQueryString(window.location.search), s = "null" !== t.SUPP.FEESCALLFLAG ? +t.SUPP.FEESCALLFLAG : 0, f = +u / m / (+t.SUPP.FEESCALLCOST + s / +p.calls_length)), "Yes" === t.SUPP.ALOWOVRLCALL && "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLDATA ? (g = "**Shared limit: Calls, SMS & Data", v = "shared") : "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLCALL ? (g = "**Shared limit, Calls & SMS", v = "shared") : "Yes" === t.SUPP.ALOWOVRLDATA && "Yes" === t.SUPP.ALOWOVRLCALL ? (g = "**Shared limit, Calls & Data", v = "shared") : v = "calls") : l = "N/A", r = {
                            text: l,
                            value: f,
                            suffix: v,
                            subtext: g
                        }
                    }, e.prototype.getMobileCallsSMS = function(t) {
                        var e, n, i, r, o, s;
                        return e = this.getMobileMinsRaw(t, !1, 0), i = this.getMobileSMSRaw(t, !1, 0), r = (i.value + e.value) / 2, o = "" + e.subtext + i.subtext, s = "" + e.text + " " + e.suffix + "<br/>" + i.text + " " + i.suffix, "Yes" === t.SUPP.ALOWOVRLSMSM && "Yes" === t.SUPP.ALOWOVRLCALL && (o = e.subtext, s = "" + e.text + " <sub>shared</sub>", r = e.value), n = c.prototype._generateMobileTooltipText(s, r, "" + o)
                    }, e.prototype.getMobilePrice = function(t) {
                        var e, n, i, r, o, a, l, u, d, p, h;
                        return h = t.SUPP.GENLVRNTCOST, isNaN(h) && (h = 0), "No" === t.SUPP.GENLVRNTMNTH ? (h = t.SUPP.GENLVRNTCOST, d = "1" === t.SUPP.GENLVRNTRENW ? "per day" : "for " + t.SUPP.GENLVRNTRENW + " days") : "null" !== t.SUPP.GENLCONTPERD && "Yes" === t.SUPP.GENLVRNTMNTH && (i = "" + s.prototype.formatCurrency(h, !0), i.match(/\.00/) && (i = "" + s.prototype.formatCurrency(t.SUPP.CONTRACTTOTALCOST, !1)), d = "Min. total cost " + i + " over " + t.SUPP.GENLCONTPERD + " ", d += t.SUPP.GENLCONTPERD < 2 ? "month " : "months "), "null" !== t.SUPP.SETUPFEE && (d = d ? "" + d + "<br/>" : "", d += "+ $" + t.SUPP.SETUPFEE + " setup fee"), n = parseFloat(Number(h).toFixed(2)), u = parseFloat(Number(h).toFixed(0)), o = n === u ? n : c.prototype.generateSmallTrailingDecimals(n), p = "<sup>$</sup>" + o, "null" !== t.SUPP.ADDNINFOCOST && (e = parseFloat(Number(t.SUPP.ADDNINFOCOST).toFixed(2)), l = parseFloat(Number(t.SUPP.ADDNINFOCOST).toFixed(0)), r = e === l ? l : c.prototype.generateSmallTrailingDecimals(e), n += e, p = "" + p + "</span><br/><small>+<b>$" + r + "</b></small> <span class='mediumsubtext'>" + t.SUPP.ADDNINFOTYPE.toLowerCase()), a = c.prototype._generateMobileTooltipText(p, n, d)
                    }, e.prototype.calculatePriceScore = function(t) {
                        var e;
                        return e = 1 - d.lognormal.cdf(parseFloat(t["Average Monthly Cost"]), this.preCalculations.LogMeanMonthlyCost, this.preCalculations.LogStdevMonthlyCost)
                    }, e.prototype.getPriceScore = function(t) {
                        var e, n, i;
                        return n = this.calculatePriceScore(t), i = (100 * n).toFixed(0), e = c.prototype._generateMobileTooltipText("" + i + "<sub>%</sub>", n, "", "priceScore: " + n)
                    }, e.prototype.getTotalScore = function(t) {
                        var e, n, i, r, o;
                        return i = this.calculatePriceScore(t), n = this.calculateInclusionScore(t), r = .7 * i + .3 * n, o = (100 * r).toFixed(0), e = c.prototype._generateMobileTooltipText("" + o + "<sub>%</sub>", r, "", "totalScore: " + r)
                    }, e.prototype._energyDiscountIsValidValue = function(t) {
                        var e;
                        return e = !0, e = "N/A" === t ? !1 : e, e = "null" === t ? !1 : e
                    }, e.prototype._energyIsPositiveValue = function(t) {
                        var e;
                        return e = !1, "undefined" != typeof t && (e = "Yes" === t ? !0 : e, e = "true" === t ? !0 : e, e = t === !0 ? !0 : e, e = t > 0 ? !0 : e), e
                    }, e.prototype._energyIsNegativeValue = function(t) {
                        var e;
                        return e = !1, "undefined" != typeof t && (e = "N/A" === t ? !0 : e, e = "null" === t ? !0 : e, e = "false" === t ? !0 : e, e = "0" === t ? !0 : e, e = 1 > t ? !0 : e), e
                    }, e.prototype.getBlueEnergyDetails = function(t) {
                        var e;
                        return e = this.templates.details_drawer({
                            id: t.SUPP.PLAN_ID,
                            discounts: this._getEnergyDiscountsData(t),
                            incentives: this._getEnergyIncentivesData(t),
                            others: this._getEnergyOtherSpecialsData(t),
                            tariffs: t.tariffs,
                            fees: this._getEnergyFees(t),
                            supplyCharge: t.SUPP.PLANSUPPCHAR,
                            greenOffset: t.greenoptions,
                            solaroptions: t.solaroptions,
                            controlledloads: t.controlledloads,
                            row: t
                        })
                    }, e.prototype._getEnergyFees = function(t) {
                        var e, n;
                        return e = {
                            FEESFEESANNU: {
                                title: "Annual Fee",
                                units: "Dollars"
                            },
                            FEESFEESMONT: {
                                title: "Monthly Fee",
                                units: "Dollars"
                            },
                            FEESFEESLTPY: {
                                title: "Late Payment",
                                units: "Dollars"
                            },
                            FEESFEESDRDP: {
                                title: "Direct Debit Processing",
                                units: "Dollars"
                            },
                            FEESFEESDRDD: {
                                title: "Direct Debit Dishonour",
                                units: "Dollars"
                            },
                            FEESFEESCHQD: {
                                title: "Cheque Dishonour",
                                units: "Dollars"
                            },
                            FEESCRPYMCVI: {
                                title: "Credit Card Payment VIA/MC",
                                units: "Percentage"
                            },
                            FEESCRPYAMEX: {
                                title: "Credit Card Payment AMEX",
                                units: "Percentage"
                            },
                            FEESFEESACES: {
                                title: "Account Establishment",
                                units: "Dollars"
                            },
                            FEESFEESTERF: {
                                title: "Termination Fee",
                                units: "Dollars"
                            },
                            FEESFEESDISC: {
                                title: "Disconnection Fee",
                                units: "Dollars"
                            },
                            FEESFEESCONE: {
                                title: "Connection Fee",
                                units: "Dollars"
                            },
                            FEESFEESRECN: {
                                title: "Reconnection Fee",
                                units: "Dollars"
                            },
                            FEESFEESPRIB: {
                                title: "Printed Bill",
                                units: "Dollars"
                            },
                            FEESFEESPVIN: {
                                title: "Solar PV Installed",
                                units: "Dollars"
                            },
                            FEESFEESSMRF: {
                                title: "Special Meter Read Fee",
                                units: "Dollars"
                            },
                            FEESFEESMBSH: {
                                title: "Membership Fees (Annual)",
                                units: "Dollars"
                            },
                            FEESFEESAUPO: {
                                title: "AusPost Payment",
                                units: "Dollars"
                            }
                        }, n = [], h.each(t.SUPP, function(t, i) {
                            return i.match(/^FEES/) && "null" !== t && "N/A" !== t && "$0.00" !== t ? n.push({
                                name: e[i].title,
                                value: t,
                                units: e[i].units
                            }) : void 0
                        }), n
                    }, e.prototype.getEnergyFeatures = function(t) {
                        var e, n, i, r, o;
                        return e = h.countBy(t.discounts, function(t) {
                            return function(e) {
                                return null === e.PLANDISCCOND.match(/pay on time/i) && t._energyDiscountIsValidValue(e.PLANPLANINCE) || "Yes" === e.PLANOTHRSPEC
                            }
                        }(this))["true"] || 0, i = {
                            PayOnTime: {
                                title: "Pay on time discount",
                                flag: this._getEnergyHasDiscountType(t.discounts, "PLANPAYOSPEC")
                            },
                            DirectDebit: {
                                title: "Pay by Direct Debit discount",
                                flag: this._getEnergyHasDiscountType(t.discounts, "PLANDEBTSPEC")
                            },
                            Email: {
                                title: "Email billing discount",
                                flag: this._getEnergyHasDiscountType(t.discounts, "PLANEMALSPEC")
                            },
                            NonEnergyBenefits: {
                                title: "Incentives included",
                                flag: e > 0
                            },
                            OwnsEnergyAssets: {
                                title: "Owns energy assets",
                                flag: h.countBy([t.SUPP.ASSEASSEGASS, t.SUPP.ASSEASSECOAL, t.SUPP.ASSEASSESOLA, t.SUPP.ASSEASSEWIND, t.SUPP.ASSEASSEHYDR, t.SUPP.ASSEASSEOTHR], function(t) {
                                    return "Yes" === t
                                })["true"] > 0
                            }
                        }, o = 0, n = 0, r = "", h.each(Object.keys(i).reverse(), function(t) {
                            var e, s, a;
                            return e = i[t], n = e.flag ? n + Math.pow(2, o) : n, o++, a = e.flag === !1 ? "_gr" : "", s = t.replace(/\s*/g, "").toLowerCase(), r = "<img src='/wp-content/themes/canstar-blue/dist/images/" + s + a + ".png' title='" + e.title + "'> " + r
                        }), r = "<div value='" + n + "'>" + r + "</div>"
                    }, e.prototype._getElectricitySingleRateCost = function(t, e, n, i) {
                        var r, o, s, a;
                        return o = parseFloat(e) / t, a = 365 * o, setTimeout(function() {
                            return function() {
                                return window.cns.$("#energy-estimate").html(a.toFixed(0))
                            }
                        }(this)), s = parseFloat(i.USAGPERICOST), n = parseFloat(n), r = (o * s + n) / 100, 365 * r
                    }, e.prototype._getElectricityMultiRateCost = function(t, e, n, i, r, o, s) {
                        var a, l, c, u;
                        return e = parseFloat(e) / t, n = parseFloat(n) / t, i = parseFloat(i) / t, r = parseFloat(r) / t, u = 365 * (e + n + i + r), setTimeout(function() {
                            return function() {
                                return window.cns.$("#energy-estimate").html(u.toFixed(0))
                            }
                        }(this)), c = parseFloat(s.USAGPERICOST), o = parseFloat(o), a = o, a += e * c, a += n * c, a += i * c, a += r * c, l = a / 100 * 365
                    }, e.prototype._getElectricityControlledLoadCost = function(t, e) {
                        var n, i, r, o, s, a, l, c, u;
                        return u = 0, ("true" === this.params.controlled_load || "Y" === this.params.controlled_load) && (isNaN(this.params.ele_controlled_load_8h_usage) || (i = parseInt(this.params.ele_controlled_load_8h_usage) / e, (n = h.findWhere(t.controlledloads, {
                            CONTCONTTYPE: "31"
                        })) && (l = parseFloat(n.CONTCONTPRIC), a = parseFloat(n.CONTSUPPPRIC), s = (i * l + a) / 100, u += 365 * s)), isNaN(this.params.ele_controlled_load_18h_usage) || (o = parseInt(this.params.ele_controlled_load_18h_usage) / e, (r = h.findWhere(t.controlledloads, {
                            CONTCONTTYPE: "33"
                        })) && (c = parseFloat(r.CONTCONTPRIC), a = parseFloat(r.CONTSUPPPRIC), s = (o * c + a) / 100, u += 365 * s))), u
                    }, e.prototype._getEnergySelectedTariffs = function(t) {
                        var e;
                        return e = h.where(t.tariffs, {
                            TARIFF_CODE: this.params.tariff_type
                        })
                    }, e.prototype._getDaysBetween = function(t, e) {
                        return t = p(t), e = p(e), p.duration(e - t).asDays()
                    }, e.prototype.getEnergyCostEstimate = function(t) {
                        var e, n, i, r;
                        return i = this._getEnergySelectedTariffs(t), r = 0, h.each(i, function(e) {
                            return function(n) {
                                var i, o;
                                if ("11" === n.TARIFF_CODE) {
                                    if (e._energyIsPositiveValue(e.params.recent_bill)) return o = e._getDaysBetween(e.params.bill_start_date, e.params.bill_end_date), r += e._getElectricitySingleRateCost(o, e.params.ele_peak_usage, t.SUPP.PLANSUPPCHAR, n), r += e._getElectricityControlledLoadCost(t, o);
                                    if (o = e._getDaysBetween(n.SEASON_START, n.SEASON_END), i = e._getEnergyYearlyAvgUsage(t)) return r += e._getElectricitySingleRateCost(o, i, t.SUPP.PLANSUPPCHAR, n)
                                } else if (("Time of Use" === n.TARIFF_NAME || "Flexible Rate" === n.TARIFF_NAME) && e._energyIsPositiveValue(e.params.recent_bill)) return o = e._getDaysBetween(e.params.bill_start_date, e.params.bill_end_date), r += e._getElectricityMultiRateCost(o, e.params.ele_peak_usage, e.params.ele_offpeak_usage, e.params.ele_shldr1_usage, e.params.ele_shldr2_usage, t.SUPP.PLANSUPPCHAR, n)
                            }
                        }(this)), n = "<b>What is the Estimated Cost?</b><br>The Estimated Cost is the yearly charge that would apply for each plan, if your energy usage equalled the estimated energy usage amount. All cost estimates are based on single rate tariffs which are also known as peak tariffs, peak only or anytime tariffs. The Estimated cost is inclusive of any applicable GST, and takes into account 365 days of usage. <br/><b>Are any discounts included?</b><br> The Estimated Cost includes any applicable conditional discounts, including pay on time, direct debit, Efulfillment and any other applicable discounts offered. If you do not meet the conditions of these discounts, your actual bill may be larger than indicated by the Estimated Cost. Please note, energy retailers may limit this discount to the first year or two. <br/><b>What is not included?</b><br> The Estimated Cost does not include: gas and electricity bundle discounts, fees or cash/non-cash incentives, solar panel feed-in-tariff rebates.", n = "<a class='small-text bluepopover' tabindex='0' role='button' data-toggle='popover' data-trigger='focus' data-content='" + n + "' data-html='true' data-placement='bottom'>What's included in the cost estimate?</a>", e = c.prototype._generateMobileTooltipText("<sup>$</sup>" + c.prototype.generateSmallTrailingDecimals(r), r, n)
                    }, e.prototype._getEnergyYearlyAvgUsage = function(t) {
                        var e, n;
                        return n = h.findWhere(t.postcode_usage, {
                            POST_CODE: this.params.postcode,
                            POOL_YN: this.params.pool_yn,
                            HOUSEHOLD_SIZE: this.params.people_in_home,
                            GAS_YN: this.params.gas_yn
                        }), e = null != n ? d.mean([parseFloat(n.USAGE_AUTUMN, parseFloat(n.USAGE_SPRING, parseFloat(n.USAGE_SUMMER, parseFloat(n.USAGE_WINTER))))]) : !1
                    }, e.prototype._getEnergyDiscountIcons = function(t) {
                        var e, n;
                        return n = {
                            direct_debit_special: "PLANDEBTSPEC",
                            email_special: "PLANEMALSPEC",
                            other_special: "PLANOTHRSPEC",
                            payontime_special: "PLANPAYOSPEC"
                        }, e = [], h.each(n, function(n) {
                            return function(i, r) {
                                return n._energyIsPositiveValue(t[i]) ? e.push(r) : void 0
                            }
                        }(this)), e.length < 1 && e.push("other_special"), e
                    }, e.prototype._getEnergySpecialDataGeneric = function(t, e, n) {
                        var i;
                        return i = {}, i.count = 0, i.short_title = e, h.each(t, function(t) {
                            return function(e) {
                                var r;
                                return n(e) ? (i.count++, null == i[r = e.PLANDISCTYPE] && (i[r] = {}), i[e.PLANDISCTYPE][e.DISC_ID] = {
                                    incentive: e.PLANPLANINCE,
                                    period: e.PLANBENEPERD,
                                    amount: (100 * parseFloat(e.PLANDISCAMTT)).toFixed(2),
                                    condition: e.PLANDISCCOND,
                                    type: e.PLANDISCTYPE,
                                    icons: t._getEnergyDiscountIcons(e)
                                }) : void 0
                            }
                        }(this)), 0 === i.count && (i = {}), i
                    }, e.prototype._getEnergyOtherSpecialsData = function(t) {
                        var e;
                        return e = this._getEnergySpecialDataGeneric(t.discounts, "Included Extras", function(t) {
                            return function(e) {
                                return !t._energyDiscountIsValidValue(e.PLANDISCAMTT) && !t._energyDiscountIsValidValue(e.PLANPLANINCE)
                            }
                        }(this))
                    }, e.prototype._getEnergyIncentivesData = function(t) {
                        var e;
                        return e = this._getEnergySpecialDataGeneric(t.discounts, "Specials", function(t) {
                            return function(e) {
                                return t._energyDiscountIsValidValue(e.PLANPLANINCE) && !t._energyDiscountIsValidValue(e.PLANDISCAMTT)
                            }
                        }(this))
                    }, e.prototype._getEnergyDiscountsData = function(t) {
                        var e;
                        return e = this._getEnergySpecialDataGeneric(t.discounts, "Discounts Available", function(t) {
                            return function(e) {
                                return t._energyDiscountIsValidValue(e.PLANDISCAMTT)
                            }
                        }(this))
                    }, e.prototype.getEnergyIncentives = function(t) {
                        var e, n, i;
                        return e = this._getEnergyIncentivesData(t.SUPP), i = "", n = !0, h.each(e, function(t) {
                            return (h.isArray(t) || h.isObject(t)) && h.each(t, function(t) {
                                return n = !1, i = "" + i + t.incentive + "<br/>"
                            }), n ? i = "" : void 0
                        }), i
                    }, e.prototype._getEnergyHasDiscountType = function(t, e) {
                        var n;
                        return n = h.countBy(t, function(t) {
                            return "Yes" === t[e]
                        })["true"] || 0, n > 0
                    }, e.prototype.getEnergyDetailsHasPayOnTimeDiscount = function(t) {
                        var e;
                        return e = this._getEnergyHasDiscountType(t.SUPP.discounts, "PLANPAYOSPEC"), c.prototype.getTickCross(e ? "Yes" : "No")
                    }, e.prototype.getEnergyDetailsHasEmailDiscount = function(t) {
                        var e;
                        return e = this._getEnergyHasDiscountType(t.SUPP.discounts, "PLANEMALSPEC"), c.prototype.getTickCross(e ? "Yes" : "No")
                    }, e.prototype.getEnergyDetailsHasOtherDiscount = function(t) {
                        var e;
                        return e = this._getEnergyHasDiscountType(t.SUPP.discounts, "PLANOTHRSPEC"), c.prototype.getTickCross(e ? "Yes" : "No")
                    }, e.prototype.getEnergyDetailsHasDirectDebitDiscount = function(t) {
                        var e;
                        return e = this._getEnergyHasDiscountType(t.SUPP.discounts, "PLANDEBTSPEC"), c.prototype.getTickCross(e ? "Yes" : "No")
                    }, e.prototype.getEnergyDetailsTariffInfo = function(t) {
                        var e, n;
                        return n = parseFloat(t.SUPP.PLANSUPPCHAR).toFixed(2), e = "</div></div>", e = "" + e + "<div class='row tariffs'>", e = "" + e + "<div class='col-xs-8 field-label'>Daily Supply Charge</div>", e = "" + e + "<div class='col-xs-4 field-value'>" + n + " <sup>&#162;</sup>/<sub>day</sub></div></div>\n", h.each(t.SUPP.tariffs, function(t) {
                            var n, i, r;
                            return r = t.TARIFF_NAME, n = r.toLowerCase().replace(/\s+/g, "-"), i = parseFloat(t.USAGPERICOST).toFixed(2), e = "" + e + "<div class='row tariffs'>", e = "" + e + "<div class='col-xs-8 field-label'>" + r + "</div>", e = "" + e + "<div class='col-xs-4 field-value'>" + i + " <sup>&#162;</sup>/<sub>kWh</sub></div></div>\n"
                        }), e
                    }, e.prototype.getEnergyCompareTariffInfo = function(t) {
                        var e, n, i, r;
                        return r = parseFloat(t.SUPP.PLANSUPPCHAR).toFixed(2), i = !0, e = i === !0 ? "odd" : "even", i = !i, n = "", n = "" + n + "<div class='row tariffs " + e + "'>", n = "" + n + "<div class='col-xs-8 field-label'>Daily Supply Charge</div>", n = "" + n + "<div class='col-xs-4 field-value'>" + r + " <sup>&#162;</sup>/<sub>day</sub></div></div>\n", h.each(t.SUPP.tariffs, function(t) {
                            var r, o, s;
                            return s = t.TARIFF_NAME, r = s.toLowerCase().replace(/\s+/g, "-"), o = parseFloat(t.USAGPERICOST).toFixed(2), e = i === !0 ? "odd" : "even", i = !i, n = "" + n + "<div class='row tariffs " + e + "'>", n = "" + n + "<div class='col-xs-8 field-label'>" + s + "</div>", n = "" + n + "<div class='col-xs-4 field-value'>" + o + " <sup>&#162;</sup>/<sub>kWh</sub></div></div>\n"
                        }), n
                    }, e.prototype.getEnergyCompareTariffSingle = function(t) {
                        var e, n, i, r, o;
                        return i = h.findWhere(t.SUPP.tariffs, {
                            TARIFF_CODE: "11"
                        }), i ? (o = i.TARIFF_NAME, e = o.toLowerCase().replace(/\s+/g, "-"), r = parseFloat(i.USAGPERICOST).toFixed(2), n = "" + r + " <sup>&#162;</sup>/<sub>kWh</sub>") : n = "<span value='0' class='fa fa-minus color-light-grey'></span>", n
                    }, e.prototype.getEnergyCompareSupplyCharge = function(t) {
                        var e, n, i, r;
                        return r = "Plan Supply Charge", e = r.toLowerCase().replace(/\s+/g, "-"), i = parseFloat(t.SUPP.PLANSUPPCHAR).toFixed(2), n = "" + i + " <sup>&#162;</sup>/<sub>kWh</sub>"
                    }, e.prototype.getEnergyCompareTariffFlexible = function(t) {
                        var e, n, i, r, o;
                        return i = h.findWhere(t.SUPP.tariffs, {
                            TARIFF_CODE: "12"
                        }), i ? (o = i.TARIFF_NAME, e = o.toLowerCase().replace(/\s+/g, "-"), r = parseFloat(i.USAGPERICOST).toFixed(2), n = "" + r + " <sup>&#162;</sup>/<sub>kWh</sub>") : n = "<span value='0' class='fa fa-minus color-light-grey'></span>", n
                    }, e.prototype.getEnergyDetailsFees = function(t) {
                        var e, n;
                        return e = this._getEnergyFees(t), n = "</div></div>", h.each(e, function(t) {
                            var e;
                            return e = parseFloat(t.value).toFixed(2), n = "" + n + "<div class='row fees'>", n = "" + n + "<div class='col-xs-8 field-label'>" + t.name + "</div>", n = "" + n + "<div class='col-xs-4 field-value'>", n = "Dollars" === t.units ? "" + n + "<sup>$</sup> " + e : "Percentage" === t.units ? "" + n + e.replace("%", "") + "<sub>%</sub>" : "" + n + e, n = "" + n + "</div></div>"
                        }), n
                    }, e.prototype.getEnergyCompareFees = function(t) {
                        var e, n, i;
                        return e = this._getEnergyFees(t), i = !0, n = "", h.each(e, function(t) {
                            var e, r;
                            return r = parseFloat(t.value.replace(/[^\.\d]/, "")).toFixed(2), e = i === !0 ? "odd" : "even", i = !i, n = "" + n + "<div class='row fees " + e + "'>", n = "" + n + "<div class='col-xs-8 field-label'>" + t.name + "</div>", n = "" + n + "<div class='col-xs-4 field-value'>", n = "Dollars" === t.units ? "" + n + "<sup>$</sup> " + r : "Percentage" === t.units ? "" + n + r.replace("%", "") + "<sub>%</sub>" : "" + n + r, n = "" + n + "</div></div>"
                        }), n
                    }, e.prototype.getEnergyCompareProductName = function(t) {
                        var e;
                        return e = t.SUPP.PRODUCT_SECOND_NAME || t.SUPP.PLAN_NAME
                    }, e.prototype.getLifeIncomeProtection = function(t) {
                        var e, n;
                        return n = t.SUPP, e = "Yes" === n.DEATAUTO || "Yes" === n.DEATTAIL ? "Yes" === n.INCOAVAI ? c.prototype.getTickCross("Y") : "<span value='0.5'>Life Cover Only</span>" : c.prototype.getTickCross("N")
                    }, e.prototype._getBlueStarRating = function(t, e, n, i, r, o) {
                        var s, a, l, c, d, p;
                        return null == i && (i = 2), null == r && (r = "Not yet rated"), null == o && (o = null != (null != u ? u.base_url : void 0) ? u.base_url : ""), a = t, 0 > t || null === t || "null" === t || isNaN(t) ? (l = i, t = 0, p = r, c = p) : (p = "blue_" + t + " Star Rating", l = t, c = "<img style='width: auto; height: auto;' src='" + o + "assets/image/blue_" + t + "star_medium.png'/>"), d = "<div title='" + p + "' value='" + l + "' class='starlogo' style='width: auto; height: auto;' data-original-value='" + a + "'>", d = "" + d + " " + c + " </div>", s = this.templates.blue_sr_intable({
                            starVal: l,
                            prodLink: e,
                            companyLogo: n,
                            stars: d
                        })
                    }, e.prototype.getEnergyStarRating = function(t, e, n) {
                        var i, r, s;
                        return s = Number(null != (null != n ? n.calc_tag : void 0) || null != (null != n ? n.tag : void 0) ? t.SUPP[n.calc_tag || n.tag] : e), r = (null != n ? n.notrated_value : void 0) || 2, i = (null != n ? n.notrated_text : void 0) || "Not yet rated", this._getBlueStarRating(s, c.prototype.getEnergyProdLink("", t), o.prototype.blueCompanyLogo(t.SUPP.CO_CODE, t.SUPP.COMPANY_NAME, null, null, "http://cdn.canstarblue.com.au/"), r, i)
                    }, e.prototype.getMobileStarRating = function(t, e, n) {
                        var i, r, s, a, l;
                        return l = Number(null != (null != n ? n.calc_tag : void 0) ? t.SUPP[n.calc_tag] : e), s = (null != n ? n.notrated_value : void 0) || 2, r = (null != n ? n.notrated_text : void 0) || "Not yet rated", a = c.prototype.getMobileWOProdLink("", t), i = o.prototype.blueCompanyLogo(t.SUPP.CO_CODE, t.SUPP.COMPANY_NAME, null, null, "http://cdn.canstarblue.com.au/"), this._getBlueStarRating(l, a, i, s, r)
                    }, e
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Validators", ["require"], function() {
                var e;
                return e = function() {
                    function e() {
                        this.hasMobileOrEmail = t(this.hasMobileOrEmail, this)
                    }
                    return e.prototype.hasMobileOrEmail = function(t) {
                        return t.mobile || t.email ? !0 : !1
                    }, e
                }()
            })
        }.call(this),
        function(t, e) {
            "function" == typeof define && define.amd ? define("backbone.courier", ["underscore", "backbone", "jquery"], e) : "undefined" != typeof exports ? module.exports = e(require("underscore"), require("backbone"), require("backbone").$) : e(t._, t.Backbone, t.jQuery || t.Zepto || t.$)
        }(this, function(t, e, n) {
            var i = /^(\S+)\s*(.*)$/,
                r = t.isFunction(n) ? n("body")[0] : null;
            return e.Courier = {}, e.Courier.add = function(e) {
                function n(e) {
                    t.isFunction(e.$el.data) && !e.$el.data("view") && e.$el.data("view", e)
                }

                function o(e, n, r) {
                    var o = [];
                    for (var s in e) {
                        var a = s.match(i),
                            l = a[1],
                            c = a[2],
                            u = new RegExp("^" + l.replace("*", "[\\w]*") + "$");
                        u.test(n.name) && ("" === c || r._getChildViewNamed(c) === n.source) && o.push({
                            eventName: l,
                            subviewName: c,
                            value: e[s]
                        })
                    }
                    return o.length > 1 && (o = t.sortBy(o, function(t) {
                        var e = t.eventName.replace("*", ""),
                            n = "" !== t.subviewName,
                            i = (n ? 1e3 : 0) + e.length;
                        return -i
                    })), o.length ? o[0].value : null
                }
                var s = {
                    setElement: e.setElement
                };
                e.spawn = function(n, i) {
                    if (t.isString(n)) n = {
                        name: n,
                        data: i
                    };
                    else if (t.isUndefined(n.name)) throw new Error("Undefined message name.");
                    n.source = e, n.data = n.data || {}, this.trigger(n.name, n.data);
                    for (var r, s, a = "!" === n.name.charAt(n.name.length - 1), l = this._getParentView(); l;) {
                        if (t.isObject(l.onMessages) && (s = o(l.onMessages, n, l), null !== s)) {
                            var c = s;
                            if (t.isFunction(c) || (c = l[s]), !c) throw new Error('Method "' + s + '" does not exist');
                            var u = c.call(l, n.data, n.source, n.name);
                            if (a) return u
                        }
                        r = a;
                        var d = t.result(l, "passMessages");
                        if (t.isObject(d) && (s = o(d, n, l), null !== s)) {
                            if ("." === s);
                            else {
                                if (!t.isString(s)) throw new TypeError("Values of passMessages hash should be strings.");
                                n.name = s
                            }
                            r = !0
                        }
                        if (!r) break;
                        n.source = l, l = l._getParentView()
                    }
                    if (a) throw new Error('Round trip message "' + n.name + '" was not handled. All round trip messages must be handled.')
                }, t.isFunction(e._getParentView) || (e._getParentView = function() {
                    for (var e = null, n = this.$el.parent(); n.length > 0 && n[0] !== r;) {
                        var i = n.data("view");
                        if (i && t.isFunction(i.render)) {
                            e = i;
                            break
                        }
                        n = n.parent()
                    }
                    return e
                }), t.isFunction(e._getChildViewNamed) || (e._getChildViewNamed = function(e) {
                    return t.isObject(this.subviews) ? this.subviews[e] : null
                }), e.setElement = function(t, i) {
                    var r = s.setElement.call(this, t, i);
                    return n(e), r
                }, e.$el && n(e)
            }, e.Courier
        }),
        function() {
            define("libraries/Mobile", ["require", "jquery"], function(t) {
                var e, n;
                return e = t("jquery"), n = function() {
                    function t() {}
                    return t.prototype.setMobileViewPort = function() {
                        return e("meta[name=viewport]").length || e("head").append(e('<meta name="viewport">')), e("meta[name=viewport]").attr("content", "width=device-width, initial-scale=1.0, user-scalable=yes")
                    }, t.prototype.onMobile = function() {
                        return e(window).width() < 641
                    }, t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Errors", ["require"], function() {
                var e;
                return e = function() {
                    function e() {
                        this.setErrorHandler = t(this.setErrorHandler, this)
                    }
                    return e.prototype.getScriptName = function() {
                        var t, e, n, i, r, o;
                        return e = new Error, i = void 0, n = new RegExp(/.+\/(.*?):\d+(:\d+)*$/), t = new RegExp(/getScriptName \(.+\/(.*):\d+:\d+\)/), (i = n.exec(null != (r = e.stack) ? r.trim() : void 0)) && "" !== i[1] ? i[1] : (i = t.exec(null != (o = e.stack) ? o.trim() : void 0)) ? i[1] : void 0 !== e.fileName ? e.fileName : void 0
                    }, e.prototype.getScriptFromStack = function(t) {
                        var e, n;
                        return n = new RegExp(/.+\/(.*?):\d+(:\d+)/), e = n.exec(null != t ? t.trim() : void 0), e && "" !== e[1] ? e[1] : void 0
                    }, e.prototype.setErrorHandler = function(t) {
                        return window.onerror = function(n, i, r, o, s) {
                            var a, l;
                            if (null != (null != s ? s.stack : void 0)) return l = e.prototype.getScriptName(), a = e.prototype.getScriptFromStack(s.stack), (null != i ? i.indexOf(l) : void 0) > -1 || (null != a ? a.indexOf(l) : void 0) > -1 ? t.apply(this, arguments) : void 0
                        }
                    }, e
                }()
            })
        }.call(this), define("text-cns!components/cns_overlay/tmpl_cns_overlay.html", [], function() {
            return '<div class="cns-content-container">\n    <div class="">\n        <% if (data.text !== null && data.text != \'\') { %>\n            <h3><%= data.text %></h3>\n        <% } %>\n\n        <img src="<%= canstar_widget.base_url %>assets/image/cns-spinner.gif" alt="Loading..." width="193px" height="20px" />\n    </div>\n</div>'
        }), define("text-cns!widgets/search/themes/blue_product/cns_overlay/tmpl_cns_overlay.html", [], function() {
            return '<div class="cns-content-container">\n    <div class="">\n        <% if (data.text !== null && data.text != \'\') { %>\n            <h3><%= data.text %></h3>\n        <% } %>\n\n        <img src="https://widgets.canstar.com.au/widgets/assets/image/cns-spinner-blue.gif" alt="Loading..." width="193px" height="20px" />\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_brand/cns_overlay/tmpl_cns_overlay.html", [], function() {
            return '<div class="cns-content-container">\n    <div class="">\n        <% if (data.text !== null && data.text != \'\') { %>\n            <h3><%= data.text %></h3>\n        <% } %>\n\n        <img src="https://widgets.canstar.com.au/widgets/assets/image/cns-spinner-blue.gif" alt="Loading..." width="193px" height="20px" />\n    </div>\n</div>\n'
        }), define("text-cns!widgets/view_search/themes/view/cns_overlay/tmpl_cns_overlay.html", [], function() {
            return '<div class="cns-content-container">\n    <div class="">\n        <h3>Loading products</h3>\n        <img src="<%= canstar_widget.base_url %>assets/image/cns-spinner.gif" alt="Loading..." width="193px" height="20px" />\n    </div>\n</div>'
        }), define("text-cns!widgets/search/themes/blue/cns_overlay/tmpl_cns_overlay.html", [], function() {
            return '<div class="cns-content-container">\n    <div class="">\n        <% if (data.text !== null && data.text != \'\') { %>\n            <h3><%= data.text %></h3>\n        <% } %>\n\n        <img src="<%= canstar_widget.base_url %>assets/image/cns-spinner-blue.gif" alt="Loading..." width="193px" height="20px" />\n    </div>\n</div>'
        }),
        function() {
            define("components/cns_overlay/templates", ["require", "text-cns!components/cns_overlay/tmpl_cns_overlay.html", "text-cns!widgets/search/themes/blue_product/cns_overlay/tmpl_cns_overlay.html", "text-cns!widgets/search/themes/blue_brand/cns_overlay/tmpl_cns_overlay.html", "text-cns!widgets/view_search/themes/view/cns_overlay/tmpl_cns_overlay.html", "text-cns!widgets/search/themes/blue/cns_overlay/tmpl_cns_overlay.html"], function(t) {
                return t("text-cns!components/cns_overlay/tmpl_cns_overlay.html"), t("text-cns!widgets/search/themes/blue_product/cns_overlay/tmpl_cns_overlay.html"), t("text-cns!widgets/search/themes/blue_brand/cns_overlay/tmpl_cns_overlay.html"), t("text-cns!widgets/view_search/themes/view/cns_overlay/tmpl_cns_overlay.html"), t("text-cns!widgets/search/themes/blue/cns_overlay/tmpl_cns_overlay.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/cns_overlay/cns_overlay", ["require", "jquery", "underscore", "libraries/Loader", "backbone", "components/base/View", "libraries/Errors", "components/cns_overlay/templates"], function(e) {
                var i, r, o, s, a, l, c;
                return i = e("jquery"), c = e("underscore"), a = e("libraries/Loader"), r = e("backbone"), l = e("components/base/View"), s = e("libraries/Errors"), e("components/cns_overlay/templates"), o = function(e) {
                    function r() {
                        return this.hide = t(this.hide, this), this.render = t(this.render, this), this.onError = t(this.onError, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.path = "components/cns_overlay", r.prototype.id = "cns-loading-overlay", r.stylesheets = ["components/cns_overlay/cns_overlay.css"], r.prototype.templates = {
                        overlay: "!!tmpl_cns_overlay.html"
                    }, r.prototype.initialize = function(t) {
                        return null == t && (t = {}), s.prototype.setErrorHandler(this.onError), c.defaults(t, {
                            text: "Finding products that match your search"
                        }), this.render(t)
                    }, r.prototype.onError = function() {
                        return this.remove()
                    }, r.prototype.render = function(t) {
                        return this.$el.append(this.templates.overlay({
                            data: t
                        })), i("body").append(this.el)
                    }, r.prototype.hide = function() {
                        return i.when(this.hasInitialized).then(function(t) {
                            return function() {
                                return i("#cns-loading-overlay").fadeOut(200), setTimeout(function() {
                                    return t.remove()
                                }, 500)
                            }
                        }(this))
                    }, r
                }(l)
            })
        }.call(this),
        function() {
            define("extensions/jquery-transition/jquery-transition", ["jquery"], function(t) {
                return t.support.transition = function() {
                    var t;
                    return t = function() {
                        var t, e, n;
                        t = document.createElement("canstar"), n = {
                            WebkitTransition: "webkitTransitionEnd",
                            MozTransition: "transitionend",
                            OTransition: "oTransitionEnd otransitionend",
                            transition: "transitionend"
                        }, e = void 0;
                        for (e in n)
                            if (e = e, void 0 !== t.style[e]) return n[e]
                    }(), t && {
                        end: t
                    }
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/base/BaseView", ["require", "jquery", "underscore", "backbone", "backbone.courier", "libraries/Mobile", "components/cns_overlay/cns_overlay", "extensions/jquery-transition/jquery-transition"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), l = e("underscore"), r = e("backbone"), e("backbone.courier"), a = e("libraries/Mobile"), s = e("components/cns_overlay/cns_overlay"), e("extensions/jquery-transition/jquery-transition"), o = function(e) {
                    function o() {
                        this.showError = t(this.showError, this), this.hideOverlay = t(this.hideOverlay, this), this.showOverlay = t(this.showOverlay, this), this.setupSyncListeners = t(this.setupSyncListeners, this), this.transitionOut = t(this.transitionOut, this), this.transitionIn = t(this.transitionIn, this), this.assign = t(this.assign, this), this.close = t(this.close, this), r.Courier.add(this), this.responsive === !0 && (a.prototype.setMobileViewPort(), i("body").addClass("cns-responsive")), o.__super__.constructor.apply(this, arguments)
                    }
                    return n(o, e), o.prototype.responsive = !1, o.prototype.overlayCount = 0, o.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, o.prototype.assign = function(t, e) {
                        return t.delegateEvents(), t.render(), this.$(e).get(0) !== t.el ? this.$(e).replaceWith(t.el) : void 0
                    }, o.prototype.transitionIn = function(t) {
                        var e;
                        return e = function(e) {
                            return function() {
                                var n;
                                return e.$el.addClass("is-visible"), e.className += " is-visible", i.support.transition ? (n = setTimeout(function() {
                                    return "function" == typeof t ? t() : void 0
                                }, 250), e.$el.one(i.support.transition.end, function() {
                                    return clearTimeout(n), "function" == typeof t ? t() : void 0
                                })) : "function" == typeof t ? t() : void 0
                            }
                        }(this), l.delay(e, 20)
                    }, o.prototype.transitionOut = function(t) {
                        var e;
                        return this.$el.removeClass("is-visible"), this.className = this.className.replace(" is-visible", ""), i.support.transition ? (e = setTimeout(function() {
                            return "function" == typeof t ? t() : void 0
                        }, 250), this.$el.one(i.support.transition.end, function() {
                            return clearTimeout(e), "function" == typeof t ? t() : void 0
                        })) : "function" == typeof t ? t() : void 0
                    }, o.prototype.setupSyncListeners = function(t) {
                        return null == t && (t = []), this.overlayCount = 0, l.each(t, function(t) {
                            return function(e) {
                                return t.listenTo(e, "request", t.showOverlay), t.listenTo(e, "sync", t.hideOverlay), t.listenTo(e, "error", t.hideOverlay), t.listenTo(e, "destroy", t.hideOverlay)
                            }
                        }(this))
                    }, o.prototype.showOverlay = function() {
                        return 0 === this.overlayCount && (this.overlay = new s({
                            text: "Loading"
                        })), this.overlayCount++
                    }, o.prototype.hideOverlay = function() {
                        var t;
                        return 1 === this.overlayCount && null != (t = this.overlay) && t.hide(), this.overlayCount--
                    }, o.prototype.showError = function(t) {
                        return this.$("#invalid span").html(t).parent().removeClass("hidden")
                    }, o
                }(r.View)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/select/OptionView", ["require", "jquery", "underscore", "backbone", "components/base/BaseView"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), a = e("underscore"), r = e("backbone"), o = e("components/base/BaseView"), s = function(e) {
                    function i() {
                        return this.onClose = t(this.onClose, this), this.render = t(this.render, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.tagName = "option", i.prototype.render = function() {
                        return this.el.value = this.model.get("value"), this.$el.html(this.model.get("description")), this.model.get("selected") === !0 && this.$el.attr("selected", !0), this.el
                    }, i.prototype.onClose = function() {
                        return this.model.unbind()
                    }, i
                }(o)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/select/SelectView", ["require", "jquery", "underscore", "backbone", "components/base/BaseView", "components/select/OptionView"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), l = e("underscore"), r = e("backbone"), o = e("components/base/BaseView"), s = e("components/select/OptionView"), a = function(e) {
                    function r() {
                        return this.onClose = t(this.onClose, this), this.getValue = t(this.getValue, this), this.selectChanged = t(this.selectChanged, this), this.selectClicked = t(this.selectClicked, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.tagName = "select", r.prototype.events = {
                        change: "selectChanged",
                        click: "selectClicked"
                    }, r.prototype.initialize = function() {
                        return this.listenTo(this.model, "reset", this.render)
                    }, r.prototype.render = function() {
                        var t;
                        return null == this.model.findWhere({
                            selected: !0
                        }) && null != (t = this.model.models[0]) && t.set({
                            selected: !0
                        }), this.$el.html(""), l.each(this.model.models, function(t) {
                            return function(e) {
                                return t.$el.append(new s({
                                    model: e
                                }).render())
                            }
                        }(this)), null != this.options.name && this.$el.attr("name", this.options.name), null != this.options.id && this.$el.attr("id", this.options.id), i.inArray(this.$el.val(), ["", null]) >= 0 && this.$el.addClass("empty"), this.el
                    }, r.prototype.selectClicked = function() {}, r.prototype.selectChanged = function(t) {
                        var e;
                        return e = isNaN(t.target.value) ? t.target.value : Number(t.target.value), this.model.findWhere({
                            selected: !0
                        }).set({
                            selected: !1
                        }, {
                            silent: !0
                        }), this.model.findWhere({
                            value: e
                        }).set({
                            selected: !0
                        }), this.$el.toggleClass("empty", i.inArray(this.$el.val(), ["", null]) >= 0), this.$el.blur(), t.preventDefault()
                    }, r.prototype.getValue = function() {
                        return this.model.findWhere({
                            selected: !0
                        }).get("value")
                    }, r.prototype.onClose = function() {
                        return this.model.unbind()
                    }, r
                }(o)
            })
        }.call(this), define("text!components/form/tmpl_text_input_view.html", [], function() {
            return '<div class="form-group">\n  <label class="<%= data.placeholder ? \'sr-only\' : \'\' %>" for="<%= data.name %>"><%= data.description %></label>\n  <input type="<%= data.inputType || \'text\' %>" class="form-control" name="<%= data.name %>" id="<%= data.name %>" placeholder="<%= data.placeholder ? data.description : data.hint %>">\n</div>\n'
        }), define("text!components/form/tmpl_select_input_view.html", [], function() {
            return '<% if(!data.placeholder) {%>\n<label class="control-label" for="<%= data.name %>"><%= data.description %><%= data.required ? \'*\' : \'\' %></label>\n<% } %>\n<div class="select_container"></div>'
        }), define("text!components/form/tmpl_checkbox_input_view.html", [], function() {
            return '<div class="checkbox"><label><input type="checkbox" id="<%= data.name %>" name="<%= data.name %>"></input><%= data.description %></label></div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/form/InputView", ["require", "jquery", "underscore", "backbone", "components/base/BaseView", "components/select/SelectView", "text!components/form/tmpl_text_input_view.html", "text!components/form/tmpl_select_input_view.html", "text!components/form/tmpl_checkbox_input_view.html"], function(e) {
                var i, r, o, s, a, l, c, u, d;
                return i = e("jquery"), d = e("underscore"), r = e("backbone"), o = e("components/base/BaseView"), a = e("components/select/SelectView"), u = e("text!components/form/tmpl_text_input_view.html"), c = e("text!components/form/tmpl_select_input_view.html"), l = e("text!components/form/tmpl_checkbox_input_view.html"), s = function(e) {
                    function o() {
                        return this.onClose = t(this.onClose, this), this.render = t(this.render, this), o.__super__.constructor.apply(this, arguments)
                    }
                    return n(o, e), o.prototype.className = "control-group", o.prototype.initialize = function(t) {
                        return this.options = t, null != this.options["enum"] && "object" == typeof this.options["enum"] ? (this.select_options = [], this.select_options.push({
                            value: "",
                            description: this.options.placeholder ? this.options.description : ""
                        }), this.template = d.template(c), d.each(this.options["enum"], function(t) {
                            return function(e) {
                                return t.select_options.push({
                                    value: e,
                                    description: e
                                })
                            }
                        }(this)), this.select_model = new r.Collection(this.select_options)) : this.template = d.template("checkbox" === t.format ? l : u)
                    }, o.prototype.render = function() {
                        return this.$el.html(this.template({
                            data: this.options
                        })), null != this.select_options && (this.select_view = new a({
                            model: this.select_model,
                            name: this.options.name
                        }), i(".select_container", this.el).html(this.select_view.render())), this.el
                    }, o.prototype.onClose = function() {
                        var t;
                        return null != (t = this.select_view) ? t.close() : void 0
                    }, o
                }(o)
            })
        }.call(this), define("text!components/form/tmpl_form.html", [], function() {
            return '<div class="form" >\n	<h2><%= data.form_title %></h2>\n	<p><%= data.form_desc %></p>\n	<form method="POST" action="<%= data.form_action %>" class="form-horizontal" role="form">\n		<p><%= data.form_header %></p>\n		<div class="inputs"></div>\n		<div id="contact_time_select_container"></div>\n		<div class="submit-container control-group">\n			<input id="submit" type="submit" class="button_submit text-center" value="Contact me">\n		</div>\n		<div class="alert validation alert-error">The following fields were invalid<br/><br/> <span></span></div>\n		<div class="alert submission alert-error">Something went wrong with your submission<br/><br/> <span></span></div>\n	</form>\n</div>\n<div class="alert alert-success"><%= data.submitted_text %></div>'
        }), define("text!components/form/tmpl_form_header.html", [], function() {
            return '<div class="form_header"><%= name %></div>\n'
        }),
        function() {
            function t() {
                return this instanceof t ? (this.coerceType = {}, this.fieldType = e(i), this.fieldValidate = e(o), this.fieldFormat = e(r), this.defaultOptions = e(c), void(this.schema = {})) : new t
            }
            var e = function(t) {
                    if (null === t || "object" != typeof t) return t;
                    var n;
                    if (t instanceof Date) return n = new Date, n.setTime(t.getTime()), n;
                    if (t instanceof RegExp) return n = new RegExp(t);
                    if (t instanceof Array) {
                        n = [];
                        for (var i = 0, r = t.length; r > i; i++) n[i] = e(t[i]);
                        return n
                    }
                    if (t instanceof Object) {
                        n = {}, n = Object.create(Object.getPrototypeOf(t));
                        for (var o in t) t.hasOwnProperty(o) && (n[o] = e(t[o]));
                        return n
                    }
                    throw new Error("Unable to clone object!")
                },
                n = {
                    type: !0,
                    not: !0,
                    anyOf: !0,
                    allOf: !0,
                    oneOf: !0,
                    $ref: !0,
                    $schema: !0,
                    id: !0,
                    exclusiveMaximum: !0,
                    exclusiveMininum: !0,
                    properties: !0,
                    patternProperties: !0,
                    additionalProperties: !0,
                    items: !0,
                    additionalItems: !0,
                    required: !0,
                    "default": !0,
                    title: !0,
                    description: !0,
                    definitions: !0,
                    dependencies: !0
                },
                i = {
                    "null": function(t) {
                        return null === t
                    },
                    string: function(t) {
                        return "string" == typeof t
                    },
                    "boolean": function(t) {
                        return "boolean" == typeof t
                    },
                    number: function(t) {
                        return "number" == typeof t && !isNaN(t)
                    },
                    integer: function(t) {
                        return "number" == typeof t && t % 1 === 0
                    },
                    object: function(t) {
                        return t && "object" == typeof t && !Array.isArray(t)
                    },
                    array: function(t) {
                        return Array.isArray(t)
                    },
                    date: function(t) {
                        return t instanceof Date
                    }
                },
                r = {
                    alpha: function(t) {
                        return /^[a-zA-Z]+$/.test(t)
                    },
                    alphanumeric: function(t) {
                        return /^[a-zA-Z0-9]+$/.test(t)
                    },
                    identifier: function(t) {
                        return /^[-_a-zA-Z0-9]+$/.test(t)
                    },
                    hexadecimal: function(t) {
                        return /^[a-fA-F0-9]+$/.test(t)
                    },
                    numeric: function(t) {
                        return /^[0-9]+$/.test(t)
                    },
                    "date-time": function(t) {
                        return !isNaN(Date.parse(t)) && -1 === t.indexOf("/")
                    },
                    uppercase: function(t) {
                        return t === t.toUpperCase()
                    },
                    lowercase: function(t) {
                        return t === t.toLowerCase()
                    },
                    hostname: function(t) {
                        return t.length < 256 && /^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/.test(t)
                    },
                    uri: function(t) {
                        return /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/.test(t)
                    },
                    email: function(t) {
                        return /^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/.test(t)
                    },
                    ipv4: function(t) {
                        if (/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/.test(t)) {
                            var e = t.split(".").sort();
                            if (e[3] <= 255) return !0
                        }
                        return !1
                    },
                    ipv6: function(t) {
                        return /^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/.test(t)
                    }
                },
                o = {
                    readOnly: function() {
                        return !1
                    },
                    minimum: function(t, e, n) {
                        return !(e > t || n.exclusiveMinimum && e >= t)
                    },
                    maximum: function(t, e, n) {
                        return !(t > e || n.exclusiveMaximum && t >= e)
                    },
                    multipleOf: function(t, e) {
                        return t / e % 1 === 0 || "number" != typeof t
                    },
                    pattern: function(t, e) {
                        if ("string" != typeof t) return !0;
                        var n, i;
                        "string" == typeof e ? n = e : (n = e[0], i = e[1]);
                        var r = new RegExp(n, i);
                        return r.test(t)
                    },
                    minLength: function(t, e) {
                        return t.length >= e || "string" != typeof t
                    },
                    maxLength: function(t, e) {
                        return t.length <= e || "string" != typeof t
                    },
                    minItems: function(t, e) {
                        return t.length >= e || !Array.isArray(t)
                    },
                    maxItems: function(t, e) {
                        return t.length <= e || !Array.isArray(t)
                    },
                    uniqueItems: function(t) {
                        for (var e, n = {}, i = 0, r = t.length; r > i; i++) {
                            if (e = JSON.stringify(t[i]), n.hasOwnProperty(e)) return !1;
                            n[e] = !0
                        }
                        return !0
                    },
                    minProperties: function(t, e) {
                        if ("object" != typeof t) return !0;
                        var n = 0;
                        for (var i in t) t.hasOwnProperty(i) && (n += 1);
                        return n >= e
                    },
                    maxProperties: function(t, e) {
                        if ("object" != typeof t) return !0;
                        var n = 0;
                        for (var i in t) t.hasOwnProperty(i) && (n += 1);
                        return e >= n
                    },
                    "enum": function(t, e) {
                        var n, i, r;
                        if ("object" == typeof t) {
                            for (r = JSON.stringify(t), n = 0, i = e.length; i > n; n++)
                                if (r === JSON.stringify(e[n])) return !0
                        } else
                            for (n = 0, i = e.length; i > n; n++)
                                if (t === e[n]) return !0; return !1
                    }
                },
                s = function(t) {
                    return -1 === t.indexOf("://") ? t : t.split("#")[0]
                },
                a = function(t, e, n) {
                    var i, r, o, s;
                    if ("#" === n) return e ? [e, e] : null;
                    if (o = n.indexOf("#"), -1 === o) return t.schema.hasOwnProperty(n) ? [t.schema[n], t.schema[n]] : null;
                    if (o > 0) {
                        if (s = n.substr(0, o), n = n.substr(o + 1), t.schema.hasOwnProperty(s)) e = t.schema[s];
                        else if (e && e.id !== s) return null
                    } else {
                        if (!e) return null;
                        n = n.substr(1)
                    }
                    if ("" === n) return [e, e];
                    if ("/" === n.charAt(0)) {
                        for (n = n.substr(1), r = e, i = n.split("/"); i.length > 0;) {
                            if (!r.hasOwnProperty(i[0])) return null;
                            r = r[i[0]], i.shift()
                        }
                        return [e, r]
                    }
                    return null
                },
                l = function(t, i, r, o, s, c) {
                    var u, d, p, h, f, m, g, v, _, y, b, w, P = !1,
                        S = {},
                        C = {};
                    if (y = o[s], r.hasOwnProperty("$ref")) return _ = a(t, i, r.$ref), _ ? l(t, _[0], _[1], o, s, c) : {
                        $ref: r.$ref
                    };
                    if (r.hasOwnProperty("type"))
                        if ("string" == typeof r.type) {
                            if (t.coerceType.hasOwnProperty(r.type) && (y = o[s] = t.coerceType[r.type](y)), !t.fieldType[r.type](y)) return {
                                type: r.type
                            }
                        } else {
                            for (P = !0, m = 0, g = r.type.length; g > m && P; m++) t.fieldType[r.type[m]](y) && (P = !1);
                            if (P) return {
                                type: r.type
                            }
                        }
                    if (r.hasOwnProperty("allOf"))
                        for (m = 0, g = r.allOf.length; g > m; m++)
                            if (p = l(t, i, r.allOf[m], o, s, c)) return p;
                    if (r.hasOwnProperty("oneOf")) {
                        for (m = 0, g = r.oneOf.length, v = 0; g > m; m++)
                            if (C[s] = e(y), p = l(t, i, r.oneOf[m], C, s, c)) S = p;
                            else {
                                if (v += 1, v > 1) break;
                                o[s] = C[s]
                            }
                        if (v > 1) return {
                            oneOf: !0
                        };
                        if (1 > v) return S;
                        S = {}
                    }
                    if (r.hasOwnProperty("anyOf")) {
                        for (m = 0, g = r.anyOf.length; g > m; m++)
                            if (C[s] = e(y), p = l(t, i, r.anyOf[m], C, s, c), !p) {
                                o[s] = C[s];
                                break
                            }
                        if (p) return p
                    }
                    if (r.hasOwnProperty("not") && (C[s] = e(y), p = l(t, i, r.not, C, s, c), !p)) return {
                        not: !0
                    };
                    if (r.hasOwnProperty("dependencies"))
                        for (u in r.dependencies)
                            if (r.dependencies.hasOwnProperty(u) && y.hasOwnProperty(u))
                                if (Array.isArray(r.dependencies[u])) {
                                    for (m = 0, g = r.dependencies[u].length; g > m; m++)
                                        if (!y.hasOwnProperty(r.dependencies[u][m])) return {
                                            dependencies: !0
                                        }
                                } else if (p = l(t, i, r.dependencies[u], o, s, c)) return p;
                    if (Array.isArray(y)) {
                        if (r.hasOwnProperty("items"))
                            if (Array.isArray(r.items)) {
                                for (m = 0, g = r.items.length; g > m; m++) p = l(t, i, r.items[m], y, m, c), null !== p && (S[m] = p, P = !0);
                                if (y.length > g && r.hasOwnProperty("additionalItems"))
                                    if ("boolean" == typeof r.additionalItems) {
                                        if (!r.additionalItems) return {
                                            additionalItems: !0
                                        }
                                    } else
                                        for (m = g, g = y.length; g > m; m++) p = l(t, i, r.additionalItems, y, m, c), null !== p && (S[m] = p, P = !0)
                            } else
                                for (m = 0, g = y.length; g > m; m++) p = l(t, i, r.items, y, m, c), null !== p && (S[m] = p, P = !0);
                        else if (r.hasOwnProperty("additionalItems") && "boolean" != typeof r.additionalItems)
                            for (m = 0, g = y.length; g > m; m++) p = l(t, i, r.additionalItems, y, m, c), null !== p && (S[m] = p, P = !0);
                        if (P) return {
                            schema: S
                        }
                    } else {
                        h = [], S = {};
                        for (u in y) y.hasOwnProperty(u) && h.push(u);
                        if (c.checkRequired && r.required)
                            for (m = 0, g = r.required.length; g > m; m++) y.hasOwnProperty(r.required[m]) || (S[r.required[m]] = {
                                required: !0
                            }, P = !0);
                        if (b = r.hasOwnProperty("properties"), w = r.hasOwnProperty("patternProperties"), b || w)
                            for (m = h.length; m--;) {
                                if (f = !1, b && r.properties.hasOwnProperty(h[m]) && (f = !0, p = l(t, i, r.properties[h[m]], y, h[m], c), null !== p && (S[h[m]] = p, P = !0)), w)
                                    for (u in r.patternProperties) r.patternProperties.hasOwnProperty(u) && h[m].match(u) && (f = !0, p = l(t, i, r.patternProperties[u], y, h[m], c), null !== p && (S[h[m]] = p, P = !0));
                                f && h.splice(m, 1)
                            }
                        if (c.useDefault && b && !P)
                            for (u in r.properties) r.properties.hasOwnProperty(u) && !y.hasOwnProperty(u) && r.properties[u].hasOwnProperty("default") && (y[u] = r.properties[u]["default"]);
                        if (c.removeAdditional && b && r.additionalProperties !== !0 && "object" != typeof r.additionalProperties)
                            for (m = 0, g = h.length; g > m; m++) delete y[h[m]];
                        else if (r.hasOwnProperty("additionalProperties"))
                            if ("boolean" == typeof r.additionalProperties) {
                                if (!r.additionalProperties)
                                    for (m = 0, g = h.length; g > m; m++) S[h[m]] = {
                                        additional: !0
                                    }, P = !0
                            } else
                                for (m = 0, g = h.length; g > m; m++) p = l(t, i, r.additionalProperties, y, h[m], c), null !== p && (S[h[m]] = p, P = !0);
                        if (P) return {
                            schema: S
                        }
                    }
                    for (d in r) r.hasOwnProperty(d) && !n.hasOwnProperty(d) && ("format" === d ? t.fieldFormat.hasOwnProperty(r[d]) && !t.fieldFormat[r[d]](y, r, s, c) && (S[d] = !0, P = !0) : t.fieldValidate.hasOwnProperty(d) && !t.fieldValidate[d](y, r[d], r, s, c) && (S[d] = !0, P = !0));
                    return P ? S : null
                },
                c = {
                    useDefault: !0,
                    checkRequired: !0,
                    removeAdditional: !1
                };
            t.prototype = {
                validate: function(t, e, n) {
                    var i, r = null,
                        o = {
                            __root__: e
                        };
                    if ("string" == typeof t) {
                        if (i = a(this, null, t), !i) throw new Error("jjv: could not find schema '" + t + "'.")
                    } else i = [t, t];
                    if (n)
                        for (var s in this.defaultOptions) this.defaultOptions.hasOwnProperty(s) && !n.hasOwnProperty(s) && (n[s] = this.defaultOptions[s]);
                    else n = this.defaultOptions;
                    return r = l(this, i[0], i[1], o, "__root__", n), r ? {
                        validation: r.hasOwnProperty("schema") ? r.schema : r
                    } : null
                },
                addType: function(t, e) {
                    this.fieldType[t] = e
                },
                addTypeCoercion: function(t, e) {
                    this.coerceType[t] = e
                },
                addCheck: function(t, e) {
                    this.fieldValidate[t] = e
                },
                addFormat: function(t, e) {
                    this.fieldFormat[t] = e
                },
                addSchema: function(t, e) {
                    if (!e && t && (e = t, t = void 0), e.hasOwnProperty("id") && "string" == typeof e.id && e.id !== t) {
                        if ("/" === e.id.charAt(0)) throw new Error("jjv: schema id's starting with / are invalid.");
                        this.schema[s(e.id)] = e
                    } else if (!t) throw new Error("jjv: schema needs either a name or id attribute.");
                    t && (this.schema[s(t)] = e)
                }
            }, "undefined" != typeof module && "undefined" != typeof module.exports ? module.exports = t : "function" == typeof define && define.amd ? define("jjv", [], function() {
                return t
            }) : window.jjv = t
        }(),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/form/form", ["require", "jquery", "underscore", "backbone", "components/base/View", "libraries/Canstar", "libraries/Loader", "libraries/Validators", "components/form/InputView", "text!components/form/tmpl_form.html", "text!components/form/tmpl_form_header.html", "jjv"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h, f;
                return i = e("jquery"), f = e("underscore"), r = e("backbone"), u = e("components/base/View"), o = e("libraries/Canstar"), l = e("libraries/Loader"), c = e("libraries/Validators"), a = e("components/form/InputView"), p = e("text!components/form/tmpl_form.html"), h = e("text!components/form/tmpl_form_header.html"), d = e("jjv"), s = function(e) {
                    function r() {
                        return this.enable_submit = t(this.enable_submit, this), this.disable_submit = t(this.disable_submit, this), this.hide_submit_loader = t(this.hide_submit_loader, this), this.show_submit_loader = t(this.show_submit_loader, this), this.onClose = t(this.onClose, this), this.fail_submit = t(this.fail_submit, this), this.after_submit = t(this.after_submit, this), this.selectChanged = t(this.selectChanged, this), this.reset_form_data = t(this.reset_form_data, this), this.read_form_data = t(this.read_form_data, this), this.add_schema_property = t(this.add_schema_property, this), this.add_extra_data = t(this.add_extra_data, this), this.add_ga_tracking = t(this.add_ga_tracking, this), this.submit_form = t(this.submit_form, this), this.extra_validation = t(this.extra_validation, this), this.custom_validators = t(this.custom_validators, this), this.process_inputs = t(this.process_inputs, this), this.render = t(this.render, this), this.events = t(this.events, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.path = "components/form", r.stylesheets = ["components/form/form.css"], r.prototype.events = function() {
                        return {
                            "submit form": "submit_form",
                            "change select": "selectChanged"
                        }
                    }, r.prototype.form_data = {}, r.prototype.extra_data = {}, r.prototype.invalid = !1, r.prototype.invalid_messages = [], r.prototype.invalid_fields = [], r.prototype.ajax = !0, r.prototype.request_type = "POST", r.prototype.initialize = function(t) {
                        var e;
                        return this.options = t, null == this.options.form_title && (this.options.form_title = "Title"), null == this.options.form_action && (this.options.form_action = "#"), null == this.options.ga_tracking && (this.options.ga_tracking = []), this.env = d(), null != this.options.schema ? this.env.addSchema("form", this.options.schema) : this.env.addSchema("form", {
                            type: "object",
                            properties: {},
                            required: []
                        }), this.template = null != (null != (e = this.options) ? e.template : void 0) ? "function" == typeof this.options.template ? this.options.template : f.template(this.options.template) : f.template(p), this.input_views = []
                    }, r.prototype.render = function() {
                        return this.$el.html(this.template({
                            data: this.options
                        })), i("select", this.el).on("change", this.selectChanged), i("select", this.el).trigger("change"), this.process_inputs(this.options.inputs), i(".alert", this.el).hide(), this.el
                    }, r.prototype.process_inputs = function(t) {
                        return f.each(t, function(t) {
                            return function(e, n) {
                                var r, o;
                                return f.isArray(e) ? (i(".inputs", t.el).append(f.template(h, {
                                    name: n
                                })), f.each(e, function(e) {
                                    var n, r;
                                    return r = t.add_schema_property(e), n = new a(r), t.input_views.push(n), i(".inputs", t.el).append(n.render())
                                })) : (o = t.add_schema_property(e), r = new a(o), t.input_views.push(r), i(".inputs", t.el).append(r.render()))
                            }
                        }(this))
                    }, r.prototype.custom_validators = function() {
                        return f.each(this.options.validation, function(t) {
                            return function(e) {
                                if (null == c.prototype[e.validator]) throw "Invalid validator specified: " + e.validator;
                                return c.prototype[e.validator](t.form_data) === !1 ? (t.invalid = !0, t.invalid_messages.push(e.error_msg)) : void 0
                            }
                        }(this))
                    }, r.prototype.extra_validation = function() {
                        return !0
                    }, r.prototype.submit_form = function(t) {
                        var e;
                        return this.show_submit_loader(), this.disable_submit(), i(".alert", this.el).hide(), i(".alert-error ul", this.el).remove(), this.read_form_data(), e = this.env.validate("form", this.form_data), this.custom_validators(), this.extra_validation(), i(".form .control-group", this.el).removeClass("error has-error"), e || this.invalid ? (t.preventDefault(), i(".alert-error.validation", this.el).append("<ul></ul>"), null != (null != e ? e.validation : void 0) && f.each(e.validation, function(t) {
                            return function(e, n) {
                                return i("#" + n, t.el).parentsUntil(t.el, "div.control-group").addClass("error has-error"), i(".alert-error.validation ul", t.el).append("<li>" + t.env.schema.form.properties[n].description + "</li>")
                            }
                        }(this)), f.each(this.invalid_fields, function(t) {
                            return function(e) {
                                return i("#" + e, t.el).parentsUntil(t.el, "div.control-group").addClass("error has-error")
                            }
                        }(this)), f.each(this.invalid_messages, function(t) {
                            return function(e) {
                                return i(".alert-error.validation ul", t.el).append("<li>" + e + "</li>")
                            }
                        }(this)), i(".alert-error.validation", this.el).fadeIn(), this.reset_form_data(), this.enable_submit(), this.hide_submit_loader()) : this.ajax === !0 ? ("undefined" != typeof _gaq && null !== _gaq && _gaq.push(this.options.ga_tracking), t.preventDefault(), i.ajax({
                            type: this.request_type,
                            url: this.options.form_action,
                            data: f.defaults(this.form_data, this.extra_data)
                        }).done(function(t) {
                            return function(e) {
                                return t.after_submit(e), t.reset_form_data()
                            }
                        }(this)).fail(function(t) {
                            return function(e) {
                                return t.fail_submit(e), i(".alert-error.submission", t.el).fadeIn("fast"), t.reset_form_data(), t.enable_submit(), t.hide_submit_loader()
                            }
                        }(this))) : void 0
                    }, r.prototype.add_ga_tracking = function() {
                        return i("#submit", this.el).click(function(t) {
                            return function() {
                                return "undefined" != typeof _gaq && null !== _gaq ? _gaq.push(t.options.ga_tracking) : void 0
                            }
                        }(this))
                    }, r.prototype.add_extra_data = function(t) {
                        return f.extend(this.extra_data, t)
                    }, r.prototype.add_schema_property = function(t) {
                        var e;
                        return e = {}, null != t.type && (e.type = t.type), e.hint = null != t.hint ? t.hint : "Please enter a value here", null != t.name && (e.name = t.name), null != t.description && (e.description = t.description), null != t.format && (e.format = t.format), null != t["enum"] && (e["enum"] = t["enum"]), e.required = !1, null != t.required && t.required === !0 ? e.required = !0 : null != e["enum"] && e["enum"].push(""), null != t.placeholder && (e.placeholder = t.placeholder), null != t.minLength && (e.minLength = t.minLength), null != t.maxLength && (e.maxLength = t.maxLength), null != t.inputType && (e.inputType = t.inputType), this.env.schema.form.properties[t.name] = e, null != t.required && t.required === !0 && this.env.schema.form.required.push(t.name), e
                    }, r.prototype.read_form_data = function() {
                        var t;
                        return f.isEmpty(this.form_data) ? (t = i("form", this.el).find(":input:disabled").prop("disabled", !1), this.form_data = o.prototype.paramsFromQueryString("?" + i('form :input[value!=""]', this.el).serialize()), t.prop("disabled", "disabled")) : void 0
                    }, r.prototype.reset_form_data = function() {
                        return this.form_data = {}, this.invalid = !1, this.invalid_messages = [], this.invalid_fields = []
                    }, r.prototype.selectChanged = function(t) {
                        var e;
                        return e = t.currentTarget, i(e).toggleClass("empty", i.inArray(i(e).val(), ["", null]) >= 0)
                    }, r.prototype.after_submit = function() {
                        var t, e;
                        return e = i(".form, .disclaimer, .comparitor", this.el).filter(":visible"), t = e.length, e.fadeOut("fast", function(e) {
                            return function() {
                                return --t > 0 ? void 0 : (i(".alert-success, .return", e.el).fadeIn("fast", function() {
                                    return e.trigger("after_submit")
                                }), e.hide_submit_loader())
                            }
                        }(this)), this.enable_submit(), this.extra_data = {}
                    }, r.prototype.fail_submit = function(t) {
                        return "undefined" != typeof console && null !== console ? console.log(t) : void 0
                    }, r.prototype.onClose = function() {
                        return i("select", this.el).unbind(), f.each(this.input_views, function() {
                            return function(t) {
                                return t.close()
                            }
                        }(this))
                    }, r.prototype.show_submit_loader = function() {
                        return i("#submit", this.el).hide(), 0 === i(".submit-container img.loader").length ? i(".submit-container", this.el).append("<img class='loader' src='" + canstar_widget.base_url + "assets/image/spinner.gif' />") : i(".submit-container img.loader").show()
                    }, r.prototype.hide_submit_loader = function() {
                        return i("#submit", this.el).show(), i(".submit-container img.loader").length > 0 ? i(".submit-container img.loader").hide() : void 0
                    }, r.prototype.disable_submit = function() {
                        return this.delegateEvents(f.defaults({
                            "submit form": function() {
                                return function() {
                                    return !1
                                }
                            }(this)
                        }, this.events()))
                    }, r.prototype.enable_submit = function() {
                        return this.delegateEvents()
                    }, r
                }(u)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/facet_compare/email_form", ["require", "jquery", "cns-jquery", "underscore", "backbone", "components/form/form"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), a = e("cns-jquery"), l = e("underscore"), r = e("backbone"), s = e("components/form/form"), o = function(e) {
                    function r() {
                        return this.after_submit = t(this.after_submit, this), this.submit_form = t(this.submit_form, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.initialize = function(t) {
                        if (r.__super__.initialize.call(this, t), null == this.options.comparison_link) throw Error("Missing mandatory parameter: comparison_link");
                        if (null == this.options.module) throw Error("Missing mandatory parameter: module")
                    }, r.prototype.submit_form = function(t) {
                        return this.read_form_data(), this.form_data = i.extend(this.form_data, {
                            comparison_link: this.options.comparison_link,
                            module: this.options.module
                        }), r.__super__.submit_form.call(this, t)
                    }, r.prototype.after_submit = function() {
                        var t;
                        return this.form_data = i.extend(this.form_data, t = "3 Way Compare | Email Sent"), "on" === this.form_data.newsletter_opt_in && (t += " | Signed Up"), _gaq.push(["_trackEvent", canstar_widget.faceted_search.category, t]), a(".modal", this.el).modal("hide"), r.__super__.after_submit.apply(this, arguments)
                    }, r
                }(s)
            })
        }.call(this), define("text!components/facet_compare/tmpl_details_section.html", [], function() {
            return '<div class="section-header row margin-top-10">\n    <div class="comparison-item section-label col-xs-12">\n        <h4 class="section-name"><i class="fa fa-minus-circle toggle"></i> <%=section_name%></h4>\n    </div>\n    <div class="comparison-item"></div>\n    <div class="comparison-item"></div>\n    <% if(three_products === true) { %>\n      <div class="comparison-item last"></div>\n    <% } %>\n</div>\n'
        }), define("text!components/facet_compare/tmpl_details_row.html", [], function() {
            return '<div class="row comparison-row <%=row_class %>">\n    <!--<div class="comparison-item <%=item_class %> <% if(prod3 == null) {print(\'last\')} %>"><%=prod2 %></div>-->\n    <% if(prod3 !== null) { %>\n        <div class="col-xs-3 comparison-item comparison-label <%=item_class %>"><%=label %></div>\n        <div class="col-xs-3 comparison-item <%=item_class %>"><%=prod1 %></div>\n        <div class="col-xs-3 comparison-item <%=item_class %> <% if(prod3 == null) {print("last")} %>"><%=prod2 %></div>\n        <div class="col-xs-3 comparison-item <%=item_class %> last"><%=prod3 %></div>\n    <% } else {  %>\n        <div class="col-xs-4 comparison-item comparison-label <%=item_class %>"><%=label %></div>\n        <div class="col-xs-4 comparison-item <%=item_class %>"><%=prod1 %></div>\n        <div class="col-xs-4 comparison-item <%=item_class %> <% if(prod3 == null) {print("last")} %>"><%=prod2 %></div>\n    <% } %>\n</div>\n'
        }),
        function(t, e) {
            "function" == typeof define && define.amd ? define("jquery.lazyload", ["jquery"], e) : e(jQuery)
        }(this, function(t) {
            var e = t(window);
            t.fn.lazyload = function(n) {
                function i() {
                    var e = 0;
                    o.each(function() {
                        var n = t(this);
                        if (!s.skip_invisible || n.is(":visible"))
                            if (t.abovethetop(this, s) || t.leftofbegin(this, s));
                            else if (t.belowthefold(this, s) || t.rightoffold(this, s)) {
                            if (++e > s.failure_limit) return !1
                        } else n.trigger("appear"), e = 0
                    })
                }
                var r, o = this,
                    s = {
                        threshold: 0,
                        failure_limit: 0,
                        event: "scroll",
                        effect: "show",
                        container: window,
                        data_attribute: "original",
                        skip_invisible: !0,
                        appear: null,
                        load: null,
                        placeholder: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"
                    };
                return n && (void 0 !== n.failurelimit && (n.failure_limit = n.failurelimit, delete n.failurelimit), void 0 !== n.effectspeed && (n.effect_speed = n.effectspeed, delete n.effectspeed), t.extend(s, n)), r = void 0 === s.container || s.container === window ? e : t(s.container), 0 === s.event.indexOf("scroll") && r.bind(s.event, function() {
                    return i()
                }), this.each(function() {
                    var e = this,
                        n = t(e);
                    e.loaded = !1, (void 0 === n.attr("src") || n.attr("src") === !1) && n.is("img") && n.attr("src", s.placeholder), n.one("appear", function() {
                        if (!this.loaded) {
                            if (s.appear) {
                                var i = o.length;
                                s.appear.call(e, i, s)
                            }
                            t("<img />").bind("load", function() {
                                var i = n.attr("data-" + s.data_attribute);
                                n.hide(), n.is("img") ? n.attr("src", i) : n.css("background-image", "url('" + i + "')"), n[s.effect](s.effect_speed), e.loaded = !0;
                                var r = t.grep(o, function(t) {
                                    return !t.loaded
                                });
                                if (o = t(r), s.load) {
                                    var a = o.length;
                                    s.load.call(e, a, s)
                                }
                            }).attr("src", n.attr("data-" + s.data_attribute))
                        }
                    }), 0 !== s.event.indexOf("scroll") && n.bind(s.event, function() {
                        e.loaded || n.trigger("appear")
                    })
                }), e.bind("resize", function() {
                    i()
                }), /(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion) && e.bind("pageshow", function(e) {
                    e.originalEvent && e.originalEvent.persisted && o.each(function() {
                        t(this).trigger("appear")
                    })
                }), t(document).ready(function() {
                    i()
                }), this
            }, t.belowthefold = function(n, i) {
                var r;
                return r = void 0 === i.container || i.container === window ? (window.innerHeight ? window.innerHeight : e.height()) + e.scrollTop() : t(i.container).offset().top + t(i.container).height(), r <= t(n).offset().top - i.threshold
            }, t.rightoffold = function(n, i) {
                var r;
                return r = void 0 === i.container || i.container === window ? e.width() + e.scrollLeft() : t(i.container).offset().left + t(i.container).width(), r <= t(n).offset().left - i.threshold
            }, t.abovethetop = function(n, i) {
                var r;
                return r = void 0 === i.container || i.container === window ? e.scrollTop() : t(i.container).offset().top, r >= t(n).offset().top + i.threshold + t(n).height()
            }, t.leftofbegin = function(n, i) {
                var r;
                return r = void 0 === i.container || i.container === window ? e.scrollLeft() : t(i.container).offset().left, r >= t(n).offset().left + i.threshold + t(n).width()
            }, t.inviewport = function(e, n) {
                return !(t.rightoffold(e, n) || t.leftofbegin(e, n) || t.belowthefold(e, n) || t.abovethetop(e, n))
            }, t.extend(t.expr[":"], {
                "below-the-fold": function(e) {
                    return t.belowthefold(e, {
                        threshold: 0
                    })
                },
                "above-the-top": function(e) {
                    return !t.belowthefold(e, {
                        threshold: 0
                    })
                },
                "right-of-screen": function(e) {
                    return t.rightoffold(e, {
                        threshold: 0
                    })
                },
                "left-of-screen": function(e) {
                    return !t.rightoffold(e, {
                        threshold: 0
                    })
                },
                "in-viewport": function(e) {
                    return t.inviewport(e, {
                        threshold: 0
                    })
                },
                "above-the-fold": function(e) {
                    return !t.belowthefold(e, {
                        threshold: 0
                    })
                },
                "right-of-fold": function(e) {
                    return t.rightoffold(e, {
                        threshold: 0
                    })
                },
                "left-of-fold": function(e) {
                    return !t.rightoffold(e, {
                        threshold: 0
                    })
                }
            })
        }), define("text-cns!components/facet_compare/tmpl_layout.html", [], function() {
            return '<div class="comparison-header margin-top-50">\n    <div id="toolbar"></div>\n</div>\n\n<div class="comparison-table-container col-xs-12">\n  <div class="shortlist-heading row">\n    <div class="col-xs-3">\n      <h3><%= model.get(\'category_name\') %></h3>\n      <span>Shortlist</span>\n    </div>\n  </div>\n</div>\n\n\n<div class="comparison-footer row">\n    <div class="col-xs-6 margin-top-20">\n        <a class="return_link btn btn-blank btn-icons btn-back" href="#"><i class="fa fa-angle-left"></i> Back</a>\n    </div>\n</div>\n<div id="details-footer" class="row margin-top-20">\n  <div class="disclaimer col-xs-12">\n    <%= model.get(\'disclaimer\')%>\n  </div>\n</div>\n<div class="comparison_email_form"></div>\n<div class="facet-compare-modal-container"></div>\n'
        }), define("text-cns!components/facet_compare/tmpl_email_form.html", [], function() {
            return '<div class="modal fade form">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4>Email your results</h4>\n      </div>\n      <div class="modal-body">\n        <form method="POST" action="<%= data.form_action %>" role="form">\n          <div class="form-description">\n            Enter your email address and we\'ll send you your comparison results.\n          </div>\n          <div class="alert-error validation alert alert-danger">\n            The following fields were invalid:\n          </div>\n          <div class="alert-error submission alert alert-danger">\n            Something went wrong with your submission.\n          </div>\n          <div class="inputs"></div>\n          <div class="submit-container control-group">\n            <input id="submit" type="submit" class="btn btn-primary button_submit text-center" value="Send">\n          </div>\n        </form>\n        <div class="form-disclaimer">\n          By submitting this form I agree to CANSTAR\'s <a href="http://www.canstar.com.au/privacy-policy/" target="_blank">privacy policy</a>.\n        </div>\n      </div>\n</div>\n'
        }), define("text-cns!components/facet_compare/themes/blue/tmpl_layout.html", [], function() {
            return '<div class="comparison-header margin-top-50">\n    <div id="toolbar"></div>\n</div>\n\n<div class="comparison-table-container col-xs-12">\n  <div class="row">\n    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 printlogo">\n      <center>\n        <img src="/wp-content/themes/canstar-blue/dist/images/logo.png"/>\n      </center>\n    </div>\n  </div>\n  <div class="shortlist-heading row">\n    <div class="col-xs-3">\n      <h3><%= model.get(\'category_name\') %></h3>\n      <span>Shortlist</span>\n    </div>\n    <div class="date_printed hidden-on-screen">Date Printed: <%=new Date().toDateString()%></div>\n  </div>\n</div>\n\n\n<div class="comparison-footer row">\n    <div class="col-xs-6 margin-top-20">\n        <a class="return_link btn btn-blank btn-icons btn-back" href="#"><i class="fa fa-angle-left"></i> Back</a>\n    </div>\n</div>\n<div id="details-footer" class="row margin-top-20" style="display:none;"">\n  <ul class="legend row">\n      <li class="item col-xs-6 col-sm-3"><img src="<%=canstar_widget.base_url%>assets/image/facet_tick.png" alt="Included"> <span>Included</span></li>\n      <li class="item col-xs-6 col-sm-3"><img src="<%=canstar_widget.base_url%>assets/image/life-NA.png" alt="Not Included"> <span>Not Included</span></li>\n      <li class="item col-xs-6 col-sm-3"><img src="<%=canstar_widget.base_url%>assets/image/O.png" alt="Optional"> <span>Optional</span></li>\n      <li class="item col-xs-6 col-sm-3"><img src="<%=canstar_widget.base_url%>assets/image/restricted_large.png" alt="Restricted"> <span>Restricted</span></li>\n  </ul>\n  <div class="disclaimer col-xs-12">\n    <%= model.get(\'disclaimer\')%>\n  </div>\n</div>\n<div class="comparison_email_form"></div>\n<div class="facet-compare-modal-container"></div>\n'
        }), define("text-cns!components/facet_compare/themes/blue/tmpl_email_form.html", [], function() {
            return '<div class="modal fade form">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4>Email your results</h4>\n      </div>\n      <div class="modal-body">\n        <form method="POST" action="<%= data.form_action %>" role="form">\n          <div class="form-description">\n            Enter your email address and we\'ll send you your comparison results.\n          </div>\n          <div class="alert-error validation alert alert-danger">\n            The following fields were invalid:\n          </div>\n          <div class="alert-error submission alert alert-danger">\n            Something went wrong with your submission.\n          </div>\n          <div class="inputs"></div>\n          <div class="submit-container control-group">\n            <input id="submit" type="submit" class="btn btn-primary button_submit text-center" value="Send">\n          </div>\n        </form>\n        <div class="form-disclaimer">\n          By submitting this form I agree to Canstar Blue\'s <a href="http://www.canstarblue.com.au/privacy-policy/" target="_blank">privacy policy</a>.\n        </div>\n      </div>\n</div>\n'
        }),
        function() {
            define("components/facet_compare/templates", ["require", "text-cns!components/facet_compare/tmpl_layout.html", "text-cns!components/facet_compare/tmpl_email_form.html", "text-cns!components/facet_compare/themes/blue/tmpl_layout.html", "text-cns!components/facet_compare/themes/blue/tmpl_email_form.html"], function(t) {
                return t("text-cns!components/facet_compare/tmpl_layout.html"), t("text-cns!components/facet_compare/tmpl_email_form.html"), t("text-cns!components/facet_compare/themes/blue/tmpl_layout.html"), t("text-cns!components/facet_compare/themes/blue/tmpl_email_form.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/facet_compare/DetailsView", ["require", "underscore", "jquery", "backbone", "components/base/View", "libraries/Loader", "libraries/Canstar", "libraries/Constants", "libraries/Calculators", "libraries/Transforms", "components/facet_compare/email_form", "text!components/facet_compare/tmpl_details_section.html", "text!components/facet_compare/tmpl_details_row.html", "jquery.lazyload", "canstar_widget", "components/facet_compare/templates"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h, f, m;
                return m = e("underscore"), i = e("jquery"), r = e("backbone"), p = e("components/base/View"), u = e("libraries/Loader"), s = e("libraries/Canstar"), a = e("libraries/Constants"), o = e("libraries/Calculators"), d = e("libraries/Transforms"), c = e("components/facet_compare/email_form"), f = e("text!components/facet_compare/tmpl_details_section.html"), h = e("text!components/facet_compare/tmpl_details_row.html"), e("jquery.lazyload"), e("canstar_widget"), e("components/facet_compare/templates"), l = function(e) {
                    function r() {
                        return this.onClose = t(this.onClose, this), this.render_email_form = t(this.render_email_form, this), this.parse_config_object = t(this.parse_config_object, this), this.parse_config_objects = t(this.parse_config_objects, this), this.parse_config = t(this.parse_config, this), this.rewrite_fields = t(this.rewrite_fields, this), this.toggle_section = t(this.toggle_section, this), this.append_section = t(this.append_section, this), this.render_sections = t(this.render_sections, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), this.className = t(this.className, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.path = "components/facet_compare", r.prototype.tagName = "div", r.prototype.className = function() {
                        return 2 === m.size(this.options.prod_ids) ? "comparison-table two-products" : 3 === m.size(this.options.prod_ids) ? "comparison-table three-products" : "comparison-table"
                    }, r.prototype.calculated_tags = {}, r.prototype.transformed_tags = {}, r.prototype.row_template = m.template(h), r.prototype.templates = {
                        tmpl_layout: "!!tmpl_layout.html",
                        email_form: "!!tmpl_email_form.html"
                    }, r.prototype.events = {
                        "click .section-header": "toggle_section"
                    }, r.prototype.overrideUrlTables = {
                        blueenergy: {
                            transform: "blueCompanyLogo",
                            url: "http://cdn.canstarblue.com.au/"
                        },
                        bluemobile: {
                            transform: "blueCompanyLogo",
                            url: "http://cdn.canstarblue.com.au/"
                        }
                    }, r.prototype.initialize = function(t) {
                        var e, n, i;
                        return this.config = t.config, this.profile_config = this.config.profiles[t.profile], this.prod_ids = t.prod_ids, this.transforms = new d(null, {
                            location: a.COMPARE_PAGE
                        }), this.parse_config(this.profile_config), e = [{
                            name: "email",
                            description: "Email",
                            type: "string",
                            format: "email",
                            placeholder: !0,
                            required: !0
                        }, {
                            name: "full_name",
                            description: "Name (optional)",
                            type: "string",
                            maxLength: 256,
                            placeholder: !0
                        }, {
                            name: "newsletter_opt_in",
                            description: "I wish to receive CANSTAR's monthly financial newsletter.",
                            type: "string",
                            format: "checkbox"
                        }], n = (null != (i = this.config) ? i.email_form_inputs : void 0) || e, this.email_form = new c({
                            template: this.templates.email_form,
                            form_action: "" + canstar_widget.base_url + "api_v2/email/comparison",
                            comparison_link: window.location.href,
                            module: t.collection,
                            theme: t.theme,
                            inputs: n
                        }), this.model.on("change", this.render), this.model.parse = this.rewrite_fields, this.model.fetch()
                    }, r.prototype.render = function() {
                        var t, e, n, r, o, a, l, c, u, d, p, h, f, g, v, _, y, b, w, P, S, C, x, k, T, L;
                        this.append_section(this.profile_config.standard.fields), this.render_sections(this.profile_config.sections), this.render_email_form(), i("div.lazy", this.el).lazyload(), f = [], o = [], g = [], _ = this.options.prod_ids;
                        for (d in _) S = _[d], f.push([d, S, this.model.attributes[S]]);
                        for (y = m.sortBy(f, function(t) {
                                return t[1]
                            }), d = C = 0, k = y.length; k > C; d = ++C) S = y[d], g.push(S[2]);
                        for (S = x = 0, T = g.length; T > x; S = ++x) d = g[S], r = d.SUPP.COMPANY || d.SUPP.COMPANY_NAME, n = d.SUPP.CO_CODE, v = d["Product Name"] || d.SUPP.PROD_NAME || d.SUPP.PRODUCT_NAME || d.SUPP.TYPE_PROD_NAME, t = "https://snapshots.canstar.com.au/widgets/", null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.base_url : void 0) && null != ("undefined" != typeof canstar_widget && null !== canstar_widget && null != (L = canstar_widget.faceted_search) ? L.table : void 0) && null != this.overrideUrlTables[canstar_widget.faceted_search.table] ? (w = this.overrideUrlTables[canstar_widget.faceted_search.table], l = s.prototype[w.transform], t = w.url) : l = s.prototype.companyLogo, p = l(n, r, {
                            size: "small"
                        }, "", t), b = i(p).attr("src"), u = '<img alt="' + r + '" title="' + r + '" src="' + b + '" ' + ("onerror=\"this.onerror=null; this.style.display = 'none'; this.outerHTML = '<span>" + r + "</span>';\"") + "/>", c = d.SUPP.id, 0 !== c.indexOf("_") && (c = "_" + c), o.push({
                            productId: c,
                            name: v,
                            image: u
                        });
                        return h = JSON.parse(localStorage.getItem("canstar_shortlist_bar")), null == h && (h = {}), e = this.options.collection, a = {}, a[e] = o, P = m.extend(h, a), window.localStorage.setItem("canstar_shortlist_bar", JSON.stringify(P)), null != canstar_widget.vent && canstar_widget.vent.trigger("compare_shortlist:changed"), this.el
                    }, r.prototype.render_sections = function(t) {
                        return m.each(t, function(t) {
                            return function(e, n) {
                                return e.hide_when && s.prototype.shouldBeHidden(e.hide_when.lvalue, e.hide_when.rvalue) ? !0 : e.show_header_text === !1 ? t.append_section(e.fields) : t.append_section(e.fields, n)
                            }
                        }(this))
                    }, r.prototype.append_section = function(t, e) {
                        var n;
                        return null != e && this.$el.append(m.template(f, {
                            section_name: e,
                            three_products: null != this.model.get("prod3") ? !0 : !1
                        })), n = 1, m.each(t, function(t) {
                            return function(i, r) {
                                var o, a;
                                return i.hide_when && s.prototype.shouldBeHidden(i.hide_when.lvalue, i.hide_when.rvalue, i.hide_when.comparator) ? !0 : (o = i.show_header_text === !1 ? "" : r, i.show_header_text === !1 ? (a = "", n--) : a = n % 2 ? "even" : "odd", t.$el.append(t.row_template({
                                    label: o,
                                    item_class: null != i.classes ? i.classes : "",
                                    prod1: t.model.get("prod1")[r],
                                    prod2: t.model.get("prod2")[r],
                                    prod3: null != t.model.get("prod3") ? t.model.get("prod3")[r] : null,
                                    row_class: a,
                                    in_section: null != e ? !0 : !1
                                })), i.spacer === !0 && t.$el.append(t.row_template({
                                    label: "",
                                    item_class: "",
                                    prod1: null,
                                    prod2: null,
                                    prod3: null,
                                    row_class: "spacer",
                                    in_section: !1
                                })), n++)
                            }
                        }(this))
                    }, r.prototype.toggle_section = function(t) {
                        return "undefined" != typeof _gaq && null !== _gaq && _gaq.push(["_trackEvent", "Click Tracking", "" + canstar_widget.faceted_search.category + " Compare Features", i(t.currentTarget).find(".section-name").text()]), i(t.currentTarget).find(".toggle").toggleClass("fa-plus-circle fa-minus-circle"), i(t.currentTarget).nextUntil(".section-header").toggleClass("hidden")
                    }, r.prototype.rewrite_fields = function(t) {
                        var e;
                        return m.each(this.calculated_tags, function() {
                            return function(e, n) {
                                return m.each(t, function(i, r) {
                                    var s, a;
                                    return s = "function" == typeof(a = o.prototype)[e] ? a[e](t[r], t[r][n]) : void 0, t[r][n] = s
                                })
                            }
                        }(this)), m.each(this.transformed_tags, function(e) {
                            return function(n, i) {
                                return m.each(t, function(r, o) {
                                    var s, a;
                                    return s = "function" == typeof(a = e.transforms)[n] ? a[n](t[o][i], t[o]) : void 0, t[o][i] = s
                                })
                            }
                        }(this)), e = {}, m.each(t, function(t) {
                            return function(n, i) {
                                return e[t.prod_ids[i]] = n
                            }
                        }(this)), e
                    }, r.prototype.parse_config = function(t) {
                        return this.parse_config_object(t.standard), this.parse_config_objects(t.sections)
                    }, r.prototype.parse_config_objects = function(t) {
                        return m.each(t, function(t) {
                            return function(e) {
                                return t.parse_config_object(e)
                            }
                        }(this))
                    }, r.prototype.parse_config_object = function(t) {
                        var e;
                        return e = {}, m.each(null != t ? t.fields : void 0, function(t) {
                            return function(e, n, i) {
                                var r;
                                return null != e.field_def && (e = (null != (r = t.options.config.field_defs) ? r[e.field_def] : void 0) || ("undefined" != typeof console && null !== console ? console.error("Invalid field definition: " + e.field_def) : void 0)), null != e.calculator && (t.calculated_tags[n] = e.calculator), null != e.transform && (t.transformed_tags[n] = e.transform), i[n] = e
                            }
                        }(this))
                    }, r.prototype.render_email_form = function() {
                        return i(".comparison_email_form").html(this.email_form.render())
                    }, r.prototype.onClose = function() {
                        return this.model.unbind(), this.email_form.close()
                    }, r
                }(p)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/toolbar/ToolbarModel", ["require", "backbone"], function(e) {
                var i, r;
                return i = e("backbone"), r = function(e) {
                    function i() {
                        return this.saved = t(this.saved, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.defaults = {
                        saved_item: void 0,
                        show_save: !1,
                        show_email: !0
                    }, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        return t = i.__super__.parse.apply(this, arguments)
                    }, i.prototype.saved = function() {
                        return void 0 !== this.get("saved_item") ? !0 : !1
                    }, i
                }(i.Model)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/base/AuthModel", ["require", "underscore", "backbone", "libraries/Auth"], function(e) {
                var i, r, o, s;
                return s = e("underscore"), o = e("backbone"), i = e("libraries/Auth"), r = function(e) {
                    function r() {
                        return this.parse = t(this.parse, this), this.updateState = t(this.updateState, this), this.setFromStorage = t(this.setFromStorage, this), this.save = t(this.save, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.idAttribute = "_id", r.prototype.attrWhitelist = void 0, r.prototype.attrBlacklist = i.prototype.mandatoryKeys, r.prototype.initialize = function() {
                        return this.updateState()
                    }, r.prototype.save = function(t, e) {
                        return t = t || this.attributes, e = e || {}, e.attrs = t, this.attrBlacklist && (this.attrWhitelist && (this.attrBlacklist = s.difference(this.attrBlacklist, this.attrWhitelist)), e.attrs = s.omit(e.attrs, this.attrBlacklist)), this.attrWhitelist && (e.attrs = s.pick(e.attrs, this.attrWhitelist)), r.__super__.save.call(this, t, e)
                    }, r.prototype.setFromStorage = function() {
                        return this.set(i.prototype.getLocalData())
                    }, r.prototype.updateState = function() {
                        return i.prototype.partiallyLoggedIn() && (console.log("only partially logged in, logging out"), "function" == typeof console.trace && console.trace(), i.prototype.logout()), this.setFromStorage()
                    }, r.prototype.parse = function(t) {
                        var e;
                        return e = (null != t ? t.response : void 0) || t, e._id && (e._id = e._id.$id), e
                    }, r
                }(o.Model)
            })
        }.call(this), define("backbone-forms", ["jquery", "underscore", "backbone"], function(t, e, n) {
            var i = n.View.extend({
                events: {
                    submit: function(t) {
                        this.trigger("submit", t)
                    }
                },
                initialize: function(t) {
                    var n = this;
                    t = this.options = e.extend({
                        submitButton: !1
                    }, t);
                    var i = this.schema = function() {
                        if (t.schema) return e.result(t, "schema");
                        var i = t.model;
                        return i && i.schema ? e.result(i, "schema") : n.schema ? e.result(n, "schema") : {}
                    }();
                    e.extend(this, e.pick(t, "model", "data", "idPrefix", "templateData"));
                    var r = this.constructor;
                    this.template = t.template || this.template || r.template, this.Fieldset = t.Fieldset || this.Fieldset || r.Fieldset, this.Field = t.Field || this.Field || r.Field, this.NestedField = t.NestedField || this.NestedField || r.NestedField;
                    var o = this.selectedFields = t.fields || e.keys(i),
                        s = this.fields = {};
                    e.each(o, function(t) {
                        var e = i[t];
                        s[t] = this.createField(t, e)
                    }, this); {
                        var a = t.fieldsets || e.result(this, "fieldsets") || e.result(this.model, "fieldsets") || [o];
                        this.fieldsets = []
                    }
                    e.each(a, function(t) {
                        this.fieldsets.push(this.createFieldset(t))
                    }, this)
                },
                createFieldset: function(t) {
                    var e = {
                        schema: t,
                        fields: this.fields,
                        legend: t.legend || null
                    };
                    return new this.Fieldset(e)
                },
                createField: function(t, e) {
                    var n = {
                        form: this,
                        key: t,
                        schema: e,
                        idPrefix: this.idPrefix
                    };
                    this.model ? n.model = this.model : n.value = this.data ? this.data[t] : null;
                    var i = new this.Field(n);
                    return this.listenTo(i.editor, "all", this.handleEditorEvent), i
                },
                handleEditorEvent: function(t, n) {
                    var i = n.key + ":" + t;
                    switch (this.trigger.call(this, i, this, n, Array.prototype.slice.call(arguments, 2)), t) {
                        case "change":
                            this.trigger("change", this);
                            break;
                        case "focus":
                            this.hasFocus || this.trigger("focus", this);
                            break;
                        case "blur":
                            if (this.hasFocus) {
                                var r = this;
                                setTimeout(function() {
                                    var t = e.find(r.fields, function(t) {
                                        return t.editor.hasFocus
                                    });
                                    t || r.trigger("blur", r)
                                }, 0)
                            }
                    }
                },
                templateData: function() {
                    var t = this.options;
                    return {
                        submitButton: t.submitButton
                    }
                },
                render: function() {
                    var t = this,
                        i = this.fields,
                        r = n.$,
                        o = r(r.trim(this.template(e.result(this, "templateData"))));
                    return o.find("[data-editors]").add(o).each(function(n, o) {
                        var s = r(o),
                            a = s.attr("data-editors");
                        if (!e.isUndefined(a)) {
                            var l = "*" == a ? t.selectedFields || e.keys(i) : a.split(",");
                            e.each(l, function(t) {
                                var e = i[t];
                                s.append(e.editor.render().el)
                            })
                        }
                    }), o.find("[data-fields]").add(o).each(function(n, o) {
                        var s = r(o),
                            a = s.attr("data-fields");
                        if (!e.isUndefined(a)) {
                            var l = "*" == a ? t.selectedFields || e.keys(i) : a.split(",");
                            e.each(l, function(t) {
                                var e = i[t];
                                s.append(e.render().el)
                            })
                        }
                    }), o.find("[data-fieldsets]").add(o).each(function(n, i) {
                        var o = r(i),
                            s = o.attr("data-fieldsets");
                        e.isUndefined(s) || e.each(t.fieldsets, function(t) {
                            o.append(t.render().el)
                        })
                    }), this.setElement(o), o.addClass(this.className), this
                },
                validate: function(t) {
                    var n = this.fields,
                        i = this.model,
                        r = {};
                    if (t = t || {}, e.each(n, function(t) {
                            var e = t.validate();
                            e && (r[t.key] = e)
                        }), !t.skipModelValidate && i && i.validate) {
                        var o = i.validate(this.getValue());
                        if (o) {
                            var s = e.isObject(o) && !e.isArray(o);
                            s || (r._others = r._others || [], r._others.push(o)), s && e.each(o, function(t, e) {
                                if (n[e] && !r[e]) n[e].setError(t), r[e] = t;
                                else {
                                    r._others = r._others || [];
                                    var i = {};
                                    i[e] = t, r._others.push(i)
                                }
                            })
                        }
                    }
                    return e.isEmpty(r) ? null : r
                },
                commit: function(t) {
                    t = t || {};
                    var n = {
                            skipModelValidate: !t.validate
                        },
                        i = this.validate(n);
                    if (i) return i;
                    var r, o = e.extend({
                        error: function(t, e) {
                            r = e
                        }
                    }, t);
                    return this.model.set(this.getValue(), o), r ? r : void 0
                },
                getValue: function(t) {
                    if (t) return this.fields[t].getValue();
                    var n = {};
                    return e.each(this.fields, function(t) {
                        n[t.key] = t.getValue()
                    }), n
                },
                setValue: function(t, e) {
                    var n = {};
                    "string" == typeof t ? n[t] = e : n = t;
                    var i;
                    for (i in this.schema) void 0 !== n[i] && this.fields[i].setValue(n[i])
                },
                getEditor: function(t) {
                    var e = this.fields[t];
                    if (!e) throw new Error("Field not found: " + t);
                    return e.editor
                },
                focus: function() {
                    if (!this.hasFocus) {
                        var t = this.fieldsets[0],
                            e = t.getFieldAt(0);
                        e && e.editor.focus()
                    }
                },
                blur: function() {
                    if (this.hasFocus) {
                        var t = e.find(this.fields, function(t) {
                            return t.editor.hasFocus
                        });
                        t && t.editor.blur()
                    }
                },
                trigger: function(t) {
                    return "focus" === t ? this.hasFocus = !0 : "blur" === t && (this.hasFocus = !1), n.View.prototype.trigger.apply(this, arguments)
                },
                remove: function() {
                    return e.each(this.fieldsets, function(t) {
                        t.remove()
                    }), e.each(this.fields, function(t) {
                        t.remove()
                    }), n.View.prototype.remove.apply(this, arguments)
                }
            }, {
                template: e.template('    <form>     <div data-fieldsets></div>      <% if (submitButton) { %>        <button type="submit"><%= submitButton %></button>      <% } %>    </form>  ', null, this.templateSettings),
                templateSettings: {
                    evaluate: /<%([\s\S]+?)%>/g,
                    interpolate: /<%=([\s\S]+?)%>/g,
                    escape: /<%-([\s\S]+?)%>/g
                },
                editors: {}
            });
            return i.validators = function() {
                var t = {};
                return t.errMessages = {
                    required: "Required",
                    regexp: "Invalid",
                    number: "Must be a number",
                    email: "Invalid email address",
                    url: "Invalid URL",
                    match: e.template('Must match field "<%= field %>"', null, i.templateSettings)
                }, t.required = function(t) {
                    return t = e.extend({
                            type: "required",
                            message: this.errMessages.required
                        }, t),
                        function(n) {
                            t.value = n;
                            var i = {
                                type: t.type,
                                message: e.isFunction(t.message) ? t.message(t) : t.message
                            };
                            return null === n || void 0 === n || n === !1 || "" === n ? i : void 0
                        }
                }, t.regexp = function(t) {
                    if (!t.regexp) throw new Error('Missing required "regexp" option for "regexp" validator');
                    return t = e.extend({
                            type: "regexp",
                            match: !0,
                            message: this.errMessages.regexp
                        }, t),
                        function(n) {
                            t.value = n;
                            var i = {
                                type: t.type,
                                message: e.isFunction(t.message) ? t.message(t) : t.message
                            };
                            if (null !== n && void 0 !== n && "" !== n) return "string" == typeof t.regexp && (t.regexp = new RegExp(t.regexp, t.flags)), (t.match ? !t.regexp.test(n) : t.regexp.test(n)) ? i : void 0
                        }
                }, t.number = function(n) {
                    return n = e.extend({
                        type: "number",
                        message: this.errMessages.number,
                        regexp: /^[0-9]*\.?[0-9]*?$/
                    }, n), t.regexp(n)
                }, t.email = function(n) {
                    return n = e.extend({
                        type: "email",
                        message: this.errMessages.email,
                        regexp: /^[\w\-]{1,}([\w\-\+.]{1,1}[\w\-]{1,}){0,}[@][\w\-]{1,}([.]([\w\-]{1,})){1,3}$/
                    }, n), t.regexp(n)
                }, t.url = function(n) {
                    return n = e.extend({
                        type: "url",
                        message: this.errMessages.url,
                        regexp: /^(http|https):\/\/(([A-Z0-9][A-Z0-9_\-]*)(\.[A-Z0-9][A-Z0-9_\-]*)+)(:(\d+))?\/?/i
                    }, n), t.regexp(n)
                }, t.match = function(t) {
                    if (!t.field) throw new Error('Missing required "field" options for "match" validator');
                    return t = e.extend({
                            type: "match",
                            message: this.errMessages.match
                        }, t),
                        function(n, i) {
                            t.value = n;
                            var r = {
                                type: t.type,
                                message: e.isFunction(t.message) ? t.message(t) : t.message
                            };
                            if (null !== n && void 0 !== n && "" !== n) return n !== i[t.field] ? r : void 0
                        }
                }, t
            }(), i.Fieldset = n.View.extend({
                initialize: function(t) {
                    t = t || {};
                    var n = this.schema = this.createSchema(t.schema);
                    this.fields = e.pick(t.fields, n.fields), this.template = t.template || n.template || this.template || this.constructor.template
                },
                createSchema: function(t) {
                    return e.isArray(t) && (t = {
                        fields: t
                    }), t.legend = t.legend || null, t
                },
                getFieldAt: function(t) {
                    var e = this.schema.fields[t];
                    return this.fields[e]
                },
                templateData: function() {
                    return this.schema
                },
                render: function() {
                    var t = (this.schema, this.fields),
                        i = n.$,
                        r = i(i.trim(this.template(e.result(this, "templateData"))));
                    return r.find("[data-fields]").add(r).each(function(n, r) {
                        var o = i(r),
                            s = o.attr("data-fields");
                        e.isUndefined(s) || e.each(t, function(t) {
                            o.append(t.render().el)
                        })
                    }), this.setElement(r), this
                },
                remove: function() {
                    e.each(this.fields, function(t) {
                        t.remove()
                    }), n.View.prototype.remove.call(this)
                }
            }, {
                template: e.template("    <fieldset data-fields>      <% if (legend) { %>        <legend><%= legend %></legend>      <% } %>    </fieldset>  ", null, i.templateSettings)
            }), i.Field = n.View.extend({
                initialize: function(t) {
                    t = t || {}, e.extend(this, e.pick(t, "form", "key", "model", "value", "idPrefix"));
                    var n = this.schema = this.createSchema(t.schema);
                    this.template = t.template || n.template || this.template || this.constructor.template, this.errorClassName = t.errorClassName || this.errorClassName || this.constructor.errorClassName, this.editor = this.createEditor()
                },
                createSchema: function(t) {
                    return e.isString(t) && (t = {
                        type: t
                    }), t = e.extend({
                        type: "Text",
                        title: this.createTitle()
                    }, t), t.type = e.isString(t.type) ? i.editors[t.type] : t.type, t
                },
                createEditor: function() {
                    var t = e.extend(e.pick(this, "schema", "form", "key", "model", "value"), {
                            id: this.createEditorId()
                        }),
                        n = this.schema.type;
                    return new n(t)
                },
                createEditorId: function() {
                    var t = this.idPrefix,
                        n = this.key;
                    return n = n.replace(/\./g, "_"), e.isString(t) || e.isNumber(t) ? t + n : e.isNull(t) ? n : this.model ? this.model.cid + "_" + n : n
                },
                createTitle: function() {
                    var t = this.key;
                    return t = t.replace(/([A-Z])/g, " $1"), t = t.replace(/^./, function(t) {
                        return t.toUpperCase()
                    })
                },
                templateData: function() {
                    var t = this.schema;
                    return {
                        help: t.help || "",
                        title: t.title,
                        titleHTML: t.titleHTML,
                        fieldAttrs: t.fieldAttrs,
                        editorAttrs: t.editorAttrs,
                        key: this.key,
                        editorId: this.editor.id
                    }
                },
                render: function() {
                    var t = this.schema,
                        i = this.editor,
                        r = n.$;
                    if (this.editor.noField === !0) return this.setElement(i.render().el);
                    var o = r(r.trim(this.template(e.result(this, "templateData"))));
                    return t.fieldClass && o.addClass(t.fieldClass), t.fieldAttrs && o.attr(t.fieldAttrs), o.find("[data-editor]").add(o).each(function(t, n) {
                        var o = r(n),
                            s = o.attr("data-editor");
                        e.isUndefined(s) || o.append(i.render().el)
                    }), this.setElement(o), this
                },
                disable: function() {
                    e.isFunction(this.editor.disable) ? this.editor.disable() : ($input = this.editor.$el, $input = $input.is("input") ? $input : $input.find("input"), $input.attr("disabled", !0))
                },
                enable: function() {
                    e.isFunction(this.editor.enable) ? this.editor.enable() : ($input = this.editor.$el, $input = $input.is("input") ? $input : $input.find("input"), $input.attr("disabled", !1))
                },
                validate: function() {
                    var t = this.editor.validate();
                    return t ? this.setError(t.message) : this.clearError(), t
                },
                setError: function(t) {
                    this.editor.hasNestedForm || (this.$el.addClass(this.errorClassName), this.$("[data-error]").html(t))
                },
                clearError: function() {
                    this.$el.removeClass(this.errorClassName), this.$("[data-error]").empty()
                },
                commit: function() {
                    return this.editor.commit()
                },
                getValue: function() {
                    return this.editor.getValue()
                },
                setValue: function(t) {
                    this.editor.setValue(t)
                },
                focus: function() {
                    this.editor.focus()
                },
                blur: function() {
                    this.editor.blur()
                },
                remove: function() {
                    this.editor.remove(), n.View.prototype.remove.call(this)
                }
            }, {
                template: e.template('    <div>      <label for="<%= editorId %>">        <% if (titleHTML){ %><%= titleHTML %>        <% } else { %><%- title %><% } %>      </label>      <div>        <span data-editor></span>        <div data-error></div>        <div><%= help %></div>      </div>    </div>  ', null, i.templateSettings),
                errorClassName: "error"
            }), i.NestedField = i.Field.extend({
                template: e.template('    <div>      <label for="<%= editorId %>">        <% if (titleHTML){ %><%= titleHTML %>        <% } else { %><%- title %><% } %>      </label>      <div>        <span data-editor></span>        <div class="error-text" data-error></div>        <div class="error-help"><%= help %></div>      </div>    </div>  ', null, i.templateSettings)
            }), i.Editor = i.editors.Base = n.View.extend({
                defaultValue: null,
                hasFocus: !1,
                initialize: function(t) {
                    var t = t || {};
                    if (t.model) {
                        if (!t.key) throw new Error("Missing option: 'key'");
                        this.model = t.model, this.value = this.model.get(t.key)
                    } else void 0 !== t.value && (this.value = t.value);
                    void 0 === this.value && (this.value = this.defaultValue), e.extend(this, e.pick(t, "key", "form"));
                    var n = this.schema = t.schema || {};
                    this.validators = t.validators || n.validators, this.$el.attr("id", this.id), this.$el.attr("name", this.getName()), n.editorClass && this.$el.addClass(n.editorClass), n.editorAttrs && this.$el.attr(n.editorAttrs)
                },
                getName: function() {
                    var t = this.key || "";
                    return t.replace(/\./g, "_")
                },
                getValue: function() {
                    return this.value
                },
                setValue: function(t) {
                    this.value = t
                },
                focus: function() {
                    throw new Error("Not implemented")
                },
                blur: function() {
                    throw new Error("Not implemented")
                },
                commit: function(t) {
                    var e = this.validate();
                    return e ? e : (this.listenTo(this.model, "invalid", function(t, n) {
                        e = n
                    }), this.model.set(this.key, this.getValue(), t), e ? e : void 0)
                },
                validate: function() {
                    var t = (this.$el, null),
                        n = this.getValue(),
                        i = this.form ? this.form.getValue() : {},
                        r = this.validators,
                        o = this.getValidator;
                    return r && e.every(r, function(e) {
                        return t = o(e)(n, i), t ? !1 : !0
                    }), t
                },
                trigger: function(t) {
                    return "focus" === t ? this.hasFocus = !0 : "blur" === t && (this.hasFocus = !1), n.View.prototype.trigger.apply(this, arguments)
                },
                getValidator: function(t) {
                    var n = i.validators;
                    if (e.isRegExp(t)) return n.regexp({
                        regexp: t
                    });
                    if (e.isString(t)) {
                        if (!n[t]) throw new Error('Validator "' + t + '" not found');
                        return n[t]()
                    }
                    if (e.isFunction(t)) return t;
                    if (e.isObject(t) && t.type) {
                        var r = t;
                        return n[r.type](r)
                    }
                    throw new Error("Invalid validator: " + t)
                }
            }), i.editors.Text = i.Editor.extend({
                tagName: "input",
                defaultValue: "",
                previousValue: "",
                events: {
                    keyup: "determineChange",
                    keypress: function() {
                        var t = this;
                        setTimeout(function() {
                            t.determineChange()
                        }, 0)
                    },
                    select: function() {
                        this.trigger("select", this)
                    },
                    focus: function() {
                        this.trigger("focus", this)
                    },
                    blur: function() {
                        this.trigger("blur", this)
                    }
                },
                initialize: function(t) {
                    i.editors.Base.prototype.initialize.call(this, t);
                    var e = this.schema,
                        n = "text";
                    e && e.editorAttrs && e.editorAttrs.type && (n = e.editorAttrs.type), e && e.dataType && (n = e.dataType), this.$el.attr("type", n)
                },
                render: function() {
                    return this.setValue(this.value), this
                },
                determineChange: function() {
                    var t = this.$el.val(),
                        e = t !== this.previousValue;
                    e && (this.previousValue = t, this.trigger("change", this))
                },
                getValue: function() {
                    return this.$el.val()
                },
                setValue: function(t) {
                    this.value = t, this.$el.val(t)
                },
                focus: function() {
                    this.hasFocus || this.$el.focus()
                },
                blur: function() {
                    this.hasFocus && this.$el.blur()
                },
                select: function() {
                    this.$el.select()
                }
            }), i.editors.TextArea = i.editors.Text.extend({
                tagName: "textarea",
                initialize: function(t) {
                    i.editors.Base.prototype.initialize.call(this, t)
                }
            }), i.editors.Password = i.editors.Text.extend({
                initialize: function(t) {
                    i.editors.Text.prototype.initialize.call(this, t), this.$el.attr("type", "password")
                }
            }), i.editors.Number = i.editors.Text.extend({
                defaultValue: 0,
                events: e.extend({}, i.editors.Text.prototype.events, {
                    keypress: "onKeyPress",
                    change: "onKeyPress"
                }),
                initialize: function(t) {
                    i.editors.Text.prototype.initialize.call(this, t);
                    var e = this.schema;
                    this.$el.attr("type", "number"), e && e.editorAttrs && e.editorAttrs.step || this.$el.attr("step", "any")
                },
                onKeyPress: function(t) {
                    var e = this,
                        n = function() {
                            setTimeout(function() {
                                e.determineChange()
                            }, 0)
                        };
                    if (0 === t.charCode) return void n();
                    var i = this.$el.val();
                    void 0 != t.charCode && (i += String.fromCharCode(t.charCode));
                    var r = /^[0-9]*\.?[0-9]*?$/.test(i);
                    r ? n() : t.preventDefault()
                },
                getValue: function() {
                    var t = this.$el.val();
                    return "" === t ? null : parseFloat(t, 10)
                },
                setValue: function(t) {
                    t = function() {
                        return e.isNumber(t) ? t : e.isString(t) && "" !== t ? parseFloat(t, 10) : null
                    }(), e.isNaN(t) && (t = null), this.value = t, i.editors.Text.prototype.setValue.call(this, t)
                }
            }), i.editors.Hidden = i.editors.Text.extend({
                defaultValue: "",
                noField: !0,
                initialize: function(t) {
                    i.editors.Text.prototype.initialize.call(this, t), this.$el.attr("type", "hidden")
                },
                focus: function() {},
                blur: function() {}
            }), i.editors.Checkbox = i.editors.Base.extend({
                defaultValue: !1,
                tagName: "input",
                events: {
                    click: function() {
                        this.trigger("change", this)
                    },
                    focus: function() {
                        this.trigger("focus", this)
                    },
                    blur: function() {
                        this.trigger("blur", this)
                    }
                },
                initialize: function(t) {
                    i.editors.Base.prototype.initialize.call(this, t), this.$el.attr("type", "checkbox")
                },
                render: function() {
                    return this.setValue(this.value), this
                },
                getValue: function() {
                    return this.$el.prop("checked")
                },
                setValue: function(t) {
                    t ? this.$el.prop("checked", !0) : this.$el.prop("checked", !1), this.value = !!t
                },
                focus: function() {
                    this.hasFocus || this.$el.focus()
                },
                blur: function() {
                    this.hasFocus && this.$el.blur()
                }
            }), i.editors.Select = i.editors.Base.extend({
                tagName: "select",
                previousValue: "",
                events: {
                    keyup: "determineChange",
                    keypress: function() {
                        var t = this;
                        setTimeout(function() {
                            t.determineChange()
                        }, 0)
                    },
                    change: function() {
                        this.trigger("change", this)
                    },
                    focus: function() {
                        this.trigger("focus", this)
                    },
                    blur: function() {
                        this.trigger("blur", this)
                    }
                },
                initialize: function(t) {
                    if (i.editors.Base.prototype.initialize.call(this, t), !this.schema || !this.schema.options) throw new Error("Missing required 'schema.options'")
                },
                render: function() {
                    return this.setOptions(this.schema.options), this
                },
                setOptions: function(t) {
                    var i = this;
                    if (t instanceof n.Collection) {
                        var r = t;
                        r.length > 0 ? this.renderOptions(t) : r.fetch({
                            success: function() {
                                i.renderOptions(t)
                            }
                        })
                    } else e.isFunction(t) ? t(function(t) {
                        i.renderOptions(t)
                    }, i) : this.renderOptions(t)
                },
                renderOptions: function(t) {
                    var e, n = this.$el;
                    e = this._getOptionsHtml(t), n.html(e), this.setValue(this.value)
                },
                _getOptionsHtml: function(t) {
                    var i;
                    if (e.isString(t)) i = t;
                    else if (e.isArray(t)) i = this._arrayToHtml(t);
                    else if (t instanceof n.Collection) i = this._collectionToHtml(t);
                    else if (e.isFunction(t)) {
                        var r;
                        t(function(t) {
                            r = t
                        }, this), i = this._getOptionsHtml(r)
                    } else i = this._objectToHtml(t);
                    return i
                },
                determineChange: function() {
                    var t = this.getValue(),
                        e = t !== this.previousValue;
                    e && (this.previousValue = t, this.trigger("change", this))
                },
                getValue: function() {
                    return this.$el.val()
                },
                setValue: function(t) {
                    this.value = t, this.$el.val(t)
                },
                focus: function() {
                    this.hasFocus || this.$el.focus()
                },
                blur: function() {
                    this.hasFocus && this.$el.blur()
                },
                _collectionToHtml: function(t) {
                    var e = [];
                    t.each(function(t) {
                        e.push({
                            val: t.id,
                            label: t.toString()
                        })
                    });
                    var n = this._arrayToHtml(e);
                    return n
                },
                _objectToHtml: function(t) {
                    var e = [];
                    for (var n in t) t.hasOwnProperty(n) && e.push({
                        val: n,
                        label: t[n]
                    });
                    var i = this._arrayToHtml(e);
                    return i
                },
                _arrayToHtml: function(n) {
                    var i = t();
                    return e.each(n, function(n) {
                        if (e.isObject(n))
                            if (n.group) {
                                var r = t("<optgroup>").attr("label", n.group).html(this._getOptionsHtml(n.options));
                                i = i.add(r)
                            } else {
                                var o = n.val || 0 === n.val ? n.val : "";
                                i = i.add(t("<option>").val(o).text(n.label))
                            }
                        else i = i.add(t("<option>").text(n))
                    }, this), i
                }
            }), i.editors.Radio = i.editors.Select.extend({
                tagName: "ul",
                events: {
                    "change input[type=radio]": function() {
                        this.trigger("change", this)
                    },
                    "focus input[type=radio]": function() {
                        this.hasFocus || this.trigger("focus", this)
                    },
                    "blur input[type=radio]": function() {
                        if (this.hasFocus) {
                            var t = this;
                            setTimeout(function() {
                                t.$("input[type=radio]:focus")[0] || t.trigger("blur", t)
                            }, 0)
                        }
                    }
                },
                getTemplate: function() {
                    return this.schema.template || this.constructor.template
                },
                getValue: function() {
                    return this.$("input[type=radio]:checked").val()
                },
                setValue: function(t) {
                    this.value = t, this.$("input[type=radio]").val([t])
                },
                focus: function() {
                    if (!this.hasFocus) {
                        var t = this.$("input[type=radio]:checked");
                        return t[0] ? void t.focus() : void this.$("input[type=radio]").first().focus()
                    }
                },
                blur: function() {
                    this.hasFocus && this.$("input[type=radio]:focus").blur()
                },
                _arrayToHtml: function(t) {
                    var n = this,
                        i = this.getTemplate(),
                        r = n.getName(),
                        o = n.id,
                        s = e.map(t, function(t, n) {
                            var i = {
                                name: r,
                                id: o + "-" + n
                            };
                            return e.isObject(t) ? (i.value = t.val || 0 === t.val ? t.val : "", i.label = t.label, i.labelHTML = t.labelHTML) : (i.value = t, i.label = t), i
                        });
                    return i({
                        items: s
                    })
                }
            }, {
                template: e.template('    <% _.each(items, function(item) { %>      <li>        <input type="radio" name="<%= item.name %>" value="<%- item.value %>" id="<%= item.id %>" />        <label for="<%= item.id %>"><% if (item.labelHTML){ %><%= item.labelHTML %><% }else{ %><%- item.label %><% } %></label>      </li>    <% }); %>  ', null, i.templateSettings)
            }), i.editors.Checkboxes = i.editors.Select.extend({
                tagName: "ul",
                groupNumber: 0,
                events: {
                    "click input[type=checkbox]": function() {
                        this.trigger("change", this)
                    },
                    "focus input[type=checkbox]": function() {
                        this.hasFocus || this.trigger("focus", this)
                    },
                    "blur input[type=checkbox]": function() {
                        if (this.hasFocus) {
                            var t = this;
                            setTimeout(function() {
                                t.$("input[type=checkbox]:focus")[0] || t.trigger("blur", t)
                            }, 0)
                        }
                    }
                },
                getValue: function() {
                    var e = [];
                    return this.$("input[type=checkbox]:checked").each(function() {
                        e.push(t(this).val())
                    }), e
                },
                setValue: function(t) {
                    e.isArray(t) || (t = [t]), this.value = t, this.$("input[type=checkbox]").val(t)
                },
                focus: function() {
                    this.hasFocus || this.$("input[type=checkbox]").first().focus()
                },
                blur: function() {
                    this.hasFocus && this.$("input[type=checkbox]:focus").blur()
                },
                _arrayToHtml: function(n) {
                    var i = t(),
                        r = this;
                    return e.each(n, function(n, o) {
                        var s = t("<li>");
                        if (e.isObject(n))
                            if (n.group) {
                                var a = r.id;
                                r.id += "-" + r.groupNumber++, s = t('<fieldset class="group">').append(t("<legend>").text(n.group)), s = s.append(r._arrayToHtml(n.options)), r.id = a, close = !1
                            } else {
                                var l = n.val || 0 === n.val ? n.val : "";
                                s.append(t('<input type="checkbox" name="' + r.getName() + '" id="' + r.id + "-" + o + '" />').val(l)), s.append(n.labelHTML ? t('<label for="' + r.id + "-" + o + '">').html(n.labelHTML) : t('<label for="' + r.id + "-" + o + '">').text(n.label))
                            }
                        else s.append(t('<input type="checkbox" name="' + r.getName() + '" id="' + r.id + "-" + o + '" />').val(n)), s.append(t('<label for="' + r.id + "-" + o + '">').text(n));
                        i = i.add(s)
                    }), i
                }
            }), i.editors.Object = i.editors.Base.extend({
                hasNestedForm: !0,
                initialize: function(t) {
                    if (this.value = {}, i.editors.Base.prototype.initialize.call(this, t), !this.form) throw new Error('Missing required option "form"');
                    if (!this.schema.subSchema) throw new Error("Missing required 'schema.subSchema' option for Object editor")
                },
                render: function() {
                    var t = this.form.constructor;
                    return this.nestedForm = new t({
                        schema: this.schema.subSchema,
                        data: this.value,
                        idPrefix: this.id + "_",
                        Field: t.NestedField
                    }), this._observeFormEvents(), this.$el.html(this.nestedForm.render().el), this.hasFocus && this.trigger("blur", this), this
                },
                getValue: function() {
                    return this.nestedForm ? this.nestedForm.getValue() : this.value
                },
                setValue: function(t) {
                    this.value = t, this.render()
                },
                focus: function() {
                    this.hasFocus || this.nestedForm.focus()
                },
                blur: function() {
                    this.hasFocus && this.nestedForm.blur()
                },
                remove: function() {
                    this.nestedForm.remove(), n.View.prototype.remove.call(this)
                },
                validate: function() {
                    var t = e.extend({}, i.editors.Base.prototype.validate.call(this), this.nestedForm.validate());
                    return e.isEmpty(t) ? !1 : t
                },
                _observeFormEvents: function() {
                    this.nestedForm && this.nestedForm.on("all", function() {
                        var t = e.toArray(arguments);
                        t[1] = this, this.trigger.apply(this, t)
                    }, this)
                }
            }), i.editors.NestedModel = i.editors.Object.extend({
                initialize: function(t) {
                    if (i.editors.Base.prototype.initialize.call(this, t), !this.form) throw new Error('Missing required option "form"');
                    if (!t.schema.model) throw new Error('Missing required "schema.model" option for NestedModel editor')
                },
                render: function() {
                    var t = this.form.constructor,
                        e = this.value || {},
                        n = (this.key, this.schema.model),
                        i = e.constructor === n ? e : new n(e);
                    return this.nestedForm = new t({
                        model: i,
                        idPrefix: this.id + "_",
                        fieldTemplate: "nestedField"
                    }), this._observeFormEvents(), this.$el.html(this.nestedForm.render().el), this.hasFocus && this.trigger("blur", this), this
                },
                commit: function() {
                    var t = this.nestedForm.commit();
                    return t ? (this.$el.addClass("error"), t) : i.editors.Object.prototype.commit.call(this)
                }
            }), i.editors.Date = i.editors.Base.extend({
                events: {
                    "change select": function() {
                        this.updateHidden(), this.trigger("change", this)
                    },
                    "focus select": function() {
                        this.hasFocus || this.trigger("focus", this)
                    },
                    "blur select": function() {
                        if (this.hasFocus) {
                            var t = this;
                            setTimeout(function() {
                                t.$("select:focus")[0] || t.trigger("blur", t)
                            }, 0)
                        }
                    }
                },
                initialize: function(t) {
                    t = t || {}, i.editors.Base.prototype.initialize.call(this, t);
                    var n = i.editors.Date,
                        r = new Date;
                    if (this.options = e.extend({
                            monthNames: n.monthNames,
                            showMonthNames: n.showMonthNames
                        }, t), this.schema = e.extend({
                            yearStart: r.getFullYear() - 100,
                            yearEnd: r.getFullYear()
                        }, t.schema || {}), this.value && !e.isDate(this.value) && (this.value = new Date(this.value)), !this.value) {
                        var o = new Date;
                        o.setSeconds(0), o.setMilliseconds(0), this.value = o
                    }
                    this.template = t.template || this.constructor.template
                },
                render: function() {
                    var t = this.options,
                        i = this.schema,
                        r = n.$,
                        o = e.map(e.range(1, 32), function(t) {
                            return '<option value="' + t + '">' + t + "</option>"
                        }),
                        s = e.map(e.range(0, 12), function(e) {
                            var n = t.showMonthNames ? t.monthNames[e] : e + 1;
                            return '<option value="' + e + '">' + n + "</option>"
                        }),
                        a = i.yearStart < i.yearEnd ? e.range(i.yearStart, i.yearEnd + 1) : e.range(i.yearStart, i.yearEnd - 1, -1),
                        l = e.map(a, function(t) {
                            return '<option value="' + t + '">' + t + "</option>"
                        }),
                        c = r(r.trim(this.template({
                            dates: o.join(""),
                            months: s.join(""),
                            years: l.join("")
                        })));
                    return this.$date = c.find('[data-type="date"]'), this.$month = c.find('[data-type="month"]'), this.$year = c.find('[data-type="year"]'), this.$hidden = r('<input type="hidden" name="' + this.key + '" />'), c.append(this.$hidden), this.setValue(this.value), this.setElement(c), this.$el.attr("id", this.id), this.$el.attr("name", this.getName()), this.hasFocus && this.trigger("blur", this), this
                },
                getValue: function() {
                    var t = this.$year.val(),
                        e = this.$month.val(),
                        n = this.$date.val();
                    return t && e && n ? new Date(t, e, n) : null
                },
                setValue: function(t) {
                    this.value = t, this.$date.val(t.getDate()), this.$month.val(t.getMonth()), this.$year.val(t.getFullYear()), this.updateHidden()
                },
                focus: function() {
                    this.hasFocus || this.$("select").first().focus()
                },
                blur: function() {
                    this.hasFocus && this.$("select:focus").blur()
                },
                updateHidden: function() {
                    var t = this.getValue();
                    e.isDate(t) && (t = t.toISOString()), this.$hidden.val(t)
                }
            }, {
                template: e.template('    <div>      <select data-type="date"><%= dates %></select>      <select data-type="month"><%= months %></select>      <select data-type="year"><%= years %></select>    </div>  ', null, i.templateSettings),
                showMonthNames: !0,
                monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
            }), i.editors.DateTime = i.editors.Base.extend({
                events: {
                    "change select": function() {
                        this.updateHidden(), this.trigger("change", this)
                    },
                    "focus select": function() {
                        this.hasFocus || this.trigger("focus", this)
                    },
                    "blur select": function() {
                        if (this.hasFocus) {
                            var t = this;
                            setTimeout(function() {
                                t.$("select:focus")[0] || t.trigger("blur", t)
                            }, 0)
                        }
                    }
                },
                initialize: function(t) {
                    t = t || {}, i.editors.Base.prototype.initialize.call(this, t), this.options = e.extend({
                        DateEditor: i.editors.DateTime.DateEditor
                    }, t), this.schema = e.extend({
                        minsInterval: 15
                    }, t.schema || {}), this.dateEditor = new this.options.DateEditor(t), this.value = this.dateEditor.value, this.template = t.template || this.constructor.template
                },
                render: function() {
                    function t(t) {
                        return 10 > t ? "0" + t : t
                    }
                    var i = this.schema,
                        r = n.$,
                        o = e.map(e.range(0, 24), function(e) {
                            return '<option value="' + e + '">' + t(e) + "</option>"
                        }),
                        s = e.map(e.range(0, 60, i.minsInterval), function(e) {
                            return '<option value="' + e + '">' + t(e) + "</option>"
                        }),
                        a = r(r.trim(this.template({
                            hours: o.join(),
                            mins: s.join()
                        })));
                    return a.find("[data-date]").append(this.dateEditor.render().el), this.$hour = a.find('select[data-type="hour"]'), this.$min = a.find('select[data-type="min"]'), this.$hidden = a.find('input[type="hidden"]'), this.setValue(this.value), this.setElement(a), this.$el.attr("id", this.id), this.$el.attr("name", this.getName()), this.hasFocus && this.trigger("blur", this), this
                },
                getValue: function() {
                    var t = this.dateEditor.getValue(),
                        e = this.$hour.val(),
                        n = this.$min.val();
                    return t && e && n ? (t.setHours(e), t.setMinutes(n), t) : null
                },
                setValue: function(t) {
                    e.isDate(t) || (t = new Date(t)), this.value = t, this.dateEditor.setValue(t), this.$hour.val(t.getHours()), this.$min.val(t.getMinutes()), this.updateHidden()
                },
                focus: function() {
                    this.hasFocus || this.$("select").first().focus()
                },
                blur: function() {
                    this.hasFocus && this.$("select:focus").blur()
                },
                updateHidden: function() {
                    var t = this.getValue();
                    e.isDate(t) && (t = t.toISOString()), this.$hidden.val(t)
                },
                remove: function() {
                    this.dateEditor.remove(), i.editors.Base.prototype.remove.call(this)
                }
            }, {
                template: e.template('    <div class="bbf-datetime">      <div class="bbf-date-container" data-date></div>      <select data-type="hour"><%= hours %></select>      :      <select data-type="min"><%= mins %></select>    </div>  ', null, i.templateSettings),
                DateEditor: i.editors.Date
            }), i.VERSION = "0.14.0", n.Form = i, i
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("backbone-forms-ext", ["require", "jquery", "underscore", "components/base/BaseView", "backbone-forms"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), a = e("underscore"), o = e("components/base/BaseView"), r = e("backbone-forms"), s = function(e) {
                    function r() {
                        return this.render = t(this.render, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.Field.template = a.template('<div class="control-form field-<%= key %>">\n  <div>\n    <div class="help-block" data-error></div>\n    <span data-editor></span>\n  </div>\n</div>'), r.prototype.render = function() {
                        var t, e, n;
                        return t = i(this.el), r.__super__.render.apply(this, arguments), n = ['input[type="text"]', 'input[type="email"]', 'input[type="password"]', 'input[type="number"]', 'input[type="search"]', 'input[type="url"]', "textarea", "select"], e = n.join(", "), this.$el.find("form").find(e).addClass("form-control"), t.replaceWith(this.el), this
                    }, r.prototype.transitionIn = o.prototype.transitionIn, r.prototype.transitionOut = o.prototype.transitionOut, r.prototype.setupSyncListeners = o.prototype.setupSyncListeners, r.prototype.showOverlay = o.prototype.showOverlay, r.prototype.hideOverlay = o.prototype.hideOverlay, r
                }(r), Backbone.Form = s
            })
        }.call(this),
        function(t) {
            function e(t, e, u) {
                var d = 0,
                    p = [0],
                    f = "",
                    m = null,
                    f = u || "UTF8";
                if ("UTF8" !== f && "UTF16BE" !== f && "UTF16LE" !== f) throw "encoding must be UTF8, UTF16BE, or UTF16LE";
                if ("HEX" === e) {
                    if (0 !== t.length % 2) throw "srcString of HEX type must be in byte increments";
                    m = i(t), d = m.binLen, p = m.value
                } else if ("TEXT" === e || "ASCII" === e) m = n(t, f), d = m.binLen, p = m.value;
                else if ("B64" === e) m = o(t), d = m.binLen, p = m.value;
                else {
                    if ("BYTES" !== e) throw "inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";
                    m = r(t), d = m.binLen, p = m.value
                }
                this.getHash = function(t, e, n, i) {
                    var r, o = null,
                        u = p.slice(),
                        f = d;
                    if (3 === arguments.length ? "number" != typeof n && (i = n, n = 1) : 2 === arguments.length && (n = 1), n !== parseInt(n, 10) || 1 > n) throw "numRounds must a integer >= 1";
                    switch (e) {
                        case "HEX":
                            o = s;
                            break;
                        case "B64":
                            o = a;
                            break;
                        case "BYTES":
                            o = l;
                            break;
                        default:
                            throw "format must be HEX, B64, or BYTES"
                    }
                    if ("SHA-1" !== t) throw "Chosen SHA variant is not supported";
                    for (r = 0; n > r; r += 1) u = h(u, f), f = 160;
                    return o(u, c(i))
                }, this.getHMAC = function(t, e, u, m, g) {
                    var v, _, y, b, w = [],
                        P = [];
                    switch (v = null, m) {
                        case "HEX":
                            m = s;
                            break;
                        case "B64":
                            m = a;
                            break;
                        case "BYTES":
                            m = l;
                            break;
                        default:
                            throw "outputFormat must be HEX, B64, or BYTES"
                    }
                    if ("SHA-1" !== u) throw "Chosen SHA variant is not supported";
                    if (_ = 64, b = 160, "HEX" === e) v = i(t), y = v.binLen, v = v.value;
                    else if ("TEXT" === e || "ASCII" === e) v = n(t, f), y = v.binLen, v = v.value;
                    else if ("B64" === e) v = o(t), y = v.binLen, v = v.value;
                    else {
                        if ("BYTES" !== e) throw "inputFormat must be HEX, TEXT, ASCII, B64, or BYTES";
                        v = r(t), y = v.binLen, v = v.value
                    }
                    if (t = 8 * _, e = _ / 4 - 1, y / 8 > _) {
                        if ("SHA-1" !== u) throw "Unexpected error in HMAC implementation";
                        for (v = h(v, y); v.length <= e;) v.push(0);
                        v[e] &= 4294967040
                    } else if (_ > y / 8) {
                        for (; v.length <= e;) v.push(0);
                        v[e] &= 4294967040
                    }
                    for (_ = 0; e >= _; _ += 1) w[_] = 909522486 ^ v[_], P[_] = 1549556828 ^ v[_];
                    if ("SHA-1" !== u) throw "Unexpected error in HMAC implementation";
                    return u = h(P.concat(h(w.concat(p), t + d)), t + b), m(u, c(g))
                }
            }

            function n(t, e) {
                var n, i, r, o, s = [],
                    a = [],
                    l = 0;
                if ("UTF8" === e)
                    for (i = 0; i < t.length; i += 1)
                        for (n = t.charCodeAt(i), a = [], 128 > n ? a.push(n) : 2048 > n ? (a.push(192 | n >>> 6), a.push(128 | 63 & n)) : 55296 > n || n >= 57344 ? a.push(224 | n >>> 12, 128 | n >>> 6 & 63, 128 | 63 & n) : (i += 1, n = 65536 + ((1023 & n) << 10 | 1023 & t.charCodeAt(i)), a.push(240 | n >>> 18, 128 | n >>> 12 & 63, 128 | n >>> 6 & 63, 128 | 63 & n)), r = 0; r < a.length; r += 1) {
                            for (o = l >>> 2; s.length <= o;) s.push(0);
                            s[o] |= a[r] << 24 - l % 4 * 8, l += 1
                        } else if ("UTF16BE" === e || "UTF16LE" === e)
                            for (i = 0; i < t.length; i += 1) {
                                for (n = t.charCodeAt(i), "UTF16LE" === e && (r = 255 & n, n = r << 8 | n >> 8), o = l >>> 2; s.length <= o;) s.push(0);
                                s[o] |= n << 16 - l % 4 * 8, l += 2
                            }
                        return {
                            value: s,
                            binLen: 8 * l
                        }
            }

            function i(t) {
                var e, n, i, r = [],
                    o = t.length;
                if (0 !== o % 2) throw "String of HEX type must be in byte increments";
                for (e = 0; o > e; e += 2) {
                    if (n = parseInt(t.substr(e, 2), 16), isNaN(n)) throw "String of HEX type contains invalid characters";
                    for (i = e >>> 3; r.length <= i;) r.push(0);
                    r[e >>> 3] |= n << 24 - e % 8 * 4
                }
                return {
                    value: r,
                    binLen: 4 * o
                }
            }

            function r(t) {
                var e, n, i, r = [];
                for (n = 0; n < t.length; n += 1) e = t.charCodeAt(n), i = n >>> 2, r.length <= i && r.push(0), r[i] |= e << 24 - n % 4 * 8;
                return {
                    value: r,
                    binLen: 8 * t.length
                }
            }

            function o(t) {
                var e, n, i, r, o, s = [],
                    a = 0;
                if (-1 === t.search(/^[a-zA-Z0-9=+\/]+$/)) throw "Invalid character in base-64 string";
                if (n = t.indexOf("="), t = t.replace(/\=/g, ""), -1 !== n && n < t.length) throw "Invalid '=' found in base-64 string";
                for (n = 0; n < t.length; n += 4) {
                    for (o = t.substr(n, 4), i = r = 0; i < o.length; i += 1) e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(o[i]), r |= e << 18 - 6 * i;
                    for (i = 0; i < o.length - 1; i += 1) {
                        for (e = a >>> 2; s.length <= e;) s.push(0);
                        s[e] |= (r >>> 16 - 8 * i & 255) << 24 - a % 4 * 8, a += 1
                    }
                }
                return {
                    value: s,
                    binLen: 8 * a
                }
            }

            function s(t, e) {
                var n, i, r = "",
                    o = 4 * t.length;
                for (n = 0; o > n; n += 1) i = t[n >>> 2] >>> 8 * (3 - n % 4), r += "0123456789abcdef".charAt(i >>> 4 & 15) + "0123456789abcdef".charAt(15 & i);
                return e.outputUpper ? r.toUpperCase() : r
            }

            function a(t, e) {
                var n, i, r, o = "",
                    s = 4 * t.length;
                for (n = 0; s > n; n += 3)
                    for (r = n + 1 >>> 2, i = t.length <= r ? 0 : t[r], r = n + 2 >>> 2, r = t.length <= r ? 0 : t[r], r = (t[n >>> 2] >>> 8 * (3 - n % 4) & 255) << 16 | (i >>> 8 * (3 - (n + 1) % 4) & 255) << 8 | r >>> 8 * (3 - (n + 2) % 4) & 255, i = 0; 4 > i; i += 1) o = 8 * n + 6 * i <= 32 * t.length ? o + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r >>> 6 * (3 - i) & 63) : o + e.b64Pad;
                return o
            }

            function l(t) {
                var e, n, i = "",
                    r = 4 * t.length;
                for (e = 0; r > e; e += 1) n = t[e >>> 2] >>> 8 * (3 - e % 4) & 255, i += String.fromCharCode(n);
                return i
            }

            function c(t) {
                var e = {
                    outputUpper: !1,
                    b64Pad: "="
                };
                try {
                    t.hasOwnProperty("outputUpper") && (e.outputUpper = t.outputUpper), t.hasOwnProperty("b64Pad") && (e.b64Pad = t.b64Pad)
                } catch (n) {}
                if ("boolean" != typeof e.outputUpper) throw "Invalid outputUpper formatting option";
                if ("string" != typeof e.b64Pad) throw "Invalid b64Pad formatting option";
                return e
            }

            function u(t, e) {
                return t << e | t >>> 32 - e
            }

            function d(t, e) {
                var n = (65535 & t) + (65535 & e);
                return ((t >>> 16) + (e >>> 16) + (n >>> 16) & 65535) << 16 | 65535 & n
            }

            function p(t, e, n, i, r) {
                var o = (65535 & t) + (65535 & e) + (65535 & n) + (65535 & i) + (65535 & r);
                return ((t >>> 16) + (e >>> 16) + (n >>> 16) + (i >>> 16) + (r >>> 16) + (o >>> 16) & 65535) << 16 | 65535 & o
            }

            function h(t, e) {
                var n, i, r, o, s, a, l, c, h, f = [],
                    m = [1732584193, 4023233417, 2562383102, 271733878, 3285377520];
                for (n = (e + 65 >>> 9 << 4) + 15; t.length <= n;) t.push(0);
                for (t[e >>> 5] |= 128 << 24 - e % 32, t[n] = e, h = t.length, l = 0; h > l; l += 16) {
                    for (n = m[0], i = m[1], r = m[2], o = m[3], s = m[4], c = 0; 80 > c; c += 1) f[c] = 16 > c ? t[c + l] : u(f[c - 3] ^ f[c - 8] ^ f[c - 14] ^ f[c - 16], 1), a = 20 > c ? p(u(n, 5), i & r ^ ~i & o, s, 1518500249, f[c]) : 40 > c ? p(u(n, 5), i ^ r ^ o, s, 1859775393, f[c]) : 60 > c ? p(u(n, 5), i & r ^ i & o ^ r & o, s, 2400959708, f[c]) : p(u(n, 5), i ^ r ^ o, s, 3395469782, f[c]), s = o, o = r, r = u(i, 30), i = n, n = a;
                    m[0] = d(n, m[0]), m[1] = d(i, m[1]), m[2] = d(r, m[2]), m[3] = d(o, m[3]), m[4] = d(s, m[4])
                }
                return m
            }
            "function" == typeof define && define.amd ? define("jssha", [], function() {
                return e
            }) : "undefined" != typeof exports ? "undefined" != typeof module && module.exports ? module.exports = exports = e : exports = e : t.jsSHA = e
        }(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/PanelModel", ["require", "underscore", "components/base/AuthModel", "libraries/Auth", "jssha"], function(e) {
                var i, r, o, s, a;
                return a = e("underscore"), r = e("components/base/AuthModel"), i = e("libraries/Auth"), o = e("jssha"), s = function(e) {
                    function r() {
                        return this.storeLogin = t(this.storeLogin, this), this.hashPassword = t(this.hashPassword, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.initialize = function() {
                        return r.__super__.initialize.apply(this, arguments), this.on("change:hash", this.hashPassword), this.on("sync", this.storeLogin)
                    }, r.prototype.hashPassword = function() {
                        var t, e;
                        return t = this.get("hash"), e = new o(t, "TEXT"), this.set("hash", e.getHash("SHA-1", "HEX"), {
                            silent: !0
                        })
                    }, r.prototype.storeLogin = function(t) {
                        return i.prototype.storeLocalData(this.attributes), this.trigger("sync_complete", t)
                    }, r
                }(r)
            })
        }.call(this), define("text-cns!components/login/login_panel/tmpl_remember_me.html", [], function() {
            return '<div class="checkbox clearfix">\n    <a id="reset" class="pull-right" href="#">Forgot password?</a>\n    <label class="checkbox pull-left"><span data-editor></span><%= title %></label>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/login_panel/LoginPanelModel", ["require", "underscore", "libraries/Auth", "../PanelModel", "text-cns!./tmpl_remember_me.html"], function(e) {
                var i, r, o, s, a;
                return a = e("underscore"), i = e("libraries/Auth"), o = e("../PanelModel"), s = e("text-cns!./tmpl_remember_me.html"), r = function(e) {
                    function r() {
                        return this.storeLogin = t(this.storeLogin, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.attrWhitelist = ["username", "hash"], r.prototype.schema = {
                        username: {
                            dataType: "email",
                            editorAttrs: {
                                placeholder: "Email Address"
                            },
                            validators: ["required", "email"]
                        },
                        hash: {
                            type: "Password",
                            editorAttrs: {
                                placeholder: "Password"
                            },
                            validators: ["required"]
                        },
                        remember: {
                            type: "Checkbox",
                            title: "Remember Me",
                            template: a.template(s)
                        }
                    }, r.prototype.storeLogin = function() {
                        return i.prototype.setCookie(this.get("remember")), r.__super__.storeLogin.apply(this, arguments)
                    }, r
                }(o)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/login_panel/FBLoginPanelModel", ["require", "underscore", "libraries/Auth", "../PanelModel"], function(e) {
                var i, r, o, s;
                return s = e("underscore"), i = e("libraries/Auth"), o = e("../PanelModel"), r = function(e) {
                    function i() {
                        return this.storeLogin = t(this.storeLogin, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.attrWhitelist = ["username", "signed_request"], i.prototype.schema = {
                        username: {
                            dataType: "email",
                            validators: ["required", "email"]
                        },
                        signed_request: {
                            type: "text",
                            validators: ["required"]
                        }
                    }, i.prototype.storeLogin = function() {
                        return i.__super__.storeLogin.apply(this, arguments)
                    }, i
                }(o)
            })
        }.call(this), define("text-cns!components/login/login_panel/tmpl_login_panel.html", [], function() {
            return '<div id="login-panel" class="modal fade panel-container">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <i class="fa fa-times"></i>\n                </button>\n            </div>\n\n            <div class="modal-body">\n                <div class="">\n                    <div class="alert alert-danger hide invalid"><span></span></div>\n                    <form>\n                        <div data-fields="username,hash,remember"></div>\n                        <button type="submit" class="btn btn-lg btn-primary">Log In</button>\n                    </form>\n                </div>\n\n                <% /*\n                <div class="">\n                    <div class="divider">\n                        <hr class="pull-left"/>or<hr class="pull-right" />\n                    </div>\n                </div>\n\n                <div class="">\n                    <button id="fb_login" type="button" class="btn btn-lg btn-facebook">Log in with Facebook</button>\n                </div>\n                */ %>\n            </div>\n\n            <div class="modal-footer">\n                <hr/>\n                <p>Don\'t have an account? <a id="join" href="#">Join here</a></p>\n            </div>\n        </div>\n    </div>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/Facebook", ["require", "underscore"], function(e) {
                var n, i;
                return i = e("underscore"), n = function() {
                    function e() {
                        this.get_user_data = t(this.get_user_data, this), this.login = t(this.login, this)
                    }
                    return e.prototype.login = function(t) {
                        return FB.getLoginStatus(function(e) {
                            return function(n) {
                                return "connected" === n.status ? e.get_user_data(function(e) {
                                    return t(n, e)
                                }) : FB.login(function(n) {
                                    return e.get_user_data(function(e) {
                                        return t(n, e)
                                    })
                                }, {
                                    scope: "email"
                                })
                            }
                        }(this))
                    }, e.prototype.get_user_data = function(t) {
                        return FB.api("/me", {
                            fields: "name,email"
                        }, function() {
                            return function(e) {
                                return e && !e.error ? t(e) : void 0
                            }
                        }(this))
                    }, e
                }()
            })
        }.call(this),
        function(t) {
            "function" == typeof require && "undefined" != typeof module && module.exports ? module.exports = t(require("underscore")) : "function" == typeof define ? define("cocktail", ["underscore"], t) : this.Cocktail = t(_)
        }(function(t) {
            var e = {};
            e.mixins = {}, e.mixin = function(n) {
                var i = t.chain(arguments).toArray().slice(1).flatten().value(),
                    r = n.prototype || n,
                    o = {};
                return t.each(i, function(n) {
                    t.isString(n) && (n = e.mixins[n]), t.each(n, function(e, n) {
                        if (t.isFunction(e)) {
                            if (r[n] === e) return;
                            r[n] && (o[n] = o.hasOwnProperty(n) ? o[n] : [r[n]], o[n].push(e)), r[n] = e
                        } else t.isArray(e) ? r[n] = t.union(e, r[n] || []) : t.isObject(e) ? r[n] = t.extend({}, e, r[n] || {}) : n in r || (r[n] = e)
                    })
                }), t.each(o, function(e, n) {
                    r[n] = function() {
                        var n, i = this,
                            r = arguments;
                        return t.each(e, function(e) {
                            var o = t.isFunction(e) ? e.apply(i, r) : e;
                            n = "undefined" == typeof o ? n : o
                        }), n
                    }
                }), n
            };
            var n;
            return e.patch = function(i) {
                n = i.Model.extend;
                var r = function(t, i) {
                    var r = n.call(this, t, i),
                        o = r.prototype.mixins;
                    return o && r.prototype.hasOwnProperty("mixins") && e.mixin(r, o), r
                };
                t.each([i.Model, i.Collection, i.Router, i.View], function(n) {
                    n.mixin = function() {
                        e.mixin(this, t.toArray(arguments))
                    }, n.extend = r
                })
            }, e.unpatch = function(e) {
                t.each([e.Model, e.Collection, e.Router, e.View], function(t) {
                    t.mixin = void 0, t.extend = n
                })
            }, e
        }),
        function() {
            define("mixins/AuthFormMixin", ["require", "libraries/Auth"], function(t) {
                var e, n;
                return e = t("libraries/Auth"), n = {
                    submitError: function(t, n) {
                        var i;
                        return 403 === n.status && e.prototype.logout(), i = this.errorMessage(n, this.validationMessages), this.displayError(i)
                    },
                    errorMessage: function(t, e) {
                        var n, i, r, o, s;
                        try {
                            o = null != (s = JSON.parse(t.responseText)) ? s.errors : void 0
                        } catch (a) {
                            n = a, o = void 0
                        }
                        return i = "Something went wrong with your submission.", 400 === t.status ? (this.triggerValidationError(o), r = _.map(o, function(t) {
                            return _.has(e, t) && (t = e[t], "function" == typeof t && (t = t())), t
                        }), i = r.join("<br>")) : 403 === t.status && (i = "Not logged in. Please log back in again."), i
                    },
                    triggerValidationError: function(t) {
                        var e;
                        return e = [], _.isArray(t) ? _.each(t, function(t) {
                            return e.push({
                                type: t,
                                field: "N/A"
                            })
                        }) : _.each(t, function(t, n) {
                            return e.push({
                                type: t.type,
                                field: n
                            })
                        }), this.trigger("validation_error", e)
                    },
                    displayError: function(t) {
                        return this.$(".invalid").html(t).removeClass("hide")
                    },
                    hideError: function(t) {
                        return this.$(".invalid").html(t).addClass("hide")
                    }
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/login_panel/LoginPanelView", ["require", "jquery", "cns-jquery", "underscore", "canstar_widget", "backbone", "backbone-forms", "libraries/Auth", "./LoginPanelModel", "./FBLoginPanelModel", "text-cns!components/login/login_panel/tmpl_login_panel.html", "libraries/Facebook", "cocktail", "mixins/AuthFormMixin"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h, f, m;
                return i = e("jquery"), h = e("cns-jquery"), m = e("underscore"), p = e("canstar_widget"), s = e("backbone"), e("backbone-forms"), r = e("libraries/Auth"), u = e("./LoginPanelModel"), l = e("./FBLoginPanelModel"), f = e("text-cns!components/login/login_panel/tmpl_login_panel.html"), c = e("libraries/Facebook"), a = e("cocktail"), o = e("mixins/AuthFormMixin"), d = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.onResetClick = t(this.onResetClick, this), this.onJoinClick = t(this.onJoinClick, this), this.onFBLoginClick = t(this.onFBLoginClick, this), this.onSubmit = t(this.onSubmit, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.stylesheets = ["components/login/login_panel/login_panel.css"], i.prototype.events = {
                        change: "onChange",
                        submit: "onSubmit",
                        "click #join": "onJoinClick",
                        "click #reset": "onResetClick",
                        "click #fb_login": "onFBLoginClick"
                    }, i.prototype.validationMessages = {
                        "User not found or invalid hash": "Invalid Email or Password"
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.model = t.model = new u, t.model.url = "" + p.auth.base_url + "api/auth/login", this.fb_model = new l, this.fb_model.url = "" + p.auth.base_url + "api/auth/login_fb", t.template = m.template(f), this.setupSyncListeners([this.model, this.fb_model]), i.__super__.initialize.call(this, t)
                    }, i.prototype.onSubmit = function(t) {
                        var e;
                        return t.preventDefault(), e = this.commit({
                            validate: !0
                        }), e ? this.triggerValidationError(e) : this.model.save(null, {
                            error: function(t) {
                                return function() {
                                    return t.submitError.apply(t, arguments)
                                }
                            }(this)
                        })
                    }, i.prototype.onFBLoginClick = function(t) {
                        return null != t && t.preventDefault(), c.prototype.login(function(t) {
                            return function(e, n) {
                                return t.fb_model.set("username", n.email), t.fb_model.set("signed_request", e.authResponse.signedRequest), t.fb_model.save(null, {
                                    error: t.submitError
                                })
                            }
                        }(this))
                    }, i.prototype.onJoinClick = function(t) {
                        return null != t && t.preventDefault(), this.trigger("join")
                    }, i.prototype.onResetClick = function(t) {
                        return null != t && t.preventDefault(), this.trigger("password_reset")
                    }, i.prototype.close = function() {
                        return this.unbind(), "function" == typeof this.onClose && this.onClose(), this.remove()
                    }, i
                }(s.Form), a.mixin(d, o)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/join_panel/JoinPanelModel", ["require", "underscore", "../PanelModel"], function(e) {
                var i, r, o;
                return o = e("underscore"), r = e("../PanelModel"), i = function(e) {
                    function i() {
                        return this.checkConfirmPassword = t(this.checkConfirmPassword, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.attrWhitelist = ["full_name", "username", "hash", "visitor_uuid", "flagged_delete_on", "provider"], i.prototype.schema = {
                        full_name: {
                            title: "Full Name",
                            editorAttrs: {
                                placeholder: "Full Name"
                            },
                            validators: ["required"]
                        },
                        username: {
                            dataType: "email",
                            title: "Email Address",
                            editorAttrs: {
                                placeholder: "Email Address"
                            },
                            validators: ["required", "email"]
                        },
                        hash: {
                            type: "Password",
                            title: "Password",
                            editorAttrs: {
                                placeholder: "Password"
                            },
                            validators: ["required"]
                        },
                        confirm_hash: {
                            type: "Password",
                            title: "Confirm Password",
                            editorAttrs: {
                                placeholder: "Confirm Password"
                            },
                            validators: ["required"]
                        }
                    }, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments), this.schema.hash.validators.push(this.checkPassword), this.schema.confirm_hash.validators.push(this.checkConfirmPassword), this.schema.full_name.validators.push(this.checkName)
                    }, i.prototype.checkPassword = function(t) {
                        var e;
                        return e = {
                            type: "password_length",
                            message: "Password must be at least 5 characters"
                        }, t.length < 5 && 0 !== t.length ? e : void 0
                    }, i.prototype.checkConfirmPassword = function(t, e) {
                        var n;
                        return n = {
                            type: "password_match",
                            message: "Passwords must match."
                        }, t !== e.hash ? n : void 0
                    }, i.prototype.checkName = function(t) {
                        var e;
                        return e = {
                            type: "name_length",
                            message: "Name must be less than 70 characters"
                        }, t.length > 70 ? e : void 0
                    }, i
                }(r)
            })
        }.call(this), define("text-cns!components/login/join_panel/tmpl_join_panel.html", [], function() {
            return '<div id="join-panel" class="modal fade panel-container">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <i class="fa fa-times"></i>\n                </button>\n            </div>\n\n            <div class="modal-body">\n                <h4 class="reasons-to-join">Save and retrieve your search on any device</h4>\n\n                <div class="alert alert-danger hide invalid"><span></span></div>\n\n                <form>\n                    <div class="form" data-fields="full_name,username,hash,confirm_hash"></div>\n                    <button class="form btn btn-lg btn-primary btn-join-submit" type="submit">Join</button>\n                </form>\n\n                <% /*\n                <div class="divider">\n                    <hr class="pull-left" />or<hr class="pull-right" />\n                </div>\n\n                <div class="social-join">\n                    <button id="fb_join" type="button" class="btn btn-facebook">Join with Facebook</button>\n                    <p class="disclaimer" style="margin-top:0">Don\'t worry, we never post without your permission.</p>\n                </div>\n                */ %>\n               <p class="disclaimer">By signing up, I agree to <a href="http://www.canstar.com.au/terms-of-use/" target="_blank">Canstar\'s Terms of service</a>, <a href="http://www.canstar.com.au/privacy-policy/" target="_blank">Privacy Policy</a> and newsletter sign up.</p>\n            </div>\n\n            <div class="modal-footer">\n                <hr />\n                <p>Already joined Canstar? <a id="login" href="#">Log in</a></p>\n            </div>\n        </div>\n    </div>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/join_panel/JoinPanelView", ["require", "underscore", "cns-jquery", "canstar_widget", "backbone", "backbone-forms", "./JoinPanelModel", "text-cns!components/login/join_panel/tmpl_join_panel.html", "libraries/Facebook", "cocktail", "mixins/AuthFormMixin"], function(e) {
                var i, r, o, s, a, l, c, u, d, p;
                return p = e("underscore"), u = e("cns-jquery"), c = e("canstar_widget"), r = e("backbone"), e("backbone-forms"), a = e("./JoinPanelModel"), d = e("text-cns!components/login/join_panel/tmpl_join_panel.html"), s = e("libraries/Facebook"), o = e("cocktail"), i = e("mixins/AuthFormMixin"), l = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.beforeSubmit = t(this.beforeSubmit, this), this.onFBJoinClick = t(this.onFBJoinClick, this), this.onSignupClick = t(this.onSignupClick, this), this.onLoginClick = t(this.onLoginClick, this), this.onSubmit = t(this.onSubmit, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.stylesheets = ["components/login/join_panel/join_panel.css"], i.prototype.events = {
                        submit: "onSubmit",
                        "click #login": "onLoginClick",
                        "click #signup": "onSignupClick",
                        "click #fb_join": "onFBJoinClick"
                    }, i.prototype.validationMessages = {
                        "User already registered": 'That email address is already in use.<br />\n<a id="login" href="#">Please log in.</a>',
                        "Invalid parameter: full_name": "Invalid character. Name must only contain alphabet characters"
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.model = t.model = new a, t.model.url = "" + c.auth.base_url + "api/auth/register", t.template = p.template(d), this.setupSyncListeners([this.model]), i.__super__.initialize.call(this, t)
                    }, i.prototype.onSubmit = function(t) {
                        var e;
                        return t.preventDefault(), this.beforeSubmit(), e = this.commit({
                            validate: !0
                        }), e ? this.triggerValidationError(e) : this.model.save(null, {
                            error: function(t) {
                                return function() {
                                    return t.submitError.apply(t, arguments)
                                }
                            }(this)
                        })
                    }, i.prototype.onLoginClick = function(t) {
                        return null != t && t.preventDefault(), this.trigger("login")
                    }, i.prototype.onSignupClick = function(t) {
                        return null != t && t.preventDefault(), this.$(".social").hide(), this.$(".form").show()
                    }, i.prototype.onFBJoinClick = function(t) {
                        return null != t && t.preventDefault(), s.prototype.login(function(t) {
                            return function(e, n) {
                                var i;
                                return t.model.set("username", n.email), t.model.set("provider", "facebook"), t.model.set("full_name", n.name), t.model.set("hash", e.authResponse.accessToken), i = window.localStorage.getItem("canstar_visitor_uuid"), i && t.model.set("visitor_uuid", i), t.model.save(null, {
                                    error: t.submitError
                                })
                            }
                        }(this))
                    }, i.prototype.beforeSubmit = function() {
                        var t;
                        return this.model.set("provider", "canstar"), t = window.localStorage.getItem("canstar_visitor_uuid"), t ? this.model.set("visitor_uuid", t) : void 0
                    }, i.prototype.close = function() {
                        return this.unbind(), "function" == typeof this.onClose && this.onClose(), this.remove()
                    }, i
                }(r.Form), o.mixin(l, i)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/reset_panel/ResetPanelModel", ["require", "underscore", "../PanelModel"], function(e) {
                var i, r, o;
                return o = e("underscore"), i = e("../PanelModel"), r = function(e) {
                    function i() {
                        return this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.attrWhitelist = ["username"], i.prototype.schema = {
                        username: {
                            dataType: "email",
                            editorAttrs: {
                                placeholder: "Email Address"
                            },
                            validators: ["required", "email"]
                        }
                    }, i.prototype.initialize = function() {
                        return this.off()
                    }, i
                }(i)
            })
        }.call(this), define("text-cns!components/login/reset_panel/tmpl_reset_panel.html", [], function() {
            return '<div id="reset-panel" class="modal fade panel-container">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                    <i class="fa fa-times"></i>\n                </button>\n                <h4 class="modal-title">Reset Password</h4>\n            </div>\n\n            <div class="modal-body">\n                <div class="alert alert-danger text-left hide invalid"></div>\n\n                <p>Enter the email address associated with your account, and we\'ll email you a link to reset your password.</p>\n\n                <form>\n                    <div data-fields="username"></div>\n\n                    <br />\n\n                    <input type="submit" class="btn btn-primary btn-lg" value="Send Reset Link" />\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n'
        }), define("text-cns!components/login/reset_panel/tmpl_success.html", [], function() {
            return "<p>A link to reset your password has been sent to <%= username %>.</p>"
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/login/reset_panel/ResetPanelView", ["require", "jquery", "cns-jquery", "backbone", "canstar_widget", "backbone-forms", "libraries/Auth", "./ResetPanelModel", "text-cns!./tmpl_reset_panel.html", "text-cns!./tmpl_success.html", "cocktail", "mixins/AuthFormMixin"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h;
                return i = e("jquery"), d = e("cns-jquery"), s = e("backbone"), u = e("canstar_widget"), e("backbone-forms"), r = e("libraries/Auth"), l = e("./ResetPanelModel"), p = e("text-cns!./tmpl_reset_panel.html"), h = e("text-cns!./tmpl_success.html"), a = e("cocktail"), o = e("mixins/AuthFormMixin"), c = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.submitSuccess = t(this.submitSuccess, this), this.onSubmit = t(this.onSubmit, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.stylesheets = ["components/login/panel.css"], i.prototype.events = function() {
                        return {
                            "change input": "",
                            submit: "onSubmit"
                        }
                    }, i.prototype.validationMessages = {
                        "User not found": function() {
                            return "No account exists for " + i.model.get("username") + ". Maybe you signed up using a different/incorrect e-mail address."
                        }
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.model = t.model = new l, t.model.url = "" + u.auth.base_url + "api/auth/reset_password", t.template = _.template(p), this.setupSyncListeners([this.model]), i.__super__.initialize.call(this, t)
                    }, i.prototype.render = function() {
                        return i.__super__.render.apply(this, arguments), this.options.errorMsg && (this.displayError(this.options.errorMsg), delete this.options.errorMsg), this
                    }, i.prototype.onSubmit = function(t) {
                        var e;
                        return t.preventDefault(), e = this.commit({
                            validate: !0
                        }), e ? this.triggerValidationError(e) : this.model.save(null, {
                            success: this.submitSuccess,
                            error: function(t) {
                                return function() {
                                    return t.submitError.apply(t, arguments)
                                }
                            }(this)
                        })
                    }, i.prototype.submitSuccess = function() {
                        return this.$(".invalid").hide(), this.$(".modal-body").html(_.template(h, {
                            username: this.model.get("username")
                        }))
                    }, i.prototype.close = function() {
                        return "function" == typeof this.onClose && this.onClose(), this.unbind(), this.remove()
                    }, i
                }(s.Form), a.mixin(c, o)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/auth/AuthView", ["require", "jquery", "canstar_widget", "libraries/Loader", "components/base/BaseView", "components/base/AuthModel", "libraries/Auth", "libraries/Canstar", "components/login/login_panel/LoginPanelView", "components/login/join_panel/JoinPanelView", "components/login/reset_panel/ResetPanelView"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h;
                return i = e("jquery"), h = e("canstar_widget"), u = e("libraries/Loader"), a = e("components/base/BaseView"), o = e("components/base/AuthModel"), r = e("libraries/Auth"), l = e("libraries/Canstar"), d = e("components/login/login_panel/LoginPanelView"), c = e("components/login/join_panel/JoinPanelView"), p = e("components/login/reset_panel/ResetPanelView"), s = function(e) {
                    function i() {
                        return this.onValidationError = t(this.onValidationError, this), this.abandonGA = t(this.abandonGA, this), this.loginGA = t(this.loginGA, this), this.setupListeners = t(this.setupListeners, this), this.showPanel = t(this.showPanel, this), this.onLogin = t(this.onLogin, this), this.onClose = t(this.onClose, this), this.onResetClicked = t(this.onResetClicked, this), this.onJoinClicked = t(this.onJoinClicked, this), this.onLoginClicked = t(this.onLoginClicked, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.stylesheets = ["components/cns_overlay/cns_overlay.css", "components/auth/auth.css"], i.prototype.id = "auth", i.prototype.currentPanel = null, i.prototype.gaLocation = null, i.prototype.config = {
                        redirectOnLogin: !0
                    }, i.prototype.events = function() {
                        return {}
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), _.each(this.config, function(e) {
                            return function(n, i) {
                                var r;
                                return e.config[i] = null != (r = t[i]) ? r : n
                            }
                        }(this)), this.gaLocation = t.gaLocation || ("undefined" != typeof console && null !== console ? console.error("gaLocation not supplied") : void 0)
                    }, i.prototype.render = function() {
                        var t;
                        return this.$el.html(null != (t = this.currentPanel) ? t.render().el : void 0), this.$el.find(".modal.fade").removeClass("modal fade"), this
                    }, i.prototype.onLoginClicked = function() {
                        var t;
                        return t = new d, this.showPanel(t)
                    }, i.prototype.onJoinClicked = function() {
                        var t;
                        return t = new c, this.showPanel(t)
                    }, i.prototype.onResetClicked = function() {
                        var t;
                        return t = new p, this.showPanel(t)
                    }, i.prototype.onClose = function() {
                        var t;
                        return null != (t = this.currentPanel) && t.close(), this.remove()
                    }, i.prototype.onLogin = function() {
                        var t, e;
                        return this.loginGA(), t = null, this.currentPanel instanceof d ? t = "login" : this.currentPanel instanceof c ? t = "join" : "undefined" != typeof console && null !== console && console.error("Unknown panel type"), this.trigger("loggedIn", t), null != (e = h.event) ? e.trigger("user:changed") : void 0
                    }, i.prototype.showPanel = function(t) {
                        var e;
                        return null != (e = this.currentPanel) && e.close(), this.setupListeners(t), this.currentPanel = t, this.render()
                    }, i.prototype.setupListeners = function(t) {
                        return this.listenTo(t.model, "sync_complete", this.onLogin), null != t.fb_model && this.listenTo(t.fb_model, "sync_complete", this.onLogin), this.listenTo(t, "join", this.onJoinClicked), this.listenTo(t, "login", this.onLoginClicked), this.listenTo(t, "password_reset", this.onResetClicked), this.listenTo(t, "validation_error", this.onValidationError)
                    }, i.prototype.loginGA = function() {
                        var t;
                        return t = function() {
                            switch (!1) {
                                case !(this.currentPanel instanceof d):
                                    return "Login Submit";
                                case !(this.currentPanel instanceof c):
                                    return "Join Submit";
                                default:
                                    return "Unknown Submit"
                            }
                        }.call(this), l.prototype.gaTrackEvent({
                            event_name: "Click Tracking Auth",
                            event_type: "" + this.gaLocation,
                            event_label: "" + t
                        })
                    }, i.prototype.abandonGA = function() {
                        return this.currentPanel instanceof c ? l.prototype.gaTrackEvent({
                            event_name: "Click Tracking Auth",
                            event_type: "" + this.gaLocation,
                            event_label: "Join Abandon"
                        }) : void 0
                    }, i.prototype.onValidationError = function(t) {
                        var e;
                        return e = function() {
                            switch (!1) {
                                case !(this.currentPanel instanceof d):
                                    return "Login";
                                case !(this.currentPanel instanceof c):
                                    return "Join";
                                default:
                                    return "Unknown"
                            }
                        }.call(this), _.each(t, function(t) {
                            return function(n) {
                                return l.prototype.gaTrackEvent({
                                    event_name: "Click Tracking Auth",
                                    event_type: t.gaLocation,
                                    event_label: "" + e + " | " + n.field + " | " + n.type
                                })
                            }
                        }(this))
                    }, i
                }(a)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/auth/AuthModalView", ["require", "jquery", "cns-jquery", "canstar_widget", "libraries/Canstar", "./AuthView"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), l = e("cns-jquery"), a = e("canstar_widget"), s = e("libraries/Canstar"), o = e("./AuthView"), r = function(e) {
                    function r() {
                        return this.hideModal = t(this.hideModal, this), this.setupListeners = t(this.setupListeners, this), this.onLogin = t(this.onLogin, this), this.showPanel = t(this.showPanel, this), this.render = t(this.render, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.hiddenProgramatically = !1, r.prototype.render = function() {
                        return this
                    }, r.prototype.showPanel = function(t) {
                        return null != this.currentPanel && this.currentPanel.$el.is(":visible") && this.hideModal(), i("body").append(t.render().el), this.setupListeners(t), l(t.el).modal("show"), this.currentPanel = t
                    }, r.prototype.onLogin = function() {
                        return this.hideModal(), r.__super__.onLogin.apply(this, arguments)
                    }, r.prototype.setupListeners = function(t) {
                        return r.__super__.setupListeners.apply(this, arguments), l(t.el).on("hidden.bs.modal", t.close), l(t.el).on("hide.bs.modal", function(t) {
                            return function() {
                                return t.hiddenProgramatically || t.abandonGA(), void(t.hiddenProgramatically = !1)
                            }
                        }(this))
                    }, r.prototype.hideModal = function() {
                        return this.hiddenProgramatically = !0, l(this.currentPanel.el).modal("hide")
                    }, r
                }(o)
            })
        }.call(this), define("text-cns!components/popup/tmpl_popup.html", [], function() {
            return '<div class="canstar-popup">\n  <div class="row">\n    <div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3 col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4">\n      <div class="row">\n        <div class="semi-opaque-background"></div>\n        <div class="popup-content">\n          <table>\n            <tbody>\n              <tr>\n                <td>\n                  <span class="<%= iconClasses %>"></span>\n                </td>\n                <td>\n                  <span class="save-text"><%= popupText %></span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/popup/PopupView", ["require", "jquery", "underscore", "canstar_widget", "libraries/Auth", "components/base/BaseView", "text-cns!./tmpl_popup.html"], function(e) {
                var i, r, o, s, a, l, c;
                return i = e("jquery"), c = e("underscore"), a = e("canstar_widget"), r = e("libraries/Auth"), o = e("components/base/BaseView"), l = e("text-cns!./tmpl_popup.html"), s = function(e) {
                    function r() {
                        return this.closePopup = t(this.closePopup, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.stylesheets = ["components/popup/popup.css"], r.prototype.defaultRenderOptions = {
                        popupText: "Saved to your profile",
                        iconClasses: "",
                        showDuration: 400
                    }, r.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.template = c.template(l), r.__super__.initialize.call(this, t)
                    }, r.prototype.render = function(t) {
                        return null == t && (t = {}), c.defaults(t, this.defaultRenderOptions), this.$el.html(this.template(t)), i("body").append(this.el), this.$el.fadeIn({
                            complete: function(e) {
                                return function() {
                                    return window.setTimeout(e.closePopup, t.showDuration)
                                }
                            }(this)
                        }), this
                    }, r.prototype.closePopup = function() {
                        return this.$el.fadeOut({
                            complete: function(t) {
                                return function() {
                                    return t.$el.remove(), t.trigger("closed")
                                }
                            }(this)
                        })
                    }, r
                }(o)
            })
        }.call(this), define("text-cns!components/toolbar/tmpl_toolbar.html", [], function() {
            return '<div class="container-fluid">\n  <div class="row">\n    <div class="alert alert-block alert-danger hidden" id="invalid"><span></span></div>\n    <div class="functions col-xs-12">\n      <a class="btn btn-blank btn-icons btn-back pull-left" href="#"><i class="fa fa-angle-left"></i> Back</a>\n      <a class="print hidden-xs" href="#"><i class="fa fa-print"></i>Print</a>\n    <% if( model.get(\'show_save\') ) {%>\n      <a class="save<%= model.saved() ? \' saved\' : \'\' %>" href="#"><i class="fa fa-heart<%= model.saved() ? \'\' : \'-o\' %>"></i><%= model.saved() ? \'Saved\' : \'Save for later\' %></a>\n    <% } %>\n    <% if( model.get(\'show_email\') ) { %>\n      <a class="email btn btn-blank" href="#"><i class="fa fa-envelope-o"></i>Email Shortlist</a>\n    <% } %>\n    </div>\n  </div>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/toolbar/ToolbarView", ["require", "jquery", "underscore", "canstar_widget", "libraries/Auth", "components/base/BaseView", "components/auth/AuthModalView", "components/popup/PopupView", "text-cns!./tmpl_toolbar.html"], function(e) {
                var i, r, o, s, a, l, c, u, d;
                return i = e("jquery"), d = e("underscore"), c = e("canstar_widget"), r = e("libraries/Auth"), s = e("components/base/BaseView"), o = e("components/auth/AuthModalView"), a = e("components/popup/PopupView"), u = e("text-cns!./tmpl_toolbar.html"), l = function(e) {
                    function i() {
                        return this.showPopup = t(this.showPopup, this), this.onSaveLoggedOut = t(this.onSaveLoggedOut, this), this.onLoggedIn = t(this.onLoggedIn, this), this.onSaveLoggedIn = t(this.onSaveLoggedIn, this), this.onSave = t(this.onSave, this), this.onEmail = t(this.onEmail, this), this.onPrint = t(this.onPrint, this), this.onBack = t(this.onBack, this), this.render = t(this.render, this), this.setupListeners = t(this.setupListeners, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.stylesheets = ["components/toolbar/toolbar.css"], i.prototype.events = {
                        "click a.btn-back": "onBack",
                        "click a.print": "onPrint",
                        "click a.save": "onSave",
                        "click a.email": "onEmail"
                    }, i.prototype.id = "toolbar", i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.template = d.template(u), this.listenTo(this.model, "change", this.render), this.authModalView = new o({
                            gaLocation: "In flow"
                        }), this.popupView = new a, this.setupListeners(), i.__super__.initialize.call(this, t)
                    }, i.prototype.setupListeners = function() {
                        return this.listenTo(this.authModalView, "loggedIn", this.onLoggedIn)
                    }, i.prototype.render = function() {
                        return this.$el.html(this.template({
                            model: this.model
                        })), this
                    }, i.prototype.onBack = function(t) {
                        return t.preventDefault(), 1 === window.history.length ? window.close() : window.history.back()
                    }, i.prototype.onPrint = function(t) {
                        return t.preventDefault(), window.print()
                    }, i.prototype.onEmail = function(t) {
                        return t.preventDefault(), this.trigger("email")
                    }, i.prototype.onSave = function(t) {
                        return null != t && t.preventDefault(), r.prototype.loggedIn() ? this.onSaveLoggedIn() : (this.trigger("logoutSave"), this.onSaveLoggedOut())
                    }, i.prototype.onSaveLoggedIn = function() {
                        return this.trigger("save")
                    }, i.prototype.onLoggedIn = function() {
                        return this.trigger("loginSave")
                    }, i.prototype.onSaveLoggedOut = function() {
                        return this.authModalView.onJoinClicked()
                    }, i.prototype.showPopup = function(t, e, n) {
                        return null == e && (e = "fa fa-heart"), null == n && (n = 400), this.popupView.render({
                            popupText: t,
                            iconClasses: e,
                            showDuration: n
                        })
                    }, i
                }(s)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/profile/shortlists/ShortlistModel", ["require", "components/base/AuthModel", "moment"], function(e) {
                var i, r, o;
                return i = e("components/base/AuthModel"), o = e("moment"), r = function(e) {
                    function i() {
                        return this.isMissing = t(this.isMissing, this), this.validate = t(this.validate, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    var r;
                    return n(i, e), r = {
                        category: "Category",
                        product_names: ["Product 1", "Product 2", "Product 3"]
                    }, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        var e;
                        return t.timestamp && (t.timestamp = o(1e3 * t.timestamp)), e = _.find(t.product_names, function(t) {
                            return "string" != typeof t
                        }), null != e && (t.missing_product = !0), i.__super__.parse.apply(this, arguments)
                    }, i.prototype.validate = function(t) {
                        var e;
                        return e = void 0, (t.product_ids < 2 || t.product_ids > 3) && (e = "Incorrect number of products"), e
                    }, i.prototype.isMissing = function() {
                        var t;
                        return null != (t = this.get("missing_product")) ? t : !1
                    }, i
                }(i)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/profile/shortlists/ShortlistCollection", ["require", "canstar_widget", "underscore", "backbone", "libraries/Auth", "./ShortlistModel"], function(e) {
                var i, r, o, s, a, l;
                return a = e("canstar_widget"), l = e("underscore"), r = e("backbone"), i = e("libraries/Auth"), s = e("./ShortlistModel"), o = function(e) {
                    function i() {
                        return this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.url = "" + a.auth.base_url + "api/user/shortlists", i.prototype.model = s, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        return t.response || t
                    }, i
                }(r.Collection)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/facet_compare/facet_compare", ["require", "underscore", "jquery", "cns-jquery", "backbone", "canstar_widget", "components/base/View", "libraries/Loader", "libraries/Canstar", "libraries/Auth", "components/facet_compare/DetailsView", "components/toolbar/ToolbarModel", "components/toolbar/ToolbarView", "components/profile/shortlists/ShortlistCollection", "components/cns_overlay/cns_overlay", "components/facet_compare/templates"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h, f, m, g, v;
                return v = e("underscore"), i = e("jquery"), g = e("cns-jquery"), o = e("backbone"), m = e("canstar_widget"), f = e("components/base/View"), u = e("libraries/Loader"), s = e("libraries/Canstar"), r = e("libraries/Auth"), l = e("components/facet_compare/DetailsView"), p = e("components/toolbar/ToolbarModel"), h = e("components/toolbar/ToolbarView"), d = e("components/profile/shortlists/ShortlistCollection"), a = e("components/cns_overlay/cns_overlay"), e("components/facet_compare/templates"), c = function(e) {
                    function c() {
                        return this.assign = t(this.assign, this), this.hideOverlay = t(this.hideOverlay, this), this.showOverlay = t(this.showOverlay, this), this.setupSyncListeners = t(this.setupSyncListeners, this), this.onClose = t(this.onClose, this), this.get_product_ids = t(this.get_product_ids, this), this.saveGA = t(this.saveGA, this), this.on_save = t(this.on_save, this), this.on_login_save = t(this.on_login_save, this), this.init_toolbar = t(this.init_toolbar, this), this.after_configured = t(this.after_configured, this), this.get_saved_shortlist = t(this.get_saved_shortlist, this), this.show_email_form = t(this.show_email_form, this), this.get_profile = t(this.get_profile, this), this.get_details_config = t(this.get_details_config, this), this.render_toolbar = t(this.render_toolbar, this), this.render = t(this.render, this), this.usage = t(this.usage, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), c.__super__.constructor.apply(this, arguments)
                    }
                    return n(c, e), c.prototype.tagName = "div", c.prototype.className = "facet-compare", c.stylesheets = ["components/facet_compare/facet_compare.css"], c.prototype.distributed_table = !1, c.prototype.num_configurations = 2, c.prototype.default_theme = "gold", c.prototype.path = "components/facet_compare", c.prototype.templates = {
                        tmpl_layout: "!!tmpl_layout.html",
                        email_form: "!!tmpl_email_form.html"
                    }, c.prototype.events = function() {
                        return {
                            "click .email-results": "show_email_form"
                        }
                    }, c.prototype.initialize = function(t) {
                        return i(".table-information-area").slideUp("fast"), this.options = t, this.usage(), this.configured = v.after(this.num_configurations, this.after_configured), this.saved_shortlist = new d, this.setupSyncListeners([this.saved_shortlist]), r.prototype.loggedIn() ? this.get_saved_shortlist() : this.configured(), this.get_details_config()
                    }, c.prototype.usage = function() {
                        return null != m.faceted_search.distributor && null != m.faceted_search.table ? this.distributed_table = !0 : null != m.collection ? this.distributed_table = !1 : "undefined" != typeof console && null !== console && console.error("Collection parameter not set or distributor and table not set"), null == this.options.profile && "undefined" != typeof console && null !== console && console.error("Profile parameter not set"), null == this.options.prod_id1 && "undefined" != typeof console && null !== console && console.error("Prod_id1 parameter not set"), null == this.options.prod_id2 && "undefined" != typeof console && null !== console ? console.error("Prod_id2 parameter not set") : void 0
                    }, c.prototype.render = function() {
                        var t, e, n, r, s, a;
                        return t = m.faceted_search, this.$el.html(this.templates.tmpl_layout({
                            model: this.config
                        })), this.render_toolbar(), r = null != this.options.prod_id3 ? "/" + this.options.prod_id3 : "", s = this.get_profile(this.options.profile), e = new o.Model, s = this.get_profile(this.options.profile), e.url = "" + m.base_url + "api/facets/data/" + this.options.prod_id1 + "/" + this.options.prod_id2 + r + "?collection=" + this.options.collection + "&profile=" + s, this.distributed_table && (e.url = "" + m.base_url + "api_v2/facets/data/" + this.options.prod_id1 + "/" + this.options.prod_id2 + r + "?distributor=" + t.distributor + "&table=" + t.table + "&profile=" + s), n = {
                            prod1: this.options.prod_id1,
                            prod2: this.options.prod_id2
                        }, null != this.options.prod_id3 && (n.prod3 = this.options.prod_id3), a = this.options.collection, this.distributed_table && (a = "" + t.distributor + "_" + t.table), this.details_view = new l({
                            model: e,
                            config: this.config.toJSON(),
                            prod_ids: v.invert(n),
                            profile: s,
                            collection: a,
                            theme: this.options.theme
                        }), i(".comparison-table-container", this.el).append(this.details_view.$el), this.el
                    }, c.prototype.render_toolbar = function() {
                        return this.assign(this.toolbarView, "#toolbar")
                    }, c.prototype.get_details_config = function() {
                        var t;
                        return this.config = new o.Model, this.config.url = "" + m.base_url + "api/facets/compare_config?collection=" + this.options.collection, t = m.faceted_search, this.distributed_table && (this.config.url = "" + m.base_url + "api_v2/facets/compare_config?distributor=" + t.distributor + "&table=" + t.table), this.config.fetch({
                            success: this.configured
                        })
                    }, c.prototype.get_profile = function(t) {
                        var e;
                        return e = v.find(v.keys(this.config.toJSON().profiles), function() {
                            return function(e) {
                                var n;
                                return n = s.prototype.convertUrlString(e, !0), (null != t ? t.toLowerCase() : void 0) === n ? !0 : void 0
                            }
                        }(this)), null != e ? e : "default"
                    }, c.prototype.show_email_form = function() {
                        return "undefined" != typeof _gaq && null !== _gaq && _gaq.push(["_trackEvent", "Click Tracking", "" + m.faceted_search.category + " Compare Email Button"]), g(".comparison_email_form .modal", this.el).modal("show")
                    }, c.prototype.get_saved_shortlist = function() {
                        return this.saved_shortlist.url = "" + m.base_url + "api/user/shortlists", this.saved_shortlist.fetch({
                            data: {
                                collection: this.options.collection,
                                product_ids: this.get_product_ids()
                            },
                            success: this.configured,
                            error: function(t) {
                                return function() {
                                    return "undefined" != typeof console && null !== console && console.error("Error fetching saved shortlist"), t.configured()
                                }
                            }(this)
                        })
                    }, c.prototype.after_configured = function() {
                        return this.init_toolbar(), this.render(), this.configured = function() {
                            return function() {}
                        }(this)
                    }, c.prototype.init_toolbar = function() {
                        var t, e;
                        return t = new p({
                            saved_item: this.saved_shortlist.at(0),
                            show_save: (null != (e = m.auth) ? e.enabled : void 0) && this.distributed_table,
                            show_email: this.config.get("redesign_view")
                        }), this.toolbarView = new h({
                            model: t
                        }), this.listenTo(this.toolbarView, "save", this.on_save), this.listenTo(this.toolbarView, "loginSave", this.on_login_save), this.listenTo(this.toolbarView, "email", this.show_email_form), this.listenTo(this.toolbarView, "logoutSave", function(t) {
                            return function() {
                                return t.saveGA(!0, !1)
                            }
                        }(this)), this.$el.on("click", ".comparison-footer a.return_link", this.toolbarView.onBack)
                    }, c.prototype.on_login_save = function() {
                        return this.get_saved_shortlist().then(function(t) {
                            return function() {
                                return t.toolbarView.model.set("saved_item", t.saved_shortlist.at(0)), t.toolbarView.model.saved() ? void 0 : t.on_save(!0)
                            }
                        }(this))
                    }, c.prototype.on_save = function(t) {
                        var e, n, i, o;
                        return null == t && (t = !1), o = parseInt(r.prototype.getStorageItem("num_shortlists")), (isNaN(o) || null == o) && (o = 0), e = this.toolbarView.model.saved(), e ? this.toolbarView.model.get("saved_item").destroy({
                            wait: !0,
                            success: function(t) {
                                return function() {
                                    return o > 0 && o--, r.prototype.setStorageItem("num_shortlists", o, !0), t.toolbarView.showPopup("Removed from your profile", "fa fa-heart semi-transparent", 800), t.toolbarView.model.unset("saved_item")
                                }
                            }(this),
                            error: function(t) {
                                return function() {
                                    return t.toolbarView.showError("Error occurred when deleting shortlist")
                                }
                            }(this)
                        }) : (n = m.faceted_search, i = {
                            product_ids: this.get_product_ids(),
                            url: window.location.href,
                            collection: "" + n.distributor + "_" + n.table
                        }, this.saved_shortlist.create(i, {
                            success: function(t) {
                                return function(e) {
                                    return o++, r.prototype.setStorageItem("num_shortlists", o, !0), t.toolbarView.showPopup("Saved to your profile", "fa fa-heart"), t.toolbarView.model.set("saved_item", e)
                                }
                            }(this),
                            error: function(t) {
                                return function() {
                                    return t.toolbarView.showError("Error occurred when saving shortlist")
                                }
                            }(this)
                        })), t ? void 0 : this.saveGA(t, e)
                    }, c.prototype.saveGA = function(t, e) {
                        var n, i, r, o, a, l;
                        return i = t ? "Logged out" : "Logged in", l = e ? "Unsave" : "Save", n = this.config.get("company_name_field"), r = this.config.get("prod_name_field"), a = [], o = v.pick(this.details_view.model.attributes, ["prod1", "prod2", "prod3"]), v.each(o, function() {
                            return function(t) {
                                var e, i, o, s;
                                return e = null != (o = t.SUPP) ? o[n] : void 0, i = null != (s = t.SUPP) ? s[r] : void 0, a.push("" + e + "-" + i)
                            }
                        }(this)), s.prototype.gaTrackEvent({
                            event_name: "Click Tracking Auth",
                            event_type: "Shortlist | " + i + " | " + l,
                            event_label: "" + this.config.get("category_name") + " | " + a.join("|")
                        })
                    }, c.prototype.get_product_ids = function() {
                        var t;
                        return t = [this.options.prod_id1, this.options.prod_id2], this.options.prod_id3 && t.push(this.options.prod_id3), t
                    }, c.prototype.onClose = function() {
                        return i(".table-information-area").show(), this.config.unbind(), this.details_view.close()
                    }, c.prototype.setupSyncListeners = function(t) {
                        return null == t && (t = []), this.overlayCount = 0, v.each(t, function(t) {
                            return function(e) {
                                return t.listenTo(e, "request", t.showOverlay), t.listenTo(e, "sync", t.hideOverlay), t.listenTo(e, "error", t.hideOverlay), t.listenTo(e, "destroy", t.hideOverlay)
                            }
                        }(this))
                    }, c.prototype.showOverlay = function() {
                        return 0 === this.overlayCount && (this.overlay = new a({
                            text: "Loading"
                        })), this.overlayCount++
                    }, c.prototype.hideOverlay = function() {
                        var t;
                        return 1 === this.overlayCount && null != (t = this.overlay) && t.hide(), this.overlayCount--
                    }, c.prototype.assign = function(t, e) {
                        return t.delegateEvents(), t.render(), this.$(e).get(0) !== t.el ? this.$(e).replaceWith(t.el) : void 0
                    }, c
                }(f)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("widgets/search/Router", ["require", "jquery", "backbone", "libraries/Canstar", "components/facet_compare/facet_compare"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), r = e("backbone"), o = e("libraries/Canstar"), s = e("components/facet_compare/facet_compare"), a = function(e) {
                    function r() {
                        return this.determine_theme = t(this.determine_theme, this), this.show_comparison = t(this.show_comparison, this), this.show_faceted_search = t(this.show_faceted_search, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.routes = {
                        ":profile/:product_ids": "show_comparison",
                        "*path": "show_faceted_search"
                    }, r.prototype.initialize = function(t) {
                        return this.appView = t.appView, this.rootView = t.rootView, this.rootContainer = t.rootContainer
                    }, r.prototype.show_faceted_search = function() {
                        return i("body").removeClass("no-scroll"), this.appView.showView(this.rootView, this.rootContainer, !1, !0), history && history.replaceState ? history.replaceState("", document.title, window.location.pathname + window.location.search) : void 0
                    }, r.prototype.show_comparison = function(t, e) {
                        return e = e.split("-"), this.appView.hideView(this.rootView, this.rootContainer), e.length < 2 ? void this.navigate("", {
                            trigger: !0
                        }) : this.appView.showView(new s({
                            collection: canstar_widget.faceted_search.collection,
                            profile: t,
                            prod_id1: e[0],
                            prod_id2: e[1],
                            prod_id3: e.length > 2 ? e[2] : null,
                            theme: this.determine_theme()
                        }), this.rootContainer, !1, !0)
                    }, r.prototype.determine_theme = function() {
                        var t, e;
                        return t = this.rootView.theme_config, e = t.original || t.name, e = e.toLowerCase()
                    }, r
                }(r.Router)
            })
        }.call(this),
        function(t, e) {
            if ("object" == typeof exports) {
                var n = require("underscore"),
                    i = require("backbone");
                module.exports = e(n, i)
            } else "function" == typeof define && define.amd ? define("bower_components/Backbone.Facetr/dist/backbone.facetr", ["underscore", "backbone"], e) : t.Facetr = e(_, Backbone)
        }(this, function(t, e, n) {
            e.Facetr = function(t, n) {
                return t instanceof e.Collection ? o(t, n) : r(t)
            }, e.Facetr.VERSION = "0.3.7";
            var i = {},
                r = function(t) {
                    var e = i[t];
                    return e ? e : n
                },
                o = function(t, e) {
                    var n = t.facetrid || e || "fctr" + (new Date).getTime() + Math.floor(99 * Math.random() + 1),
                        o = r(n);
                    return o ? o : (t.facetrid = n, i[n] = new l(t))
                },
                s = function(t, i) {
                    var r, o = i.split("."),
                        s = o.length,
                        a = 0;
                    for (r = t.get(o[a]), a = 1; s > a; a += 1) {
                        if (r === n) return r;
                        if (r instanceof Array) return r;
                        r = r instanceof e.Model ? r.get(o[a]) : "[object Object]" === Object.prototype.toString.call(r) ? r[o[a]] : r
                    }
                    return r
                },
                a = function(i, r, o, a) {
                    t.extend(this, e.Events);
                    var l = this,
                        c = i,
                        u = i,
                        d = "value",
                        p = "asc",
                        h = [],
                        f = [],
                        m = [],
                        g = {},
                        v = a,
                        _ = "or",
                        y = !1,
                        b = {},
                        w = !1,
                        P = [],
                        S = [],
                        C = {},
                        x = {},
                        k = function(i, r, o) {
                            var s = r !== n && null !== r ? r : "undefined",
                                a = !1;
                            if (null != typeof s && "object" == typeof s) {
                                var l = c.split(".")[1];
                                s = l && (s instanceof e.Model && s.get(l) || s[l]) || "undefined", a = !0
                            }
                            var u = t.find(i, function(t) {
                                return t.value === s
                            });
                            if (u) u.count = u.count + 1, u.activeCount = u.activeCount + 1;
                            else {
                                var d = t.sortedIndex(t.pluck(h, "value"), s);
                                h.splice(d, 0, {
                                    value: s,
                                    count: 1,
                                    activeCount: 1,
                                    active: !1
                                }), g[s] = []
                            }
                            return a && g[s].push(o), s
                        },
                        T = function(e) {
                            var n, i = s(e, c);
                            if (i instanceof Array) 0 === i.length ? (n = k(h, "undefined", e.cid), g[n].push(e.cid)) : t.each(i, function(t) {
                                n = k(h, t, e.cid), g[n] && g[n].push(e.cid)
                            });
                            else {
                                if (null != i && "object" == typeof i) throw l.remove(), new Error("Model property can only be a value (string,number,boolean) or Array of values, not an object");
                                n = k(h, i), g[n].push(e.cid)
                            }
                        },
                        L = function(e) {
                            t(e).each(function(t) {
                                T(t)
                            })
                        },
                        E = function(t, e) {
                            return "value" === d ? "asc" === p ? (t.value > e.value) - (t.value < e.value) : (t.value < e.value) - (t.value > e.value) : "activeCount" === d ? "asc" === p ? t.activeCount < e.activeCount ? -1 : t.activeCount > e.activeCount ? 1 : (t.value > e.value) - (t.value < e.value) : t.activeCount < e.activeCount ? 1 : t.activeCount > e.activeCount ? -1 : (t.value < e.value) - (t.value > e.value) : "asc" === p ? t.count < e.count ? -1 : t.count > e.count ? 1 : (t.value > e.value) - (t.value < e.value) : t.count < e.count ? 1 : t.count > e.count ? -1 : (t.value < e.value) - (t.value > e.value)
                        },
                        A = function() {
                            h.sort(E), w && S.sort(E)
                        },
                        N = function() {
                            return 0 !== f.length
                        },
                        O = function(e) {
                            for (var n = 0, i = h.length; i > n; n += 1) {
                                var r = t.intersection(g[h[n].value], e).length;
                                h[n].activeCount = 0 !== r ? r : 0
                            }
                        },
                        D = function(t) {
                            var e = f.splice(0, f.length);
                            h.splice(0, h.length), m.splice(0, m.length), g = {}, L(t);
                            for (var n = 0, i = e.length; i > n; n += 1) l.value(e[n])
                        },
                        M = function(t) {
                            T(t);
                            for (var e = 0, n = f.length; n > e; e += 1) l.value(f[e])
                        },
                        F = function(e) {
                            var n, i, r = e.cid,
                                o = function(e) {
                                    for (n = h.length - 1; - 1 !== n;) {
                                        var i = h[n];
                                        if (i.value === e) {
                                            if (i.count -= 1, i.activeCount -= 1, 0 === i.count) {
                                                h.splice(n, 1);
                                                var r = t.indexOf(f, i.value); - 1 !== r && (f.splice(r, 1), y = N())
                                            }
                                            break
                                        }
                                        n -= 1
                                    }
                                };
                            for (var a in g) g.hasOwnProperty(a) && (n = t.indexOf(g[a], r), -1 !== n && g[a].splice(n, 1));
                            if (i = s(e, c))
                                if (i instanceof Array)
                                    for (var l = 0, u = i.length; u > l; l++) o(i[l]);
                                else o(i);
                            n = t.indexOf(m, r), -1 !== n && m.splice(n, 1)
                        },
                        R = function(t) {
                            var n, i;
                            s(new e.Model(t.changedAttributes()), c) && (n = new e.Model(t.previousAttributes()), i = s(n, c), n.cid = t.cid, F(n), M(t))
                        },
                        U = function(e) {
                            var n, i;
                            null == C[e.value] && (C[e.value] = []), n = [], i = function(r) {
                                r.value !== e.value && n.push(r.value), r.groups && t.each(r.groups, i)
                            }, i(e), C[e.value] = t.union(C[e.value], n)
                        },
                        I = function(e) {
                            var i = function(e, n, r) {
                                null == x[r.value] && (x[r.value] = []), n && (e.push(n.value), x[r.value] = t.union(x[r.value], e)), r.groups && t.each(r.groups, function(t) {
                                    return i(e, r, t)
                                })
                            };
                            i([], n, e)
                        },
                        q = function(e) {
                            var n, i, r, o, s;
                            if (o = e.groups, r = {
                                    value: e.value,
                                    label: e.label,
                                    active: !1,
                                    activeCount: 0,
                                    count: 0
                                }, s = t.find(h, function(t) {
                                    return t.value === r.value
                                }), s && t.extend(r, s), o && "[object Array]" === Object.prototype.toString.call(o) && (i = o.length) > 0) {
                                for (r.groups = [], n = 0; i > n; n += 1) r.groups.push(q(o[n]));
                                r.activeCount = t.reduce(r.groups, function(t, e) {
                                    return t + e.activeCount
                                }, r.activeCount), r.count = t.reduce(r.groups, function(t, e) {
                                    return t + e.count
                                }, r.count)
                            }
                            return U(r), r
                        },
                        j = function() {
                            var t, e;
                            for (S.length = 0, t = 0, e = P.length; e > t; t += 1) S.push(q(P[t])), I(P[t]);
                            S.sort(E)
                        },
                        $ = function() {
                            this.and = function(t, e) {
                                return _ = "and", l.value(t, e), this
                            }, this.or = function(t, e) {
                                return _ = "or", l.value(t, e), this
                            }
                        };
                    this.label = function(t) {
                        return u = t, this
                    }, this.asc = function() {
                        return p = "asc", A(), this
                    }, this.desc = function() {
                        return p = "desc", A(), this
                    }, this.sortByValue = function() {
                        return d = "value", A(), this
                    }, this.sortByCount = function() {
                        return d = "count", A(), this
                    }, this.sortByActiveCount = function() {
                        return d = "activeCount", A(), this
                    }, this.toJSON = function() {
                        var t;
                        return t = {
                            data: {
                                name: c,
                                hierarchical: w,
                                label: u,
                                extOperator: v,
                                intOperator: _,
                                sort: {
                                    by: d,
                                    direction: p
                                },
                                selected: y,
                                customData: b
                            },
                            values: h
                        }, w && (t.groupedValues = S), t
                    }, this.remove = function() {
                        o.off("resetCollection", O), o.off("resetOrigCollection", D), o.off("addModel", M), o.off("removeModel", F), o.off("changeModel", R), o.trigger("removeFacet", c)
                    }, this.value = function(e, n, i) {
                        var r, s, a, l, u, d;
                        if (n && (_ = n), l = t.chain(h).pluck("value").indexOf(e).value(), -1 !== l) {
                            if (u = h[l], u.active || (u.active = !0, f.push(u.value)), a = 1 === f.length && 0 === m.length ? t.union : "or" === _ ? t.union : t.intersection, m = a(m, g[e]), w && null != C[u.value] && (d = C[u.value]).length > 0)
                                for (f.concat(d), r = 0, s = d.length; s > r; r += 1) m = a(m, g[d[r]])
                        } else -1 === f.indexOf(e) && (f.push(e), "and" === _ && (m = []));
                        return y = N(), o.trigger("value", c, e, m, i), i || this.trigger("value", e), new $(this, _)
                    }, this.removeValue = function(e, n) {
                        var i, r, s, a = t.chain(h).pluck("value").indexOf(e).value();
                        if (-1 !== a && (i = h[a], i.active = !1), f.splice(t.indexOf(f, i && i.value || e), 1), s = t.filter(g[e], function(e) {
                                for (var n in g)
                                    if (g.hasOwnProperty(n) && -1 !== t.indexOf(f, n) && -1 !== t.indexOf(g[n], e)) return !1;
                                return !0
                            }), m = t.difference(m, s), "and" === _) {
                            r = [];
                            for (var l = 0, u = f.length; u > l; l += 1) r = 0 === r.length ? t.union(r, g[f[l]]) : t.intersection(r, g[f[l]]);
                            m = t.union(m, r)
                        }
                        if (w && null != x[e]) {
                            var d = t.intersection(x[e], f);
                            d.length > 0 && (m = t.union(m, g[e]))
                        }
                        return y = N(), o.trigger("removeValue", c, e, m, n), n || this.trigger("removeValue", e), this
                    }, this.clear = function(t) {
                        for (; f.length > 0;) this.removeValue(f[0], !0);
                        return t || this.trigger("clear"), this
                    }, this.customData = function(t, e) {
                        return e !== n ? (b[t] = e, this) : b[t]
                    }, this.isSelected = function() {
                        return y
                    }, this.hierarchy = function(t) {
                        if ("[object Array]" !== Object.prototype.toString.call(t)) throw new Error("Facet.hierarchy: wrong settings object. Check the documentation for the right format");
                        return P = t, w = !0, j(), o.on("resetCollection addModel removeModel changeModel", j), this.trigger("hierarchy", P), this
                    }, L(r), o.on("resetCollection", O), o.on("resetCollection", A), o.on("resetOrigCollection", D), o.on("addModel", M), o.on("removeModel", F), o.on("changeModel", R)
                },
                l = function(n) {
                    t.extend(this, e.Events);
                    var r, o, l = this,
                        c = {},
                        u = {},
                        d = {},
                        p = t.extend({}, e.Events),
                        h = {},
                        f = "asc",
                        m = !1,
                        g = function() {
                            for (var t in u) u.hasOwnProperty(t) && delete u[t];
                            n.each(function(t) {
                                var e = t.clone();
                                e.cid = t.cid, u[t.cid] = e
                            })
                        },
                        v = function(t) {
                            delete c[t], delete d[t], P()
                        },
                        _ = function(t, e) {
                            var n = c[t];
                            if (n && n.operator === e) return n;
                            var i = new a(t, u, p, e);
                            return d[t] = [], {
                                facet: i,
                                operator: e
                            }
                        },
                        y = function(t, e) {
                            d[t] = e, P()
                        },
                        b = function(t, e, n, i) {
                            y(t, n), i !== !0 && this.trigger("filter", t, e)
                        },
                        w = function(t, e, n, i) {
                            y(t, n), i !== !0 && this.trigger("unfilter", t, e)
                        },
                        P = function() {
                            var e, i, r, o, s = [],
                                a = [];
                            for (e in u) u.hasOwnProperty(e) && s.push(e);
                            for (i in d) d.hasOwnProperty(i) && c[i].facet.toJSON().data.selected && (s = "or" === c[i].operator ? t.union(s, d[i]) : t.intersection(s, d[i]));
                            o = function(t) {
                                return l(u[t])
                            };
                            for (r in h)
                                if (h.hasOwnProperty(r)) {
                                    var l = h[r];
                                    l instanceof Function && (s = t.filter(s, o))
                                }
                            s.sort();
                            for (var f = 0, g = s.length; g > f; f += 1) a.push(u[s[f]]);
                            p.trigger("resetCollection", s), m = !0, n.reset(a), m = !1
                        },
                        S = function() {
                            m || (g(), p.trigger("resetOrigCollection", u))
                        },
                        C = function(t) {
                            var e = t.clone();
                            e.cid = t.cid, u[t.cid] = e, p.trigger("addModel", t)
                        },
                        x = function(e) {
                            delete u[e.cid], p.trigger("removeModel", e);
                            var n = t.any(c, function(t) {
                                return t.facet.toJSON().data.selected
                            });
                            n || P()
                        },
                        k = function(e) {
                            delete u[e.cid];
                            var n = e.clone();
                            n.cid = e.cid, u[e.cid] = n, p.trigger("changeModel", e);
                            var i = t.any(c, function(t) {
                                return t.facet.toJSON().data.selected
                            });
                            i || P()
                        },
                        T = function(t) {
                            n.comparator = function(t, e) {
                                var n, i, o = s(t, r),
                                    a = s(e, r);
                                if (isNaN(o) || isNaN(a) ? (n = Date.parse(o), i = Date.parse(a), (isNaN(n) || isNaN(i)) && (n = o, i = a)) : (n = parseFloat(o, 10), i = parseFloat(a, 10)), "asc" === f) {
                                    if (n && i) return (n > i) - (i > n);
                                    if (n) return 1;
                                    if (i) return -1
                                } else {
                                    if (n && i) return (i > n) - (n > i);
                                    if (n) return -1;
                                    if (i) return 1
                                }
                            }, n.sort(), t !== !0 && l.trigger("sort", r, f)
                        };
                    this.facet = function(t, e, n) {
                        var i = !e || "and" !== e && "or" !== e ? "and" : e;
                        return c[t] = _(t, i), n !== !0 && this.trigger("facet", t), c[t].facet
                    }, this.toJSON = function() {
                        var e, n, i, r, s = [],
                            a = [];
                        for (e in c) c.hasOwnProperty(e) && (n = c[e], i = n.facet.toJSON(), i.data.operator = n.operator, o && o instanceof Array ? (r = t.indexOf(o, i.data.name), -1 !== r ? a[r] = i : s.push(i)) : s.push(i));
                        return a.concat(s)
                    }, this.clear = function(t) {
                        var e;
                        for (e in c) c.hasOwnProperty(e) && (c[e].facet.remove(), delete c[e]);
                        var i = [];
                        for (e in u) u.hasOwnProperty(e) && i.push(u[e]);
                        return n.reset(i), d = {}, t !== !0 && this.trigger("clear"), this
                    }, this.clearValues = function(t) {
                        var e;
                        for (e in c) c.hasOwnProperty(e) && c[e].facet.clear();
                        var i = [];
                        for (e in u) u.hasOwnProperty(e) && i.push(u[e]);
                        return n.reset(i), d = {}, t !== !0 && this.trigger("clearValues"), this
                    }, this.remove = function() {
                        var t = n.facetrid;
                        this.clear(!0), n.off("reset", S), n.off("add", C), n.off("remove", x), n.off("change", k), delete n.facetrid, delete i[t]
                    }, this.facetsOrder = function(t, e) {
                        return o = t, e !== !0 && this.trigger("facetsOrderChange", t), this
                    }, this.sortBy = function(t, e) {
                        return r = t, T(e), this
                    }, this.asc = function(t) {
                        return f = "asc", T(t), this
                    }, this.desc = function(t) {
                        return f = "desc", T(t), this
                    }, this.addFilter = function(t, e, n) {
                        return e && t && (h[t] = e, P(n)), this
                    }, this.removeFilter = function(t, e) {
                        return t && (delete h[t], P(e)), this
                    }, this.clearFilters = function(t) {
                        for (var e in h) h.hasOwnProperty(e) && delete h[e];
                        return P(t), this
                    }, this.collection = function() {
                        return n
                    }, this.origLength = function() {
                        return t.size(u)
                    }, this.facets = function() {
                        return t.pluck(c, "facet")
                    }, this.initFromSettingsJSON = function(t) {
                        var i, r, o, s, a, l, c, u, d, p, h, f, m, g, v, _, y, b;
                        for (r = e.Facetr, i = r(n), o = t.facets, s = t.sort, a = t.search, g = 0, y = o.length; y > g; g += 1) {
                            switch (l = o[g], c = l.attr, u = l.eop, d = l.iop, p = l.sort, h = l.cust, f = l.vals, m = i.facet(c, u), p.by) {
                                case "count":
                                    m.sortByCount();
                                    break;
                                case "activeCount":
                                    m.sortByActiveCount();
                                    break;
                                default:
                                    m.sortByValue()
                            }
                            if (m[p.direction](), h)
                                for (_ in h) h.hasOwnProperty(_) && m.customData(_, h[_]);
                            for (v = 0, b = f.length; b > v; v += 1) m.value(f[v], d)
                        }
                        if (s) {
                            var w = s.by,
                                P = s.dir;
                            w && r(n).sortBy(w), P && r(n)[P]()
                        }
                        return this.trigger("initFromSettingsJSON"), this
                    }, this.settingsJSON = function() {
                        var e, n, i, o, s;
                        if (e = {}, r && f && (e.sort = {
                                by: r,
                                dir: f
                            }), 0 !== t.size(c)) {
                            e.facets = [];
                            for (n in c)
                                if (c.hasOwnProperty(n)) {
                                    i = c[n].facet.toJSON(), o = t.pluck(i.values, "active"), s = [];
                                    for (var a = 0, l = o.length; l > a; a += 1) o[a] && s.push(i.values[a].value);
                                    e.facets.push({
                                        attr: i.data.name,
                                        eop: i.data.extOperator,
                                        iop: i.data.intOperator,
                                        sort: i.data.sort,
                                        cust: i.data.customData,
                                        vals: s
                                    })
                                }
                        }
                        return e
                    }, g(), p.on("removeFacet", v, this), p.on("value", b, this), p.on("removeValue clear", w, this), n.on("reset", S), n.on("add", C), n.on("remove", x), n.on("change", k)
                };
            return e.Facetr
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                },
                i = [].indexOf || function(t) {
                    for (var e = 0, n = this.length; n > e; e++)
                        if (e in this && this[e] === t) return e;
                    return -1
                };
            define("widgets/search/collections/ProductModel", ["require", "backbone", "canstar_widget"], function(e) {
                var r, o, s;
                return r = e("backbone"), s = e("canstar_widget"), o = function(e) {
                    function r() {
                        return this._getId = t(this._getId, this), this.getStarRating = t(this.getStarRating, this), this.getCompany = t(this.getCompany, this), this.isMonetised = t(this.isMonetised, this), this.qualifiesAsSimilar = t(this.qualifiesAsSimilar, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), this.defaults = t(this.defaults, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.defaults = function() {
                        return {
                            Company: "Company",
                            "Product Name": "Product",
                            "Star Rating": "11",
                            SUPP: {}
                        }
                    }, r.prototype.initialize = function(t, e) {
                        return null == e && (e = {}), r.__super__.initialize.apply(this, arguments)
                    }, r.prototype.parse = function(t) {
                        var e;
                        return e = t["Star Rating"], "undefined" != typeof e && (t["Star Rating"] = this.normaliseStarRating(e)), t.id = this._getId(t), t
                    }, r.prototype.normaliseStarRating = function(t) {
                        var e;
                        switch (t) {
                            case "10":
                            case -12:
                            case null:
                            case "null":
                            case "not rated":
                            case "Not rated":
                                t = "10";
                                break;
                            case "11":
                            case -11:
                            case "New":
                                t = "11";
                                break;
                            case "12":
                            case 4.5:
                            case -10:
                            case "6":
                            case "rising star":
                                t = "12";
                                break;
                            default:
                                "string" == typeof t && t.indexOf("*") > -1 ? t = "" + (null != (e = t.match(/\*/g)) ? e.length : void 0) : i.call([1, 2, 3, 4, 5], +t) >= 0 ? t += "" : "undefined" != typeof console && null !== console && console.error("Bad star value found - " + t)
                        }
                        return t
                    }, r.prototype.qualifiesAsSimilar = function(t) {
                        var e;
                        return this.id === t ? !1 : this.isMonetised() ? (e = this.getStarRating(), "4" !== e && "5" !== e ? !1 : !0) : !1
                    }, r.prototype.isMonetised = function() {
                        var t, e;
                        return t = this.get("SUPP"), (null != (e = t.lead_url) ? e.length : void 0) > 0
                    }, r.prototype.getCompany = function() {
                        return this.get("Company")
                    }, r.prototype.getStarRating = function() {
                        return this.get("Star Rating")
                    }, r.prototype._getId = function(t) {
                        var e, n, i;
                        return (n = null != (i = t.SUPP) ? i.id_field : void 0) ? (e = t.SUPP[n], null == e ? void("undefined" != typeof console && null !== console && console.error("" + n + " does not exist in SUPP array")) : e) : void("undefined" != typeof console && null !== console && console.error("SUPP.id_field does not exist"))
                    }, r
                }(r.Model)
            })
        }.call(this),
        function() {
            define("libraries/Filters", ["require"], function() {
                var t;
                return t = function() {
                    function t() {}
                    return t.prototype.isMonetised = function(t) {
                        var e;
                        return (null != (e = t.SUPP.lead_url) ? e.length : void 0) > 0
                    }, t.prototype.defaultFilters = {
                        mortgages: {
                            groupFn: function(t) {
                                var e;
                                return e = t.get("SUPP").INFOFXVR, "Variable" !== e && (e += "." + t.get("SUPP").MAX_TIME_YEARS), "" + t.get("SUPP").CO_CODE + "." + t.get("SUPP").STARSTAR + "." + e
                            },
                            sortFn: function(t) {
                                return _(t).chain().sortBy(function() {
                                    return function(t) {
                                        var e, n;
                                        return e = t.get("SUPP").INFOFXVR, n = "Variable" === e ? "Open" : "Closed", t.get("SUPP").INFOOCIB === n ? 0 : 1
                                    }
                                }(this)).sortBy(function() {
                                    return function(t) {
                                        return parseFloat(t.get("Current Rate"), 10)
                                    }
                                }(this)).sortBy(function() {
                                    return function(t) {
                                        return parseFloat(t.get("Comparison Rate *"), 10)
                                    }
                                }(this)).value()
                            }
                        }
                    }, t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("widgets/search/collections/ProductCollection", ["require", "underscore", "canstar_widget", "backbone", "libraries/Constants", "./ProductModel", "libraries/Filters"], function(e) {
                var i, r, o, s, a, l, c;
                return c = e("underscore"), l = e("canstar_widget"), i = e("backbone"), r = e("libraries/Constants"), a = e("./ProductModel"), o = e("libraries/Filters"), s = function(e) {
                    function s() {
                        return this.addFrontendFilters = t(this.addFrontendFilters, this), this.calcDefaultFilteredProducts = t(this.calcDefaultFilteredProducts, this), this.getSimilarProducts = t(this.getSimilarProducts, this), this.companyFilteredOut = t(this.companyFilteredOut, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), this.model = t(this.model, this), s.__super__.constructor.apply(this, arguments)
                    }
                    return n(s, e), s.prototype.model = function(t, e) {
                        return this.useProductModel ? new a(t, e) : new i.Model(t, e)
                    }, s.prototype.url = "" + l.base_url + "api_v2/facets/data/", s.prototype.initialize = function(t, e) {
                        return null == e && (e = {}), this.useProductModel = e.useProductModel || !1, s.__super__.initialize.apply(this, arguments)
                    }, s.prototype.parse = function(t) {
                        return t
                    }, s.prototype.companyFilteredOut = function(t) {
                        return c.some(t, function(t) {
                            return function(e) {
                                return 0 === t.getCompanyProducts(e).length
                            }
                        }(this))
                    }, s.prototype.getCompanyProducts = function(t) {
                        var e;
                        return e = this.filter(function(e) {
                            return e.get("Company") === t
                        })
                    }, s.prototype.getSimilarProducts = function(t) {
                        var e;
                        return this.useProductModel ? (e = this.chain().filter(function(e) {
                            return e.qualifiesAsSimilar(t)
                        }).groupBy(function(t) {
                            return t.getCompany()
                        }).shuffle().tap(function(t) {
                            return l.debug ? console.log(t.length) : void 0
                        }).first(r.NUM_SIMILAR_PRODUCTS).map(function(t) {
                            return c.first(c.shuffle(t))
                        }).value(), e.length < r.NUM_SIMILAR_PRODUCTS ? [] : e) : void("undefined" != typeof console && null !== console && console.error("Can only find similar products when using ProductModel"))
                    }, s.prototype.calcDefaultFilteredProducts = function() {
                        var t, e;
                        return e = l.faceted_search.table, t = this.chain().groupBy(function(t) {
                            return o.prototype.defaultFilters[e].groupFn(t)
                        }).map(function(t) {
                            return c.first(o.prototype.defaultFilters[e].sortFn(t))
                        }).value(), c.each(t, function(t) {
                            return t.set("defaultFilter", !0)
                        }), t.length
                    }, s.prototype.addFrontendFilters = function(t) {
                        var e, n, i, r, s, a, l;
                        a = [];
                        for (n in t) {
                            e = t[n], l = e.values;
                            for (s in l) i = l[s], i.frontend_filter === !0 && (r = i.filter, null == o.prototype[r] ? "undefined" != typeof console && null !== console && console.error("Missing frontend filter function " + r) : a.push({
                                facetName: n,
                                filterName: s,
                                filter: r
                            }))
                        }
                        return a.length > 0 ? this.forEach(function() {
                            return function(t) {
                                var e, n, r, s, l;
                                for (l = [], n = 0, r = a.length; r > n; n++) i = a[n], o.prototype[i.filter](t.toJSON()) ? (e = t.get("facets"), null == e[s = i.facetName] && (e[s] = []), e[i.facetName].push(i.filterName), l.push(t.set("facets", e))) : l.push(void 0);
                                return l
                            }
                        }(this)) : void 0
                    }, s
                }(i.Collection)
            })
        }.call(this), define("text-cns!components/dropdown_sort/tmpl_dropdown_container.html", [], function() {
            return '<div class="dropdown programmatic-sort pull-right hidden-xs hidden-sm">\n  <div class="desktop-sorting-label" style="display: inline-block; margin: 0px 15px 0px 0px; font-family: Walsheim,Helvetica,Arial,sans-serif; font-weight: 400; color: rgb(114, 114, 114);">\n    Sorted by:\n  </div>\n  <button class="btn btn-default dropdown-toggle" type="button" id="sort-menu-desktop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n    <%= defaultSorts %> <i class="fa fa-caret-down"></i>\n  </button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-desktop"></ul>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue/dropdown_sort/tmpl_dropdown_container.html", [], function() {
            return '<div class="dropdown programmatic-sort pull-right hidden-xs hidden-sm">\n  <div class="desktop-sorting-label" style="display: inline-block; margin: 0px 15px 0px 0px; font-family: Walsheim,Helvetica,Arial,sans-serif; font-weight: 400; color: rgb(114, 114, 114);">\n    Sorted by:\n  </div>\n  \n  <button class="btn btn-default dropdown-toggle" type="button" id="sort-menu-desktop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n    <%= defaultSorts %> <i class="fa fa-caret-down"></i>\n  </button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-desktop"></ul>\n<br/>\n  <a id="popoversort" class="small-text" tabindex="0" role="button" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" style="display: none;">\n  \n  </a>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/dropdown_sort/tmpl_dropdown_container.html", [], function() {
            return '<div class="dropdown programmatic-sort pull-right hidden-xs">\n  <div class="desktop-sorting-label" style="display: inline-block; margin: 0px 15px 0px 0px; font-family: Walsheim,Helvetica,Arial,sans-serif; font-weight: 400; color: rgb(114, 114, 114);">\n    Sorted by:\n  </div>\n  <button class="btn btn-default dropdown-toggle" type="button" id="sort-menu-desktop" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n    <%= defaultSorts %> <i class="fa fa-caret-down"></i>\n  </button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-desktop"></ul>\n</div>\n'
        }),
        function() {
            define("components/dropdown_sort/templates", ["require", "text-cns!components/dropdown_sort/tmpl_dropdown_container.html", "text-cns!widgets/search/themes/blue/dropdown_sort/tmpl_dropdown_container.html", "text-cns!widgets/search/themes/blue_product/dropdown_sort/tmpl_dropdown_container.html"], function(t) {
                return t("text-cns!components/dropdown_sort/tmpl_dropdown_container.html"), t("text-cns!widgets/search/themes/blue/dropdown_sort/tmpl_dropdown_container.html"), t("text-cns!widgets/search/themes/blue_product/dropdown_sort/tmpl_dropdown_container.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                },
                i = [].indexOf || function(t) {
                    for (var e = 0, n = this.length; n > e; e++)
                        if (e in this && this[e] === t) return e;
                    return -1
                };
            define("components/dropdown_sort/DropdownSort", ["require", "jquery", "underscore", "backbone", "libraries/Canstar", "libraries/GAQHelper", "components/base/View", "components/dropdown_sort/templates", "canstar_widget"], function(e) {
                var r, o, s, a, l, c, u;
                return r = e("jquery"), u = e("underscore"), o = e("backbone"), s = e("libraries/Canstar"), l = e("libraries/GAQHelper"), c = e("components/base/View"), e("components/dropdown_sort/templates"), e("canstar_widget"), a = function(e) {
                    function o() {
                        return this.onSearchFilterChange = t(this.onSearchFilterChange, this), this.onTableSortChange = t(this.onTableSortChange, this), this.onTableTabChange = t(this.onTableTabChange, this), this.onSortClick = t(this.onSortClick, this), this.refreshSortList = t(this.refreshSortList, this), this.getSortText = t(this.getSortText, this), this.sortsToString = t(this.sortsToString, this), this.updateSortButton = t(this.updateSortButton, this), this.createSortingTag = t(this.createSortingTag, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), o.__super__.constructor.apply(this, arguments)
                    }
                    return n(o, e), o.prototype.path = "components/dropdown_sort", o.prototype.id = "desktop-sort", o.stylesheets = ["components/dropdown_sort/dropdown_sort.css"], o.prototype.events = {
                        "click .dropdown-menu li": "onSortClick"
                    }, o.prototype.templates = {
                        container: "!!tmpl_dropdown_container.html"
                    }, o.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.excluded_columns = ["Product Name", "Compare", "Apply"], this.defaultSorts = this.sortsToString(t.defaultSorts), null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) && (canstar_widget.vent.on("dynatable:tab_changed", this.onTableTabChange), canstar_widget.vent.on("dynatable:sort_changed", this.onTableSortChange), canstar_widget.vent.on("search:filter_changed", this.onSearchFilterChange)), this.render()
                    }, o.prototype.render = function() {
                        var t;
                        return this.$el.html(this.templates.container({
                            defaultSorts: this.defaultSorts
                        })), this.$sorts = this.$el.find("ul.dropdown-menu"), 0 === (null != (t = this.$sorts) ? t.length : void 0) && "undefined" != typeof console && null !== console && console.error("Sort template must have dropdown-menu class"), this.refreshSortList()
                    }, o.prototype.createSortingTag = function(t, e, n, i) {
                        return null == i && (i = e), r("<li>").html(r('<a role="button">').attr("data-direction", t).attr("title", i).html(e + n))
                    }, o.prototype.updateSortButton = function(t) {
                        var e;
                        return e = r("#sort-menu-desktop"), e.html(t + ' <i class="fa fa-caret-down"></i>'), e.val(t)
                    }, o.prototype.sortsToString = function(t) {
                        var e, n, i;
                        return i = null, t && (e = 2, n = u.pluck(t, 0), null != n && n.slice(0, e), i = null != n ? n.join(" + ") : void 0), i || (i = "Star Rating + Company"), i
                    }, o.prototype.getSortText = function(t) {
                        var e, n;
                        return "Company" === t.name ? (e = "abc first", n = "zyx first") : "string" == typeof t.transform && t.transform.match(/^getTickCross/) ? (e = "not included", n = "included") : (e = "lowest first", n = "highest first"), t.sort_asc_text && (e = t.sort_asc_text), t.sort_desc_text && (n = t.sort_desc_text), {
                            asc: e,
                            desc: n
                        }
                    }, o.prototype.refreshSortList = function(t, e) {
                        var n, r, o, s, a, l, c, u, d;
                        this.$sorts.empty(), (null != e ? e.length : void 0) > 0 && (this.columns = e), d = [];
                        for (o in e) n = e[o], l = n.name, n.tab === t && n.sortable === !0 && i.call(this.excluded_columns, l) < 0 ? (a = this.getSortText(n), null != n.custom_sort ? (r = "asc" === (null != (c = n.custom_sort) ? c.order : void 0) ? 1 : -1, s = " &nbsp; <i class='fa fa-sort-" + (n.sort_numeric ? "numeric" : "alpha") + "-" + n.custom_sort.order + "'></i>", null != (null != (u = n.custom_sort) ? u.title : void 0) && (l = n.custom_sort.title), d.push(this.$sorts.append(this.createSortingTag(r, l, s, n.name)))) : (n.drop_sort_asc_enabled !== !1 && this.$sorts.append(this.createSortingTag(1, l, ": " + a.asc, l)), d.push(n.drop_sort_desc_enabled !== !1 ? this.$sorts.append(this.createSortingTag(-1, l, ": " + a.desc, l)) : void 0))) : d.push(void 0);
                        return d
                    }, o.prototype.onSortClick = function(t) {
                        var e, n, i, o, s;
                        return i = r(t.target).closest("a").context.text, n = i.split(":")[0].trim(), this.updateSortButton(i), e = u.findWhere(this.columns, {
                            name: n
                        }), t.column = e, null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) && canstar_widget.vent.trigger("dropdown_sort:changed", t), s = canstar_widget.faceted_search.category, o = canstar_widget.faceted_search.profile, "undefined" != typeof _gaq && null !== _gaq ? _gaq.push(["_trackEvent", "Click Tracking", s + " | " + o, "Sort Select | " + i]) : void 0
                    }, o.prototype.onTableTabChange = function(t) {
                        return this.refreshSortList(t.active_tab, t.columns)
                    }, o.prototype.onTableSortChange = function(t) {
                        var e, n;
                        return e = this.getSortText(t.column), n = "asc" === t.direction || "1" === t.direction ? e.asc : e.desc, this.updateSortButton(t.column.name + ": " + n)
                    }, o.prototype.onSearchFilterChange = function() {
                        return this.updateSortButton(this.defaultSorts)
                    }, o
                }(c)
            })
        }.call(this),
        function() {
            define("libraries/Analytics", ["require", "jquery", "underscore", "backbone"], function(t) {
                var e, n, i, r;
                return e = t("jquery"), r = t("underscore"), i = t("backbone"), n = function() {
                    function t() {}
                    return "undefined" == typeof window._caq && (window._caq = []), _caq._push = _caq.push, t.prototype.trackEvent = function(t, e) {
                        return _caq.push(["_track_event", t, e])
                    }, _caq.push = function(t, e, n) {
                        var i, r;
                        return null == e && (e = null), null == n && (n = null), _caq._push(t), r = ["_setCustomVar", 1, t[1]], "undefined" == typeof canstar_analytics ? _gaq.push(r) : (canstar_analytics.forceProcess(), r.push(canstar_analytics.lastEventUUID), _gaq.push(r), _gaq.push(["_setCustomVar", 2, "VisitorID", canstar_analytics.visitorID]), _gaq.push(["_setCustomVar", 3, "SessionID", canstar_analytics.sessionID]), null != e && null != n ? (i = "" + canstar_widget.faceted_search.table + "|" + e, _gaq.push(["_setCustomVar", 4, "CAMPAIGN_KEY", i]), _gaq.push(["_setCustomVar", 5, "PRODUCT_ID", n])) : void 0)
                    }, t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_graph/StarGraphModel", ["require", "backbone"], function(e) {
                var i, r;
                return i = e("backbone"), r = function(e) {
                    function i() {
                        return this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.defaults = {
                        name: "Profile A",
                        price_score: 75,
                        feature_score: 25,
                        price_color: "#d6a81d",
                        feature_color: "#eabb22"
                    }, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        return t = i.__super__.parse.apply(this, arguments), t.chart_data = [{
                            value: t.feature_score,
                            color: t.feature_color || this.defaults.feature_color,
                            label: "Feature Score"
                        }, {
                            value: t.price_score,
                            color: t.price_color || this.defaults.price_color,
                            label: "Price Score"
                        }], t
                    }, i
                }(i.Model)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_graph/StarGraphCollection", ["require", "backbone", "./StarGraphModel"], function(e) {
                var i, r, o;
                return i = e("backbone"), o = e("./StarGraphModel"), r = function(e) {
                    function i() {
                        return this.getProfiles = t(this.getProfiles, this), this.getProfileIndex = t(this.getProfileIndex, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.defaults = {
                        name: "Profile A",
                        price_score: 75,
                        feature_score: 25,
                        light_color: "#eabb22",
                        dark_color: "#d6a81d"
                    }, i.prototype.model = o, i.prototype.initialize = function() {
                        return i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        return t = i.__super__.parse.apply(this, arguments)
                    }, i.prototype.getProfileIndex = function(t) {
                        var e;
                        return e = this.find(function(e) {
                            return e.get("table_profile") === t
                        }), this.indexOf(e)
                    }, i.prototype.getProfiles = function(t) {
                        return this.filter(function(e) {
                            return e.get("table_profile") === t
                        })
                    }, i
                }(i.Collection)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_popover/StarPopoverModel", ["require", "canstar_widget", "backbone", "components/star_graph/StarGraphCollection"], function(e) {
                var i, r, o, s;
                return s = e("canstar_widget"), i = e("backbone"), r = e("components/star_graph/StarGraphCollection"), o = function(e) {
                    function i() {
                        return this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.defaults = {
                        table: null,
                        description: "CANSTAR Star Ratings use a sophisticated and unique value-based rating that compares both <b>Cost</b> and <b>Features</b> across products.",
                        profiles: [{
                            name: "Profile A",
                            price_score: 75,
                            feature_score: 25
                        }, {
                            name: "Profile B",
                            price_score: 80,
                            feature_score: 20
                        }]
                    }, i.prototype.initialize = function() {
                        return this.url = "" + s.base_url + "api/stars/config?table=" + s.faceted_search.table, i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        return t = i.__super__.parse.apply(this, arguments), t.profiles = new r(t.profiles, {
                            parse: !0
                        }), t
                    }, i
                }(i.Model)
            })
        }.call(this), define("text-cns!components/star_popover/tmpl_star_popover.html", [], function() {
            return '<div class="container-fluid">\r\n  <div class="row">\r\n    <div class="star-slider-container col-xs-12">\r\n      <h4>How are the Stars calculated?</h4>\r\n      <p><%= model.get(\'description\') %></p>\r\n      <div class="star-slider"></div>\r\n    </div>\r\n    <div class="star-explanation col-xs-12">\r\n      <h4>What\'s a Five Star?</h4>\r\n      <p>It could be an expensive and fully featured product or lower cost with fewer features.</p>\r\n      <div class="star-methodology col-xs-12">\r\n        <p>Interested to Learn More?</p>\r\n        <a href="<%= model.get(\'methodology_url\') %>" target="_blank">View Full Methodology Report</a>\r\n      </div>\r\n    </div><!-- /star-explanation -->\r\n  </div>\r\n</div>'
        }), define("text-cns!components/star_graph/tmpl_star_graph.html", [], function() {
            return '<h5><%= model.get(\'name\') %></h5>\n<h6>Profile</h6>\n<div class="chart-container">\n  <canvas class="chart" width="150" height="150"></canvas><!--\n  --><div class="legend">\n    <div class="feature score">\n      <div class="score-label">Feature Score</div>\n      <div class="score-value" style="color:<%= model.get(\'feature_color\') %>"><%= model.get(\'feature_score\') %><sup>%</sup></div>\n    </div>\n    <div class="price score">\n      <div class="score-label">Price Score</div>\n      <div class="score-value" style="color:<%= model.get(\'price_color\') %>"><%= model.get(\'price_score\') %><sup>%</sup></div>\n    </div>\n  </div>\n</div>'
        }),
        function() {
            var t = this,
                e = t.Chart,
                n = function(t) {
                    this.canvas = t.canvas, this.ctx = t;
                    var e = function(t, e) {
                            return t["offset" + e] ? t["offset" + e] : document.defaultView.getComputedStyle(t).getPropertyValue(e)
                        },
                        n = this.width = e(t.canvas, "Width"),
                        r = this.height = e(t.canvas, "Height");
                    t.canvas.width = n, t.canvas.height = r;
                    var n = this.width = t.canvas.width,
                        r = this.height = t.canvas.height;
                    return this.aspectRatio = this.width / this.height, i.retinaScale(this), this
                };
            n.defaults = {
                global: {
                    animation: !0,
                    animationSteps: 60,
                    animationEasing: "easeOutQuart",
                    showScale: !0,
                    scaleOverride: !1,
                    scaleSteps: null,
                    scaleStepWidth: null,
                    scaleStartValue: null,
                    scaleLineColor: "rgba(0,0,0,.1)",
                    scaleLineWidth: 1,
                    scaleShowLabels: !0,
                    scaleLabel: "<%=value%>",
                    scaleIntegersOnly: !0,
                    scaleBeginAtZero: !1,
                    scaleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    scaleFontSize: 12,
                    scaleFontStyle: "normal",
                    scaleFontColor: "#666",
                    responsive: !1,
                    maintainAspectRatio: !0,
                    showTooltips: !0,
                    customTooltips: !1,
                    tooltipEvents: ["mousemove", "touchstart", "touchmove", "mouseout"],
                    tooltipFillColor: "rgba(0,0,0,0.8)",
                    tooltipFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    tooltipFontSize: 14,
                    tooltipFontStyle: "normal",
                    tooltipFontColor: "#fff",
                    tooltipTitleFontFamily: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    tooltipTitleFontSize: 14,
                    tooltipTitleFontStyle: "bold",
                    tooltipTitleFontColor: "#fff",
                    tooltipYPadding: 6,
                    tooltipXPadding: 6,
                    tooltipCaretSize: 8,
                    tooltipCornerRadius: 6,
                    tooltipXOffset: 10,
                    tooltipTemplate: "<%if (label){%><%=label%>: <%}%><%= value %>",
                    multiTooltipTemplate: "<%= value %>",
                    multiTooltipKeyBackground: "#fff",
                    onAnimationProgress: function() {},
                    onAnimationComplete: function() {}
                }
            }, n.types = {};
            var i = n.helpers = {},
                r = i.each = function(t, e, n) {
                    var i = Array.prototype.slice.call(arguments, 3);
                    if (t)
                        if (t.length === +t.length) {
                            var r;
                            for (r = 0; r < t.length; r++) e.apply(n, [t[r], r].concat(i))
                        } else
                            for (var o in t) e.apply(n, [t[o], o].concat(i))
                },
                o = i.clone = function(t) {
                    var e = {};
                    return r(t, function(n, i) {
                        t.hasOwnProperty(i) && (e[i] = n)
                    }), e
                },
                s = i.extend = function(t) {
                    return r(Array.prototype.slice.call(arguments, 1), function(e) {
                        r(e, function(n, i) {
                            e.hasOwnProperty(i) && (t[i] = n)
                        })
                    }), t
                },
                a = i.merge = function() {
                    var t = Array.prototype.slice.call(arguments, 0);
                    return t.unshift({}), s.apply(null, t)
                },
                l = i.indexOf = function(t, e) {
                    if (Array.prototype.indexOf) return t.indexOf(e);
                    for (var n = 0; n < t.length; n++)
                        if (t[n] === e) return n;
                    return -1
                },
                c = (i.where = function(t, e) {
                    var n = [];
                    return i.each(t, function(t) {
                        e(t) && n.push(t)
                    }), n
                }, i.findNextWhere = function(t, e, n) {
                    n || (n = -1);
                    for (var i = n + 1; i < t.length; i++) {
                        var r = t[i];
                        if (e(r)) return r
                    }
                }, i.findPreviousWhere = function(t, e, n) {
                    n || (n = t.length);
                    for (var i = n - 1; i >= 0; i--) {
                        var r = t[i];
                        if (e(r)) return r
                    }
                }, i.inherits = function(t) {
                    var e = this,
                        n = t && t.hasOwnProperty("constructor") ? t.constructor : function() {
                            return e.apply(this, arguments)
                        },
                        i = function() {
                            this.constructor = n
                        };
                    return i.prototype = e.prototype, n.prototype = new i, n.extend = c, t && s(n.prototype, t), n.__super__ = e.prototype, n
                }),
                u = i.noop = function() {},
                d = i.uid = function() {
                    var t = 0;
                    return function() {
                        return "chart-" + t++
                    }
                }(),
                p = i.warn = function(t) {
                    window.console && "function" == typeof window.console.warn && console.warn(t)
                },
                h = i.amd = "function" == typeof define && define.amd,
                f = i.isNumber = function(t) {
                    return !isNaN(parseFloat(t)) && isFinite(t)
                },
                m = i.max = function(t) {
                    return Math.max.apply(Math, t)
                },
                g = i.min = function(t) {
                    return Math.min.apply(Math, t)
                },
                v = (i.cap = function(t, e, n) {
                    if (f(e)) {
                        if (t > e) return e
                    } else if (f(n) && n > t) return n;
                    return t
                }, i.getDecimalPlaces = function(t) {
                    return t % 1 !== 0 && f(t) ? t.toString().split(".")[1].length : 0
                }),
                _ = i.radians = function(t) {
                    return t * (Math.PI / 180)
                },
                y = (i.getAngleFromPoint = function(t, e) {
                    var n = e.x - t.x,
                        i = e.y - t.y,
                        r = Math.sqrt(n * n + i * i),
                        o = 2 * Math.PI + Math.atan2(i, n);
                    return 0 > n && 0 > i && (o += 2 * Math.PI), {
                        angle: o,
                        distance: r
                    }
                }, i.aliasPixel = function(t) {
                    return t % 2 === 0 ? 0 : .5
                }),
                b = (i.splineCurve = function(t, e, n, i) {
                    var r = Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)),
                        o = Math.sqrt(Math.pow(n.x - e.x, 2) + Math.pow(n.y - e.y, 2)),
                        s = i * r / (r + o),
                        a = i * o / (r + o);
                    return {
                        inner: {
                            x: e.x - s * (n.x - t.x),
                            y: e.y - s * (n.y - t.y)
                        },
                        outer: {
                            x: e.x + a * (n.x - t.x),
                            y: e.y + a * (n.y - t.y)
                        }
                    }
                }, i.calculateOrderOfMagnitude = function(t) {
                    return Math.floor(Math.log(t) / Math.LN10)
                }),
                w = (i.calculateScaleRange = function(t, e, n, i, r) {
                    var o = 2,
                        s = Math.floor(e / (1.5 * n)),
                        a = o >= s,
                        l = m(t),
                        c = g(t);
                    l === c && (l += .5, c >= .5 && !i ? c -= .5 : l += .5);
                    for (var u = Math.abs(l - c), d = b(u), p = Math.ceil(l / (1 * Math.pow(10, d))) * Math.pow(10, d), h = i ? 0 : Math.floor(c / (1 * Math.pow(10, d))) * Math.pow(10, d), f = p - h, v = Math.pow(10, d), _ = Math.round(f / v);
                        (_ > s || s > 2 * _) && !a;)
                        if (_ > s) v *= 2, _ = Math.round(f / v), _ % 1 !== 0 && (a = !0);
                        else if (r && d >= 0) {
                        if (v / 2 % 1 !== 0) break;
                        v /= 2, _ = Math.round(f / v)
                    } else v /= 2, _ = Math.round(f / v);
                    return a && (_ = o, v = f / _), {
                        steps: _,
                        stepValue: v,
                        min: h,
                        max: h + _ * v
                    }
                }, i.template = function(t, e) {
                    function n(t, e) {
                        var n = /\W/.test(t) ? new Function("obj", "var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('" + t.replace(/[\r\t\n]/g, " ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g, "$1\r").replace(/\t=(.*?)%>/g, "',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'") + "');}return p.join('');") : i[t] = i[t];
                        return e ? n(e) : n
                    }
                    if (t instanceof Function) return t(e);
                    var i = {};
                    return n(t, e)
                }),
                P = (i.generateLabels = function(t, e, n, i) {
                    var o = new Array(e);
                    return labelTemplateString && r(o, function(e, r) {
                        o[r] = w(t, {
                            value: n + i * (r + 1)
                        })
                    }), o
                }, i.easingEffects = {
                    linear: function(t) {
                        return t
                    },
                    easeInQuad: function(t) {
                        return t * t
                    },
                    easeOutQuad: function(t) {
                        return -1 * t * (t - 2)
                    },
                    easeInOutQuad: function(t) {
                        return (t /= .5) < 1 ? .5 * t * t : -0.5 * (--t * (t - 2) - 1)
                    },
                    easeInCubic: function(t) {
                        return t * t * t
                    },
                    easeOutCubic: function(t) {
                        return 1 * ((t = t / 1 - 1) * t * t + 1)
                    },
                    easeInOutCubic: function(t) {
                        return (t /= .5) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2)
                    },
                    easeInQuart: function(t) {
                        return t * t * t * t
                    },
                    easeOutQuart: function(t) {
                        return -1 * ((t = t / 1 - 1) * t * t * t - 1)
                    },
                    easeInOutQuart: function(t) {
                        return (t /= .5) < 1 ? .5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2)
                    },
                    easeInQuint: function(t) {
                        return 1 * (t /= 1) * t * t * t * t
                    },
                    easeOutQuint: function(t) {
                        return 1 * ((t = t / 1 - 1) * t * t * t * t + 1)
                    },
                    easeInOutQuint: function(t) {
                        return (t /= .5) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2)
                    },
                    easeInSine: function(t) {
                        return -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1
                    },
                    easeOutSine: function(t) {
                        return 1 * Math.sin(t / 1 * (Math.PI / 2))
                    },
                    easeInOutSine: function(t) {
                        return -0.5 * (Math.cos(Math.PI * t / 1) - 1)
                    },
                    easeInExpo: function(t) {
                        return 0 === t ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1))
                    },
                    easeOutExpo: function(t) {
                        return 1 === t ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1)
                    },
                    easeInOutExpo: function(t) {
                        return 0 === t ? 0 : 1 === t ? 1 : (t /= .5) < 1 ? .5 * Math.pow(2, 10 * (t - 1)) : .5 * (-Math.pow(2, -10 * --t) + 2)
                    },
                    easeInCirc: function(t) {
                        return t >= 1 ? t : -1 * (Math.sqrt(1 - (t /= 1) * t) - 1)
                    },
                    easeOutCirc: function(t) {
                        return 1 * Math.sqrt(1 - (t = t / 1 - 1) * t)
                    },
                    easeInOutCirc: function(t) {
                        return (t /= .5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
                    },
                    easeInElastic: function(t) {
                        var e = 1.70158,
                            n = 0,
                            i = 1;
                        return 0 === t ? 0 : 1 == (t /= 1) ? 1 : (n || (n = .3), i < Math.abs(1) ? (i = 1, e = n / 4) : e = n / (2 * Math.PI) * Math.asin(1 / i), -(i * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (1 * t - e) * Math.PI / n)))
                    },
                    easeOutElastic: function(t) {
                        var e = 1.70158,
                            n = 0,
                            i = 1;
                        return 0 === t ? 0 : 1 == (t /= 1) ? 1 : (n || (n = .3), i < Math.abs(1) ? (i = 1, e = n / 4) : e = n / (2 * Math.PI) * Math.asin(1 / i), i * Math.pow(2, -10 * t) * Math.sin(2 * (1 * t - e) * Math.PI / n) + 1)
                    },
                    easeInOutElastic: function(t) {
                        var e = 1.70158,
                            n = 0,
                            i = 1;
                        return 0 === t ? 0 : 2 == (t /= .5) ? 1 : (n || (n = .3 * 1.5), i < Math.abs(1) ? (i = 1, e = n / 4) : e = n / (2 * Math.PI) * Math.asin(1 / i), 1 > t ? -.5 * i * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (1 * t - e) * Math.PI / n) : i * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (1 * t - e) * Math.PI / n) * .5 + 1)
                    },
                    easeInBack: function(t) {
                        var e = 1.70158;
                        return 1 * (t /= 1) * t * ((e + 1) * t - e)
                    },
                    easeOutBack: function(t) {
                        var e = 1.70158;
                        return 1 * ((t = t / 1 - 1) * t * ((e + 1) * t + e) + 1)
                    },
                    easeInOutBack: function(t) {
                        var e = 1.70158;
                        return (t /= .5) < 1 ? .5 * t * t * (((e *= 1.525) + 1) * t - e) : .5 * ((t -= 2) * t * (((e *= 1.525) + 1) * t + e) + 2)
                    },
                    easeInBounce: function(t) {
                        return 1 - P.easeOutBounce(1 - t)
                    },
                    easeOutBounce: function(t) {
                        return (t /= 1) < 1 / 2.75 ? 7.5625 * t * t : 2 / 2.75 > t ? 1 * (7.5625 * (t -= 1.5 / 2.75) * t + .75) : 2.5 / 2.75 > t ? 1 * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) : 1 * (7.5625 * (t -= 2.625 / 2.75) * t + .984375)
                    },
                    easeInOutBounce: function(t) {
                        return .5 > t ? .5 * P.easeInBounce(2 * t) : .5 * P.easeOutBounce(2 * t - 1) + .5
                    }
                }),
                S = i.requestAnimFrame = function() {
                    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(t) {
                        return window.setTimeout(t, 1e3 / 60)
                    }
                }(),
                C = i.cancelAnimFrame = function() {
                    return window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame || function(t) {
                        return window.clearTimeout(t, 1e3 / 60)
                    }
                }(),
                x = (i.animationLoop = function(t, e, n, i, r, o) {
                    var s = 0,
                        a = P[n] || P.linear,
                        l = function() {
                            s++;
                            var n = s / e,
                                c = a(n);
                            t.call(o, c, n, s), i.call(o, c, n), e > s ? o.animationFrame = S(l) : r.apply(o)
                        };
                    S(l)
                }, i.getRelativePosition = function(t) {
                    var e, n, i = t.originalEvent || t,
                        r = t.currentTarget || t.srcElement,
                        o = r.getBoundingClientRect();
                    return i.touches ? (e = i.touches[0].clientX - o.left, n = i.touches[0].clientY - o.top) : (e = i.clientX - o.left, n = i.clientY - o.top), {
                        x: e,
                        y: n
                    }
                }, i.addEvent = function(t, e, n) {
                    t.addEventListener ? t.addEventListener(e, n) : t.attachEvent ? t.attachEvent("on" + e, n) : t["on" + e] = n
                }),
                k = i.removeEvent = function(t, e, n) {
                    t.removeEventListener ? t.removeEventListener(e, n, !1) : t.detachEvent ? t.detachEvent("on" + e, n) : t["on" + e] = u
                },
                T = (i.bindEvents = function(t, e, n) {
                    t.events || (t.events = {}), r(e, function(e) {
                        t.events[e] = function() {
                            n.apply(t, arguments)
                        }, x(t.chart.canvas, e, t.events[e])
                    })
                }, i.unbindEvents = function(t, e) {
                    r(e, function(e, n) {
                        k(t.chart.canvas, n, e)
                    })
                }),
                L = i.getMaximumWidth = function(t) {
                    var e = t.parentNode;
                    return e.clientWidth
                },
                E = i.getMaximumHeight = function(t) {
                    var e = t.parentNode;
                    return e.clientHeight
                },
                A = (i.getMaximumSize = i.getMaximumWidth, i.retinaScale = function(t) {
                    var e = t.ctx,
                        n = t.canvas.width,
                        i = t.canvas.height;
                    window.devicePixelRatio && (e.canvas.style.width = n + "px", e.canvas.style.height = i + "px", e.canvas.height = i * window.devicePixelRatio, e.canvas.width = n * window.devicePixelRatio, e.scale(window.devicePixelRatio, window.devicePixelRatio))
                }),
                N = i.clear = function(t) {
                    t.ctx.clearRect(0, 0, t.width, t.height)
                },
                O = i.fontString = function(t, e, n) {
                    return e + " " + t + "px " + n
                },
                D = i.longestText = function(t, e, n) {
                    t.font = e;
                    var i = 0;
                    return r(n, function(e) {
                        var n = t.measureText(e).width;
                        i = n > i ? n : i
                    }), i
                },
                M = i.drawRoundedRectangle = function(t, e, n, i, r, o) {
                    t.beginPath(), t.moveTo(e + o, n), t.lineTo(e + i - o, n), t.quadraticCurveTo(e + i, n, e + i, n + o), t.lineTo(e + i, n + r - o), t.quadraticCurveTo(e + i, n + r, e + i - o, n + r), t.lineTo(e + o, n + r), t.quadraticCurveTo(e, n + r, e, n + r - o), t.lineTo(e, n + o), t.quadraticCurveTo(e, n, e + o, n), t.closePath()
                };
            n.instances = {}, n.Type = function(t, e, i) {
                this.options = e, this.chart = i, this.id = d(), n.instances[this.id] = this, e.responsive && this.resize(), this.initialize.call(this, t)
            }, s(n.Type.prototype, {
                initialize: function() {
                    return this
                },
                clear: function() {
                    return N(this.chart), this
                },
                stop: function() {
                    return C(this.animationFrame), this
                },
                resize: function(t) {
                    this.stop();
                    var e = this.chart.canvas,
                        n = L(this.chart.canvas),
                        i = this.options.maintainAspectRatio ? n / this.chart.aspectRatio : E(this.chart.canvas);
                    return e.width = this.chart.width = n, e.height = this.chart.height = i, A(this.chart), "function" == typeof t && t.apply(this, Array.prototype.slice.call(arguments, 1)), this
                },
                reflow: u,
                render: function(t) {
                    return t && this.reflow(), this.options.animation && !t ? i.animationLoop(this.draw, this.options.animationSteps, this.options.animationEasing, this.options.onAnimationProgress, this.options.onAnimationComplete, this) : (this.draw(), this.options.onAnimationComplete.call(this)), this
                },
                generateLegend: function() {
                    return w(this.options.legendTemplate, this)
                },
                destroy: function() {
                    this.clear(), T(this, this.events);
                    var t = this.chart.canvas;
                    t.width = this.chart.width, t.height = this.chart.height, t.style.removeProperty ? (t.style.removeProperty("width"), t.style.removeProperty("height")) : (t.style.removeAttribute("width"), t.style.removeAttribute("height")), delete n.instances[this.id]
                },
                showTooltip: function(t, e) {
                    "undefined" == typeof this.activeElements && (this.activeElements = []);
                    var o = function(t) {
                        var e = !1;
                        return t.length !== this.activeElements.length ? e = !0 : (r(t, function(t, n) {
                            t !== this.activeElements[n] && (e = !0)
                        }, this), e)
                    }.call(this, t);
                    if (o || e) {
                        if (this.activeElements = t, this.draw(), this.options.customTooltips && this.options.customTooltips(!1), t.length > 0)
                            if (this.datasets && this.datasets.length > 1) {
                                for (var s, a, c = this.datasets.length - 1; c >= 0 && (s = this.datasets[c].points || this.datasets[c].bars || this.datasets[c].segments, a = l(s, t[0]), -1 === a); c--);
                                var u = [],
                                    d = [],
                                    p = function() {
                                        var t, e, n, r, o, s = [],
                                            l = [],
                                            c = [];
                                        return i.each(this.datasets, function(e) {
                                            t = e.points || e.bars || e.segments, t[a] && t[a].hasValue() && s.push(t[a])
                                        }), i.each(s, function(t) {
                                            l.push(t.x), c.push(t.y), u.push(i.template(this.options.multiTooltipTemplate, t)), d.push({
                                                fill: t._saved.fillColor || t.fillColor,
                                                stroke: t._saved.strokeColor || t.strokeColor
                                            })
                                        }, this), o = g(c), n = m(c), r = g(l), e = m(l), {
                                            x: r > this.chart.width / 2 ? r : e,
                                            y: (o + n) / 2
                                        }
                                    }.call(this, a);
                                new n.MultiTooltip({
                                    x: p.x,
                                    y: p.y,
                                    xPadding: this.options.tooltipXPadding,
                                    yPadding: this.options.tooltipYPadding,
                                    xOffset: this.options.tooltipXOffset,
                                    fillColor: this.options.tooltipFillColor,
                                    textColor: this.options.tooltipFontColor,
                                    fontFamily: this.options.tooltipFontFamily,
                                    fontStyle: this.options.tooltipFontStyle,
                                    fontSize: this.options.tooltipFontSize,
                                    titleTextColor: this.options.tooltipTitleFontColor,
                                    titleFontFamily: this.options.tooltipTitleFontFamily,
                                    titleFontStyle: this.options.tooltipTitleFontStyle,
                                    titleFontSize: this.options.tooltipTitleFontSize,
                                    cornerRadius: this.options.tooltipCornerRadius,
                                    labels: u,
                                    legendColors: d,
                                    legendColorBackground: this.options.multiTooltipKeyBackground,
                                    title: t[0].label,
                                    chart: this.chart,
                                    ctx: this.chart.ctx,
                                    custom: this.options.customTooltips
                                }).draw()
                            } else r(t, function(t) {
                                var e = t.tooltipPosition();
                                new n.Tooltip({
                                    x: Math.round(e.x),
                                    y: Math.round(e.y),
                                    xPadding: this.options.tooltipXPadding,
                                    yPadding: this.options.tooltipYPadding,
                                    fillColor: this.options.tooltipFillColor,
                                    textColor: this.options.tooltipFontColor,
                                    fontFamily: this.options.tooltipFontFamily,
                                    fontStyle: this.options.tooltipFontStyle,
                                    fontSize: this.options.tooltipFontSize,
                                    caretHeight: this.options.tooltipCaretSize,
                                    cornerRadius: this.options.tooltipCornerRadius,
                                    text: w(this.options.tooltipTemplate, t),
                                    chart: this.chart,
                                    custom: this.options.customTooltips
                                }).draw()
                            }, this);
                        return this
                    }
                },
                toBase64Image: function() {
                    return this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments)
                }
            }), n.Type.extend = function(t) {
                var e = this,
                    i = function() {
                        return e.apply(this, arguments)
                    };
                if (i.prototype = o(e.prototype), s(i.prototype, t), i.extend = n.Type.extend, t.name || e.prototype.name) {
                    var r = t.name || e.prototype.name,
                        l = n.defaults[e.prototype.name] ? o(n.defaults[e.prototype.name]) : {};
                    n.defaults[r] = s(l, t.defaults), n.types[r] = i, n.prototype[r] = function(t, e) {
                        var o = a(n.defaults.global, n.defaults[r], e || {});
                        return new i(t, o, this)
                    }
                } else p("Name not provided for this chart, so it hasn't been registered");
                return e
            }, n.Element = function(t) {
                s(this, t), this.initialize.apply(this, arguments), this.save()
            }, s(n.Element.prototype, {
                initialize: function() {},
                restore: function(t) {
                    return t ? r(t, function(t) {
                        this[t] = this._saved[t]
                    }, this) : s(this, this._saved), this
                },
                save: function() {
                    return this._saved = o(this), delete this._saved._saved, this
                },
                update: function(t) {
                    return r(t, function(t, e) {
                        this._saved[e] = this[e], this[e] = t
                    }, this), this
                },
                transition: function(t, e) {
                    return r(t, function(t, n) {
                        this[n] = (t - this._saved[n]) * e + this._saved[n]
                    }, this), this
                },
                tooltipPosition: function() {
                    return {
                        x: this.x,
                        y: this.y
                    }
                },
                hasValue: function() {
                    return f(this.value)
                }
            }), n.Element.extend = c, n.Point = n.Element.extend({
                display: !0,
                inRange: function(t, e) {
                    var n = this.hitDetectionRadius + this.radius;
                    return Math.pow(t - this.x, 2) + Math.pow(e - this.y, 2) < Math.pow(n, 2)
                },
                draw: function() {
                    if (this.display) {
                        var t = this.ctx;
                        t.beginPath(), t.arc(this.x, this.y, this.radius, 0, 2 * Math.PI), t.closePath(), t.strokeStyle = this.strokeColor, t.lineWidth = this.strokeWidth, t.fillStyle = this.fillColor, t.fill(), t.stroke()
                    }
                }
            }), n.Arc = n.Element.extend({
                inRange: function(t, e) {
                    var n = i.getAngleFromPoint(this, {
                            x: t,
                            y: e
                        }),
                        r = n.angle >= this.startAngle && n.angle <= this.endAngle,
                        o = n.distance >= this.innerRadius && n.distance <= this.outerRadius;
                    return r && o
                },
                tooltipPosition: function() {
                    var t = this.startAngle + (this.endAngle - this.startAngle) / 2,
                        e = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;
                    return {
                        x: this.x + Math.cos(t) * e,
                        y: this.y + Math.sin(t) * e
                    }
                },
                draw: function(t) {
                    var e = this.ctx;
                    e.beginPath(), e.arc(this.x, this.y, this.outerRadius, this.startAngle, this.endAngle), e.arc(this.x, this.y, this.innerRadius, this.endAngle, this.startAngle, !0), e.closePath(), e.strokeStyle = this.strokeColor, e.lineWidth = this.strokeWidth, e.fillStyle = this.fillColor, e.fill(), e.lineJoin = "bevel", this.showStroke && e.stroke()
                }
            }), n.Rectangle = n.Element.extend({
                draw: function() {
                    var t = this.ctx,
                        e = this.width / 2,
                        n = this.x - e,
                        i = this.x + e,
                        r = this.base - (this.base - this.y),
                        o = this.strokeWidth / 2;
                    this.showStroke && (n += o, i -= o, r += o), t.beginPath(), t.fillStyle = this.fillColor, t.strokeStyle = this.strokeColor, t.lineWidth = this.strokeWidth, t.moveTo(n, this.base), t.lineTo(n, r), t.lineTo(i, r), t.lineTo(i, this.base), t.fill(), this.showStroke && t.stroke()
                },
                height: function() {
                    return this.base - this.y
                },
                inRange: function(t, e) {
                    return t >= this.x - this.width / 2 && t <= this.x + this.width / 2 && e >= this.y && e <= this.base
                }
            }), n.Tooltip = n.Element.extend({
                draw: function() {
                    var t = this.chart.ctx;
                    t.font = O(this.fontSize, this.fontStyle, this.fontFamily), this.xAlign = "center", this.yAlign = "above";
                    var e = this.caretPadding = 2,
                        n = t.measureText(this.text).width + 2 * this.xPadding,
                        i = this.fontSize + 2 * this.yPadding,
                        r = i + this.caretHeight + e;
                    this.x + n / 2 > this.chart.width ? this.xAlign = "left" : this.x - n / 2 < 0 && (this.xAlign = "right"), this.y - r < 0 && (this.yAlign = "below");
                    var o = this.x - n / 2,
                        s = this.y - r;
                    if (t.fillStyle = this.fillColor, this.custom) this.custom(this);
                    else {
                        switch (this.yAlign) {
                            case "above":
                                t.beginPath(), t.moveTo(this.x, this.y - e), t.lineTo(this.x + this.caretHeight, this.y - (e + this.caretHeight)), t.lineTo(this.x - this.caretHeight, this.y - (e + this.caretHeight)), t.closePath(), t.fill();
                                break;
                            case "below":
                                s = this.y + e + this.caretHeight, t.beginPath(), t.moveTo(this.x, this.y + e), t.lineTo(this.x + this.caretHeight, this.y + e + this.caretHeight), t.lineTo(this.x - this.caretHeight, this.y + e + this.caretHeight), t.closePath(), t.fill()
                        }
                        switch (this.xAlign) {
                            case "left":
                                o = this.x - n + (this.cornerRadius + this.caretHeight);
                                break;
                            case "right":
                                o = this.x - (this.cornerRadius + this.caretHeight)
                        }
                        M(t, o, s, n, i, this.cornerRadius), t.fill(), t.fillStyle = this.textColor, t.textAlign = "center", t.textBaseline = "middle", t.fillText(this.text, o + n / 2, s + i / 2)
                    }
                }
            }), n.MultiTooltip = n.Element.extend({
                initialize: function() {
                    this.font = O(this.fontSize, this.fontStyle, this.fontFamily), this.titleFont = O(this.titleFontSize, this.titleFontStyle, this.titleFontFamily), this.height = this.labels.length * this.fontSize + (this.labels.length - 1) * (this.fontSize / 2) + 2 * this.yPadding + 1.5 * this.titleFontSize, this.ctx.font = this.titleFont;
                    var t = this.ctx.measureText(this.title).width,
                        e = D(this.ctx, this.font, this.labels) + this.fontSize + 3,
                        n = m([e, t]);
                    this.width = n + 2 * this.xPadding;
                    var i = this.height / 2;
                    this.y - i < 0 ? this.y = i : this.y + i > this.chart.height && (this.y = this.chart.height - i), this.x > this.chart.width / 2 ? this.x -= this.xOffset + this.width : this.x += this.xOffset
                },
                getLineHeight: function(t) {
                    var e = this.y - this.height / 2 + this.yPadding,
                        n = t - 1;
                    return 0 === t ? e + this.titleFontSize / 2 : e + (1.5 * this.fontSize * n + this.fontSize / 2) + 1.5 * this.titleFontSize
                },
                draw: function() {
                    if (this.custom) this.custom(this);
                    else {
                        M(this.ctx, this.x, this.y - this.height / 2, this.width, this.height, this.cornerRadius);
                        var t = this.ctx;
                        t.fillStyle = this.fillColor, t.fill(), t.closePath(), t.textAlign = "left", t.textBaseline = "middle", t.fillStyle = this.titleTextColor, t.font = this.titleFont, t.fillText(this.title, this.x + this.xPadding, this.getLineHeight(0)), t.font = this.font, i.each(this.labels, function(e, n) {
                            t.fillStyle = this.textColor, t.fillText(e, this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(n + 1)), t.fillStyle = this.legendColorBackground, t.fillRect(this.x + this.xPadding, this.getLineHeight(n + 1) - this.fontSize / 2, this.fontSize, this.fontSize), t.fillStyle = this.legendColors[n].fill, t.fillRect(this.x + this.xPadding, this.getLineHeight(n + 1) - this.fontSize / 2, this.fontSize, this.fontSize)
                        }, this)
                    }
                }
            }), n.Scale = n.Element.extend({
                initialize: function() {
                    this.fit()
                },
                buildYLabels: function() {
                    this.yLabels = [];
                    for (var t = v(this.stepValue), e = 0; e <= this.steps; e++) this.yLabels.push(w(this.templateString, {
                        value: (this.min + e * this.stepValue).toFixed(t)
                    }));
                    this.yLabelWidth = this.display && this.showLabels ? D(this.ctx, this.font, this.yLabels) : 0
                },
                addXLabel: function(t) {
                    this.xLabels.push(t), this.valuesCount++, this.fit()
                },
                removeXLabel: function() {
                    this.xLabels.shift(), this.valuesCount--, this.fit()
                },
                fit: function() {
                    this.startPoint = this.display ? this.fontSize : 0, this.endPoint = this.display ? this.height - 1.5 * this.fontSize - 5 : this.height, this.startPoint += this.padding, this.endPoint -= this.padding;
                    var t, e = this.endPoint - this.startPoint;
                    for (this.calculateYRange(e), this.buildYLabels(), this.calculateXLabelRotation(); e > this.endPoint - this.startPoint;) e = this.endPoint - this.startPoint, t = this.yLabelWidth, this.calculateYRange(e), this.buildYLabels(), t < this.yLabelWidth && this.calculateXLabelRotation()
                },
                calculateXLabelRotation: function() {
                    this.ctx.font = this.font;
                    var t, e, n = this.ctx.measureText(this.xLabels[0]).width,
                        i = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width;
                    if (this.xScalePaddingRight = i / 2 + 3, this.xScalePaddingLeft = n / 2 > this.yLabelWidth + 10 ? n / 2 : this.yLabelWidth + 10, this.xLabelRotation = 0, this.display) {
                        var r, o = D(this.ctx, this.font, this.xLabels);
                        this.xLabelWidth = o;
                        for (var s = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6; this.xLabelWidth > s && 0 === this.xLabelRotation || this.xLabelWidth > s && this.xLabelRotation <= 90 && this.xLabelRotation > 0;) r = Math.cos(_(this.xLabelRotation)), t = r * n, e = r * i, t + this.fontSize / 2 > this.yLabelWidth + 8 && (this.xScalePaddingLeft = t + this.fontSize / 2), this.xScalePaddingRight = this.fontSize / 2, this.xLabelRotation++, this.xLabelWidth = r * o;
                        this.xLabelRotation > 0 && (this.endPoint -= Math.sin(_(this.xLabelRotation)) * o + 3)
                    } else this.xLabelWidth = 0, this.xScalePaddingRight = this.padding, this.xScalePaddingLeft = this.padding
                },
                calculateYRange: u,
                drawingArea: function() {
                    return this.startPoint - this.endPoint
                },
                calculateY: function(t) {
                    var e = this.drawingArea() / (this.min - this.max);
                    return this.endPoint - e * (t - this.min)
                },
                calculateX: function(t) {
                    var e = (this.xLabelRotation > 0, this.width - (this.xScalePaddingLeft + this.xScalePaddingRight)),
                        n = e / Math.max(this.valuesCount - (this.offsetGridLines ? 0 : 1), 1),
                        i = n * t + this.xScalePaddingLeft;
                    return this.offsetGridLines && (i += n / 2), Math.round(i)
                },
                update: function(t) {
                    i.extend(this, t), this.fit()
                },
                draw: function() {
                    var t = this.ctx,
                        e = (this.endPoint - this.startPoint) / this.steps,
                        n = Math.round(this.xScalePaddingLeft);
                    this.display && (t.fillStyle = this.textColor, t.font = this.font, r(this.yLabels, function(r, o) {
                        var s = this.endPoint - e * o,
                            a = Math.round(s),
                            l = this.showHorizontalLines;
                        t.textAlign = "right", t.textBaseline = "middle", this.showLabels && t.fillText(r, n - 10, s), 0 !== o || l || (l = !0), l && t.beginPath(), o > 0 ? (t.lineWidth = this.gridLineWidth, t.strokeStyle = this.gridLineColor) : (t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor), a += i.aliasPixel(t.lineWidth), l && (t.moveTo(n, a), t.lineTo(this.width, a), t.stroke(), t.closePath()), t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor, t.beginPath(), t.moveTo(n - 5, a), t.lineTo(n, a), t.stroke(), t.closePath()
                    }, this), r(this.xLabels, function(e, n) {
                        var i = this.calculateX(n) + y(this.lineWidth),
                            r = this.calculateX(n - (this.offsetGridLines ? .5 : 0)) + y(this.lineWidth),
                            o = this.xLabelRotation > 0,
                            s = this.showVerticalLines;
                        0 !== n || s || (s = !0), s && t.beginPath(), n > 0 ? (t.lineWidth = this.gridLineWidth, t.strokeStyle = this.gridLineColor) : (t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor), s && (t.moveTo(r, this.endPoint), t.lineTo(r, this.startPoint - 3), t.stroke(), t.closePath()), t.lineWidth = this.lineWidth, t.strokeStyle = this.lineColor, t.beginPath(), t.moveTo(r, this.endPoint), t.lineTo(r, this.endPoint + 5), t.stroke(), t.closePath(), t.save(), t.translate(i, o ? this.endPoint + 12 : this.endPoint + 8), t.rotate(-1 * _(this.xLabelRotation)), t.font = this.font, t.textAlign = o ? "right" : "center", t.textBaseline = o ? "middle" : "top", t.fillText(e, 0, 0), t.restore()
                    }, this))
                }
            }), n.RadialScale = n.Element.extend({
                initialize: function() {
                    this.size = g([this.height, this.width]), this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2
                },
                calculateCenterOffset: function(t) {
                    var e = this.drawingArea / (this.max - this.min);
                    return (t - this.min) * e
                },
                update: function() {
                    this.lineArc ? this.drawingArea = this.display ? this.size / 2 - (this.fontSize / 2 + this.backdropPaddingY) : this.size / 2 : this.setScaleSize(), this.buildYLabels()
                },
                buildYLabels: function() {
                    this.yLabels = [];
                    for (var t = v(this.stepValue), e = 0; e <= this.steps; e++) this.yLabels.push(w(this.templateString, {
                        value: (this.min + e * this.stepValue).toFixed(t)
                    }))
                },
                getCircumference: function() {
                    return 2 * Math.PI / this.valuesCount
                },
                setScaleSize: function() {
                    var t, e, n, i, r, o, s, a, l, c, u, d, p = g([this.height / 2 - this.pointLabelFontSize - 5, this.width / 2]),
                        h = this.width,
                        m = 0;
                    for (this.ctx.font = O(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), e = 0; e < this.valuesCount; e++) t = this.getPointPosition(e, p), n = this.ctx.measureText(w(this.templateString, {
                        value: this.labels[e]
                    })).width + 5, 0 === e || e === this.valuesCount / 2 ? (i = n / 2, t.x + i > h && (h = t.x + i, r = e), t.x - i < m && (m = t.x - i, s = e)) : e < this.valuesCount / 2 ? t.x + n > h && (h = t.x + n, r = e) : e > this.valuesCount / 2 && t.x - n < m && (m = t.x - n, s = e);
                    l = m, c = Math.ceil(h - this.width), o = this.getIndexAngle(r), a = this.getIndexAngle(s), u = c / Math.sin(o + Math.PI / 2), d = l / Math.sin(a + Math.PI / 2), u = f(u) ? u : 0, d = f(d) ? d : 0, this.drawingArea = p - (d + u) / 2, this.setCenterPoint(d, u)
                },
                setCenterPoint: function(t, e) {
                    var n = this.width - e - this.drawingArea,
                        i = t + this.drawingArea;
                    this.xCenter = (i + n) / 2, this.yCenter = this.height / 2
                },
                getIndexAngle: function(t) {
                    var e = 2 * Math.PI / this.valuesCount;
                    return t * e - Math.PI / 2
                },
                getPointPosition: function(t, e) {
                    var n = this.getIndexAngle(t);
                    return {
                        x: Math.cos(n) * e + this.xCenter,
                        y: Math.sin(n) * e + this.yCenter
                    }
                },
                draw: function() {
                    if (this.display) {
                        var t = this.ctx;
                        if (r(this.yLabels, function(e, n) {
                                if (n > 0) {
                                    var i, r = n * (this.drawingArea / this.steps),
                                        o = this.yCenter - r;
                                    if (this.lineWidth > 0)
                                        if (t.strokeStyle = this.lineColor, t.lineWidth = this.lineWidth, this.lineArc) t.beginPath(), t.arc(this.xCenter, this.yCenter, r, 0, 2 * Math.PI), t.closePath(), t.stroke();
                                        else {
                                            t.beginPath();
                                            for (var s = 0; s < this.valuesCount; s++) i = this.getPointPosition(s, this.calculateCenterOffset(this.min + n * this.stepValue)), 0 === s ? t.moveTo(i.x, i.y) : t.lineTo(i.x, i.y);
                                            t.closePath(), t.stroke()
                                        }
                                    if (this.showLabels) {
                                        if (t.font = O(this.fontSize, this.fontStyle, this.fontFamily), this.showLabelBackdrop) {
                                            var a = t.measureText(e).width;
                                            t.fillStyle = this.backdropColor, t.fillRect(this.xCenter - a / 2 - this.backdropPaddingX, o - this.fontSize / 2 - this.backdropPaddingY, a + 2 * this.backdropPaddingX, this.fontSize + 2 * this.backdropPaddingY)
                                        }
                                        t.textAlign = "center", t.textBaseline = "middle", t.fillStyle = this.fontColor, t.fillText(e, this.xCenter, o)
                                    }
                                }
                            }, this), !this.lineArc) {
                            t.lineWidth = this.angleLineWidth, t.strokeStyle = this.angleLineColor;
                            for (var e = this.valuesCount - 1; e >= 0; e--) {
                                if (this.angleLineWidth > 0) {
                                    var n = this.getPointPosition(e, this.calculateCenterOffset(this.max));
                                    t.beginPath(), t.moveTo(this.xCenter, this.yCenter), t.lineTo(n.x, n.y), t.stroke(), t.closePath()
                                }
                                var i = this.getPointPosition(e, this.calculateCenterOffset(this.max) + 5);
                                t.font = O(this.pointLabelFontSize, this.pointLabelFontStyle, this.pointLabelFontFamily), t.fillStyle = this.pointLabelFontColor;
                                var o = this.labels.length,
                                    s = this.labels.length / 2,
                                    a = s / 2,
                                    l = a > e || e > o - a,
                                    c = e === a || e === o - a;
                                t.textAlign = 0 === e ? "center" : e === s ? "center" : s > e ? "left" : "right", t.textBaseline = c ? "middle" : l ? "bottom" : "top", t.fillText(this.labels[e], i.x, i.y)
                            }
                        }
                    }
                }
            }), i.addEvent(window, "resize", function() {
                var t;
                return function() {
                    clearTimeout(t), t = setTimeout(function() {
                        r(n.instances, function(t) {
                            t.options.responsive && t.resize(t.render, !0)
                        })
                    }, 50)
                }
            }()), h ? define("chartjs", [], function() {
                return n
            }) : "object" == typeof module && module.exports && (module.exports = n), t.Chart = n, n.noConflict = function() {
                return t.Chart = e, n
            }
        }.call(this),
        function() {
            var t = this,
                e = t.Chart,
                n = e.helpers,
                i = {
                    scaleBeginAtZero: !0,
                    scaleShowGridLines: !0,
                    scaleGridLineColor: "rgba(0,0,0,.05)",
                    scaleGridLineWidth: 1,
                    scaleShowHorizontalLines: !0,
                    scaleShowVerticalLines: !0,
                    barShowStroke: !0,
                    barStrokeWidth: 2,
                    barValueSpacing: 5,
                    barDatasetSpacing: 1,
                    legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
                };
            e.Type.extend({
                name: "Bar",
                defaults: i,
                initialize: function(t) {
                    var i = this.options;
                    this.ScaleClass = e.Scale.extend({
                        offsetGridLines: !0,
                        calculateBarX: function(t, e, n) {
                            var r = this.calculateBaseWidth(),
                                o = this.calculateX(n) - r / 2,
                                s = this.calculateBarWidth(t);
                            return o + s * e + e * i.barDatasetSpacing + s / 2
                        },
                        calculateBaseWidth: function() {
                            return this.calculateX(1) - this.calculateX(0) - 2 * i.barValueSpacing
                        },
                        calculateBarWidth: function(t) {
                            var e = this.calculateBaseWidth() - (t - 1) * i.barDatasetSpacing;
                            return e / t
                        }
                    }), this.datasets = [], this.options.showTooltips && n.bindEvents(this, this.options.tooltipEvents, function(t) {
                        var e = "mouseout" !== t.type ? this.getBarsAtEvent(t) : [];
                        this.eachBars(function(t) {
                            t.restore(["fillColor", "strokeColor"])
                        }), n.each(e, function(t) {
                            t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke
                        }), this.showTooltip(e)
                    }), this.BarClass = e.Rectangle.extend({
                        strokeWidth: this.options.barStrokeWidth,
                        showStroke: this.options.barShowStroke,
                        ctx: this.chart.ctx
                    }), n.each(t.datasets, function(e) {
                        var i = {
                            label: e.label || null,
                            fillColor: e.fillColor,
                            strokeColor: e.strokeColor,
                            bars: []
                        };
                        this.datasets.push(i), n.each(e.data, function(n, r) {
                            i.bars.push(new this.BarClass({
                                value: n,
                                label: t.labels[r],
                                datasetLabel: e.label,
                                strokeColor: e.strokeColor,
                                fillColor: e.fillColor,
                                highlightFill: e.highlightFill || e.fillColor,
                                highlightStroke: e.highlightStroke || e.strokeColor
                            }))
                        }, this)
                    }, this), this.buildScale(t.labels), this.BarClass.prototype.base = this.scale.endPoint, this.eachBars(function(t, e, i) {
                        n.extend(t, {
                            width: this.scale.calculateBarWidth(this.datasets.length),
                            x: this.scale.calculateBarX(this.datasets.length, i, e),
                            y: this.scale.endPoint
                        }), t.save()
                    }, this), this.render()
                },
                update: function() {
                    this.scale.update(), n.each(this.activeElements, function(t) {
                        t.restore(["fillColor", "strokeColor"])
                    }), this.eachBars(function(t) {
                        t.save()
                    }), this.render()
                },
                eachBars: function(t) {
                    n.each(this.datasets, function(e, i) {
                        n.each(e.bars, t, this, i)
                    }, this)
                },
                getBarsAtEvent: function(t) {
                    for (var e, i = [], r = n.getRelativePosition(t), o = function(t) {
                            i.push(t.bars[e])
                        }, s = 0; s < this.datasets.length; s++)
                        for (e = 0; e < this.datasets[s].bars.length; e++)
                            if (this.datasets[s].bars[e].inRange(r.x, r.y)) return n.each(this.datasets, o), i;
                    return i
                },
                buildScale: function(t) {
                    var e = this,
                        i = function() {
                            var t = [];
                            return e.eachBars(function(e) {
                                t.push(e.value)
                            }), t
                        },
                        r = {
                            templateString: this.options.scaleLabel,
                            height: this.chart.height,
                            width: this.chart.width,
                            ctx: this.chart.ctx,
                            textColor: this.options.scaleFontColor,
                            fontSize: this.options.scaleFontSize,
                            fontStyle: this.options.scaleFontStyle,
                            fontFamily: this.options.scaleFontFamily,
                            valuesCount: t.length,
                            beginAtZero: this.options.scaleBeginAtZero,
                            integersOnly: this.options.scaleIntegersOnly,
                            calculateYRange: function(t) {
                                var e = n.calculateScaleRange(i(), t, this.fontSize, this.beginAtZero, this.integersOnly);
                                n.extend(this, e)
                            },
                            xLabels: t,
                            font: n.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),
                            lineWidth: this.options.scaleLineWidth,
                            lineColor: this.options.scaleLineColor,
                            showHorizontalLines: this.options.scaleShowHorizontalLines,
                            showVerticalLines: this.options.scaleShowVerticalLines,
                            gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0,
                            gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)",
                            padding: this.options.showScale ? 0 : this.options.barShowStroke ? this.options.barStrokeWidth : 0,
                            showLabels: this.options.scaleShowLabels,
                            display: this.options.showScale
                        };
                    this.options.scaleOverride && n.extend(r, {
                        calculateYRange: n.noop,
                        steps: this.options.scaleSteps,
                        stepValue: this.options.scaleStepWidth,
                        min: this.options.scaleStartValue,
                        max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                    }), this.scale = new this.ScaleClass(r)
                },
                addData: function(t, e) {
                    n.each(t, function(t, n) {
                        this.datasets[n].bars.push(new this.BarClass({
                            value: t,
                            label: e,
                            x: this.scale.calculateBarX(this.datasets.length, n, this.scale.valuesCount + 1),
                            y: this.scale.endPoint,
                            width: this.scale.calculateBarWidth(this.datasets.length),
                            base: this.scale.endPoint,
                            strokeColor: this.datasets[n].strokeColor,
                            fillColor: this.datasets[n].fillColor
                        }))
                    }, this), this.scale.addXLabel(e), this.update()
                },
                removeData: function() {
                    this.scale.removeXLabel(), n.each(this.datasets, function(t) {
                        t.bars.shift()
                    }, this), this.update()
                },
                reflow: function() {
                    n.extend(this.BarClass.prototype, {
                        y: this.scale.endPoint,
                        base: this.scale.endPoint
                    });
                    var t = n.extend({
                        height: this.chart.height,
                        width: this.chart.width
                    });
                    this.scale.update(t)
                },
                draw: function(t) {
                    var e = t || 1;
                    this.clear();
                    this.chart.ctx;
                    this.scale.draw(e), n.each(this.datasets, function(t, i) {
                        n.each(t.bars, function(t, n) {
                            t.hasValue() && (t.base = this.scale.endPoint, t.transition({
                                x: this.scale.calculateBarX(this.datasets.length, i, n),
                                y: this.scale.calculateY(t.value),
                                width: this.scale.calculateBarWidth(this.datasets.length)
                            }, e).draw())
                        }, this)
                    }, this)
                }
            })
        }.call(this),
        function() {
            var t = this,
                e = t.Chart,
                n = e.helpers,
                i = {
                    segmentShowStroke: !0,
                    segmentStrokeColor: "#fff",
                    segmentStrokeWidth: 2,
                    percentageInnerCutout: 50,
                    animationSteps: 100,
                    animationEasing: "easeOutBounce",
                    animateRotate: !0,
                    animateScale: !1,
                    legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
                };
            e.Type.extend({
                name: "Doughnut",
                defaults: i,
                initialize: function(t) {
                    this.segments = [], this.outerRadius = (n.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, this.SegmentArc = e.Arc.extend({
                        ctx: this.chart.ctx,
                        x: this.chart.width / 2,
                        y: this.chart.height / 2
                    }), this.options.showTooltips && n.bindEvents(this, this.options.tooltipEvents, function(t) {
                        var e = "mouseout" !== t.type ? this.getSegmentsAtEvent(t) : [];
                        n.each(this.segments, function(t) {
                            t.restore(["fillColor"])
                        }), n.each(e, function(t) {
                            t.fillColor = t.highlightColor
                        }), this.showTooltip(e)
                    }), this.calculateTotal(t), n.each(t, function(t, e) {
                        this.addData(t, e, !0)
                    }, this), this.render()
                },
                getSegmentsAtEvent: function(t) {
                    var e = [],
                        i = n.getRelativePosition(t);
                    return n.each(this.segments, function(t) {
                        t.inRange(i.x, i.y) && e.push(t)
                    }, this), e
                },
                addData: function(t, e, n) {
                    var i = e || this.segments.length;
                    this.segments.splice(i, 0, new this.SegmentArc({
                        value: t.value,
                        outerRadius: this.options.animateScale ? 0 : this.outerRadius,
                        innerRadius: this.options.animateScale ? 0 : this.outerRadius / 100 * this.options.percentageInnerCutout,
                        fillColor: t.color,
                        highlightColor: t.highlight || t.color,
                        showStroke: this.options.segmentShowStroke,
                        strokeWidth: this.options.segmentStrokeWidth,
                        strokeColor: this.options.segmentStrokeColor,
                        startAngle: 1.5 * Math.PI,
                        circumference: this.options.animateRotate ? 0 : this.calculateCircumference(t.value),
                        label: t.label
                    })), n || (this.reflow(), this.update())
                },
                calculateCircumference: function(t) {
                    return 2 * Math.PI * (Math.abs(t) / this.total)
                },
                calculateTotal: function(t) {
                    this.total = 0, n.each(t, function(t) {
                        this.total += Math.abs(t.value)
                    }, this)
                },
                update: function() {
                    this.calculateTotal(this.segments), n.each(this.activeElements, function(t) {
                        t.restore(["fillColor"])
                    }), n.each(this.segments, function(t) {
                        t.save()
                    }), this.render()
                },
                removeData: function(t) {
                    var e = n.isNumber(t) ? t : this.segments.length - 1;
                    this.segments.splice(e, 1), this.reflow(), this.update()
                },
                reflow: function() {
                    n.extend(this.SegmentArc.prototype, {
                        x: this.chart.width / 2,
                        y: this.chart.height / 2
                    }), this.outerRadius = (n.min([this.chart.width, this.chart.height]) - this.options.segmentStrokeWidth / 2) / 2, n.each(this.segments, function(t) {
                        t.update({
                            outerRadius: this.outerRadius,
                            innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout
                        })
                    }, this)
                },
                draw: function(t) {
                    var e = t ? t : 1;
                    this.clear(), n.each(this.segments, function(t, n) {
                        t.transition({
                            circumference: this.calculateCircumference(t.value),
                            outerRadius: this.outerRadius,
                            innerRadius: this.outerRadius / 100 * this.options.percentageInnerCutout
                        }, e), t.endAngle = t.startAngle + t.circumference, t.draw(), 0 === n && (t.startAngle = 1.5 * Math.PI), n < this.segments.length - 1 && (this.segments[n + 1].startAngle = t.endAngle)
                    }, this)
                }
            }), e.types.Doughnut.extend({
                name: "Pie",
                defaults: n.merge(i, {
                    percentageInnerCutout: 0
                })
            })
        }.call(this),
        function() {
            var t = this,
                e = t.Chart,
                n = e.helpers,
                i = {
                    scaleShowGridLines: !0,
                    scaleGridLineColor: "rgba(0,0,0,.05)",
                    scaleGridLineWidth: 1,
                    scaleShowHorizontalLines: !0,
                    scaleShowVerticalLines: !0,
                    bezierCurve: !0,
                    bezierCurveTension: .4,
                    pointDot: !0,
                    pointDotRadius: 4,
                    pointDotStrokeWidth: 1,
                    pointHitDetectionRadius: 20,
                    datasetStroke: !0,
                    datasetStrokeWidth: 2,
                    datasetFill: !0,
                    legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
                };
            e.Type.extend({
                name: "Line",
                defaults: i,
                initialize: function(t) {
                    this.PointClass = e.Point.extend({
                        strokeWidth: this.options.pointDotStrokeWidth,
                        radius: this.options.pointDotRadius,
                        display: this.options.pointDot,
                        hitDetectionRadius: this.options.pointHitDetectionRadius,
                        ctx: this.chart.ctx,
                        inRange: function(t) {
                            return Math.pow(t - this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius, 2)
                        }
                    }), this.datasets = [], this.options.showTooltips && n.bindEvents(this, this.options.tooltipEvents, function(t) {
                        var e = "mouseout" !== t.type ? this.getPointsAtEvent(t) : [];
                        this.eachPoints(function(t) {
                            t.restore(["fillColor", "strokeColor"])
                        }), n.each(e, function(t) {
                            t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke
                        }), this.showTooltip(e)
                    }), n.each(t.datasets, function(e) {
                        var i = {
                            label: e.label || null,
                            fillColor: e.fillColor,
                            strokeColor: e.strokeColor,
                            pointColor: e.pointColor,
                            pointStrokeColor: e.pointStrokeColor,
                            points: []
                        };
                        this.datasets.push(i), n.each(e.data, function(n, r) {
                            i.points.push(new this.PointClass({
                                value: n,
                                label: t.labels[r],
                                datasetLabel: e.label,
                                strokeColor: e.pointStrokeColor,
                                fillColor: e.pointColor,
                                highlightFill: e.pointHighlightFill || e.pointColor,
                                highlightStroke: e.pointHighlightStroke || e.pointStrokeColor
                            }))
                        }, this), this.buildScale(t.labels), this.eachPoints(function(t, e) {
                            n.extend(t, {
                                x: this.scale.calculateX(e),
                                y: this.scale.endPoint
                            }), t.save()
                        }, this)
                    }, this), this.render()
                },
                update: function() {
                    this.scale.update(), n.each(this.activeElements, function(t) {
                        t.restore(["fillColor", "strokeColor"])
                    }), this.eachPoints(function(t) {
                        t.save()
                    }), this.render()
                },
                eachPoints: function(t) {
                    n.each(this.datasets, function(e) {
                        n.each(e.points, t, this)
                    }, this)
                },
                getPointsAtEvent: function(t) {
                    var e = [],
                        i = n.getRelativePosition(t);
                    return n.each(this.datasets, function(t) {
                        n.each(t.points, function(t) {
                            t.inRange(i.x, i.y) && e.push(t)
                        })
                    }, this), e
                },
                buildScale: function(t) {
                    var i = this,
                        r = function() {
                            var t = [];
                            return i.eachPoints(function(e) {
                                t.push(e.value)
                            }), t
                        },
                        o = {
                            templateString: this.options.scaleLabel,
                            height: this.chart.height,
                            width: this.chart.width,
                            ctx: this.chart.ctx,
                            textColor: this.options.scaleFontColor,
                            fontSize: this.options.scaleFontSize,
                            fontStyle: this.options.scaleFontStyle,
                            fontFamily: this.options.scaleFontFamily,
                            valuesCount: t.length,
                            beginAtZero: this.options.scaleBeginAtZero,
                            integersOnly: this.options.scaleIntegersOnly,
                            calculateYRange: function(t) {
                                var e = n.calculateScaleRange(r(), t, this.fontSize, this.beginAtZero, this.integersOnly);
                                n.extend(this, e)
                            },
                            xLabels: t,
                            font: n.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),
                            lineWidth: this.options.scaleLineWidth,
                            lineColor: this.options.scaleLineColor,
                            showHorizontalLines: this.options.scaleShowHorizontalLines,
                            showVerticalLines: this.options.scaleShowVerticalLines,
                            gridLineWidth: this.options.scaleShowGridLines ? this.options.scaleGridLineWidth : 0,
                            gridLineColor: this.options.scaleShowGridLines ? this.options.scaleGridLineColor : "rgba(0,0,0,0)",
                            padding: this.options.showScale ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,
                            showLabels: this.options.scaleShowLabels,
                            display: this.options.showScale
                        };
                    this.options.scaleOverride && n.extend(o, {
                        calculateYRange: n.noop,
                        steps: this.options.scaleSteps,
                        stepValue: this.options.scaleStepWidth,
                        min: this.options.scaleStartValue,
                        max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                    }), this.scale = new e.Scale(o)
                },
                addData: function(t, e) {
                    n.each(t, function(t, n) {
                        this.datasets[n].points.push(new this.PointClass({
                            value: t,
                            label: e,
                            x: this.scale.calculateX(this.scale.valuesCount + 1),
                            y: this.scale.endPoint,
                            strokeColor: this.datasets[n].pointStrokeColor,
                            fillColor: this.datasets[n].pointColor
                        }))
                    }, this), this.scale.addXLabel(e), this.update()
                },
                removeData: function() {
                    this.scale.removeXLabel(), n.each(this.datasets, function(t) {
                        t.points.shift()
                    }, this), this.update()
                },
                reflow: function() {
                    var t = n.extend({
                        height: this.chart.height,
                        width: this.chart.width
                    });
                    this.scale.update(t)
                },
                draw: function(t) {
                    var e = t || 1;
                    this.clear();
                    var i = this.chart.ctx,
                        r = function(t) {
                            return null !== t.value
                        },
                        o = function(t, e, i) {
                            return n.findNextWhere(e, r, i) || t
                        },
                        s = function(t, e, i) {
                            return n.findPreviousWhere(e, r, i) || t
                        };
                    this.scale.draw(e), n.each(this.datasets, function(t) {
                        var a = n.where(t.points, r);
                        n.each(t.points, function(t, n) {
                            t.hasValue() && t.transition({
                                y: this.scale.calculateY(t.value),
                                x: this.scale.calculateX(n)
                            }, e)
                        }, this), this.options.bezierCurve && n.each(a, function(t, e) {
                            var i = e > 0 && e < a.length - 1 ? this.options.bezierCurveTension : 0;
                            t.controlPoints = n.splineCurve(s(t, a, e), t, o(t, a, e), i), t.controlPoints.outer.y > this.scale.endPoint ? t.controlPoints.outer.y = this.scale.endPoint : t.controlPoints.outer.y < this.scale.startPoint && (t.controlPoints.outer.y = this.scale.startPoint), t.controlPoints.inner.y > this.scale.endPoint ? t.controlPoints.inner.y = this.scale.endPoint : t.controlPoints.inner.y < this.scale.startPoint && (t.controlPoints.inner.y = this.scale.startPoint)
                        }, this), i.lineWidth = this.options.datasetStrokeWidth, i.strokeStyle = t.strokeColor, i.beginPath(), n.each(a, function(t, e) {
                            if (0 === e) i.moveTo(t.x, t.y);
                            else if (this.options.bezierCurve) {
                                var n = s(t, a, e);
                                i.bezierCurveTo(n.controlPoints.outer.x, n.controlPoints.outer.y, t.controlPoints.inner.x, t.controlPoints.inner.y, t.x, t.y)
                            } else i.lineTo(t.x, t.y)
                        }, this), i.stroke(), this.options.datasetFill && a.length > 0 && (i.lineTo(a[a.length - 1].x, this.scale.endPoint), i.lineTo(a[0].x, this.scale.endPoint), i.fillStyle = t.fillColor, i.closePath(), i.fill()), n.each(a, function(t) {
                            t.draw()
                        })
                    }, this)
                }
            })
        }.call(this),
        function() {
            var t = this,
                e = t.Chart,
                n = e.helpers,
                i = {
                    scaleShowLabelBackdrop: !0,
                    scaleBackdropColor: "rgba(255,255,255,0.75)",
                    scaleBeginAtZero: !0,
                    scaleBackdropPaddingY: 2,
                    scaleBackdropPaddingX: 2,
                    scaleShowLine: !0,
                    segmentShowStroke: !0,
                    segmentStrokeColor: "#fff",
                    segmentStrokeWidth: 2,
                    animationSteps: 100,
                    animationEasing: "easeOutBounce",
                    animateRotate: !0,
                    animateScale: !1,
                    legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'
                };
            e.Type.extend({
                name: "PolarArea",
                defaults: i,
                initialize: function(t) {
                    this.segments = [], this.SegmentArc = e.Arc.extend({
                        showStroke: this.options.segmentShowStroke,
                        strokeWidth: this.options.segmentStrokeWidth,
                        strokeColor: this.options.segmentStrokeColor,
                        ctx: this.chart.ctx,
                        innerRadius: 0,
                        x: this.chart.width / 2,
                        y: this.chart.height / 2
                    }), this.scale = new e.RadialScale({
                        display: this.options.showScale,
                        fontStyle: this.options.scaleFontStyle,
                        fontSize: this.options.scaleFontSize,
                        fontFamily: this.options.scaleFontFamily,
                        fontColor: this.options.scaleFontColor,
                        showLabels: this.options.scaleShowLabels,
                        showLabelBackdrop: this.options.scaleShowLabelBackdrop,
                        backdropColor: this.options.scaleBackdropColor,
                        backdropPaddingY: this.options.scaleBackdropPaddingY,
                        backdropPaddingX: this.options.scaleBackdropPaddingX,
                        lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0,
                        lineColor: this.options.scaleLineColor,
                        lineArc: !0,
                        width: this.chart.width,
                        height: this.chart.height,
                        xCenter: this.chart.width / 2,
                        yCenter: this.chart.height / 2,
                        ctx: this.chart.ctx,
                        templateString: this.options.scaleLabel,
                        valuesCount: t.length
                    }), this.updateScaleRange(t), this.scale.update(), n.each(t, function(t, e) {
                        this.addData(t, e, !0)
                    }, this), this.options.showTooltips && n.bindEvents(this, this.options.tooltipEvents, function(t) {
                        var e = "mouseout" !== t.type ? this.getSegmentsAtEvent(t) : [];
                        n.each(this.segments, function(t) {
                            t.restore(["fillColor"])
                        }), n.each(e, function(t) {
                            t.fillColor = t.highlightColor
                        }), this.showTooltip(e)
                    }), this.render()
                },
                getSegmentsAtEvent: function(t) {
                    var e = [],
                        i = n.getRelativePosition(t);
                    return n.each(this.segments, function(t) {
                        t.inRange(i.x, i.y) && e.push(t)
                    }, this), e
                },
                addData: function(t, e, n) {
                    var i = e || this.segments.length;
                    this.segments.splice(i, 0, new this.SegmentArc({
                        fillColor: t.color,
                        highlightColor: t.highlight || t.color,
                        label: t.label,
                        value: t.value,
                        outerRadius: this.options.animateScale ? 0 : this.scale.calculateCenterOffset(t.value),
                        circumference: this.options.animateRotate ? 0 : this.scale.getCircumference(),
                        startAngle: 1.5 * Math.PI
                    })), n || (this.reflow(), this.update())
                },
                removeData: function(t) {
                    var e = n.isNumber(t) ? t : this.segments.length - 1;
                    this.segments.splice(e, 1), this.reflow(), this.update()
                },
                calculateTotal: function(t) {
                    this.total = 0, n.each(t, function(t) {
                        this.total += t.value
                    }, this), this.scale.valuesCount = this.segments.length
                },
                updateScaleRange: function(t) {
                    var e = [];
                    n.each(t, function(t) {
                        e.push(t.value)
                    });
                    var i = this.options.scaleOverride ? {
                        steps: this.options.scaleSteps,
                        stepValue: this.options.scaleStepWidth,
                        min: this.options.scaleStartValue,
                        max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                    } : n.calculateScaleRange(e, n.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly);
                    n.extend(this.scale, i, {
                        size: n.min([this.chart.width, this.chart.height]),
                        xCenter: this.chart.width / 2,
                        yCenter: this.chart.height / 2
                    })
                },
                update: function() {
                    this.calculateTotal(this.segments), n.each(this.segments, function(t) {
                        t.save()
                    }), this.reflow(), this.render()
                },
                reflow: function() {
                    n.extend(this.SegmentArc.prototype, {
                        x: this.chart.width / 2,
                        y: this.chart.height / 2
                    }), this.updateScaleRange(this.segments), this.scale.update(), n.extend(this.scale, {
                        xCenter: this.chart.width / 2,
                        yCenter: this.chart.height / 2
                    }), n.each(this.segments, function(t) {
                        t.update({
                            outerRadius: this.scale.calculateCenterOffset(t.value)
                        })
                    }, this)
                },
                draw: function(t) {
                    var e = t || 1;
                    this.clear(), n.each(this.segments, function(t, n) {
                        t.transition({
                            circumference: this.scale.getCircumference(),
                            outerRadius: this.scale.calculateCenterOffset(t.value)
                        }, e), t.endAngle = t.startAngle + t.circumference, 0 === n && (t.startAngle = 1.5 * Math.PI), n < this.segments.length - 1 && (this.segments[n + 1].startAngle = t.endAngle), t.draw()
                    }, this), this.scale.draw()
                }
            })
        }.call(this),
        function() {
            var t = this,
                e = t.Chart,
                n = e.helpers;
            e.Type.extend({
                name: "Radar",
                defaults: {
                    scaleShowLine: !0,
                    angleShowLineOut: !0,
                    scaleShowLabels: !1,
                    scaleBeginAtZero: !0,
                    angleLineColor: "rgba(0,0,0,.1)",
                    angleLineWidth: 1,
                    pointLabelFontFamily: "'Arial'",
                    pointLabelFontStyle: "normal",
                    pointLabelFontSize: 10,
                    pointLabelFontColor: "#666",
                    pointDot: !0,
                    pointDotRadius: 3,
                    pointDotStrokeWidth: 1,
                    pointHitDetectionRadius: 20,
                    datasetStroke: !0,
                    datasetStrokeWidth: 2,
                    datasetFill: !0,
                    legendTemplate: '<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'
                },
                initialize: function(t) {
                    this.PointClass = e.Point.extend({
                        strokeWidth: this.options.pointDotStrokeWidth,
                        radius: this.options.pointDotRadius,
                        display: this.options.pointDot,
                        hitDetectionRadius: this.options.pointHitDetectionRadius,
                        ctx: this.chart.ctx
                    }), this.datasets = [], this.buildScale(t), this.options.showTooltips && n.bindEvents(this, this.options.tooltipEvents, function(t) {
                        var e = "mouseout" !== t.type ? this.getPointsAtEvent(t) : [];
                        this.eachPoints(function(t) {
                            t.restore(["fillColor", "strokeColor"])
                        }), n.each(e, function(t) {
                            t.fillColor = t.highlightFill, t.strokeColor = t.highlightStroke
                        }), this.showTooltip(e)
                    }), n.each(t.datasets, function(e) {
                        var i = {
                            label: e.label || null,
                            fillColor: e.fillColor,
                            strokeColor: e.strokeColor,
                            pointColor: e.pointColor,
                            pointStrokeColor: e.pointStrokeColor,
                            points: []
                        };
                        this.datasets.push(i), n.each(e.data, function(n, r) {
                            var o;
                            this.scale.animation || (o = this.scale.getPointPosition(r, this.scale.calculateCenterOffset(n))), i.points.push(new this.PointClass({
                                value: n,
                                label: t.labels[r],
                                datasetLabel: e.label,
                                x: this.options.animation ? this.scale.xCenter : o.x,
                                y: this.options.animation ? this.scale.yCenter : o.y,
                                strokeColor: e.pointStrokeColor,
                                fillColor: e.pointColor,
                                highlightFill: e.pointHighlightFill || e.pointColor,
                                highlightStroke: e.pointHighlightStroke || e.pointStrokeColor
                            }))
                        }, this)
                    }, this), this.render()
                },
                eachPoints: function(t) {
                    n.each(this.datasets, function(e) {
                        n.each(e.points, t, this)
                    }, this)
                },
                getPointsAtEvent: function(t) {
                    var e = n.getRelativePosition(t),
                        i = n.getAngleFromPoint({
                            x: this.scale.xCenter,
                            y: this.scale.yCenter
                        }, e),
                        r = 2 * Math.PI / this.scale.valuesCount,
                        o = Math.round((i.angle - 1.5 * Math.PI) / r),
                        s = [];
                    return (o >= this.scale.valuesCount || 0 > o) && (o = 0), i.distance <= this.scale.drawingArea && n.each(this.datasets, function(t) {
                        s.push(t.points[o])
                    }), s
                },
                buildScale: function(t) {
                    this.scale = new e.RadialScale({
                        display: this.options.showScale,
                        fontStyle: this.options.scaleFontStyle,
                        fontSize: this.options.scaleFontSize,
                        fontFamily: this.options.scaleFontFamily,
                        fontColor: this.options.scaleFontColor,
                        showLabels: this.options.scaleShowLabels,
                        showLabelBackdrop: this.options.scaleShowLabelBackdrop,
                        backdropColor: this.options.scaleBackdropColor,
                        backdropPaddingY: this.options.scaleBackdropPaddingY,
                        backdropPaddingX: this.options.scaleBackdropPaddingX,
                        lineWidth: this.options.scaleShowLine ? this.options.scaleLineWidth : 0,
                        lineColor: this.options.scaleLineColor,
                        angleLineColor: this.options.angleLineColor,
                        angleLineWidth: this.options.angleShowLineOut ? this.options.angleLineWidth : 0,
                        pointLabelFontColor: this.options.pointLabelFontColor,
                        pointLabelFontSize: this.options.pointLabelFontSize,
                        pointLabelFontFamily: this.options.pointLabelFontFamily,
                        pointLabelFontStyle: this.options.pointLabelFontStyle,
                        height: this.chart.height,
                        width: this.chart.width,
                        xCenter: this.chart.width / 2,
                        yCenter: this.chart.height / 2,
                        ctx: this.chart.ctx,
                        templateString: this.options.scaleLabel,
                        labels: t.labels,
                        valuesCount: t.datasets[0].data.length
                    }), this.scale.setScaleSize(), this.updateScaleRange(t.datasets), this.scale.buildYLabels()
                },
                updateScaleRange: function(t) {
                    var e = function() {
                            var e = [];
                            return n.each(t, function(t) {
                                t.data ? e = e.concat(t.data) : n.each(t.points, function(t) {
                                    e.push(t.value)
                                })
                            }), e
                        }(),
                        i = this.options.scaleOverride ? {
                            steps: this.options.scaleSteps,
                            stepValue: this.options.scaleStepWidth,
                            min: this.options.scaleStartValue,
                            max: this.options.scaleStartValue + this.options.scaleSteps * this.options.scaleStepWidth
                        } : n.calculateScaleRange(e, n.min([this.chart.width, this.chart.height]) / 2, this.options.scaleFontSize, this.options.scaleBeginAtZero, this.options.scaleIntegersOnly);
                    n.extend(this.scale, i)
                },
                addData: function(t, e) {
                    this.scale.valuesCount++, n.each(t, function(t, n) {
                        var i = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(t));
                        this.datasets[n].points.push(new this.PointClass({
                            value: t,
                            label: e,
                            x: i.x,
                            y: i.y,
                            strokeColor: this.datasets[n].pointStrokeColor,
                            fillColor: this.datasets[n].pointColor
                        }))
                    }, this), this.scale.labels.push(e), this.reflow(), this.update()
                },
                removeData: function() {
                    this.scale.valuesCount--, this.scale.labels.shift(), n.each(this.datasets, function(t) {
                        t.points.shift()
                    }, this), this.reflow(), this.update()
                },
                update: function() {
                    this.eachPoints(function(t) {
                        t.save()
                    }), this.reflow(), this.render()
                },
                reflow: function() {
                    n.extend(this.scale, {
                        width: this.chart.width,
                        height: this.chart.height,
                        size: n.min([this.chart.width, this.chart.height]),
                        xCenter: this.chart.width / 2,
                        yCenter: this.chart.height / 2
                    }), this.updateScaleRange(this.datasets), this.scale.setScaleSize(), this.scale.buildYLabels()
                },
                draw: function(t) {
                    var e = t || 1,
                        i = this.chart.ctx;
                    this.clear(), this.scale.draw(), n.each(this.datasets, function(t) {
                        n.each(t.points, function(t, n) {
                            t.hasValue() && t.transition(this.scale.getPointPosition(n, this.scale.calculateCenterOffset(t.value)), e)
                        }, this), i.lineWidth = this.options.datasetStrokeWidth, i.strokeStyle = t.strokeColor, i.beginPath(), n.each(t.points, function(t, e) {
                            0 === e ? i.moveTo(t.x, t.y) : i.lineTo(t.x, t.y)
                        }, this), i.closePath(), i.stroke(), i.fillStyle = t.fillColor, i.fill(), n.each(t.points, function(t) {
                            t.hasValue() && t.draw()
                        })
                    }, this)
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_graph/StarGraphView", ["require", "jquery", "underscore", "canstar_widget", "components/base/BaseView", "./StarGraphModel", "text-cns!./tmpl_star_graph.html", "chartjs"], function(e) {
                var i, r, o, s, a, l, c, u;
                return i = e("jquery"), u = e("underscore"), l = e("canstar_widget"), r = e("components/base/BaseView"), s = e("./StarGraphModel"), c = e("text-cns!./tmpl_star_graph.html"), o = e("chartjs"), a = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.className = "star-graph", i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.template = u.template(c), this.chartData = i.__super__.initialize.call(this, t)
                    }, i.prototype.render = function() {
                        return this.$el.html(this.template({
                            model: this.model
                        })), setTimeout(function(t) {
                            return function() {
                                var e, n;
                                return e = t.$(".chart").get(0).getContext("2d"), n = new o(e).Pie(t.model.get("chart_data"), {
                                    animation: !1,
                                    showTooltips: !1
                                })
                            }
                        }(this), 0), this
                    }, i.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, i
                }(r)
            })
        }.call(this),
        function(t) {
            "function" == typeof define && define.amd ? define("slick", ["jquery"], t) : "undefined" != typeof exports ? module.exports = t(require("jquery")) : t(jQuery)
        }(function(t) {
            var e = window.Slick || {};
            e = function() {
                function e(e, i) {
                    var r, o = this;
                    o.defaults = {
                        accessibility: !0,
                        adaptiveHeight: !1,
                        appendArrows: t(e),
                        appendDots: t(e),
                        arrows: !0,
                        asNavFor: null,
                        prevArrow: '<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',
                        nextArrow: '<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',
                        autoplay: !1,
                        autoplaySpeed: 3e3,
                        centerMode: !1,
                        centerPadding: "50px",
                        cssEase: "ease",
                        customPaging: function(t, e) {
                            return '<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">' + (e + 1) + "</button>"
                        },
                        dots: !1,
                        dotsClass: "slick-dots",
                        draggable: !0,
                        easing: "linear",
                        edgeFriction: .35,
                        fade: !1,
                        focusOnSelect: !1,
                        infinite: !0,
                        initialSlide: 0,
                        lazyLoad: "ondemand",
                        mobileFirst: !1,
                        pauseOnHover: !0,
                        pauseOnDotsHover: !1,
                        respondTo: "window",
                        responsive: null,
                        rows: 1,
                        rtl: !1,
                        slide: "",
                        slidesPerRow: 1,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        speed: 500,
                        swipe: !0,
                        swipeToSlide: !1,
                        touchMove: !0,
                        touchThreshold: 5,
                        useCSS: !0,
                        useTransform: !1,
                        variableWidth: !1,
                        vertical: !1,
                        verticalSwiping: !1,
                        waitForAnimate: !0,
                        zIndex: 1e3
                    }, o.initials = {
                        animating: !1,
                        dragging: !1,
                        autoPlayTimer: null,
                        currentDirection: 0,
                        currentLeft: null,
                        currentSlide: 0,
                        direction: 1,
                        $dots: null,
                        listWidth: null,
                        listHeight: null,
                        loadIndex: 0,
                        $nextArrow: null,
                        $prevArrow: null,
                        slideCount: null,
                        slideWidth: null,
                        $slideTrack: null,
                        $slides: null,
                        sliding: !1,
                        slideOffset: 0,
                        swipeLeft: null,
                        $list: null,
                        touchObject: {},
                        transformsEnabled: !1,
                        unslicked: !1
                    }, t.extend(o, o.initials), o.activeBreakpoint = null, o.animType = null, o.animProp = null, o.breakpoints = [], o.breakpointSettings = [], o.cssTransitions = !1, o.hidden = "hidden", o.paused = !1, o.positionProp = null, o.respondTo = null, o.rowCount = 1, o.shouldClick = !0, o.$slider = t(e), o.$slidesCache = null, o.transformType = null, o.transitionType = null, o.visibilityChange = "visibilitychange", o.windowWidth = 0, o.windowTimer = null, r = t(e).data("slick") || {}, o.options = t.extend({}, o.defaults, r, i), o.currentSlide = o.options.initialSlide, o.originalSettings = o.options, "undefined" != typeof document.mozHidden ? (o.hidden = "mozHidden", o.visibilityChange = "mozvisibilitychange") : "undefined" != typeof document.webkitHidden && (o.hidden = "webkitHidden", o.visibilityChange = "webkitvisibilitychange"), o.autoPlay = t.proxy(o.autoPlay, o), o.autoPlayClear = t.proxy(o.autoPlayClear, o), o.changeSlide = t.proxy(o.changeSlide, o), o.clickHandler = t.proxy(o.clickHandler, o), o.selectHandler = t.proxy(o.selectHandler, o), o.setPosition = t.proxy(o.setPosition, o), o.swipeHandler = t.proxy(o.swipeHandler, o), o.dragHandler = t.proxy(o.dragHandler, o), o.keyHandler = t.proxy(o.keyHandler, o), o.autoPlayIterator = t.proxy(o.autoPlayIterator, o), o.instanceUid = n++, o.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/, o.registerBreakpoints(), o.init(!0), o.checkResponsive(!0)
                }
                var n = 0;
                return e
            }(), e.prototype.addSlide = e.prototype.slickAdd = function(e, n, i) {
                var r = this;
                if ("boolean" == typeof n) i = n, n = null;
                else if (0 > n || n >= r.slideCount) return !1;
                r.unload(), "number" == typeof n ? 0 === n && 0 === r.$slides.length ? t(e).appendTo(r.$slideTrack) : i ? t(e).insertBefore(r.$slides.eq(n)) : t(e).insertAfter(r.$slides.eq(n)) : i === !0 ? t(e).prependTo(r.$slideTrack) : t(e).appendTo(r.$slideTrack), r.$slides = r.$slideTrack.children(this.options.slide), r.$slideTrack.children(this.options.slide).detach(), r.$slideTrack.append(r.$slides), r.$slides.each(function(e, n) {
                    t(n).attr("data-slick-index", e)
                }), r.$slidesCache = r.$slides, r.reinit()
            }, e.prototype.animateHeight = function() {
                var t = this;
                if (1 === t.options.slidesToShow && t.options.adaptiveHeight === !0 && t.options.vertical === !1) {
                    var e = t.$slides.eq(t.currentSlide).outerHeight(!0);
                    t.$list.animate({
                        height: e
                    }, t.options.speed)
                }
            }, e.prototype.animateSlide = function(e, n) {
                var i = {},
                    r = this;
                r.animateHeight(), r.options.rtl === !0 && r.options.vertical === !1 && (e = -e), r.transformsEnabled === !1 ? r.options.vertical === !1 ? r.$slideTrack.animate({
                    left: e
                }, r.options.speed, r.options.easing, n) : r.$slideTrack.animate({
                    top: e
                }, r.options.speed, r.options.easing, n) : r.cssTransitions === !1 ? (r.options.rtl === !0 && (r.currentLeft = -r.currentLeft), t({
                    animStart: r.currentLeft
                }).animate({
                    animStart: e
                }, {
                    duration: r.options.speed,
                    easing: r.options.easing,
                    step: function(t) {
                        t = Math.ceil(t), r.options.vertical === !1 ? (i[r.animType] = "translate(" + t + "px, 0px)", r.$slideTrack.css(i)) : (i[r.animType] = "translate(0px," + t + "px)", r.$slideTrack.css(i))
                    },
                    complete: function() {
                        n && n.call()
                    }
                })) : (r.applyTransition(), e = Math.ceil(e), i[r.animType] = r.options.vertical === !1 ? "translate3d(" + e + "px, 0px, 0px)" : "translate3d(0px," + e + "px, 0px)", r.$slideTrack.css(i), n && setTimeout(function() {
                    r.disableTransition(), n.call()
                }, r.options.speed))
            }, e.prototype.asNavFor = function(e) {
                var n = this,
                    i = n.options.asNavFor;
                i && null !== i && (i = t(i).not(n.$slider)), null !== i && "object" == typeof i && i.each(function() {
                    var n = t(this).slick("getSlick");
                    n.unslicked || n.slideHandler(e, !0)
                })
            }, e.prototype.applyTransition = function(t) {
                var e = this,
                    n = {};
                n[e.transitionType] = e.options.fade === !1 ? e.transformType + " " + e.options.speed + "ms " + e.options.cssEase : "opacity " + e.options.speed + "ms " + e.options.cssEase, e.options.fade === !1 ? e.$slideTrack.css(n) : e.$slides.eq(t).css(n)
            }, e.prototype.autoPlay = function() {
                var t = this;
                t.autoPlayTimer && clearInterval(t.autoPlayTimer), t.slideCount > t.options.slidesToShow && t.paused !== !0 && (t.autoPlayTimer = setInterval(t.autoPlayIterator, t.options.autoplaySpeed))
            }, e.prototype.autoPlayClear = function() {
                var t = this;
                t.autoPlayTimer && clearInterval(t.autoPlayTimer)
            }, e.prototype.autoPlayIterator = function() {
                var t = this;
                t.options.infinite === !1 ? 1 === t.direction ? (t.currentSlide + 1 === t.slideCount - 1 && (t.direction = 0), t.slideHandler(t.currentSlide + t.options.slidesToScroll)) : (t.currentSlide - 1 === 0 && (t.direction = 1), t.slideHandler(t.currentSlide - t.options.slidesToScroll)) : t.slideHandler(t.currentSlide + t.options.slidesToScroll)
            }, e.prototype.buildArrows = function() {
                var e = this;
                e.options.arrows === !0 && (e.$prevArrow = t(e.options.prevArrow).addClass("slick-arrow"), e.$nextArrow = t(e.options.nextArrow).addClass("slick-arrow"), e.slideCount > e.options.slidesToShow ? (e.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"), e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.prependTo(e.options.appendArrows), e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.appendTo(e.options.appendArrows), e.options.infinite !== !0 && e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true")) : e.$prevArrow.add(e.$nextArrow).addClass("slick-hidden").attr({
                    "aria-disabled": "true",
                    tabindex: "-1"
                }))
            }, e.prototype.buildDots = function() {
                var e, n, i = this;
                if (i.options.dots === !0 && i.slideCount > i.options.slidesToShow) {
                    for (n = '<ul class="' + i.options.dotsClass + '">', e = 0; e <= i.getDotCount(); e += 1) n += "<li>" + i.options.customPaging.call(this, i, e) + "</li>";
                    n += "</ul>", i.$dots = t(n).appendTo(i.options.appendDots), i.$dots.find("li").first().addClass("slick-active").attr("aria-hidden", "false")
                }
            }, e.prototype.buildOut = function() {
                var e = this;
                e.$slides = e.$slider.children(e.options.slide + ":not(.slick-cloned)").addClass("slick-slide"), e.slideCount = e.$slides.length, e.$slides.each(function(e, n) {
                    t(n).attr("data-slick-index", e).data("originalStyling", t(n).attr("style") || "")
                }), e.$slider.addClass("slick-slider"), e.$slideTrack = 0 === e.slideCount ? t('<div class="slick-track"/>').appendTo(e.$slider) : e.$slides.wrapAll('<div class="slick-track"/>').parent(), e.$list = e.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(), e.$slideTrack.css("opacity", 0), (e.options.centerMode === !0 || e.options.swipeToSlide === !0) && (e.options.slidesToScroll = 1), t("img[data-lazy]", e.$slider).not("[src]").addClass("slick-loading"), e.setupInfinite(), e.buildArrows(), e.buildDots(), e.updateDots(), e.setSlideClasses("number" == typeof e.currentSlide ? e.currentSlide : 0), e.options.draggable === !0 && e.$list.addClass("draggable")
            }, e.prototype.buildRows = function() {
                var t, e, n, i, r, o, s, a = this;
                if (i = document.createDocumentFragment(), o = a.$slider.children(), a.options.rows > 1) {
                    for (s = a.options.slidesPerRow * a.options.rows, r = Math.ceil(o.length / s), t = 0; r > t; t++) {
                        var l = document.createElement("div");
                        for (e = 0; e < a.options.rows; e++) {
                            var c = document.createElement("div");
                            for (n = 0; n < a.options.slidesPerRow; n++) {
                                var u = t * s + (e * a.options.slidesPerRow + n);
                                o.get(u) && c.appendChild(o.get(u))
                            }
                            l.appendChild(c)
                        }
                        i.appendChild(l)
                    }
                    a.$slider.html(i), a.$slider.children().children().children().css({
                        width: 100 / a.options.slidesPerRow + "%",
                        display: "inline-block"
                    })
                }
            }, e.prototype.checkResponsive = function(e, n) {
                var i, r, o, s = this,
                    a = !1,
                    l = s.$slider.width(),
                    c = window.innerWidth || t(window).width();
                if ("window" === s.respondTo ? o = c : "slider" === s.respondTo ? o = l : "min" === s.respondTo && (o = Math.min(c, l)), s.options.responsive && s.options.responsive.length && null !== s.options.responsive) {
                    r = null;
                    for (i in s.breakpoints) s.breakpoints.hasOwnProperty(i) && (s.originalSettings.mobileFirst === !1 ? o < s.breakpoints[i] && (r = s.breakpoints[i]) : o > s.breakpoints[i] && (r = s.breakpoints[i]));
                    null !== r ? null !== s.activeBreakpoint ? (r !== s.activeBreakpoint || n) && (s.activeBreakpoint = r, "unslick" === s.breakpointSettings[r] ? s.unslick(r) : (s.options = t.extend({}, s.originalSettings, s.breakpointSettings[r]), e === !0 && (s.currentSlide = s.options.initialSlide), s.refresh(e)), a = r) : (s.activeBreakpoint = r, "unslick" === s.breakpointSettings[r] ? s.unslick(r) : (s.options = t.extend({}, s.originalSettings, s.breakpointSettings[r]), e === !0 && (s.currentSlide = s.options.initialSlide), s.refresh(e)), a = r) : null !== s.activeBreakpoint && (s.activeBreakpoint = null, s.options = s.originalSettings, e === !0 && (s.currentSlide = s.options.initialSlide), s.refresh(e), a = r), e || a === !1 || s.$slider.trigger("breakpoint", [s, a])
                }
            }, e.prototype.changeSlide = function(e, n) {
                var i, r, o, s = this,
                    a = t(e.target);
                switch (a.is("a") && e.preventDefault(), a.is("li") || (a = a.closest("li")), o = s.slideCount % s.options.slidesToScroll !== 0, i = o ? 0 : (s.slideCount - s.currentSlide) % s.options.slidesToScroll, e.data.message) {
                    case "previous":
                        r = 0 === i ? s.options.slidesToScroll : s.options.slidesToShow - i, s.slideCount > s.options.slidesToShow && s.slideHandler(s.currentSlide - r, !1, n);
                        break;
                    case "next":
                        r = 0 === i ? s.options.slidesToScroll : i, s.slideCount > s.options.slidesToShow && s.slideHandler(s.currentSlide + r, !1, n);
                        break;
                    case "index":
                        var l = 0 === e.data.index ? 0 : e.data.index || a.index() * s.options.slidesToScroll;
                        s.slideHandler(s.checkNavigable(l), !1, n), a.children().trigger("focus");
                        break;
                    default:
                        return
                }
            }, e.prototype.checkNavigable = function(t) {
                var e, n, i = this;
                if (e = i.getNavigableIndexes(), n = 0, t > e[e.length - 1]) t = e[e.length - 1];
                else
                    for (var r in e) {
                        if (t < e[r]) {
                            t = n;
                            break
                        }
                        n = e[r]
                    }
                return t
            }, e.prototype.cleanUpEvents = function() {
                var e = this;
                e.options.dots && null !== e.$dots && (t("li", e.$dots).off("click.slick", e.changeSlide), e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && t("li", e.$dots).off("mouseenter.slick", t.proxy(e.setPaused, e, !0)).off("mouseleave.slick", t.proxy(e.setPaused, e, !1))), e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && (e.$prevArrow && e.$prevArrow.off("click.slick", e.changeSlide), e.$nextArrow && e.$nextArrow.off("click.slick", e.changeSlide)), e.$list.off("touchstart.slick mousedown.slick", e.swipeHandler), e.$list.off("touchmove.slick mousemove.slick", e.swipeHandler), e.$list.off("touchend.slick mouseup.slick", e.swipeHandler), e.$list.off("touchcancel.slick mouseleave.slick", e.swipeHandler), e.$list.off("click.slick", e.clickHandler), t(document).off(e.visibilityChange, e.visibility), e.$list.off("mouseenter.slick", t.proxy(e.setPaused, e, !0)), e.$list.off("mouseleave.slick", t.proxy(e.setPaused, e, !1)), e.options.accessibility === !0 && e.$list.off("keydown.slick", e.keyHandler), e.options.focusOnSelect === !0 && t(e.$slideTrack).children().off("click.slick", e.selectHandler), t(window).off("orientationchange.slick.slick-" + e.instanceUid, e.orientationChange), t(window).off("resize.slick.slick-" + e.instanceUid, e.resize), t("[draggable!=true]", e.$slideTrack).off("dragstart", e.preventDefault), t(window).off("load.slick.slick-" + e.instanceUid, e.setPosition), t(document).off("ready.slick.slick-" + e.instanceUid, e.setPosition)
            }, e.prototype.cleanUpRows = function() {
                var t, e = this;
                e.options.rows > 1 && (t = e.$slides.children().children(), t.removeAttr("style"), e.$slider.html(t))
            }, e.prototype.clickHandler = function(t) {
                var e = this;
                e.shouldClick === !1 && (t.stopImmediatePropagation(), t.stopPropagation(), t.preventDefault())
            }, e.prototype.destroy = function(e) {
                var n = this;
                n.autoPlayClear(), n.touchObject = {}, n.cleanUpEvents(), t(".slick-cloned", n.$slider).detach(), n.$dots && n.$dots.remove(), n.$prevArrow && n.$prevArrow.length && (n.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), n.htmlExpr.test(n.options.prevArrow) && n.$prevArrow.remove()), n.$nextArrow && n.$nextArrow.length && (n.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display", ""), n.htmlExpr.test(n.options.nextArrow) && n.$nextArrow.remove()), n.$slides && (n.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function() {
                    t(this).attr("style", t(this).data("originalStyling"))
                }), n.$slideTrack.children(this.options.slide).detach(), n.$slideTrack.detach(), n.$list.detach(), n.$slider.append(n.$slides)), n.cleanUpRows(), n.$slider.removeClass("slick-slider"), n.$slider.removeClass("slick-initialized"), n.unslicked = !0, e || n.$slider.trigger("destroy", [n])
            }, e.prototype.disableTransition = function(t) {
                var e = this,
                    n = {};
                n[e.transitionType] = "", e.options.fade === !1 ? e.$slideTrack.css(n) : e.$slides.eq(t).css(n)
            }, e.prototype.fadeSlide = function(t, e) {
                var n = this;
                n.cssTransitions === !1 ? (n.$slides.eq(t).css({
                    zIndex: n.options.zIndex
                }), n.$slides.eq(t).animate({
                    opacity: 1
                }, n.options.speed, n.options.easing, e)) : (n.applyTransition(t), n.$slides.eq(t).css({
                    opacity: 1,
                    zIndex: n.options.zIndex
                }), e && setTimeout(function() {
                    n.disableTransition(t), e.call()
                }, n.options.speed))
            }, e.prototype.fadeSlideOut = function(t) {
                var e = this;
                e.cssTransitions === !1 ? e.$slides.eq(t).animate({
                    opacity: 0,
                    zIndex: e.options.zIndex - 2
                }, e.options.speed, e.options.easing) : (e.applyTransition(t), e.$slides.eq(t).css({
                    opacity: 0,
                    zIndex: e.options.zIndex - 2
                }))
            }, e.prototype.filterSlides = e.prototype.slickFilter = function(t) {
                var e = this;
                null !== t && (e.$slidesCache = e.$slides, e.unload(), e.$slideTrack.children(this.options.slide).detach(), e.$slidesCache.filter(t).appendTo(e.$slideTrack), e.reinit())
            }, e.prototype.getCurrent = e.prototype.slickCurrentSlide = function() {
                var t = this;
                return t.currentSlide
            }, e.prototype.getDotCount = function() {
                var t = this,
                    e = 0,
                    n = 0,
                    i = 0;
                if (t.options.infinite === !0)
                    for (; e < t.slideCount;) ++i, e = n + t.options.slidesToScroll, n += t.options.slidesToScroll <= t.options.slidesToShow ? t.options.slidesToScroll : t.options.slidesToShow;
                else if (t.options.centerMode === !0) i = t.slideCount;
                else
                    for (; e < t.slideCount;) ++i, e = n + t.options.slidesToScroll, n += t.options.slidesToScroll <= t.options.slidesToShow ? t.options.slidesToScroll : t.options.slidesToShow;
                return i - 1
            }, e.prototype.getLeft = function(t) {
                var e, n, i, r = this,
                    o = 0;
                return r.slideOffset = 0, n = r.$slides.first().outerHeight(!0), r.options.infinite === !0 ? (r.slideCount > r.options.slidesToShow && (r.slideOffset = r.slideWidth * r.options.slidesToShow * -1, o = n * r.options.slidesToShow * -1), r.slideCount % r.options.slidesToScroll !== 0 && t + r.options.slidesToScroll > r.slideCount && r.slideCount > r.options.slidesToShow && (t > r.slideCount ? (r.slideOffset = (r.options.slidesToShow - (t - r.slideCount)) * r.slideWidth * -1, o = (r.options.slidesToShow - (t - r.slideCount)) * n * -1) : (r.slideOffset = r.slideCount % r.options.slidesToScroll * r.slideWidth * -1, o = r.slideCount % r.options.slidesToScroll * n * -1))) : t + r.options.slidesToShow > r.slideCount && (r.slideOffset = (t + r.options.slidesToShow - r.slideCount) * r.slideWidth, o = (t + r.options.slidesToShow - r.slideCount) * n), r.slideCount <= r.options.slidesToShow && (r.slideOffset = 0, o = 0), r.options.centerMode === !0 && r.options.infinite === !0 ? r.slideOffset += r.slideWidth * Math.floor(r.options.slidesToShow / 2) - r.slideWidth : r.options.centerMode === !0 && (r.slideOffset = 0, r.slideOffset += r.slideWidth * Math.floor(r.options.slidesToShow / 2)), e = r.options.vertical === !1 ? t * r.slideWidth * -1 + r.slideOffset : t * n * -1 + o, r.options.variableWidth === !0 && (i = r.$slideTrack.children(".slick-slide").eq(r.slideCount <= r.options.slidesToShow || r.options.infinite === !1 ? t : t + r.options.slidesToShow), e = r.options.rtl === !0 ? i[0] ? -1 * (r.$slideTrack.width() - i[0].offsetLeft - i.width()) : 0 : i[0] ? -1 * i[0].offsetLeft : 0, r.options.centerMode === !0 && (i = r.$slideTrack.children(".slick-slide").eq(r.slideCount <= r.options.slidesToShow || r.options.infinite === !1 ? t : t + r.options.slidesToShow + 1), e = r.options.rtl === !0 ? i[0] ? -1 * (r.$slideTrack.width() - i[0].offsetLeft - i.width()) : 0 : i[0] ? -1 * i[0].offsetLeft : 0, e += (r.$list.width() - i.outerWidth()) / 2)), e
            }, e.prototype.getOption = e.prototype.slickGetOption = function(t) {
                var e = this;
                return e.options[t]
            }, e.prototype.getNavigableIndexes = function() {
                var t, e = this,
                    n = 0,
                    i = 0,
                    r = [];
                for (e.options.infinite === !1 ? t = e.slideCount : (n = -1 * e.options.slidesToScroll, i = -1 * e.options.slidesToScroll, t = 2 * e.slideCount); t > n;) r.push(n), n = i + e.options.slidesToScroll, i += e.options.slidesToScroll <= e.options.slidesToShow ? e.options.slidesToScroll : e.options.slidesToShow;
                return r
            }, e.prototype.getSlick = function() {
                return this
            }, e.prototype.getSlideCount = function() {
                var e, n, i, r = this;
                return i = r.options.centerMode === !0 ? r.slideWidth * Math.floor(r.options.slidesToShow / 2) : 0, r.options.swipeToSlide === !0 ? (r.$slideTrack.find(".slick-slide").each(function(e, o) {
                    return o.offsetLeft - i + t(o).outerWidth() / 2 > -1 * r.swipeLeft ? (n = o, !1) : void 0
                }), e = Math.abs(t(n).attr("data-slick-index") - r.currentSlide) || 1) : r.options.slidesToScroll
            }, e.prototype.goTo = e.prototype.slickGoTo = function(t, e) {
                var n = this;
                n.changeSlide({
                    data: {
                        message: "index",
                        index: parseInt(t)
                    }
                }, e)
            }, e.prototype.init = function(e) {
                var n = this;
                t(n.$slider).hasClass("slick-initialized") || (t(n.$slider).addClass("slick-initialized"), n.buildRows(), n.buildOut(), n.setProps(), n.startLoad(), n.loadSlider(), n.initializeEvents(), n.updateArrows(), n.updateDots()), e && n.$slider.trigger("init", [n]), n.options.accessibility === !0 && n.initADA()
            }, e.prototype.initArrowEvents = function() {
                var t = this;
                t.options.arrows === !0 && t.slideCount > t.options.slidesToShow && (t.$prevArrow.on("click.slick", {
                    message: "previous"
                }, t.changeSlide), t.$nextArrow.on("click.slick", {
                    message: "next"
                }, t.changeSlide))
            }, e.prototype.initDotEvents = function() {
                var e = this;
                e.options.dots === !0 && e.slideCount > e.options.slidesToShow && t("li", e.$dots).on("click.slick", {
                    message: "index"
                }, e.changeSlide), e.options.dots === !0 && e.options.pauseOnDotsHover === !0 && e.options.autoplay === !0 && t("li", e.$dots).on("mouseenter.slick", t.proxy(e.setPaused, e, !0)).on("mouseleave.slick", t.proxy(e.setPaused, e, !1))
            }, e.prototype.initializeEvents = function() {
                var e = this;
                e.initArrowEvents(), e.initDotEvents(), e.$list.on("touchstart.slick mousedown.slick", {
                    action: "start"
                }, e.swipeHandler), e.$list.on("touchmove.slick mousemove.slick", {
                    action: "move"
                }, e.swipeHandler), e.$list.on("touchend.slick mouseup.slick", {
                    action: "end"
                }, e.swipeHandler), e.$list.on("touchcancel.slick mouseleave.slick", {
                    action: "end"
                }, e.swipeHandler), e.$list.on("click.slick", e.clickHandler), t(document).on(e.visibilityChange, t.proxy(e.visibility, e)), e.$list.on("mouseenter.slick", t.proxy(e.setPaused, e, !0)), e.$list.on("mouseleave.slick", t.proxy(e.setPaused, e, !1)), e.options.accessibility === !0 && e.$list.on("keydown.slick", e.keyHandler), e.options.focusOnSelect === !0 && t(e.$slideTrack).children().on("click.slick", e.selectHandler), t(window).on("orientationchange.slick.slick-" + e.instanceUid, t.proxy(e.orientationChange, e)), t(window).on("resize.slick.slick-" + e.instanceUid, t.proxy(e.resize, e)), t("[draggable!=true]", e.$slideTrack).on("dragstart", e.preventDefault), t(window).on("load.slick.slick-" + e.instanceUid, e.setPosition), t(document).on("ready.slick.slick-" + e.instanceUid, e.setPosition)
            }, e.prototype.initUI = function() {
                var t = this;
                t.options.arrows === !0 && t.slideCount > t.options.slidesToShow && (t.$prevArrow.show(), t.$nextArrow.show()), t.options.dots === !0 && t.slideCount > t.options.slidesToShow && t.$dots.show(), t.options.autoplay === !0 && t.autoPlay()
            }, e.prototype.keyHandler = function(t) {
                var e = this;
                t.target.tagName.match("TEXTAREA|INPUT|SELECT") || (37 === t.keyCode && e.options.accessibility === !0 ? e.changeSlide({
                    data: {
                        message: "previous"
                    }
                }) : 39 === t.keyCode && e.options.accessibility === !0 && e.changeSlide({
                    data: {
                        message: "next"
                    }
                }))
            }, e.prototype.lazyLoad = function() {
                function e(e) {
                    t("img[data-lazy]", e).each(function() {
                        var e = t(this),
                            n = t(this).attr("data-lazy"),
                            i = document.createElement("img");
                        i.onload = function() {
                            e.animate({
                                opacity: 0
                            }, 100, function() {
                                e.attr("src", n).animate({
                                    opacity: 1
                                }, 200, function() {
                                    e.removeAttr("data-lazy").removeClass("slick-loading")
                                })
                            })
                        }, i.src = n
                    })
                }
                var n, i, r, o, s = this;
                s.options.centerMode === !0 ? s.options.infinite === !0 ? (r = s.currentSlide + (s.options.slidesToShow / 2 + 1), o = r + s.options.slidesToShow + 2) : (r = Math.max(0, s.currentSlide - (s.options.slidesToShow / 2 + 1)), o = 2 + (s.options.slidesToShow / 2 + 1) + s.currentSlide) : (r = s.options.infinite ? s.options.slidesToShow + s.currentSlide : s.currentSlide, o = r + s.options.slidesToShow, s.options.fade === !0 && (r > 0 && r--, o <= s.slideCount && o++)), n = s.$slider.find(".slick-slide").slice(r, o), e(n), s.slideCount <= s.options.slidesToShow ? (i = s.$slider.find(".slick-slide"), e(i)) : s.currentSlide >= s.slideCount - s.options.slidesToShow ? (i = s.$slider.find(".slick-cloned").slice(0, s.options.slidesToShow), e(i)) : 0 === s.currentSlide && (i = s.$slider.find(".slick-cloned").slice(-1 * s.options.slidesToShow), e(i))
            }, e.prototype.loadSlider = function() {
                var t = this;
                t.setPosition(), t.$slideTrack.css({
                    opacity: 1
                }), t.$slider.removeClass("slick-loading"), t.initUI(), "progressive" === t.options.lazyLoad && t.progressiveLazyLoad()
            }, e.prototype.next = e.prototype.slickNext = function() {
                var t = this;
                t.changeSlide({
                    data: {
                        message: "next"
                    }
                })
            }, e.prototype.orientationChange = function() {
                var t = this;
                t.checkResponsive(), t.setPosition()
            }, e.prototype.pause = e.prototype.slickPause = function() {
                var t = this;
                t.autoPlayClear(), t.paused = !0
            }, e.prototype.play = e.prototype.slickPlay = function() {
                var t = this;
                t.paused = !1, t.autoPlay()
            }, e.prototype.postSlide = function(t) {
                var e = this;
                e.$slider.trigger("afterChange", [e, t]), e.animating = !1, e.setPosition(), e.swipeLeft = null, e.options.autoplay === !0 && e.paused === !1 && e.autoPlay(), e.options.accessibility === !0 && e.initADA()
            }, e.prototype.prev = e.prototype.slickPrev = function() {
                var t = this;
                t.changeSlide({
                    data: {
                        message: "previous"
                    }
                })
            }, e.prototype.preventDefault = function(t) {
                t.preventDefault()
            }, e.prototype.progressiveLazyLoad = function() {
                var e, n, i = this;
                e = t("img[data-lazy]", i.$slider).length, e > 0 && (n = t("img[data-lazy]", i.$slider).first(), n.attr("src", null), n.attr("src", n.attr("data-lazy")).removeClass("slick-loading").load(function() {
                    n.removeAttr("data-lazy"), i.progressiveLazyLoad(), i.options.adaptiveHeight === !0 && i.setPosition()
                }).error(function() {
                    n.removeAttr("data-lazy"), i.progressiveLazyLoad()
                }))
            }, e.prototype.refresh = function(e) {
                var n, i, r = this;
                i = r.slideCount - r.options.slidesToShow, r.options.infinite || (r.slideCount <= r.options.slidesToShow ? r.currentSlide = 0 : r.currentSlide > i && (r.currentSlide = i)), n = r.currentSlide, r.destroy(!0), t.extend(r, r.initials, {
                    currentSlide: n
                }), r.init(), e || r.changeSlide({
                    data: {
                        message: "index",
                        index: n
                    }
                }, !1)
            }, e.prototype.registerBreakpoints = function() {
                var e, n, i, r = this,
                    o = r.options.responsive || null;
                if ("array" === t.type(o) && o.length) {
                    r.respondTo = r.options.respondTo || "window";
                    for (e in o)
                        if (i = r.breakpoints.length - 1, n = o[e].breakpoint, o.hasOwnProperty(e)) {
                            for (; i >= 0;) r.breakpoints[i] && r.breakpoints[i] === n && r.breakpoints.splice(i, 1), i--;
                            r.breakpoints.push(n), r.breakpointSettings[n] = o[e].settings
                        }
                    r.breakpoints.sort(function(t, e) {
                        return r.options.mobileFirst ? t - e : e - t
                    })
                }
            }, e.prototype.reinit = function() {
                var e = this;
                e.$slides = e.$slideTrack.children(e.options.slide).addClass("slick-slide"), e.slideCount = e.$slides.length, e.currentSlide >= e.slideCount && 0 !== e.currentSlide && (e.currentSlide = e.currentSlide - e.options.slidesToScroll), e.slideCount <= e.options.slidesToShow && (e.currentSlide = 0), e.registerBreakpoints(), e.setProps(), e.setupInfinite(), e.buildArrows(), e.updateArrows(), e.initArrowEvents(), e.buildDots(), e.updateDots(), e.initDotEvents(), e.checkResponsive(!1, !0), e.options.focusOnSelect === !0 && t(e.$slideTrack).children().on("click.slick", e.selectHandler), e.setSlideClasses(0), e.setPosition(), e.$slider.trigger("reInit", [e]), e.options.autoplay === !0 && e.focusHandler()
            }, e.prototype.resize = function() {
                var e = this;
                t(window).width() !== e.windowWidth && (clearTimeout(e.windowDelay), e.windowDelay = window.setTimeout(function() {
                    e.windowWidth = t(window).width(), e.checkResponsive(), e.unslicked || e.setPosition()
                }, 50))
            }, e.prototype.removeSlide = e.prototype.slickRemove = function(t, e, n) {
                var i = this;
                return "boolean" == typeof t ? (e = t, t = e === !0 ? 0 : i.slideCount - 1) : t = e === !0 ? --t : t, i.slideCount < 1 || 0 > t || t > i.slideCount - 1 ? !1 : (i.unload(), n === !0 ? i.$slideTrack.children().remove() : i.$slideTrack.children(this.options.slide).eq(t).remove(), i.$slides = i.$slideTrack.children(this.options.slide), i.$slideTrack.children(this.options.slide).detach(), i.$slideTrack.append(i.$slides), i.$slidesCache = i.$slides, void i.reinit())
            }, e.prototype.setCSS = function(t) {
                var e, n, i = this,
                    r = {};
                i.options.rtl === !0 && (t = -t), e = "left" == i.positionProp ? Math.ceil(t) + "px" : "0px", n = "top" == i.positionProp ? Math.ceil(t) + "px" : "0px", r[i.positionProp] = t, i.transformsEnabled === !1 ? i.$slideTrack.css(r) : (r = {}, i.cssTransitions === !1 ? (r[i.animType] = "translate(" + e + ", " + n + ")", i.$slideTrack.css(r)) : (r[i.animType] = "translate3d(" + e + ", " + n + ", 0px)", i.$slideTrack.css(r)))
            }, e.prototype.setDimensions = function() {
                var t = this;
                t.options.vertical === !1 ? t.options.centerMode === !0 && t.$list.css({
                    padding: "0px " + t.options.centerPadding
                }) : (t.$list.height(t.$slides.first().outerHeight(!0) * t.options.slidesToShow), t.options.centerMode === !0 && t.$list.css({
                    padding: t.options.centerPadding + " 0px"
                })), t.listWidth = t.$list.width(), t.listHeight = t.$list.height(), t.options.vertical === !1 && t.options.variableWidth === !1 ? (t.slideWidth = Math.ceil(t.listWidth / t.options.slidesToShow), t.$slideTrack.width(Math.ceil(t.slideWidth * t.$slideTrack.children(".slick-slide").length))) : t.options.variableWidth === !0 ? t.$slideTrack.width(5e3 * t.slideCount) : (t.slideWidth = Math.ceil(t.listWidth), t.$slideTrack.height(Math.ceil(t.$slides.first().outerHeight(!0) * t.$slideTrack.children(".slick-slide").length)));
                var e = t.$slides.first().outerWidth(!0) - t.$slides.first().width();
                t.options.variableWidth === !1 && t.$slideTrack.children(".slick-slide").width(t.slideWidth - e)
            }, e.prototype.setFade = function() {
                var e, n = this;
                n.$slides.each(function(i, r) {
                    e = n.slideWidth * i * -1, t(r).css(n.options.rtl === !0 ? {
                        position: "relative",
                        right: e,
                        top: 0,
                        zIndex: n.options.zIndex - 2,
                        opacity: 0
                    } : {
                        position: "relative",
                        left: e,
                        top: 0,
                        zIndex: n.options.zIndex - 2,
                        opacity: 0
                    })
                }), n.$slides.eq(n.currentSlide).css({
                    zIndex: n.options.zIndex - 1,
                    opacity: 1
                })
            }, e.prototype.setHeight = function() {
                var t = this;
                if (1 === t.options.slidesToShow && t.options.adaptiveHeight === !0 && t.options.vertical === !1) {
                    var e = t.$slides.eq(t.currentSlide).outerHeight(!0);
                    t.$list.css("height", e)
                }
            }, e.prototype.setOption = e.prototype.slickSetOption = function(e, n, i) {
                var r, o, s = this;
                if ("responsive" === e && "array" === t.type(n))
                    for (o in n)
                        if ("array" !== t.type(s.options.responsive)) s.options.responsive = [n[o]];
                        else {
                            for (r = s.options.responsive.length - 1; r >= 0;) s.options.responsive[r].breakpoint === n[o].breakpoint && s.options.responsive.splice(r, 1), r--;
                            s.options.responsive.push(n[o])
                        }
                else s.options[e] = n;
                i === !0 && (s.unload(), s.reinit())
            }, e.prototype.setPosition = function() {
                var t = this;
                t.setDimensions(), t.setHeight(), t.options.fade === !1 ? t.setCSS(t.getLeft(t.currentSlide)) : t.setFade(), t.$slider.trigger("setPosition", [t])
            }, e.prototype.setProps = function() {
                var t = this,
                    e = document.body.style;
                t.positionProp = t.options.vertical === !0 ? "top" : "left", "top" === t.positionProp ? t.$slider.addClass("slick-vertical") : t.$slider.removeClass("slick-vertical"), (void 0 !== e.WebkitTransition || void 0 !== e.MozTransition || void 0 !== e.msTransition) && t.options.useCSS === !0 && (t.cssTransitions = !0), t.options.fade && ("number" == typeof t.options.zIndex ? t.options.zIndex < 3 && (t.options.zIndex = 3) : t.options.zIndex = t.defaults.zIndex), void 0 !== e.OTransform && (t.animType = "OTransform", t.transformType = "-o-transform", t.transitionType = "OTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (t.animType = !1)), void 0 !== e.MozTransform && (t.animType = "MozTransform", t.transformType = "-moz-transform", t.transitionType = "MozTransition", void 0 === e.perspectiveProperty && void 0 === e.MozPerspective && (t.animType = !1)), void 0 !== e.webkitTransform && (t.animType = "webkitTransform", t.transformType = "-webkit-transform", t.transitionType = "webkitTransition", void 0 === e.perspectiveProperty && void 0 === e.webkitPerspective && (t.animType = !1)), void 0 !== e.msTransform && (t.animType = "msTransform", t.transformType = "-ms-transform", t.transitionType = "msTransition", void 0 === e.msTransform && (t.animType = !1)), void 0 !== e.transform && t.animType !== !1 && (t.animType = "transform", t.transformType = "transform", t.transitionType = "transition"), t.transformsEnabled = t.options.useTransform && null !== t.animType && t.animType !== !1
            }, e.prototype.setSlideClasses = function(t) {
                var e, n, i, r, o = this;
                n = o.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden", "true"), o.$slides.eq(t).addClass("slick-current"), o.options.centerMode === !0 ? (e = Math.floor(o.options.slidesToShow / 2), o.options.infinite === !0 && (t >= e && t <= o.slideCount - 1 - e ? o.$slides.slice(t - e, t + e + 1).addClass("slick-active").attr("aria-hidden", "false") : (i = o.options.slidesToShow + t, n.slice(i - e + 1, i + e + 2).addClass("slick-active").attr("aria-hidden", "false")), 0 === t ? n.eq(n.length - 1 - o.options.slidesToShow).addClass("slick-center") : t === o.slideCount - 1 && n.eq(o.options.slidesToShow).addClass("slick-center")), o.$slides.eq(t).addClass("slick-center")) : t >= 0 && t <= o.slideCount - o.options.slidesToShow ? o.$slides.slice(t, t + o.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false") : n.length <= o.options.slidesToShow ? n.addClass("slick-active").attr("aria-hidden", "false") : (r = o.slideCount % o.options.slidesToShow, i = o.options.infinite === !0 ? o.options.slidesToShow + t : t, o.options.slidesToShow == o.options.slidesToScroll && o.slideCount - t < o.options.slidesToShow ? n.slice(i - (o.options.slidesToShow - r), i + r).addClass("slick-active").attr("aria-hidden", "false") : n.slice(i, i + o.options.slidesToShow).addClass("slick-active").attr("aria-hidden", "false")), "ondemand" === o.options.lazyLoad && o.lazyLoad()
            }, e.prototype.setupInfinite = function() {
                var e, n, i, r = this;
                if (r.options.fade === !0 && (r.options.centerMode = !1), r.options.infinite === !0 && r.options.fade === !1 && (n = null, r.slideCount > r.options.slidesToShow)) {
                    for (i = r.options.centerMode === !0 ? r.options.slidesToShow + 1 : r.options.slidesToShow, e = r.slideCount; e > r.slideCount - i; e -= 1) n = e - 1, t(r.$slides[n]).clone(!0).attr("id", "").attr("data-slick-index", n - r.slideCount).prependTo(r.$slideTrack).addClass("slick-cloned");
                    for (e = 0; i > e; e += 1) n = e, t(r.$slides[n]).clone(!0).attr("id", "").attr("data-slick-index", n + r.slideCount).appendTo(r.$slideTrack).addClass("slick-cloned");
                    r.$slideTrack.find(".slick-cloned").find("[id]").each(function() {
                        t(this).attr("id", "")
                    })
                }
            }, e.prototype.setPaused = function(t) {
                var e = this;
                e.options.autoplay === !0 && e.options.pauseOnHover === !0 && (e.paused = t, t ? e.autoPlayClear() : e.autoPlay())
            }, e.prototype.selectHandler = function(e) {
                var n = this,
                    i = t(e.target).is(".slick-slide") ? t(e.target) : t(e.target).parents(".slick-slide"),
                    r = parseInt(i.attr("data-slick-index"));
                return r || (r = 0), n.slideCount <= n.options.slidesToShow ? (n.setSlideClasses(r), void n.asNavFor(r)) : void n.slideHandler(r)
            }, e.prototype.slideHandler = function(t, e, n) {
                var i, r, o, s, a = null,
                    l = this;
                return e = e || !1, l.animating === !0 && l.options.waitForAnimate === !0 || l.options.fade === !0 && l.currentSlide === t || l.slideCount <= l.options.slidesToShow ? void 0 : (e === !1 && l.asNavFor(t), i = t, a = l.getLeft(i), s = l.getLeft(l.currentSlide), l.currentLeft = null === l.swipeLeft ? s : l.swipeLeft, l.options.infinite === !1 && l.options.centerMode === !1 && (0 > t || t > l.getDotCount() * l.options.slidesToScroll) ? void(l.options.fade === !1 && (i = l.currentSlide, n !== !0 ? l.animateSlide(s, function() {
                    l.postSlide(i)
                }) : l.postSlide(i))) : l.options.infinite === !1 && l.options.centerMode === !0 && (0 > t || t > l.slideCount - l.options.slidesToScroll) ? void(l.options.fade === !1 && (i = l.currentSlide, n !== !0 ? l.animateSlide(s, function() {
                    l.postSlide(i)
                }) : l.postSlide(i))) : (l.options.autoplay === !0 && clearInterval(l.autoPlayTimer), r = 0 > i ? l.slideCount % l.options.slidesToScroll !== 0 ? l.slideCount - l.slideCount % l.options.slidesToScroll : l.slideCount + i : i >= l.slideCount ? l.slideCount % l.options.slidesToScroll !== 0 ? 0 : i - l.slideCount : i, l.animating = !0, l.$slider.trigger("beforeChange", [l, l.currentSlide, r]), o = l.currentSlide, l.currentSlide = r, l.setSlideClasses(l.currentSlide), l.updateDots(), l.updateArrows(), l.options.fade === !0 ? (n !== !0 ? (l.fadeSlideOut(o), l.fadeSlide(r, function() {
                    l.postSlide(r)
                })) : l.postSlide(r), void l.animateHeight()) : void(n !== !0 ? l.animateSlide(a, function() {
                    l.postSlide(r)
                }) : l.postSlide(r))))
            }, e.prototype.startLoad = function() {
                var t = this;
                t.options.arrows === !0 && t.slideCount > t.options.slidesToShow && (t.$prevArrow.hide(), t.$nextArrow.hide()), t.options.dots === !0 && t.slideCount > t.options.slidesToShow && t.$dots.hide(), t.$slider.addClass("slick-loading")
            }, e.prototype.swipeDirection = function() {
                var t, e, n, i, r = this;
                return t = r.touchObject.startX - r.touchObject.curX, e = r.touchObject.startY - r.touchObject.curY, n = Math.atan2(e, t), i = Math.round(180 * n / Math.PI), 0 > i && (i = 360 - Math.abs(i)), 45 >= i && i >= 0 ? r.options.rtl === !1 ? "left" : "right" : 360 >= i && i >= 315 ? r.options.rtl === !1 ? "left" : "right" : i >= 135 && 225 >= i ? r.options.rtl === !1 ? "right" : "left" : r.options.verticalSwiping === !0 ? i >= 35 && 135 >= i ? "left" : "right" : "vertical"
            }, e.prototype.swipeEnd = function() {
                var t, e = this;
                if (e.dragging = !1, e.shouldClick = e.touchObject.swipeLength > 10 ? !1 : !0, void 0 === e.touchObject.curX) return !1;
                if (e.touchObject.edgeHit === !0 && e.$slider.trigger("edge", [e, e.swipeDirection()]), e.touchObject.swipeLength >= e.touchObject.minSwipe) switch (e.swipeDirection()) {
                    case "left":
                        t = e.options.swipeToSlide ? e.checkNavigable(e.currentSlide + e.getSlideCount()) : e.currentSlide + e.getSlideCount(), e.slideHandler(t), e.currentDirection = 0, e.touchObject = {}, e.$slider.trigger("swipe", [e, "left"]);
                        break;
                    case "right":
                        t = e.options.swipeToSlide ? e.checkNavigable(e.currentSlide - e.getSlideCount()) : e.currentSlide - e.getSlideCount(), e.slideHandler(t), e.currentDirection = 1, e.touchObject = {}, e.$slider.trigger("swipe", [e, "right"])
                } else e.touchObject.startX !== e.touchObject.curX && (e.slideHandler(e.currentSlide), e.touchObject = {})
            }, e.prototype.swipeHandler = function(t) {
                var e = this;
                if (!(e.options.swipe === !1 || "ontouchend" in document && e.options.swipe === !1 || e.options.draggable === !1 && -1 !== t.type.indexOf("mouse"))) switch (e.touchObject.fingerCount = t.originalEvent && void 0 !== t.originalEvent.touches ? t.originalEvent.touches.length : 1, e.touchObject.minSwipe = e.listWidth / e.options.touchThreshold, e.options.verticalSwiping === !0 && (e.touchObject.minSwipe = e.listHeight / e.options.touchThreshold), t.data.action) {
                    case "start":
                        e.swipeStart(t);
                        break;
                    case "move":
                        e.swipeMove(t);
                        break;
                    case "end":
                        e.swipeEnd(t)
                }
            }, e.prototype.swipeMove = function(t) {
                var e, n, i, r, o, s = this;
                return o = void 0 !== t.originalEvent ? t.originalEvent.touches : null, !s.dragging || o && 1 !== o.length ? !1 : (e = s.getLeft(s.currentSlide), s.touchObject.curX = void 0 !== o ? o[0].pageX : t.clientX, s.touchObject.curY = void 0 !== o ? o[0].pageY : t.clientY, s.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(s.touchObject.curX - s.touchObject.startX, 2))), s.options.verticalSwiping === !0 && (s.touchObject.swipeLength = Math.round(Math.sqrt(Math.pow(s.touchObject.curY - s.touchObject.startY, 2)))), n = s.swipeDirection(), "vertical" !== n ? (void 0 !== t.originalEvent && s.touchObject.swipeLength > 4 && t.preventDefault(), r = (s.options.rtl === !1 ? 1 : -1) * (s.touchObject.curX > s.touchObject.startX ? 1 : -1), s.options.verticalSwiping === !0 && (r = s.touchObject.curY > s.touchObject.startY ? 1 : -1), i = s.touchObject.swipeLength, s.touchObject.edgeHit = !1, s.options.infinite === !1 && (0 === s.currentSlide && "right" === n || s.currentSlide >= s.getDotCount() && "left" === n) && (i = s.touchObject.swipeLength * s.options.edgeFriction, s.touchObject.edgeHit = !0), s.swipeLeft = s.options.vertical === !1 ? e + i * r : e + i * (s.$list.height() / s.listWidth) * r, s.options.verticalSwiping === !0 && (s.swipeLeft = e + i * r), s.options.fade === !0 || s.options.touchMove === !1 ? !1 : s.animating === !0 ? (s.swipeLeft = null, !1) : void s.setCSS(s.swipeLeft)) : void 0)
            }, e.prototype.swipeStart = function(t) {
                var e, n = this;
                return 1 !== n.touchObject.fingerCount || n.slideCount <= n.options.slidesToShow ? (n.touchObject = {}, !1) : (void 0 !== t.originalEvent && void 0 !== t.originalEvent.touches && (e = t.originalEvent.touches[0]), n.touchObject.startX = n.touchObject.curX = void 0 !== e ? e.pageX : t.clientX, n.touchObject.startY = n.touchObject.curY = void 0 !== e ? e.pageY : t.clientY, void(n.dragging = !0))
            }, e.prototype.unfilterSlides = e.prototype.slickUnfilter = function() {
                var t = this;
                null !== t.$slidesCache && (t.unload(), t.$slideTrack.children(this.options.slide).detach(), t.$slidesCache.appendTo(t.$slideTrack), t.reinit())
            }, e.prototype.unload = function() {
                var e = this;
                t(".slick-cloned", e.$slider).remove(), e.$dots && e.$dots.remove(), e.$prevArrow && e.htmlExpr.test(e.options.prevArrow) && e.$prevArrow.remove(), e.$nextArrow && e.htmlExpr.test(e.options.nextArrow) && e.$nextArrow.remove(), e.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden", "true").css("width", "")
            }, e.prototype.unslick = function(t) {
                var e = this;
                e.$slider.trigger("unslick", [e, t]), e.destroy()
            }, e.prototype.updateArrows = function() {
                var t, e = this;
                t = Math.floor(e.options.slidesToShow / 2), e.options.arrows === !0 && e.slideCount > e.options.slidesToShow && !e.options.infinite && (e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false"), 0 === e.currentSlide ? (e.$prevArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - e.options.slidesToShow && e.options.centerMode === !1 ? (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")) : e.currentSlide >= e.slideCount - 1 && e.options.centerMode === !0 && (e.$nextArrow.addClass("slick-disabled").attr("aria-disabled", "true"), e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled", "false")))
            }, e.prototype.updateDots = function() {
                var t = this;
                null !== t.$dots && (t.$dots.find("li").removeClass("slick-active").attr("aria-hidden", "true"), t.$dots.find("li").eq(Math.floor(t.currentSlide / t.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden", "false"))
            }, e.prototype.visibility = function() {
                var t = this;
                document[t.hidden] ? (t.paused = !0, t.autoPlayClear()) : t.options.autoplay === !0 && (t.paused = !1, t.autoPlay())
            }, e.prototype.initADA = function() {
                var e = this;
                e.$slides.add(e.$slideTrack.find(".slick-cloned")).attr({
                    "aria-hidden": "true",
                    tabindex: "-1"
                }).find("a, input, button, select").attr({
                    tabindex: "-1"
                }), e.$slideTrack.attr("role", "listbox"), e.$slides.not(e.$slideTrack.find(".slick-cloned")).each(function(n) {
                    t(this).attr({
                        role: "option",
                        "aria-describedby": "slick-slide" + e.instanceUid + n
                    })
                }), null !== e.$dots && e.$dots.attr("role", "tablist").find("li").each(function(n) {
                    t(this).attr({
                        role: "presentation",
                        "aria-selected": "false",
                        "aria-controls": "navigation" + e.instanceUid + n,
                        id: "slick-slide" + e.instanceUid + n
                    })
                }).first().attr("aria-selected", "true").end().find("button").attr("role", "button").end().closest("div").attr("role", "toolbar"), e.activateADA()
            }, e.prototype.activateADA = function() {
                var t = this;
                t.$slideTrack.find(".slick-active").attr({
                    "aria-hidden": "false"
                }).find("a, input, button, select").attr({
                    tabindex: "0"
                })
            }, e.prototype.focusHandler = function() {
                var e = this;
                e.$slider.on("focus.slick blur.slick", "*", function(n) {
                    n.stopImmediatePropagation();
                    var i = t(this);
                    setTimeout(function() {
                        e.isPlay && (i.is(":focus") ? (e.autoPlayClear(), e.paused = !0) : (e.paused = !1, e.autoPlay()))
                    }, 0)
                })
            }, t.fn.slick = function() {
                var t, n, i = this,
                    r = arguments[0],
                    o = Array.prototype.slice.call(arguments, 1),
                    s = i.length;
                for (t = 0; s > t; t++)
                    if ("object" == typeof r || "undefined" == typeof r ? i[t].slick = new e(i[t], r) : n = i[t].slick[r].apply(i[t].slick, o), "undefined" != typeof n) return n;
                return i
            }
        }),
        function() {
            define("mixins/SliderMixin", ["require", "slick"], function(t) {
                var e;
                return t("slick"), e = {
                    sliderOptions: {
                        dots: !0
                    },
                    render: function() {
                        return this.$el.hasClass("slick-initialized") && this.$el.slick("unslick"), this.$el.slick(this.sliderOptions || {}), this.resize(), this
                    },
                    resize: function() {
                        return this.$el.hasClass("slick-initialized") ? this.$el.slick("slickSetOption", "", "", !0) : "undefined" != typeof console && null !== console ? console.error("Slick not initialised") : void 0
                    },
                    slick: function() {
                        return this.$el.slick.apply(arguments)
                    }
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_graph/StarGraphListView", ["require", "jquery", "components/base/BaseView", "./StarGraphView", "cocktail", "mixins/SliderMixin"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), r = e("components/base/BaseView"), l = e("./StarGraphView"), o = e("cocktail"), s = e("mixins/SliderMixin"), a = function(e) {
                    function i() {
                        return this.setInitialSlide = t(this.setInitialSlide, this), this.close = t(this.close, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.className = "star-graph-list", i.prototype.sliderOptions = {
                        prevArrow: '<i class="fa fa-angle-left fa-slick-prev slick-arrow"></i>',
                        nextArrow: '<i class="fa fa-angle-right fa-slick-next slick-arrow"></i>'
                    }, i.prototype.events = {
                        afterChange: function() {
                            return this.trigger("slideChange")
                        }
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), i.__super__.initialize.call(this, t)
                    }, i.prototype.render = function() {
                        var t;
                        return this.$el.html(""), t = this.collection.getProfiles(this.options.tableProfile), _.each(t, function(t) {
                            return function(e) {
                                var n;
                                return n = new l({
                                    model: e
                                }), t.$el.append(n.render().el)
                            }
                        }(this)), this
                    }, i.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, i.prototype.setInitialSlide = function(t) {
                        return this.slick("slickGoTo", t)
                    }, i
                }(r), o.mixin(a, s)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_popover/StarPopoverView", ["require", "jquery", "underscore", "canstar_widget", "libraries/Canstar", "components/base/BaseView", "./StarPopoverModel", "text-cns!./tmpl_star_popover.html", "components/star_graph/StarGraphListView", "components/star_graph/StarGraphModel"], function(e) {
                var i, r, o, s, a, l, c, u, d, p;
                return i = e("jquery"), p = e("underscore"), u = e("canstar_widget"), o = e("libraries/Canstar"), r = e("components/base/BaseView"), l = e("./StarPopoverModel"), d = e("text-cns!./tmpl_star_popover.html"), s = e("components/star_graph/StarGraphListView"), a = e("components/star_graph/StarGraphModel"), c = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.startTimer = t(this.startTimer, this), this.gaTrackEvent = t(this.gaTrackEvent, this), this.render = t(this.render, this), this.onShown = t(this.onShown, this), this.initStarGraphs = t(this.initStarGraphs, this), this.setupListeners = t(this.setupListeners, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.id = "star-popover", i.prototype.graphsRendered = !1, i.prototype.events = {
                        "click .star-methodology a": function() {
                            return this.gaTrackEvent("methodology link")
                        }
                    }, i.prototype.timeOpened = null, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.model = new l, this.template = p.template(d), this.setupListeners(), i.__super__.initialize.call(this, t), this.model.fetch({
                            success: function(t) {
                                return function() {
                                    return t.initStarGraphs(), t.render()
                                }
                            }(this)
                        })
                    }, i.prototype.setupListeners = function() {
                        return this.on("shown", this.onShown)
                    }, i.prototype.initStarGraphs = function() {
                        return this.starGraphListView = new s({
                            collection: this.model.get("profiles"),
                            tableProfile: this.options.tableProfile
                        }), this.listenTo(this.starGraphListView, "slideChange", function(t) {
                            return function() {
                                return t.gaTrackEvent("slider")
                            }
                        }(this))
                    }, i.prototype.onShown = function() {
                        return this.graphsRendered ? this.starGraphListView.resize() : (this.starGraphListView.render(), this.graphsRendered = !0)
                    }, i.prototype.render = function() {
                        return this.$el.html(this.template({
                            model: this.model,
                            base_url: u.base_url
                        })), this.$(".star-slider").append(this.starGraphListView.el), this
                    }, i.prototype.gaTrackEvent = function(t, e) {
                        var n;
                        return n = {
                            event_name: "what do the stars mean",
                            event_type: "<Category>",
                            event_label: t
                        }, null != e && (n.event_value = e), o.prototype.gaTrackEvent(n)
                    }, i.prototype.startTimer = function() {
                        return this.timeOpened = (new Date).getTime()
                    }, i.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, i
                }(r)
            })
        }.call(this),
        function() {
            define("libraries/Precalculators", ["require", "underscore", "jStat"], function(t) {
                var e, n, i;
                return i = t("underscore"), n = t("jStat"), e = function() {
                    function t(t) {
                        this.collection = t, this.cache = {}
                    }
                    return t.prototype.generatePrecalculations = function(t) {
                        var e;
                        return e = {}, i.each(t, function(t) {
                            return function(n, i) {
                                return e[i] = t[n.precalculator](n)
                            }
                        }(this)), e
                    }, t.prototype.getColumnAsFloat = function(t) {
                        var e, n, r;
                        return null == (e = this.cache).Columns && (e.Columns = {}), null == (n = this.cache.Columns)[r = t.field] && (n[r] = i.map(this.collection.models, function(e) {
                            return parseFloat(e.attributes[t.field])
                        })), this.cache.Columns[t.field]
                    }, t.prototype.getLogColumn = function(t) {
                        var e, n, r;
                        return null == (e = this.cache).LogColumn && (e.LogColumn = {}), null == (n = this.cache.LogColumn)[r = t.field] && (n[r] = i.map(this.collection.models, function(e) {
                            return Math.log(parseFloat(e.attributes[t.field]))
                        })), this.cache.LogColumn[t.field]
                    }, t.prototype.getLogMeanColumn = function(t) {
                        return n.mean(this.getLogColumn(t))
                    }, t.prototype.getLogStdevColumn = function(t) {
                        return n.stdev(this.getLogColumn(t))
                    }, t
                }()
            })
        }.call(this),
        function() {
            define("libraries/Normalizers", ["require", "jquery", "underscore", "libraries/Canstar", "libraries/Currency", "libraries/Leads", "libraries/Text", "accounting"], function(t) {
                var e, n, i, r, o, s, a, l;
                return e = t("jquery"), l = t("underscore"), i = t("libraries/Canstar"), r = t("libraries/Currency"), o = t("libraries/Leads"), a = t("libraries/Text"), n = t("accounting"), s = function() {
                    function t() {}
                    return t.prototype.stripPercentage = function(t) {
                        return t && (t = t.replace("%", "")), parseFloat(t)
                    }, t.prototype.stripDollar = function(t) {
                        return t && (t = t.replace("$", "")), parseFloat(t)
                    }, t
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/field_views/CCSpecialOfferView", ["require", "jquery", "underscore", "backbone"], function(e) {
                var i, r, o, s;
                return i = e("jquery"), s = e("underscore"), r = e("backbone"), o = function(e) {
                    function i() {
                        return this.toggleText = t(this.toggleText, this), this.makeShortText = t(this.makeShortText, this), this.render = t(this.render, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.template = '<div style="display:inline-block;" class="bonus-offer">\n      <%= current_text %>\n  </div>\n  <a href="#" id="toggle_text">\n      <%= link_text %>\n  </a>', i.prototype.link_text = {
                        more: "Read more",
                        less: "less"
                    }, i.prototype.initialize = function(t) {
                        var e;
                        return this.tmpl = s.template(this.template), this.no_details = "N/A" === t.row.SUPP.OFFSDETA, e = this.no_details ? "-" : "" + t.row.SUPP.OFFSDETA + " <br/>Exp. " + t.row.SUPP.OFFSEXPI + ".. ", this.model = new r.Model({
                            full_text: e,
                            current_text: this.no_details ? e : this.makeShortText(e),
                            link_text: this.no_details ? "" : this.link_text.more
                        }), this.model.on("change", this.render)
                    }, i.prototype.events = {
                        "click a": "toggleText"
                    }, i.prototype.render = function() {
                        return this.$el.html(this.tmpl(this.model.toJSON())), this.el
                    }, i.prototype.makeShortText = function(t) {
                        return "" + t.split(/\s+/).slice(0, 2).join(" ") + ".. "
                    }, i.prototype.toggleText = function(t) {
                        return t.preventDefault(), this.model.get("current_text") === this.model.get("full_text") ? (this.model.set("current_text", this.makeShortText(this.model.get("full_text"))), this.model.set("link_text", this.link_text.more)) : (this.model.set("current_text", this.model.get("full_text")), this.model.set("link_text", this.link_text.less))
                    }, i
                }(r.View)
            })
        }.call(this),
        function() {
            define("components/FieldViews", ["require", "components/field_views/CCSpecialOfferView"], function(t) {
                return t("components/field_views/CCSpecialOfferView")
            })
        }.call(this),
        function(t, e) {
            "function" == typeof define && define.amd ? define("jquery.dynatable", ["jquery"], e) : e(jQuery)
        }(this, function(t) {
            function e(t, e, n, i) {
                for (var r = "", o = 0, s = n.length; s > o; o++) r += i(n[o], e);
                return "<tr>" + r + "</tr>"
            }

            function n(t, e) {
                var n = t.attributeWriter(e),
                    i = "<td";
                return (t.hidden || t.textAlign) && (i += ' style="', t.hidden && (i += "display: none;"), t.textAlign && (i += "text-align: " + t.textAlign + ";"), i += '"'), i + ">" + n + "</td>"
            }

            function i(t) {
                return t[this.id]
            }

            function r(e) {
                return t(e).html()
            }

            function o(e, n) {
                this.update = function() {
                    var i = "",
                        r = n.table.columns,
                        o = n.writers._rowWriter,
                        s = n.writers._cellWriter;
                    e.$element.trigger("dynatable:beforeUpdate", i);
                    for (var a = 0, l = n.dataset.records.length; l > a; a++) {
                        var c = n.dataset.records[a],
                            u = o(a, c, r, s);
                        i += u
                    }
                    if (n.features.recordCount && t("#dynatable-record-count-" + e.element.id).replaceWith(e.recordsCount.create()), n.features.paginate && (t("#dynatable-pagination-links-" + e.element.id).replaceWith(e.paginationLinks.create()), n.features.perPageSelect && t("#dynatable-per-page-" + e.element.id).val(parseInt(n.dataset.perPage))), (n.features.sort || n.overrideSort) && r) {
                        e.sortsHeaders.removeAllArrows();
                        for (var a = 0, l = r.length; l > a; a++) {
                            var d = r[a],
                                p = P.allMatch(n.dataset.sorts, d.sorts, function(t, e) {
                                    return e in t
                                }),
                                h = n.dataset.sorts[d.sorts[0]];
                            p ? e.$element.find('[data-dynatable-column="' + d.id + '"]').find(".dynatable-sort-header").each(function() {
                                1 == h ? e.sortsHeaders.appendArrowUp(t(this)) : e.sortsHeaders.appendArrowDown(t(this))
                            }) : e.$element.find('[data-dynatable-column="' + d.id + '"] > a').removeClass("arrow-up").removeClass("arrow-down")
                        }
                    }
                    if (n.inputs.queries || n.features.search) {
                        var f = n.inputs.queries || t();
                        n.features.search && (f = f.add("#dynatable-query-search-" + e.element.id)), f.each(function() {
                            var e = t(this),
                                i = n.dataset.queries[e.data("dynatable-query")];
                            e.val(i || "")
                        })
                    }
                    e.$element.find(n.table.bodyRowSelector).remove(), e.$element.append(i), e.$element.trigger("dynatable:afterUpdate", i)
                }
            }

            function s(e, n) {
                var i = this;
                this.initOnLoad = function() {
                    return e.$element.is("table")
                }, this.init = function() {
                    n.table.columns = [], this.getFromTable()
                }, this.getFromTable = function() {
                    var r = e.$element.find(n.table.headRowSelector).children("th,td");
                    return r.length ? void r.each(function(e) {
                        i.add(t(this), e, !0)
                    }) : t.error("Couldn't find any columns headers in '" + n.table.headRowSelector + " th,td'. If your header row is different, specify the selector in the table: headRowSelector option.")
                }, this.add = function(i, r, o, s) {
                    var a = n.table.columns,
                        l = i.text(),
                        c = i.data("dynatable-column") || P.normalizeText(l, n.table.defaultColumnIdStyle),
                        u = i.data("dynatable-sorts"),
                        d = u ? t.map(u.split(","), function(e) {
                            return t.trim(e)
                        }) : [c];
                    if (c || (this.generate(i), c = i.data("dynatable-column")), a.splice(r, 0, {
                            index: r,
                            label: l,
                            id: c,
                            attributeWriter: n.writers[c] || n.writers._attributeWriter,
                            attributeReader: n.readers[c] || n.readers._attributeReader,
                            sorts: d,
                            hidden: "none" === i.css("display"),
                            textAlign: i.css("text-align")
                        }), i.attr("data-dynatable-column", c).addClass("dynatable-head"), n.table.headRowClass && i.addClass(n.table.headRowClass), !o) {
                        var p = r + 1,
                            h = e.$element.find(n.table.headRowSelector).children("th:nth-child(" + p + "),td:nth-child(" + p + ")").first(),
                            f = a.slice(r + 1, a.length);
                        if (h.length ? h.before(i) : e.$element.find(n.table.headRowSelector).append(i), e.sortsHeaders.attachOne(i.get()), f.length)
                            for (var m = 0, g = f.length; g > m; m++) f[m].index += 1;
                        s || e.dom.update()
                    }
                    return b
                }, this.remove = function(t) {
                    {
                        var i = n.table.columns;
                        i.length
                    }
                    if ("number" == typeof t) {
                        var r = i[t];
                        this.removeFromTable(r.id), this.removeFromArray(t)
                    } else
                        for (var o = i.length - 1; o >= 0; o--) {
                            var r = i[o];
                            r.id === t && (this.removeFromTable(t), this.removeFromArray(o))
                        }
                    e.dom.update()
                }, this.removeFromTable = function(t) {
                    e.$element.find(n.table.headRowSelector).children('[data-dynatable-column="' + t + '"]').first().remove()
                }, this.removeFromArray = function(t) {
                    var e, i = n.table.columns;
                    i.splice(t, 1), e = i.slice(t, i.length);
                    for (var r = 0, o = e.length; o > r; r++) e[r].index -= 1
                }, this.generate = function(e) {
                    var n = void 0 === e ? t("<th></th>") : e;
                    return this.attachGeneratedAttributes(n)
                }, this.attachGeneratedAttributes = function(t) {
                    var i = e.$element.find(n.table.headRowSelector).children("th[data-dynatable-generated]").length;
                    return t.attr("data-dynatable-column", "dynatable-generated-" + i).attr("data-dynatable-no-sort", "true").attr("data-dynatable-generated", i)
                }
            }

            function a(e, n) {
                this.initOnLoad = function() {
                    return !n.dataset.ajax
                }, this.init = function() {
                    null === n.dataset.records && (n.dataset.records = this.getFromTable(), n.dataset.queryRecordCount || (n.dataset.queryRecordCount = this.count()), n.dataset.totalRecordCount || (n.dataset.totalRecordCount = n.dataset.queryRecordCount)), n.dataset.originalRecords = t.extend(!0, [], n.dataset.records)
                }, this.updateFromJson = function(t) {
                    var e;
                    if ("_root" === n.params.records ? e = t : n.params.records in t && (e = t[n.params.records]), n.params.record)
                        for (var i = e.length - 1, r = 0; i > r; r++) e[r] = e[r][n.params.record];
                    n.params.queryRecordCount in t && (n.dataset.queryRecordCount = t[n.params.queryRecordCount]), n.params.totalRecordCount in t && (n.dataset.totalRecordCount = t[n.params.totalRecordCount]), n.dataset.records = e
                }, this.sort = function() {
                    var i = n.dataset.sorts,
                        r = n.dataset.sortTypes,
                        o = n.dataset.sortsKeys,
                        s = o[0],
                        a = i[s],
                        l = r[s] || "string";
                    if (n.overrideSort) return n.dataset.records = e.sortFunction(n.dataset.records, l, s, a > 0), n.dataset.records;
                    var c = function(n, s) {
                        var a;
                        if (t.isEmptyObject(i)) a = e.sorts.functions.originalPlacement(n, s);
                        else
                            for (var l = 0, c = o.length; c > l; l++) {
                                var u = o[l],
                                    d = i[u],
                                    p = r[u] || e.sorts.guessType(n, s, u);
                                if (a = e.sorts.functions[p](n, s, u, d), 0 !== a) break
                            }
                        return a
                    };
                    return [].sort.call(n.dataset.records, c)
                }, this.paginate = function() {
                    var t = this.pageBounds(),
                        e = t[0],
                        i = t[1];
                    n.dataset.records = n.dataset.records.slice(e, i)
                }, this.resetOriginal = function() {
                    n.dataset.records = n.dataset.originalRecords || []
                }, this.pageBounds = function() {
                    var t = n.dataset.page || 1,
                        e = (t - 1) * n.dataset.perPage,
                        i = Math.min(e + n.dataset.perPage, n.dataset.queryRecordCount);
                    return [e, i]
                }, this.getFromTable = function() {
                    var i = [],
                        r = n.table.columns,
                        o = e.$element.find(n.table.bodyRowSelector);
                    return o.each(function(o) {
                        var s = {};
                        s["dynatable-original-index"] = o, t(this).find("th,td").each(function(n) {
                            void 0 === r[n] && e.domColumns.add(e.domColumns.generate(), r.length, !1, !0);
                            var i = r[n].attributeReader(this, s),
                                o = r[n].id;
                            "string" == typeof i && i.match(/\s*\<.+\>/) && (s["dynatable-sortable-text"] || (s["dynatable-sortable-text"] = {}), s["dynatable-sortable-text"][o] = t.trim(t("<div></div>").html(i).text())), s[o] = i
                        }), "function" == typeof n.readers._rowReader && n.readers._rowReader(o, this, s), i.push(s)
                    }), i
                }, this.count = function() {
                    return n.dataset.records.length
                }
            }

            function l(e, n) {
                this.initOnLoad = function() {
                    return n.features.recordCount
                }, this.init = function() {
                    this.attach()
                }, this.create = function() {
                    var i = e.records.count(),
                        r = n.dataset.queryRecordCount,
                        o = n.dataset.totalRecordCount,
                        s = n.inputs.recordCountText,
                        a = n.params.records;
                    if (r > i && n.features.paginate) {
                        var l = e.records.pageBounds();
                        s += "<span class='dynatable-record-bounds'>" + (l[0] + 1) + " to " + l[1] + "</span> of "
                    } else i === r && n.features.paginate && (s += i + " of ");
                    return s += r + " " + a, o > r && (s += " (filtered from " + o + " total records)"), t("<span></span>", {
                        id: "dynatable-record-count-" + e.element.id,
                        "class": "dynatable-record-count",
                        html: s
                    })
                }, this.attach = function() {
                    var i = n.inputs.recordCountTarget ? t(n.inputs.recordCountTarget) : e.$element;
                    i[n.inputs.recordCountPlacement](this.create())
                }
            }

            function c(e, n) {
                this.init = function() {
                    this.attach()
                }, this.create = function() {
                    var i = t("<div></div>", {
                        html: "<span>" + n.inputs.processingText + "</span>",
                        id: "dynatable-processing-" + e.element.id,
                        "class": "dynatable-processing",
                        style: "position: absolute; display: none;"
                    });
                    return i
                }, this.position = function() {
                    var n = t("#dynatable-processing-" + e.element.id),
                        i = n.children("span"),
                        r = i.outerHeight(),
                        o = i.outerWidth(),
                        s = e.$element,
                        a = s.offset(),
                        l = s.outerHeight(),
                        c = s.outerWidth();
                    return n.offset({
                        left: a.left,
                        top: a.top
                    }).width(c).height(l), i.offset({
                        left: a.left + (c - o) / 2,
                        top: a.top + (l - r) / 2
                    }), n
                }, this.attach = function() {
                    e.$element.before(this.create())
                }, this.show = function() {
                    t("#dynatable-processing-" + e.element.id).show(), this.position()
                }, this.hide = function() {
                    t("#dynatable-processing-" + e.element.id).hide()
                }
            }

            function u(e, n) {
                this.initOnLoad = function() {
                    return n.features.pushState && history.pushState
                }, this.init = function() {
                    window.onpopstate = function(t) {
                        t.state && t.state.dynatable && e.state.pop(t)
                    }
                }, this.push = function(i) {
                    var r, o, s, a, l, c, u = window.location.search,
                        d = !(window.history.state && window.history.state.dynatable),
                        p = d ? "replaceState" : "pushState";
                    u && /^\?/.test(u) && (u = u.substring(1)), t.extend(r, i), s = P.refreshQueryString(u, i, n), s && (s = "?" + s), a = window.location.hash, o = window.location.pathname, e.$element.trigger("dynatable:push", i), c = {
                        dynatable: {
                            dataset: n.dataset
                        }
                    }, d || (c.dynatable.scrollTop = t(window).scrollTop()), l = JSON.stringify(c), c.dynatable.dataset.perPageOptions = t.makeArray(c.dynatable.dataset.perPageOptions);
                    try {
                        window.history[p](c, "Dynatable state", o + s + a)
                    } catch (h) {
                        c.dynatable.dataset.records = null, window.history[p](c, "Dynatable state", o + s + a)
                    }
                }, this.pop = function(i) {
                    var r = i.state.dynatable;
                    n.dataset = r.dataset, r.scrollTop && t(window).scrollTop(r.scrollTop), r.dataset.records ? e.dom.update() : e.process(!0)
                }
            }

            function d(e, n) {
                this.initOnLoad = function() {
                    return n.features.sort
                }, this.init = function() {
                    var t = window.location.search.match(new RegExp(n.params.sorts + "[^&=]*=[^&]*", "g"));
                    n.dataset.sorts = t ? P.deserialize(t)[n.params.sorts] : {}, n.dataset.sortsKeys = t ? P.keysFromObject(n.dataset.sorts) : []
                }, this.add = function(e, i) {
                    var r = n.dataset.sortsKeys,
                        o = t.inArray(e, r);
                    return n.dataset.sorts[e] = i, -1 === o && r.push(e), b
                }, this.remove = function(e) {
                    var i = n.dataset.sortsKeys,
                        r = t.inArray(e, i);
                    return delete n.dataset.sorts[e], -1 !== r && i.splice(r, 1), b
                }, this.clear = function() {
                    n.dataset.sorts = {}, n.dataset.sortsKeys.length = 0
                }, this.guessType = function(t, e, n) {
                    var i = {
                            string: "string",
                            number: "number",
                            "boolean": "number",
                            object: "number"
                        },
                        r = t[n] ? typeof t[n] : typeof e[n],
                        o = i[r] || "number";
                    return o
                }, this.functions = {
                    number: function(t, e, n, i) {
                        return t[n] === e[n] ? 0 : i > 0 ? t[n] - e[n] : e[n] - t[n]
                    },
                    string: function(t, e, n, i) {
                        var r, o = t["dynatable-sortable-text"] && t["dynatable-sortable-text"][n] ? t["dynatable-sortable-text"][n] : t[n],
                            s = e["dynatable-sortable-text"] && e["dynatable-sortable-text"][n] ? e["dynatable-sortable-text"][n] : e[n];
                        return o = o.toLowerCase(), s = s.toLowerCase(), r = o === s ? 0 : i > 0 ? o > s : s > o, r === !1 ? -1 : r - 0
                    },
                    originalPlacement: function(t, e) {
                        return t["dynatable-original-index"] - e["dynatable-original-index"]
                    }
                }
            }

            function p(e, n) {
                var i = this;
                this.initOnLoad = function() {
                    return n.features.sort
                }, this.init = function() {
                    this.attach()
                }, this.create = function(r) {
                    var o = t(r),
                        s = t("<a></a>", {
                            "class": "dynatable-sort-header",
                            href: "#",
                            html: o.html()
                        }),
                        a = o.data("dynatable-column"),
                        l = P.findObjectInArray(n.table.columns, {
                            id: a
                        });
                    return s.bind("click", function(t) {
                        i.toggleSort(t, s, l), e.process(), t.preventDefault()
                    }), this.sortedByColumn(s, l) && (1 == this.sortedByColumnValue(l) ? this.appendArrowUp(s) : this.appendArrowDown(s)), s
                }, this.removeAll = function() {
                    e.$element.find(n.table.headRowSelector).children("th,td").each(function() {
                        i.removeAllArrows(), i.removeOne(this)
                    })
                }, this.removeOne = function(e) {
                    var n = t(e),
                        i = n.find(".dynatable-sort-header");
                    if (i.length) {
                        var r = i.html();
                        i.remove(), n.html(n.html() + r)
                    }
                }, this.attach = function() {
                    e.$element.find(n.table.headRowSelector).children("th,td").each(function() {
                        i.attachOne(this)
                    })
                }, this.attachOne = function(e) {
                    var n = t(e);
                    n.data("dynatable-no-sort") || n.html(this.create(e))
                }, this.appendArrowUp = function(t) {
                    this.removeArrow(t), t.append("<span class='dynatable-arrow'> &#9650;</span>")
                }, this.appendArrowDown = function(t) {
                    this.removeArrow(t), t.append("<span class='dynatable-arrow'> &#9660;</span>")
                }, this.removeArrow = function(t) {
                    t.find(".dynatable-arrow").remove()
                }, this.removeAllArrows = function() {
                    e.$element.find(".dynatable-arrow").remove()
                }, this.toggleSort = function(t, i, r) {
                    var o = this.sortedByColumn(i, r),
                        s = this.sortedByColumnValue(r);
                    if (n.inputs.multisort && P.anyMatch(t, n.inputs.multisort, function(e, n) {
                            return t[n]
                        }) || (this.removeAllArrows(), e.sorts.clear()), o)
                        if (1 == s) {
                            for (var a = 0, l = r.sorts.length; l > a; a++) e.sorts.add(r.sorts[a], -1);
                            this.appendArrowDown(i)
                        } else {
                            for (var a = 0, l = r.sorts.length; l > a; a++) e.sorts.remove(r.sorts[a]);
                            this.removeArrow(i)
                        }
                    else {
                        for (var a = 0, l = r.sorts.length; l > a; a++) e.sorts.add(r.sorts[a], 1);
                        this.appendArrowUp(i)
                    }
                }, this.sortedByColumn = function(t, e) {
                    return P.allMatch(n.dataset.sorts, e.sorts, function(t, e) {
                        return e in t
                    })
                }, this.sortedByColumnValue = function(t) {
                    return n.dataset.sorts[t.sorts[0]]
                }
            }

            function h(e, n) {
                var i = this;
                this.initOnLoad = function() {
                    return n.inputs.queries || n.features.search
                }, this.init = function() {
                    var t = window.location.search.match(new RegExp(n.params.queries + "[^&=]*=[^&]*", "g"));
                    n.dataset.queries = t ? P.deserialize(t)[n.params.queries] : {}, "" === n.dataset.queries && (n.dataset.queries = {}), n.inputs.queries && this.setupInputs()
                }, this.add = function(t, e) {
                    return n.features.paginate && (n.dataset.page = 1), n.dataset.queries[t] = e, b
                }, this.remove = function(t) {
                    return delete n.dataset.queries[t], b
                }, this.run = function() {
                    for (query in n.dataset.queries)
                        if (n.dataset.queries.hasOwnProperty(query)) {
                            var r = n.dataset.queries[query];
                            if (void 0 === i.functions[query]) {
                                var o = P.findObjectInArray(n.table.columns, {
                                    id: query
                                });
                                if (!o) {
                                    t.error("Query named '" + query + "' called, but not defined in queries.functions");
                                    continue
                                }
                                i.functions[query] = function(t, e) {
                                    return t[query] == e
                                }
                            }
                            n.dataset.records = t.map(n.dataset.records, function(t) {
                                return i.functions[query](t, r) ? t : null
                            })
                        }
                    n.dataset.queryRecordCount = e.records.count()
                }, this.runSearch = function(i) {
                    var r = t.extend({}, n.dataset.queries);
                    i ? this.add("search", i) : this.remove("search"), P.objectsEqual(n.dataset.queries, r) || e.process()
                }, this.setupInputs = function() {
                    n.inputs.queries.each(function() {
                        var r = t(this),
                            o = r.data("dynatable-query-event") || n.inputs.queryEvent,
                            s = r.data("dynatable-query") || r.attr("name") || this.id,
                            a = function(r) {
                                var o = t(this).val();
                                return "" === o && (o = void 0), o === n.dataset.queries[s] ? !1 : (o ? i.add(s, o) : i.remove(s), e.process(), void r.preventDefault())
                            };
                        r.attr("data-dynatable-query", s).bind(o, a).bind("keypress", function(t) {
                            13 == t.which && a.call(this, t)
                        }), n.dataset.queries[s] && r.val(decodeURIComponent(n.dataset.queries[s]))
                    })
                }, this.functions = {
                    search: function(t, e) {
                        var n = !1;
                        for (attr in t)
                            if (t.hasOwnProperty(attr)) {
                                var i = t[attr];
                                if ("string" == typeof i && -1 !== i.toLowerCase().indexOf(e.toLowerCase())) {
                                    n = !0;
                                    break
                                }
                            } else;
                        return n
                    }
                }
            }

            function f(e, n) {
                this.initOnLoad = function() {
                    return n.features.search
                }, this.init = function() {
                    this.attach()
                }, this.create = function() {
                    var i = t("<input />", {
                            type: "search",
                            id: "dynatable-query-search-" + e.element.id,
                            "data-dynatable-query": "search",
                            value: n.dataset.queries.search
                        }),
                        r = t("<span></span>", {
                            id: "dynatable-search-" + e.element.id,
                            "class": "dynatable-search",
                            text: "Search: "
                        }).append(i);
                    return i.bind(n.inputs.queryEvent, function() {
                        e.queries.runSearch(t(this).val())
                    }).bind("keypress", function(n) {
                        13 == n.which && (e.queries.runSearch(t(this).val()), n.preventDefault())
                    }), r
                }, this.attach = function() {
                    var i = n.inputs.searchTarget ? t(n.inputs.searchTarget) : e.$element;
                    i[n.inputs.searchPlacement](this.create())
                }
            }

            function m(t, e) {
                this.initOnLoad = function() {
                    return e.features.paginate
                }, this.init = function() {
                    var t = window.location.search.match(new RegExp(e.params.page + "=([^&]*)"));
                    this.set(t && e.features.pushState ? t[1] : 1)
                }, this.set = function(t) {
                    e.dataset.page = parseInt(t, 10)
                }
            }

            function g(e, n) {
                var i = this;
                this.initOnLoad = function() {
                    return n.features.paginate
                }, this.init = function() {
                    var t = window.location.search.match(new RegExp(n.params.perPage + "=([^&]*)"));
                    t && n.features.pushState ? this.set(t[1], !0) : this.set(n.dataset.perPageDefault, !0), n.features.perPageSelect && this.attach()
                }, this.create = function() {
                    for (var r = t("<select>", {
                            id: "dynatable-per-page-" + e.element.id,
                            "class": "dynatable-per-page-select"
                        }), o = 0, s = n.dataset.perPageOptions.length; s > o; o++) {
                        var a = n.dataset.perPageOptions[o],
                            l = n.dataset.perPage == a ? 'selected="selected"' : "";
                        r.append('<option value="' + a + '" ' + l + ">" + a + "</option>")
                    }
                    return r.bind("change", function() {
                        i.set(t(this).val()), e.process()
                    }), t("<span />", {
                        "class": "dynatable-per-page"
                    }).append("<span class='dynatable-per-page-label'>" + n.inputs.perPageText + "</span>").append(r)
                }, this.attach = function() {
                    var i = n.inputs.perPageTarget ? t(n.inputs.perPageTarget) : e.$element;
                    i[n.inputs.perPagePlacement](this.create())
                }, this.set = function(t, i) {
                    i || e.paginationPage.set(1), n.dataset.perPage = parseInt(t)
                }
            }

            function v(e, n) {
                this.initOnLoad = function() {
                    return n.features.paginate
                }, this.init = function() {
                    this.attach()
                }, this.create = function() {
                    var i = '<ul id="dynatable-pagination-links-' + e.element.id + '" class="' + n.inputs.paginationClass + '">',
                        r = n.inputs.paginationLinkClass,
                        o = n.inputs.paginationActiveClass,
                        s = n.inputs.paginationDisabledClass,
                        a = Math.ceil(n.dataset.queryRecordCount / n.dataset.perPage),
                        l = n.dataset.page,
                        c = [n.inputs.paginationGap[0], n.dataset.page - n.inputs.paginationGap[1], n.dataset.page + n.inputs.paginationGap[2], a + 1 - n.inputs.paginationGap[3]];
                    i += "<li><span>Pages: </span></li>";
                    for (var u = 1; a >= u; u++)
                        if (!(u > c[0] && u < c[1] || u > c[2] && u < c[3])) {
                            var d, p, h = e.paginationLinks.buildLink(u, u, r, l == u, o);
                            if (d = t.inArray(u, c), p = c[d + 1], d > 0 && 1 !== u && p && p > u + 1) {
                                var f = '<li><span class="dynatable-page-break">&hellip;</span></li>';
                                h = 2 > d ? f + h : h + f
                            }
                            if (n.inputs.paginationPrev && 1 === u) {
                                var m = e.paginationLinks.buildLink(l - 1, n.inputs.paginationPrev, r + " " + n.inputs.paginationPrevClass, 1 === l, s);
                                h = m + h
                            }
                            if (n.inputs.paginationNext && u === a) {
                                var g = e.paginationLinks.buildLink(l + 1, n.inputs.paginationNext, r + " " + n.inputs.paginationNextClass, l === a, s);
                                h += g
                            }
                            i += h
                        }
                    i += "</ul>";
                    var v = "#dynatable-pagination-links-" + e.element.id + " a." + r + ":not(." + o + ",." + s + ")";
                    return t(document).undelegate(v, "click.dynatable"), t(document).delegate(v, "click.dynatable", function(i) {
                        $this = t(this), $this.closest(n.inputs.paginationClass).find("." + o).removeClass(o), $this.addClass(o), e.paginationPage.set($this.data("dynatable-page")), e.process(), i.preventDefault()
                    }), i
                }, this.buildLink = function(t, e, n, i, r) {
                    var o = "<a data-dynatable-page=" + t + ' class="' + n,
                        s = "<li";
                    return i && (o += " " + r, s += ' class="' + r + '"'), o += '">' + e + "</a>", s += ">" + o + "</li>"
                }, this.attach = function() {
                    var i = n.inputs.paginationLinkTarget ? t(n.inputs.paginationLinkTarget) : e.$element;
                    i[n.inputs.paginationLinkPlacement](e.paginationLinks.create())
                }
            }
            var _, y, b, w, P, S, C, e, n, i, r, x = {
                dom: o,
                domColumns: s,
                records: a,
                recordsCount: l,
                processingIndicator: c,
                state: u,
                sorts: d,
                sortsHeaders: p,
                queries: h,
                inputsSearch: f,
                paginationPage: m,
                paginationPerPage: g,
                paginationLinks: v
            };
            _ = {
                features: {
                    paginate: !0,
                    sort: !0,
                    pushState: !0,
                    search: !0,
                    recordCount: !0,
                    perPageSelect: !0
                },
                table: {
                    defaultColumnIdStyle: "camelCase",
                    columns: null,
                    headRowSelector: "thead tr",
                    bodyRowSelector: "tbody tr",
                    headRowClass: null
                },
                inputs: {
                    queries: null,
                    sorts: null,
                    multisort: ["ctrlKey", "shiftKey", "metaKey"],
                    page: null,
                    queryEvent: "blur change",
                    recordCountTarget: null,
                    recordCountPlacement: "after",
                    paginationLinkTarget: null,
                    paginationLinkPlacement: "after",
                    paginationClass: "dynatable-pagination-links",
                    paginationLinkClass: "dynatable-page-link",
                    paginationPrevClass: "dynatable-page-prev",
                    paginationNextClass: "dynatable-page-next",
                    paginationActiveClass: "dynatable-active-page",
                    paginationDisabledClass: "dynatable-disabled-page",
                    paginationPrev: "Previous",
                    paginationNext: "Next",
                    paginationGap: [1, 2, 2, 1],
                    searchTarget: null,
                    searchPlacement: "before",
                    perPageTarget: null,
                    perPagePlacement: "before",
                    perPageText: "Show: ",
                    recordCountText: "Showing ",
                    processingText: "Processing..."
                },
                dataset: {
                    ajax: !1,
                    ajaxUrl: null,
                    ajaxCache: null,
                    ajaxOnLoad: !1,
                    ajaxMethod: "GET",
                    ajaxDataType: "json",
                    totalRecordCount: null,
                    queries: {},
                    queryRecordCount: null,
                    page: null,
                    perPageDefault: 10,
                    perPageOptions: [10, 20, 50, 100],
                    sorts: {},
                    sortsKeys: null,
                    sortTypes: {},
                    records: null
                },
                writers: {
                    _rowWriter: e,
                    _cellWriter: n,
                    _attributeWriter: i
                },
                readers: {
                    _rowReader: null,
                    _attributeReader: r
                },
                params: {
                    dynatable: "dynatable",
                    queries: "queries",
                    sorts: "sorts",
                    page: "page",
                    perPage: "perPage",
                    offset: "offset",
                    records: "records",
                    record: null,
                    queryRecordCount: "queryRecordCount",
                    totalRecordCount: "totalRecordCount"
                }
            }, b = {
                init: function(e, n) {
                    return this.settings = y(n), this.element = e, this.$element = t(e), S.call(this), this
                },
                process: function(t) {
                    C.call(this, t)
                }
            }, y = function(e) {
                var n = t.extend(!0, {}, _, e);
                return e && (e.inputs && (e.inputs.multisort && (n.inputs.multisort = e.inputs.multisort), e.inputs.paginationGap && (n.inputs.paginationGap = e.inputs.paginationGap)), e.dataset && e.dataset.perPageOptions && (n.dataset.perPageOptions = e.dataset.perPageOptions)), n
            }, S = function() {
                this.$element.trigger("dynatable:preinit", this);
                for (model in x)
                    if (x.hasOwnProperty(model)) {
                        var t = this[model] = new x[model](this, this.settings);
                        t.initOnLoad() && t.init()
                    }
                this.$element.trigger("dynatable:init", this), (!this.settings.dataset.ajax || this.settings.dataset.ajax && this.settings.dataset.ajaxOnLoad || this.settings.features.paginate) && this.process()
            }, C = function(e) {
                var n = {};
                if (this.$element.trigger("dynatable:beforeProcess", n), t.isEmptyObject(this.settings.dataset.queries) || (n[this.settings.params.queries] = this.settings.dataset.queries), this.processingIndicator.show(), this.settings.features.sort && !t.isEmptyObject(this.settings.dataset.sorts) && (n[this.settings.params.sorts] = this.settings.dataset.sorts), this.settings.features.paginate && this.settings.dataset.page) {
                    var i = this.settings.dataset.page,
                        r = this.settings.dataset.perPage;
                    n[this.settings.params.page] = i, n[this.settings.params.perPage] = r, n[this.settings.params.offset] = (i - 1) * r
                }
                if (this.settings.dataset.ajaxData && t.extend(n, this.settings.dataset.ajaxData), this.settings.dataset.ajax) {
                    var o = this,
                        s = {
                            type: o.settings.dataset.ajaxMethod,
                            dataType: o.settings.dataset.ajaxDataType,
                            data: n,
                            error: function() {},
                            success: function(t) {
                                o.$element.trigger("dynatable:ajax:success", t), o.records.updateFromJson(t), o.dom.update(), !e && o.state.initOnLoad() && o.state.push(n)
                            },
                            complete: function() {
                                o.processingIndicator.hide()
                            }
                        };
                    s.url = this.settings.dataset.ajaxUrl ? this.settings.dataset.ajaxUrl : P.refreshQueryString(window.location.href, {}, this.settings), null !== this.settings.dataset.ajaxCache && (s.cache = this.settings.dataset.ajaxCache), t.ajax(s)
                } else this.records.resetOriginal(), this.queries.run(), this.settings.features.sort && this.records.sort(), this.settings.features.paginate && this.records.paginate(), this.dom.update(), this.processingIndicator.hide(), !e && this.state.initOnLoad() && this.state.push(n);
                this.$element.trigger("dynatable:afterProcess", n)
            }, w = {
                initOnLoad: function() {
                    return !0
                },
                init: function() {}
            };
            for (model in x)
                if (x.hasOwnProperty(model)) {
                    var k = x[model];
                    k.prototype = w
                }
            P = b.utility = {
                normalizeText: function(t, e) {
                    return t = this.textTransform[e](t)
                },
                textTransform: {
                    trimDash: function(t) {
                        return t.replace(/^\s+|\s+$/g, "").replace(/\s+/g, "-")
                    },
                    camelCase: function(t) {
                        return t = this.trimDash(t), t.replace(/(\-[a-zA-Z])/g, function(t) {
                            return t.toUpperCase().replace("-", "")
                        }).replace(/([A-Z])([A-Z]+)/g, function(t, e, n) {
                            return e + n.toLowerCase()
                        }).replace(/^[A-Z]/, function(t) {
                            return t.toLowerCase()
                        })
                    },
                    dashed: function(t) {
                        return t = this.trimDash(t), this.lowercase(t)
                    },
                    underscore: function(t) {
                        return t = this.trimDash(t), this.lowercase(t.replace(/(-)/g, "_"))
                    },
                    lowercase: function(t) {
                        return t.replace(/([A-Z])/g, function(t) {
                            return t.toLowerCase()
                        })
                    }
                },
                deserialize: function(e) {
                    if (!e) return {};
                    "object" == typeof e && (e = e.join("&"));
                    for (var n = {}, i = e.split("&"), r = 0; r < i.length; r++) {
                        var o, s, a = i[r].split("="),
                            l = decodeURIComponent(a[0]);
                        if (a[1]) {
                            for (o = decodeURIComponent(a[1].replace(/\+/g, " ")); s = l.match(/([^&=]+)\[([^&=]+)\]$/);) {
                                var c = o;
                                l = s[1], o = {}, "][" == s[2].substr(s[2].length - 2) ? o[s[2].substr(0, s[2].length - 2)] = [c] : o[s[2]] = c
                            }
                            "undefined" == typeof n[l] ? n[l] = "[]" != l.substr(l.length - 2) ? o : [o] : "string" == typeof n[l] ? n[l] = o : "object" == typeof n[l] ? n[l] = t.extend({}, n[l], o) : n[l].push(o)
                        }
                    }
                    return n
                },
                refreshQueryString: function(e, n, i) {
                    {
                        var r, o = this,
                            s = e.split("?");
                        s.shift()
                    }
                    r = this.deserialize(e);
                    for (p in i.params)
                        if (i.params.hasOwnProperty(p)) {
                            var a = i.params[p];
                            if (!i.features.sort && "sorts" == p || !i.features.paginate && o.anyMatch(p, ["page", "perPage", "offset"], function(t, e) {
                                    return t == e
                                })) continue;
                            if (("page" === p || "offset" === p) && 1 === n.page) {
                                r[a] && delete r[a];
                                continue
                            }
                            if ("perPage" === p && n[a] == i.dataset.perPageDefault) {
                                r[a] && delete r[a];
                                continue
                            }
                            if ("queries" == p && n[a]) {
                                var l = i.inputs.queries || [],
                                    c = t.makeArray(l.map(function() {
                                        return t(this).attr("name")
                                    }));
                                i.features.search && c.push("search");
                                for (var u = 0, d = c.length; d > u; u++) {
                                    var p = c[u];
                                    n[a][p] ? ("undefined" == typeof r[a] && (r[a] = {}), r[a][p] = n[a][p]) : delete r[a][p]
                                }
                                continue
                            }
                            n[a] ? r[a] = n[a] : delete r[a]
                        }
                    return decodeURI(t.param(r))
                },
                keysFromObject: function(t) {
                    var e = [];
                    for (var n in t) e.push(n);
                    return e
                },
                findObjectInArray: function(t, e) {
                    for (var n, i = this, r = 0, o = t.length; o > r; r++) {
                        var s = t[r];
                        if (i.allMatch(s, e, function(t, e, n) {
                                return t[e] == n
                            })) {
                            n = s;
                            break
                        }
                    }
                    return n
                },
                allMatch: function(e, n, i) {
                    var r = !0,
                        o = t.isArray(n);
                    return t.each(n, function(t, n) {
                        var s = o ? i(e, n) : i(e, t, n);
                        return s ? void 0 : r = !1
                    }), r
                },
                anyMatch: function(e, n, i) {
                    var r = !1,
                        o = t.isArray(n);
                    return t.each(n, function(t, n) {
                        var s = o ? i(e, n) : i(e, t, n);
                        return s ? (r = !0, !1) : void 0
                    }), r
                },
                objectsEqual: function(t, e) {
                    for (attr in t)
                        if (t.hasOwnProperty(attr) && (!e.hasOwnProperty(attr) || t[attr] !== e[attr])) return !1;
                    for (attr in e)
                        if (e.hasOwnProperty(attr) && !t.hasOwnProperty(attr)) return !1;
                    return !0
                },
                randomHash: function() {
                    return (65536 * (1 + Math.random()) | 0).toString(16).substring(1)
                }
            }, "function" != typeof Object.create && (Object.create = function(t) {
                function e() {}
                return e.prototype = t, new e
            }), t.dynatableSetup = function(t) {
                _ = y(t)
            }, t.dynatable = function(e) {
                t.fn.dynatable = function(n) {
                    return this.each(function() {
                        t.data(this, "dynatable") || t.data(this, "dynatable", Object.create(e).init(this, n))
                    })
                }
            }, t.dynatable(b)
        }), define("text-cns!components/dynatable/tmpl_pagination_links.html", [], function() {
            return "<%= pagination_links %>"
        }), define("text-cns!widgets/search/themes/gold/dynatable/tmpl_pagination_links.html", [], function() {
            return "<div class=\"text-right col-sm-12 col-md-8\">\r\n    <% if (pagination_links != 'undefined') {  %>\r\n        <%= pagination_links %>\r\n    <% } %>\r\n</div>\r\n\r\n"
        }), define("text-cns!components/dynatable/tmpl_tab_filter.html", [], function() {
            return ""
        }), define("text-cns!widgets/search/themes/gold/dynatable/tmpl_tab_filter.html", [], function() {
            return '<div class="pull-left margin-bottom-10">\n  <div class="text-right">\n    <button class="btn btn-dull hidden-xs hidden-md hidden-lg border-radius-right-none"><i class="fa fa-tasks"></i></button>\n    <div class="tab-selector select hidden-xs hidden-md hidden-lg">\n      <select class="" name="tabs" style="padding-top: 8px; padding-bottom: 8px;">\n        <% _.each(tabs, function(tab) { %>\n          <option value="<%= tab %>"><%= tab %></option>\n        <% }) %>\n      </select>\n    </div>\n  </div>\n</div>'
        }), define("text-cns!components/dynatable/tmpl_contextual_info.html", [], function() {
            return '<tr class="alert contextualInfo">\r\n	<td colspan="7">\r\n		<div>\r\n			<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>\r\n			<i class="fa fa-balance-scale"></i>\r\n			<strong class="introText"> People that compared this also compared* </strong>\r\n			&nbsp;\r\n			<em> <%= related_company_name %> - <%= related_product_name %> </em>\r\n			&nbsp;&nbsp;\r\n			<strong>\r\n				<a data-dismiss="alert" data-original-prod-id="<%= original_product_id %>" data-original-company-name="<%= original_company_name %>"\r\n				data-original-prod-name="<%= original_product_name %>" data-related-prod-id="<%= related_product_id %>" data-related-prod-name="<%= related_product_name %>"\r\n				data-related-company-name="<%= related_company_name %>" data-related-prod-image="<%=base_url%><%= related_product_image %>" class="add-this" href="#">[+] Add to comparison</a>\r\n			</strong>\r\n		</div>\r\n	</td>\r\n</tr>\r\n'
        }), define("text-cns!components/dynatable/tmpl_mobile_sort.html", [], function() {
            return '<div class="dropdown programmatic-sort pull-right hidden-md hidden-lg">\n  <button class="btn btn-primary btn-wide dropdown-toggle border-radius-left-none" type="button" id="sort-menu-mobile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="fa fa-sort-amount-desc"></i> Sort <span class="caret"></span></button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-mobile">\n  <% _.each(items, function(item) {  %>\n  <li>\n    <a href="#" data-direction="<%= item.direction %>" title="<%= item.title %>"><%= item.text %></a>\n  </li>\n  <% }); %>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_brand/dynatable/tmpl_mobile_sort.html", [], function() {
            return '<div class="dropdown programmatic-sort hidden-tab hidden-sm hidden-md hidden-lg">\n  <button class="btn btn-primary btn-wide dropdown-toggle border-radius-left-none" type="button" id="sort-menu-mobile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="fa fa-sort-amount-desc"></i> Sort <span class="caret"></span></button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-mobile">\n  <% _.each(items, function(item) {  %>\n  <li>\n    <a href="#" data-direction="<%= item.direction %>" title="<%= item.title %>"><%= item.text %></a>\n  </li>\n  <% }); %>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/dynatable/tmpl_mobile_sort.html", [], function() {
            return '<div class="dropdown programmatic-sort hidden-sm hidden-md hidden-lg">\n  <button class="btn btn-primary btn-wide dropdown-toggle border-radius-left-none" type="button" id="sort-menu-mobile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"><i class="fa fa-sort-amount-desc"></i> Sort <span class="caret"></span></button>\n  <ul class="dropdown-menu" aria-labelledby="sort-menu-mobile">\n  <% _.each(items, function(item) {  %>\n  <li>\n    <a href="#" data-direction="<%= item.direction %>" title="<%= item.title %>"><%= item.text %></a>\n  </li>\n  <% }); %>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/dynatable/tmpl_pagination_links.html", [], function() {
            return "<div class=\"text-right col-sm-12 col-md-8\">\r\n    <% if (pagination_links != 'undefined') {  %>\r\n        <%= pagination_links %>\r\n    <% } %>\r\n</div>\r\n\r\n"
        }), define("text-cns!widgets/search/themes/blue/dynatable/tmpl_tab_filter.html", [], function() {
            return '<div class="pull-right margin-bottom-10">\n  <div class="text-right">\n    <div class="tab-selector select hidden-xs hidden-md hidden-lg">\n      <select class="" name="tabs" style="padding-top: 8px; padding-bottom: 8px;">\n        <% _.each(tabs, function(tab) { %>\n          <option value="<%= tab %>"><%= tab %></option>\n        <% }) %>\n      </select>\n    </div>\n  </div>\n</div>'
        }), define("text-cns!widgets/search/themes/blue/dynatable/tmpl_pagination_links.html", [], function() {
            return "<div class=\"text-right col-sm-12 col-md-8\">\r\n    <% if (pagination_links != 'undefined') {  %>\r\n        <%= pagination_links %>\r\n    <% } %>\r\n</div>\r\n\r\n"
        }),
        function() {
            define("components/dynatable/templates", ["require", "text-cns!components/dynatable/tmpl_pagination_links.html", "text-cns!widgets/search/themes/gold/dynatable/tmpl_pagination_links.html", "text-cns!components/dynatable/tmpl_tab_filter.html", "text-cns!widgets/search/themes/gold/dynatable/tmpl_tab_filter.html", "text-cns!components/dynatable/tmpl_contextual_info.html", "text-cns!components/dynatable/tmpl_mobile_sort.html", "text-cns!widgets/search/themes/blue_brand/dynatable/tmpl_mobile_sort.html", "text-cns!widgets/search/themes/blue_product/dynatable/tmpl_mobile_sort.html", "text-cns!widgets/search/themes/blue_product/dynatable/tmpl_pagination_links.html", "text-cns!widgets/search/themes/blue/dynatable/tmpl_tab_filter.html", "text-cns!widgets/search/themes/blue/dynatable/tmpl_pagination_links.html"], function(t) {
                return t("text-cns!components/dynatable/tmpl_pagination_links.html"), t("text-cns!widgets/search/themes/gold/dynatable/tmpl_pagination_links.html"), t("text-cns!components/dynatable/tmpl_tab_filter.html"), t("text-cns!widgets/search/themes/gold/dynatable/tmpl_tab_filter.html"), t("text-cns!components/dynatable/tmpl_contextual_info.html"), t("text-cns!components/dynatable/tmpl_mobile_sort.html"), t("text-cns!widgets/search/themes/blue_brand/dynatable/tmpl_mobile_sort.html"), t("text-cns!widgets/search/themes/blue_product/dynatable/tmpl_mobile_sort.html"), t("text-cns!widgets/search/themes/blue_product/dynatable/tmpl_pagination_links.html"), t("text-cns!widgets/search/themes/blue/dynatable/tmpl_tab_filter.html"), t("text-cns!widgets/search/themes/blue/dynatable/tmpl_pagination_links.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                },
                i = [].indexOf || function(t) {
                    for (var e = 0, n = this.length; n > e; e++)
                        if (e in this && this[e] === t) return e;
                    return -1
                };
            define("components/dynatable/Dynatable", ["require", "jquery", "cns-jquery", "underscore", "libraries/Analytics", "backbone", "cookies", "libraries/GAQHelper", "components/base/View", "components/star_popover/StarPopoverView", "libraries/Loader", "libraries/Canstar", "libraries/Constants", "libraries/Calculators", "libraries/Precalculators", "libraries/Transforms", "libraries/Normalizers", "libraries/Leads", "components/FieldViews", "jquery.dynatable", "jquery.lazyload", "components/dynatable/templates"], function(e) {
                var r, o, s, a, l, c, u, d, p, h, f, m, g, v, _, y, b, w, P;
                return r = e("jquery"), w = e("cns-jquery"), P = e("underscore"), o = e("libraries/Analytics"), s = e("backbone"), u = e("cookies"), h = e("libraries/GAQHelper"), b = e("components/base/View"), _ = e("components/star_popover/StarPopoverView"), m = e("libraries/Loader"), l = e("libraries/Canstar"), c = e("libraries/Constants"), a = e("libraries/Calculators"), v = e("libraries/Precalculators"), y = e("libraries/Transforms"), g = e("libraries/Normalizers"), f = e("libraries/Leads"), p = e("components/FieldViews"), e("jquery.dynatable"), e("jquery.lazyload"), e("components/dynatable/templates"), d = function(e) {
                    function s() {
                        return this.bubbleEvent = t(this.bubbleEvent, this), this.savePrimarySort = t(this.savePrimarySort, this), this.onExcludeRow = t(this.onExcludeRow, this), this.onDrawerToggle = t(this.onDrawerToggle, this), this.onContextualAddClose = t(this.onContextualAddClose, this), this.onContextualAddClick = t(this.onContextualAddClick, this), this.onWindowResize = t(this.onWindowResize, this), this.customToggleSort = t(this.customToggleSort, this), this.setCustomArrowDown = t(this.setCustomArrowDown, this), this.setCustomArrowUp = t(this.setCustomArrowUp, this), this.setCustomArrowIcon = t(this.setCustomArrowIcon, this), this.removeCustomArrows = t(this.removeCustomArrows, this), this.isDisclaimerRequired = t(this.isDisclaimerRequired, this), this.compareIsEnabled = t(this.compareIsEnabled, this), this.moveColumn = t(this.moveColumn, this), this.dynatable_slugify = t(this.dynatable_slugify, this), this.isRateCityEnabled = t(this.isRateCityEnabled, this), this.dispose = t(this.dispose, this), this.exportTable = t(this.exportTable, this), this.compareNumbers = t(this.compareNumbers, this), this.numberSort = t(this.numberSort, this), this.calculateTags = t(this.calculateTags, this), this.stringSort = t(this.stringSort, this), this.starRatingSort = t(this.starRatingSort, this), this.sortFunction = t(this.sortFunction, this), this.overrideSort = t(this.overrideSort, this), this._segmentArray = t(this._segmentArray, this), this.numericPreSort = t(this.numericPreSort, this), this.starRatingPreSort = t(this.starRatingPreSort, this), this.configureDefaultSorts = t(this.configureDefaultSorts, this), this.getFilteredRecordCount = t(this.getFilteredRecordCount, this), this.getRecordDataFromEl = t(this.getRecordDataFromEl, this), this.onStarOverlayClick = t(this.onStarOverlayClick, this), this.onLeadPageClick = t(this.onLeadPageClick, this), this.onLeadPopupClick = t(this.onLeadPopupClick, this), this.onSortClick = t(this.onSortClick, this), this.onSortButtonClick = t(this.onSortButtonClick, this), this.onCompareButtonClick = t(this.onCompareButtonClick, this), this.onCompareInputCheck = t(this.onCompareInputCheck, this), this._renderContextualInfo = t(this._renderContextualInfo, this), this.forciblyAddProducts = t(this.forciblyAddProducts, this), this.removeProductFromCompare = t(this.removeProductFromCompare, this), this.resetComparisonProducts = t(this.resetComparisonProducts, this), this.refreshDesktopSortList = t(this.refreshDesktopSortList, this), this.refreshDesktopSortButton = t(this.refreshDesktopSortButton, this), this.onTableHeadClick = t(this.onTableHeadClick, this), this.modifyCompanyImages = t(this.modifyCompanyImages, this), this.hideStarPopover = t(this.hideStarPopover, this), this.showStarPopover = t(this.showStarPopover, this), this.setupStarPopoverTriggers = t(this.setupStarPopoverTriggers, this), this.appendStarPopover = t(this.appendStarPopover, this), this.adjustHiddenIfEmptyColumns = t(this.adjustHiddenIfEmptyColumns, this), this.afterDynatableUpdate = t(this.afterDynatableUpdate, this), this.triggerTableUpdate = t(this.triggerTableUpdate, this), this.afterProcess = t(this.afterProcess, this), this.createTabsWidthArray = t(this.createTabsWidthArray, this), this.calculateTotalTabWidth = t(this.calculateTotalTabWidth, this), this.setTabMargin = t(this.setTabMargin, this), this.animatePagination = t(this.animatePagination, this), this.renderTabs = t(this.renderTabs, this), this.renderLegalNotice = t(this.renderLegalNotice, this), this.processFieldViews = t(this.processFieldViews, this), this.customCellWriter = t(this.customCellWriter, this), this.isDefaultColumn = t(this.isDefaultColumn, this), this.onPopoverShow = t(this.onPopoverShow, this), this.renderProgrammaticSort = t(this.renderProgrammaticSort, this), this.renderMobileSort = t(this.renderMobileSort, this), this.createPaginationLinks = t(this.createPaginationLinks, this), this.createPerPagePagination = t(this.createPerPagePagination, this), this.hasResults = t(this.hasResults, this), this.hidePopover = t(this.hidePopover, this), this.showPopover = t(this.showPopover, this), this.setupSortPopover = t(this.setupSortPopover, this), this.getSortConfig = t(this.getSortConfig, this), this.render = t(this.render, this), this.configureTable = t(this.configureTable, this), this.verifyCtorParams = t(this.verifyCtorParams, this), this.initialize = t(this.initialize, this), s.__super__.constructor.apply(this, arguments)
                    }
                    return n(s, e), s.prototype.path = "components/dynatable", s.prototype.id = "dynatable", s.prototype.templates = {
                        pagination_links: "!!tmpl_pagination_links.html",
                        tab_filter: "!!tmpl_tab_filter.html",
                        contextual_info: "!!tmpl_contextual_info.html",
                        mobile_sort: "!!tmpl_mobile_sort.html",
                        no_results_filtered: "!!no_results_filtered.html"
                    }, s.stylesheets = ["components/dynatable/dynatable.css"], s.prototype.events = {
                        "click nav a": "onTabClick",
                        "change .tab-selector select": "onTabSelectorChange",
                        "change input.compare": "onCompareInputCheck",
                        "click th.compare button": "onCompareButtonClick",
                        "click thead th": "onTableHeadClick",
                        "click .programmatic-sort li": "onSortClick",
                        "click .programmatic-sort": "onSortButtonClick",
                        "click td .lead-popup": "onLeadPopupClick",
                        "click td .lead-page": "onLeadPageClick",
                        "click .contextualInfo a.add-this": "onContextualAddClick",
                        "click .star-tooltip": "onStarOverlayClick",
                        "click .contextualInfo .close": "onContextualAddClose",
                        "click a.exclude-row": "onExcludeRow",
                        "click a.toggle-drawer": "onDrawerToggle",
                        "click td.features img": "onDrawerToggle",
                        "click [data-trackevent]": "bubbleEvent"
                    }, s.prototype.columnsToShowOnAllTabs = ["Company", "Product Name", "Compare", "Apply"], s.prototype.initialize = function(t) {
                        var e, n, i, r, o, s, l, u, d;
                        return this.field_views = [], this.verifyCtorParams() ? (this.dynatableConfig = null != (i = this.options.configs.table.components) ? i.dynatable : void 0, this.setupDefaultMessages(), this.configureTable(), this.totalRecords = this.collection.length, this.transforms = new y(this.collection, {
                            location: c.TABLE_PAGE,
                            similarProductsEnabled: null != (r = this.options.configs.table.similar_products_enabled) ? r : !1,
                            isTableSnapshot: null != (o = this.options.isTableSnapshot) ? o : !1
                        }), n = null, (null != (s = this.dynatableConfig) ? s.precalculations : void 0) && (e = new v(this.collection), n = e.generatePrecalculations(null != (l = this.dynatableConfig) ? l.precalculations : void 0)), this.calculators = new a(n), this.on("forciblyAddProducts", this.forciblyAddProducts), this.on("removeProductFromCompare", this.removeProductFromCompare), (null != (u = this.dynatableConfig) ? u.star_popover : void 0) === !0 && (this.starPopover = new _({
                            tableProfile: this.options.profileName
                        })), null != (null != (d = t.configs) ? d.product_etl_configs : void 0) && (this.prod_name_field = t.configs.product_etl_configs.prod_name_field, this.company_name_field = t.configs.product_etl_configs.company_name_field, this.id_field = t.configs.product_etl_configs.id_field), null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) ? canstar_widget.vent.on("dropdown_sort:changed", this.onSortClick) : void 0) : void 0
                    }, s.prototype.verifyCtorParams = function() {
                        return null == this.options.configs.table ? ("undefined" != typeof console && null !== console && console.error("Table config not defined."), !1) : null == this.options.configs.profile ? ("undefined" != typeof console && null !== console && console.error("Current profile -", canstar_widget.faceted_search.profile, "- does not exist in table config"), !1) : !0
                    }, s.prototype.configureTable = function() {
                        var t, e, n, i, r, o, s, a, c, u, d, p, h, f, m, g, v, _, y, b;
                        if (this.options.hasOwnProperty("compareShortlist") && this.options.compareShortlist && (this.compareShortlist = this.options.compareShortlist), this.tabs = [], c = [], i = this.options.configs.table.field_defs || {}, r = {}, this.options.configs.profile && this.options.configs.profile.tabs) {
                            m = 0, g = this.options.configs.profile.tabs;
                            for (f in g)
                                if (s = g[f], s.hide_when && l.prototype.shouldBeHidden(s.hide_when.lvalue, s.hide_when.rvalue)) c.push(f);
                                else {
                                    this.tabs.push(f), this.options.configs.table.field_defs || P.extend(i, s.fields), s.fields.Compare && this.compareIsEnabled() && (this.comparison_products = {}), v = s.fields;
                                    for (d in v) n = v[d], r[d] || (r[d] = []), m > 0 && ("Company" === d || "Product Name" === d) || r[d].push(f);
                                    m++
                                }
                        } else "undefined" != typeof console && null !== console && console.error("@options.configs.profile -", this.options.configs.profile, "-is not correctly formed.");
                        for (n in i) p = i[n], p.hide_when && l.prototype.shouldBeHidden(p.hide_when.lvalue, p.hide_when.rvalue, p.hide_when.comparator) && (f = r[n]);
                        this.columns = [], this.columnNames = [], h = void 0, o = void 0, t = void 0, u = 0;
                        for (n in i) {
                            p = i[n], _ = r[n];
                            for (m in _)
                                if (f = _[m], a = f && this.isDefaultColumn(f) ? void 0 : f, !(a && P.contains(c, a) || p.hide_when && l.prototype.shouldBeHidden(p.hide_when.lvalue, p.hide_when.rvalue, p.hide_when.comparator))) {
                                    switch (e = {
                                        name: n,
                                        slug: this.dynatable_slugify(n),
                                        mobile: !1,
                                        tablet: !0,
                                        show_header_text: !0,
                                        sortable: !1,
                                        sortingType: "string",
                                        tab: a,
                                        tooltip: void 0,
                                        transform: void 0
                                    }, P.extend(e, p), e.sortable && (e.sortingType = e.sort_numeric ? "number" : "string"), p.summary && (this.hasSummaries = !0, this.summaries[f].push({
                                        column: n,
                                        transform: p.transform,
                                        normalizer: p.normalizer,
                                        values: P.isArray(p.summary) && p.summary || ["MIN", "MAX", "AVG"]
                                    })), n) {
                                        case "Product Name":
                                            h = u;
                                            break;
                                        case "Compare":
                                            this.compareIsEnabled() && (o = u);
                                            break;
                                        case "Apply":
                                            t = u
                                    }
                                    u++, this.columns.push(e), this.columnNames.push(e.name)
                                }
                        }
                        return this.moveColumn(this.columns, h, 1), this.moveColumn(this.columnNames, h, 1), o ? (this.moveColumn(this.columns, o, this.columns.length - 1), this.moveColumn(this.columnNames, o, this.columnNames.length - 1), t > o && (t -= 1), this.moveColumn(this.columns, t, this.columns.length - 1), this.moveColumn(this.columnNames, t, this.columnNames.length - 1)) : (this.moveColumn(this.columns, t, this.columns.length - 1), this.moveColumn(this.columnNames, t, this.columnNames.length - 1)), this.currentPerPage = ("undefined" != typeof canstar_widget && null !== canstar_widget && null != (y = canstar_widget.faceted_search) ? y.per_page_default : void 0) || (null != (b = this.dynatableConfig) ? b.per_page_default : void 0) || 10
                    }, s.prototype.render = function() {
                        var t, e, n, i, o, s, a, c, u, d, p, h, f, m, g, v, _, y, b, w, P, S, C, x, k;
                        if (this.$el.html(""), this.$table = r('<table class="full-width table table-faceted-search"><tbody>'), this.getFilteredRecordCount() > 0 && !this.hasResults()) return this.$el.append(r('<p class="no-results">').html(this.templates.no_results_filtered)), this;
                        if (!this.hasResults()) return null != (null != (p = this.dynatableConfig) ? p.empty_results_redirect : void 0) && (c = l.prototype.paramsFromQueryString(window.location.search), null != c && (window.location = null != (h = this.dynatableConfig) ? h.empty_results_redirect.options[c.state] : void 0)), this.$el.append(r('<p class="no-results">').html(this.options.no_results || "We didn't find any results. Try changing your search criteria or filters.")), this;
                        if (this.renderProgrammaticSort(), this.isDisclaimerRequired() && this.$el.append(r('<p class="disclaimer">').html(canstar_widget.faceted_search.star_rating_note)), this.renderTabs(), this.renderTableHead(), this.useNewSort = null != (y = this.options) && null != (b = y.configs) && null != (w = b.table) ? w.sort_override : void 0, this.customSortConfigs = this.getSortConfig(), n = this.serializeCollectionToJSONArray(this.collection.models), this.useNewSort) {
                            if (null != n[0])
                                for (i in n[0])
                                    if (this.requiresCalculation(i, this.useNewSort))
                                        for (a in n) n[a][i] = this.calculateTags(n[a], i);
                            this.currentlySortedBy ? (u = this.currentlySortedBy, n = this.overrideSort(n, u.value, u.field, u.direction)) : (d = null != (null != (P = n[0]) ? P["Star Rating"] : void 0), this.currentlySortedBy = {}, (null != (S = this.dynatableConfig) && null != (C = S.default_sorts) ? C.length : void 0) > 0 ? (e = "desc" === this.dynatableConfig.default_sorts[0][1] ? !1 : !0, this.currentlySortedBy.secondaryField = null != (x = this.dynatableConfig.default_sorts[1]) ? x[0] : void 0, n = this.overrideSort(n, "string", this.dynatableConfig.default_sorts[0][0], e)) : n = d ? this.overrideSort(n, "string", "Star Rating") : this.overrideSort(n, "string", "Company"))
                        }
                        return this.$table.on("dynatable:init", this.configureDefaultSorts).on("dynatable:afterProcess", this.afterProcess).on("dynatable:afterUpdate", this.afterDynatableUpdate).on("dynatable:afterUpdate", this.processFieldViews).dynatable({
                            dataset: {
                                perPageDefault: this.currentPerPage,
                                perPageOptions: (null != (k = this.dynatableConfig) ? k.per_page_options : void 0) || [10, 20, 30],
                                records: this.useNewSort ? n.slice(0, this.currentPerPage) : n,
                                fullRecords: n
                            },
                            sortTypes: {
                                "Star Rating": this.useNewSort ? "" : "starRatingSort"
                            },
                            features: {
                                pushState: !1,
                                search: !1
                            },
                            table: {
                                defaultColumnIdStyle: "dashed"
                            },
                            writers: {
                                _cellWriter: this.customCellWriter
                            },
                            inputs: {
                                paginationLinkTarget: ".dyna-pagination-links",
                                perPageTarget: ".dyna-per-page",
                                paginationLinkPlacement: "append",
                                perPagePlacement: "append",
                                perPageText: "Entries per page: "
                            },
                            overrideSort: this.useNewSort,
                            sortConfig: this.customSortConfigs
                        }), this.dynatable = this.$table.data("dynatable"), this.dynatable.settings.features.sort = !0, (null != (f = this.dynatableConfig) ? f.record_count_above_widget : void 0) === !1 && this.$("nav").before(r('<p class="record-count">').html("Showing " + this.getFilteredRecordCount() + " of " + this.totalRecords + " products that matched your search")), this.$el.append(this.$table), (null != (m = this.dynatableConfig) ? m.show_footer : void 0) !== !1 && (o = r('<div class="dynatable-footer container-fluid"><div class="row"></div></div>'), s = o.find(".row"), s.append(this.createPerPagePagination(n)), s.append(this.createPaginationLinks), this.$el.append(o)), this.refreshDesktopSortList(), (null != (g = this.dynatableConfig) ? g.top_pagination : void 0) && (t = r('<div class="table-extras"> '), t.append(this.dynatable.paginationLinks.create()), t.append(this.dynatable.paginationPerPage.create()), this.$("nav").after(t)), (null != (v = this.dynatableConfig) ? v.show_legal_notice : void 0) !== !1 && this.renderLegalNotice(), r("#dynatable img.lazy").lazyload().trigger("lazyload"), l.prototype.onMobile() ? this.configMobileCellView() : (null != (_ = this.dynatableConfig) ? _.show_sort_popover : void 0) && window.setTimeout(this.showPopover, 2e3), r(window).resize(this.onWindowResize), this.triggerTableUpdate(), this
                    }, s.prototype.getSortConfig = function() {
                        var t, e, n, i, o, s, a, l, c, u;
                        if (e = {}, null != (null != (o = this.options) && null != (s = o.configs) && null != (a = s.table) ? a.field_defs : void 0)) t = this.options.configs.table.field_defs, r.each(t, function(n) {
                            return null != t[n].custom_sort_order && (null == e[n] && (e[n] = {}), e[n].custom_sort_order = t[n].custom_sort_order), null != t[n].sort_as ? (null == e[n] && (e[n] = {}), e[n].sort_as = t[n].sort_as) : void 0
                        });
                        else if (null != (null != (l = this.options) && null != (c = l.configs) && null != (u = c.profile) ? u.tabs : void 0)) {
                            i = this.options.configs.profile.tabs;
                            for (n in i) r.each(i[n].fields, function(t) {
                                return null != i[n].fields[t].custom_sort_order && (null == e[t] && (e[t] = {}), e[t].custom_sort_order = i[n].fields[t].custom_sort_order), null != i[n].fields[t].sort_as ? (null == e[t] && (e[t] = {}), e[t].sort_as = i[n].fields[t].sort_as) : void 0
                            })
                        }
                        return e
                    }, s.prototype.setupSortPopover = function() {
                        var t;
                        if (!u.get("sortPopoverDisplayed")) return t = w(this.$table).find("thead tr .company a"), t.popover({
                            html: !0,
                            trigger: "manual",
                            placement: "top",
                            title: '<a href="#" id="close-me" class="close" data-dismiss="alert">&times;</a>',
                            content: "<div class='bold'>RESULTS HAVE BEEN SORTED BY</div><div class='text'><span class='bold'>Company a-z</span> after <span class='bold'>Star Rating</span></div>"
                        }), t.parent().on("click", ".popover .close", function() {
                            w(this).parents(".popover").popover("hide")
                        })
                    }, s.prototype.showPopover = function() {
                        u.get("sortPopoverDisplayed") || (w("thead tr .company a", this.table).popover("show"), window.setTimeout(this.hidePopover, 5e3), u.set("sortPopoverDisplayed", "true", {
                            expires: 1 / 0
                        }))
                    }, s.prototype.hidePopover = function() {
                        return w("thead tr .company a", this.table).popover("hide")
                    }, s.prototype.hasResults = function() {
                        return 0 !== this.collection.models.length
                    }, s.prototype.createPerPagePagination = function(t) {
                        var e, n, i, o, s;
                        return i = this.dynatable.settings.dataset, i.originalRecords = t, i.records = t, i.queryRecordCount = t.length, e = r('<div class="view-per-page text-left col-md-4 hidden-sm hidden-xs">view per page <ul/>'), n = e.find("ul"), n.addClass("pagination pagination-view-per-page"), s = P.find(i.perPageOptions, function(t) {
                            return function(e) {
                                return e >= t.dynatable.settings.dataset.queryRecordCount
                            }
                        }(this)), o = P.filter(i.perPageOptions, function(t) {
                            return "undefined" == typeof s || s >= t
                        }), P.each(o, function(t) {
                            var e;
                            return e = t === i.perPage ? 'class="active"' : "", n.append(r("<li " + e + "><a data-dynatable-per-page='" + t + "'>" + t + "</a></li>"))
                        }), e.on("click", "a", function(t) {
                            return function(e) {
                                return n.find(".active").removeClass("active"), r(e.target).parent("li").addClass("active"), t.currentPerPage = r(e.target).data("dynatable-per-page"), l.prototype.gaTrackEvent({
                                    event_label: "View per page - " + t.currentPerPage
                                }), t.dynatable.paginationPerPage.set(t.currentPerPage), t.dynatable.process()
                            }
                        }(this))
                    }, s.prototype.createPaginationLinks = function() {
                        var t, e, n, i, o, s, a;
                        return n = this.dynatable.paginationLinks.create(), n = r(n).addClass("pagination pagination-view-per-page").prop("outerHTML"), r(n).find("a.dynatable-page-link").length <= 3 ? "" : (s = this.dynatable.settings.inputs, o = s.paginationClass, i = s.paginationLinkClass, t = s.paginationActiveClass, e = s.paginationDisabledClass, (null != (a = this.dynatableConfig) ? a.pagination_scroll : void 0) !== !1 && this.$el.on("click", "ul." + o + " a." + i + ":not(." + t + ",." + e + ")", function(t) {
                            var e;
                            return r("html, body").animate({
                                scrollTop: null != (e = r("#dynatable").offset()) ? e.top : void 0
                            }, "fast"), l.prototype.gaTrackEvent({
                                event_label: "Pagination - " + r(t.target).text()
                            })
                        }), this.templates.pagination_links({
                            pagination_links: n
                        }))
                    }, s.prototype.setupDefaultMessages = function() {
                        var t, e;
                        return canstar_widget.faceted_search.single_result_note_display !== !1 ? this.options.single_result_legal_notice = canstar_widget.faceted_search.single_result_note && canstar_widget.faceted_search.single_result_note.replace(/\<\/li\>$/g, "").replace(/\<li\>/g, "").split("</li>") || ["Based upon the " + (null != (t = canstar_widget.faceted_search.category) ? t.toLowerCase() : void 0) + " product features you searched for, Canstar&#39;s database has found only one product with those features.  Canstar is providing you with information only;  it is not a credit provider and is not making a suggestion or recommendation to you about this product.", "If you decide to apply for a " + (null != (e = canstar_widget.faceted_search.category) ? e.toLowerCase() : void 0) + ', you will deal directly with a financial institution, and not with Canstar. Rates and product information should be confirmed with the relevant financial institution.  Read our detailed disclosures, important notes and Canstar&#39;s liability disclaimer <a href="/detailed-disclosure/" target="_blank">here</a>.'] : void 0
                    }, s.prototype.renderMobileSort = function() {
                        var t, e, n, i, r, o, s, a, l, c;
                        i = [], t = this.activeTab || this.tabs[0], a = this.columns;
                        for (n in a) e = a[n], r = {}, (null != e ? e.sortable : void 0) === !0 && e.tab === t && ((null != e ? e.custom_sort : void 0) ? P.findWhere(i, {
                            title: e.name,
                            direction: "asc" === e.custom_sort.order ? 1 : -1
                        }) || i.push({
                            direction: "asc" === e.custom_sort.order ? 1 : -1,
                            title: e.name,
                            text: null != (l = null != (c = e.custom_sort) ? c.title : void 0) ? l : e.name
                        }) : (e.sort_asc_text && !P.findWhere(i, {
                            title: e.name,
                            direction: 1
                        }) && i.push({
                            direction: 1,
                            title: e.name,
                            text: "" + e.name + ": " + e.sort_asc_text
                        }), e.sort_desc_text && !P.findWhere(i, {
                            title: e.name,
                            direction: -1
                        }) && i.push({
                            direction: -1,
                            title: e.name,
                            text: "" + e.name + ": " + e.sort_desc_text
                        })));
                        return s = this.templates.mobile_sort({
                            items: i
                        }), o = this.$el.find(".programmatic-sort"), o.length > 0 ? o.replaceWith(s) : this.$el.append(s)
                    }, s.prototype.renderProgrammaticSort = function() {
                        var t;
                        return (null != (t = this.dynatableConfig) ? t.hide_mobile_sort : void 0) !== !0 ? this.renderMobileSort() : void 0
                    }, s.prototype.renderTableHead = function() {
                        var t, e, n, i, o, s, a, l, c, u, d;
                        s = document.createElement("thead"), c = document.createElement("tr"), u = this.columns;
                        for (n in u) {
                            switch (t = u[n], o = document.createElement("th"), o.setAttribute("data-dynatable-column", t.name), null != t.classes && (o.className = t.classes), e = !1, t.name) {
                                case "Compare":
                                    e = !0, o.innerHTML = '<button disabled="disabled" class="hidden-xs hidden-sm btn btn-xs btn-primary">Compare</button><span></span>', o.className += " compare", o.setAttribute("data-dynatable-no-sort", !0);
                                    break;
                                case "Apply":
                                    e = !0, this.isRateCityEnabled() ? (o.innerHTML = "RateCity", o.className += " ratecity proceed") : o.className += " proceed", o.setAttribute("data-dynatable-no-sort", !0);
                                    break;
                                case "Star Rating":
                                    t.mobile = !1, t.tablet = !1
                            }
                            if (t.mobile || "Apply" === t.name || (o.className += " hidden-xs hide-on-mobile"), t.tablet || "Apply" === t.name || (o.className += " hidden-sm"), t.desktop === !1 && (o.className += " hidden-sm hidden-md hidden-lg"), !e) {
                                if (t.slug && (o.className += " " + t.slug), t.tab) {
                                    switch (t.name) {
                                        case "Product Name":
                                        case "Company":
                                            break;
                                        default:
                                            o.setAttribute("data-dynatable-tab", t.tab)
                                    }
                                    t.tab === this.activeTab || this.isDefaultColumn(t.name) || (o.className += " hidden-in-tab")
                                } else o.className += " hidden-without-tab";
                                t.sortable || o.setAttribute("data-dynatable-no-sort", !0), t.tooltip && (t.tooltip_map && (a = P.find(t.tooltip_map, function(t) {
                                    return canstar_widget.faceted_search[t.selector_name] === t.selector_value
                                }), null != a && (t.tooltip = a.tooltip_value)), -1 !== t.tooltip.indexOf("<%=") && (l = P.template(t.tooltip), i = {}, P.each(canstar_widget.stored_selector_params, function() {
                                    return function(t, e) {
                                        return i[e] = t.value
                                    }
                                }(this)), t.tooltip = l(i)), (null != (d = this.dynatableConfig) ? d.use_external_bootstrap : void 0) === !1 ? o.setAttribute("data-dynatable-tooltip", t.tooltip) : (r(o).attr("data-toggle", "tooltip"), r(o).attr("title", t.tooltip), r(o).attr("data-placement", "top"), r(o).attr("data-container", "body"), w(o).tooltip())), t.show_header_text && (o.innerHTML = "<span class='text-center-vertical'>" + t.name + "</span>"), t.sortable || (o.innerHTML = "<span class='dynatable-styled-header'>" + o.innerHTML + "</span>"), t.popover && (w(o).append("<div class='popover-trigger'><span class='fa fa-question-circle'></span></div>"), w(o).popover({
                                    container: "body",
                                    content: t.popover,
                                    html: !0,
                                    placement: "bottom"
                                }), w(o).on("show.bs.popover", this.onPopoverShow))
                            }
                            c.appendChild(o)
                        }
                        return s.appendChild(c), this.$table.prepend(s)
                    }, s.prototype.onPopoverShow = function(t) {
                        var e, n, i;
                        return i = t.target, t.stopPropagation(), this.trigger("popover:open", w(i).data("bs.popover").options), e = function(t) {
                            return w(t.target).is("[data-toggle=popover]") || w(t.target).closest(".popover").length > 0 ? void 0 : (w(i).popover("hide"), w(document).off("click", e), w("body").on("hidden.bs.popover", n))
                        }, n = function(t) {
                            return w(t.target).data("bs.popover").inState.click = !1
                        }, setTimeout(function() {
                            return w(document).on("click", e)
                        }, 50)
                    }, s.prototype.serializeCollectionToJSONArray = function(t) {
                        return P.map(t, function(t) {
                            return function(e) {
                                return e = e.toJSON(), e.columns = t.columns, e
                            }
                        }(this))
                    }, s.prototype.isDefaultColumn = function(t) {
                        return P.contains(this.columnsToShowOnAllTabs, t)
                    }, s.prototype.customCellWriter = function(t, e) {
                        var n, i, r, o, s;
                        switch (i = e.columns[t.index] || {}, r = document.createElement("td"), n = !1, i.hidden && (r.addClass = " hide"), i.styling && r.setAttribute("style", i.styling), i.name) {
                            case "Compare":
                                n = !0, r.className += " compare";
                                break;
                            case "Apply":
                                n = !0, r.className += this.isRateCityEnabled() ? " ratecity proceed" : " proceed"
                        }
                        if (i.mobile || "Apply" === i.name || (r.className += " hidden-xs"), i.tablet || "Apply" === i.name || (r.className += " hidden-sm"), i.desktop === !1 && (r.className += " hidden-sm hidden-md hidden-lg"), !n)
                            if (i.slug && (r.className += " " + i.slug), i.tab) {
                                switch (i.name) {
                                    case "Product Name":
                                    case "Company":
                                        break;
                                    default:
                                        r.setAttribute("data-dynatable-tab", i.tab)
                                }
                                i.tab === this.activeTab || this.isDefaultColumn(i.name) || (r.className += " hidden-in-tab")
                            } else r.className += " hidden-without-tab";
                        return i.classes && (r.className += " " + i.classes), o = e[t.id], s = {}, this.options.configs.table.transformed_api || (i.calculator ? o = this.calculators[i.calculator](e, o, i) : i.transform && (o = this.transforms[i.transform](o, e, i.name))), "null" === o && (o = "<span value='-1' class='fa fa-minus color-light-grey'></span>"), r.innerHTML = o, r.outerHTML.toString()
                    }, s.prototype.processFieldViews = function() {
                        var t;
                        return t = r("[data-view-id]", this.el), P.each(t, function(t) {
                            return function(e) {
                                var n;
                                return n = e.getAttribute("data-view-id"), e.appendChild(t.field_views[n].render())
                            }
                        }(this))
                    }, s.prototype.renderLegalNotice = function() {
                        var t, e, n, i, o;
                        if (1 === this.collection.models.length && P.isArray(this.options.single_result_legal_notice)) {
                            for (t = r("<ul>").addClass("legal-notices"), o = this.options.single_result_legal_notice, n = 0, i = o.length; i > n; n++) e = o[n], t.append("<li>" + e + "</li>");
                            return this.$el.append(t)
                        }
                    }, s.prototype.renderTabs = function() {
                        var t, e, n, i, o, s, a, l;
                        for (t = r('<nav class="hidden-sm hidden-xs">'), this.$tabs = r('<ul class="nav nav-tabs nav-faceted-tabs hidden-xs hidden-sm">'), this.activeTab = this.activeTab || this.tabs[0], l = this.tabs, s = 0, a = l.length; a > s; s++) o = l[s], i = o === this.activeTab ? "active" : "", this.$tabs.append("<li class='" + i + "'><a data-dynatable-tab='" + o + "'>" + o + "</a></li>");
                        return this.tabs.length >= 5 ? (this.$tabs.addClass("overflow"), null != this.tabMargin && this.$tabs.css("margin-left", "" + this.tabMargin + "px"), e = r('<a class="tab-pagination back" direction="-1" >&larr;</a>'), e.click(this.animatePagination), (null == this.currentTabPage || 0 === this.currentTabPage) && e.addClass("inactive"), n = r('<a class="tab-pagination forward" direction="1">&rarr;</a>'), n.click(this.animatePagination), null != this.totalTabPages && this.currentTabPage === this.totalTabPages && n.addClass("inactive"), t.append(e), t.append(this.$tabs), t.append(n)) : this.tabs.length > 1 && t.append(this.$tabs), this.tabs.length > 1 && this.$el.append(this.templates.tab_filter({
                            tabs: this.tabs
                        })), this.$el.append(t)
                    }, s.prototype.animatePagination = function(t) {
                        var e, n, i, o, s, a;
                        return s = t.target, s.className.indexOf("inactive") > 0 ? void 0 : (n = r(".tab-pagination.forward"), e = r(".tab-pagination.back"), this.$tabs.width(this.calculateTotalTabWidth()), a = this.calculateTotalTabWidthPerPage(), this.currentTabPage || (this.currentTabPage = 1), i = parseInt(s.getAttribute("direction"), 10), o = i > 0 ? a[this.currentTabPage] : a[this.currentTabPage - 1], this.setTabMargin(o, i), this.currentTabPage += i, n.removeClass("inactive"), e.removeClass("inactive"), this.totalTabPages = a.length - 1, 1 === this.currentTabPage ? e.addClass("inactive") : this.currentTabPage === this.totalTabPages ? n.addClass("inactive") : void 0)
                    }, s.prototype.setTabMargin = function(t, e) {
                        var n;
                        n = parseInt(this.$tabs.css("margin-left"), 10), this.tabMargin = n - e * t, this.$tabs.animate({
                            marginLeft: "" + this.tabMargin + "px"
                        }, 500)
                    }, s.prototype.calculateTotalTabWidth = function() {
                        var t, e, n, i, r;
                        for (t = 0, e = this.createTabsWidthArray(), i = 0, r = e.length; r > i; i++) n = e[i], t += n;
                        return t
                    }, s.prototype.createTabsWidthArray = function() {
                        var t;
                        return t = [], this.$tabs.children().each(function() {
                            return t.push(r(this).outerWidth(!0))
                        }), t
                    }, s.prototype.viewableTabWidth = function() {
                        return this.$table.outerWidth() - 2 * r(".tab-pagination").outerWidth()
                    }, s.prototype.calculateTotalTabWidthPerPage = function() {
                        var t, e, n, i, r;
                        return t = [0], e = 1, r = 0, n = this.createTabsWidthArray(), i = this.viewableTabWidth(), P.each(n, function(n, o, s) {
                            var a;
                            return a = s[o + 1] || "end", r + n + a > i || "end" === a ? (r += n, t[e] = r, r = 0, ++e) : r += n
                        }), t
                    }, s.prototype.afterProcess = function() {
                        var t, e, n, i;
                        return r("#dynatable")[0] && (null != (n = this.dynatableConfig) ? n.top_pagination : void 0) && (r(".dynatable-pagination-links").unbind().remove(), r(".table-extras").prepend(this.dynatable.paginationLinks.create()), r("#dynatable .dynatable-footer").append(this.dynatable.paginationLinks.create())), this.delegateEvents(this.events), e = this.comparison_products, t = P.clone(this.comparison_products), this.comparison_products = {}, P.each(t, function(t, e) {
                            return r('input[value="' + e.replace("_", "") + '"]').click()
                        }), this.comparison_products = e, 3 === P.keys(this.comparison_products).length && r("input.compare:not(:checked)", this.el).prop("disabled", !0), (null != (i = this.dynatableConfig) ? i.show_sort_popover : void 0) ? this.setupSortPopover() : void 0
                    }, s.prototype.triggerTableUpdate = function() {
                        return this.trigger("afterTableUpdate")
                    }, s.prototype.afterDynatableUpdate = function() {
                        var t, e;
                        return t = r(this.$table).find("th"), t.each(function() {
                            var t, e, n, i;
                            return e = r(this), t = e.find(".dynatable-arrow"), i = t.length, i || (e.find("a").append('<span class="dynatable-arrow"><i class="fa fa-sort"></i></span>'), e.find("a").removeClass("arrow-up"), e.find("a").removeClass("arrow-down")), n = e.find(".popover-trigger").detach(), n ? (e.append(n), e.find("a").click(function(t) {
                                return t.stopPropagation()
                            })) : void 0
                        }), (null != (e = this.dynatableConfig) ? e.star_popover : void 0) === !0 && this.appendStarPopover(), this.adjustHiddenIfEmptyColumns(), this.modifyCompanyImages()
                    }, s.prototype.adjustHiddenIfEmptyColumns = function() {
                        var t;
                        return t = P.map(r("th.hidden-if-empty", this.$table), function(t) {
                            return r(t).attr("data-dynatable-column").toLowerCase()
                        }), P.each(t, function(t) {
                            return function(e) {
                                return r(".hidden-if-empty." + e, t.$table).removeClass("not-empty"), r("td.hidden-if-empty." + e, t.$table).each(function(n, i) {
                                    return "" !== r(i).text() ? r(".hidden-if-empty." + e, t.$table).addClass("not-empty") : void 0
                                })
                            }
                        }(this))
                    }, s.prototype.appendStarPopover = function() {
                        var t, e, n, i;
                        return t = w(this.$table).find("tbody tr .star-rating"), i = "star-tooltip", P.each(t, function() {
                            return function(t) {
                                return r(t).append("<i class='fa fa-question-circle " + i + "'></i>")
                            }
                        }(this)), n = this, e = t.find("." + i), e.popover({
                            html: !0,
                            trigger: "manual",
                            placement: "bottom",
                            content: function() {
                                return n.starPopover.el
                            }
                        }), this.setupStarPopoverTriggers(e)
                    }, s.prototype.setupStarPopoverTriggers = function(t) {
                        var e;
                        return e = this, t.on("click", function() {
                            var n, i, r;
                            return n = w(this), r = n.siblings(".popover").length ? !0 : !1, r ? e.hideStarPopover(n) : (i = w(".popover").siblings().filter(t), i.length ? e.hideStarPopover(i).one("hidden.bs.popover", function() {
                                return e.showStarPopover(n)
                            }) : e.showStarPopover(n))
                        }), t.on("shown.bs.popover", function(t) {
                            return function() {
                                return t.starPopover.trigger("shown"), t.starPopover.gaTrackEvent("open"), t.starPopover.startTimer()
                            }
                        }(this)), t.on("hidden.bs.popover", function(t) {
                            return function() {
                                var e;
                                return e = (new Date).getTime() - t.starPopover.timeOpened, t.starPopover.gaTrackEvent("close", e)
                            }
                        }(this)), w(document).on("click", function(n) {
                            var i, o;
                            return o = r(n.target).closest(t).length, i = r(n.target).closest(".popover").siblings().filter(t).length, o || i ? void 0 : e.hideStarPopover(t.siblings(".popover"))
                        })
                    }, s.prototype.showStarPopover = function(t) {
                        return t.popover("show"), t
                    }, s.prototype.hideStarPopover = function(t) {
                        return t.popover("hide"), t
                    }, s.prototype.modifyCompanyImages = function() {
                        var t, e;
                        return t = this.$table.find("tbody tr .company"), e = this.$table.find("tbody tr td.product-name a"), P.each(t, function() {
                            return function(t, n) {
                                var i, o, s, a;
                                return o = t.innerHTML, s = e[n], a = r(t).closest("tr").find(".star-rating").html(), a = r(a).addClass("hidden-md hidden-lg hide-on-desktop mobile-star-rating").width("auto").prop("outerHTML"), s && (r(t).html(r(s).clone().removeClass("proceed").html(o)), i = r(t).find("a"), i.length > 0 && i.attr("onmousedown") && i.attr("onmousedown", i.attr("onmousedown").replace(/ProdLink|Prod Link/g, "Image Link"))), r(t).append(a)
                            }
                        }(this))
                    }, s.prototype.goToFirstPage = function() {
                        return this.dynatable.settings.dataset.page > 1 ? (this.dynatable.paginationPage.set(1), this.dynatable.process()) : void 0
                    }, s.prototype.onTabSelectorChange = function(t) {
                        var e, n, i, o, s;
                        return e = r(t.target), o = e.val(), o && !e.hasClass("active") ? (this.$table.find("[data-dynatable-tab]").each(function() {
                            var t;
                            return t = r(this), t.data("dynatable-tab") === o ? t.removeClass("hidden-in-tab") : t.addClass("hidden-in-tab")
                        }), this.$tabs.find("li").removeClass("active"), this.$tabs.find('[data-dynatable-tab="' + o + '"]').parent().addClass("active"), this.activeTab = o, null != canstar_widget.faceted_search && (null != (s = this.dynatableConfig) ? s.disable_builtin_tracking : void 0) !== !0 && l.prototype.gaTrackEvent({
                            event_label: "Tab - " + e.text()
                        }), i = r(".tab-pagination").outerWidth(), n = e.position().left + e.outerWidth() - i > this.viewableTabWidth(), n && r(".tab-pagination.forward").click(), this.renderProgrammaticSort()) : void 0
                    }, s.prototype.onTabClick = function(t) {
                        var e, n, i, o, s;
                        return t = t || window.event, t.preventDefault(), e = r(t.target), o = e.data("dynatable-tab"), o && !e.hasClass("active") ? (this.$table.find("[data-dynatable-tab]").each(function() {
                            var t;
                            return t = r(this), t.data("dynatable-tab") === o ? t.removeClass("hidden-in-tab") : t.addClass("hidden-in-tab")
                        }), this.$tabs.find("li").removeClass("active"), e.parent().addClass("active"), this.$(".tab-selector select").val(o), this.activeTab = o, null != canstar_widget.faceted_search && (null != (s = this.dynatableConfig) ? s.disable_builtin_tracking : void 0) !== !0 && l.prototype.gaTrackEvent({
                            event_label: "Tab - " + e.text()
                        }), i = r(".tab-pagination").outerWidth(), n = e.position().left + e.outerWidth() - i > this.viewableTabWidth(), n && r(".tab-pagination.forward").click(), this.refreshDesktopSortList()) : void 0
                    }, s.prototype.onTableHeadClick = function(t) {
                        var e;
                        return "true" !== r(t.target).closest("th").attr("data-dynatable-no-sort") && this.goToFirstPage(), null != canstar_widget.faceted_search && (null != (e = this.dynatableConfig) ? e.disable_builtin_tracking : void 0) !== !0 ? l.prototype.gaTrackEvent(this.options.configs.table.sort_tracking, {
                            "<Column>": r(t.currentTarget).attr("data-dynatable-column")
                        }) : void 0
                    }, s.prototype.refreshDesktopSortButton = function(t, e) {
                        var n;
                        return n = P.find(this.columns, function(e) {
                            return e.name === t
                        }), null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) ? canstar_widget.vent.trigger("dynatable:sort_changed", {
                            column: n,
                            direction: e
                        }) : void 0
                    }, s.prototype.refreshDesktopSortList = function() {
                        return null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) ? canstar_widget.vent.trigger("dynatable:tab_changed", {
                            active_tab: this.activeTab,
                            columns: this.columns
                        }) : void 0
                    }, s.prototype.resetComparisonProducts = function() {
                        return this.comparison_products = {}, this.compareShortlist.resetShortlist()
                    }, s.prototype.removeProductFromCompare = function(t, e, n) {
                        var i, o;
                        return delete this.comparison_products[t], i = P.keys(this.comparison_products).length, this.compareShortlist.removeProductFromShortlist(e, n), r("input.compare:disabled", this.el).prop("disabled", !1), o = 0 === t.indexOf("_") ? t.substr(1) : t, r('input[type="checkbox"][value="' + o + '"].compare').attr("checked", !1), r(".contextualInfo a.add-this[data-original-prod-id=" + o + "]", this.el).closest("tr").remove(), 1 >= i ? r("#dynatable table thead th.compare button").attr("disabled", !0).addClass("inactive") : void 0
                    }, s.prototype.forciblyAddProducts = function(t) {
                        var e, n, i;
                        for (n in t) i = t[n], e = i.get("productId"), 0 !== e && (0 !== e.indexOf("_") && (e = "_" + e), this.comparison_products[e] = i.get("name"));
                        return this
                    }, s.prototype._renderContextualInfo = function(t, e) {
                        var n, i, r, o;
                        return i = t.data("related-prod-id"), o = t.data("related-prod-name"), r = t.data("related-prod-image"), n = t.data("related-company-name"), "undefined" == typeof this.comparison_products["_" + i] && P.size(this.comparison_products) + 1 < 3 ? (e.after(this.templates.contextual_info({
                            base_url: canstar_widget.base_url,
                            original_product_id: t.val(),
                            original_product_name: t.data("product"),
                            original_company_name: t.data("company"),
                            related_product_name: o,
                            related_product_id: i,
                            related_product_image: r,
                            related_company_name: n
                        })), this.delegateEvents()) : void 0
                    }, s.prototype.onCompareInputCheck = function(t) {
                        var e, n, i, o, s, a, l;
                        if (t = t || window.event, i = r(t.target), a = P.keys(this.comparison_products).length, o = "_" + i.val(), s = i.data("prod-name"), e = i.closest("tr"), 0 !== o.indexOf("_") && (o = "_" + o), l = {
                                productId: o,
                                productName: s
                            }, i.is(":checked")) {
                            if (null != i.data("related-prod-id") && this._renderContextualInfo(i, e), r("tr.contextualInfo", this.el).filter(function() {
                                    return r(".contextualInfo a.add-this", this.el).data("related-prod-id") === Number(i.val())
                                }).remove(), this.comparison_products[o] = s, a += 1, this.compareShortlist.addProductToShortlist(e, l), a > 1 && (r("#dynatable table thead th.compare button").attr("disabled", !1).removeClass("inactive"), 3 === a && r("input.compare:not(:checked)", this.el).prop("disabled", !0), 2 === a)) return r("th.compare span", this.el).hide()
                        } else if (i.is(":not(:checked)")) return e.next("tr").hasClass("alert") && (n = e.next("tr"), n.remove(), this.delegateEvents()), this.removeProductFromCompare(o, e, l)
                    }, s.prototype.onCompareButtonClick = function() {
                        var t, e, n, i, o, s;
                        if (o = P.keys(this.comparison_products).length, 2 > o) return n = 1 === o ? "Select another product for detailed comparison." : "Select which products you'd like to compare.", void r("th.compare span", this.el).html(n).show();
                        for (e = P.keys(this.comparison_products), t = 0; t < e.length;) e[t] = e[t].replace(/_/g, ""), t++;
                        return i = P.values(this.comparison_products), _caq.push(["_track_event", "3_way_compare", {
                            category: canstar_widget.faceted_search.category,
                            products: i.join(" | "),
                            prod_ids: e
                        }]), (null != (s = this.dynatableConfig) ? s.disable_builtin_tracking : void 0) !== !0 && "undefined" != typeof _gaq && null !== _gaq && _gaq.push(["_trackEvent", "Click Tracking", canstar_widget.faceted_search.category + " Compare Button", i.join(" | ")]), r(".table-information-area").slideUp("fast"), window.location.hash = l.prototype.convertUrlString(canstar_widget.faceted_search.profile) + "/" + e.join("-"), this.trigger("comparebutton:click", i), r("body").animate({
                            scrollTop: 0
                        }, "fast")
                    }, s.prototype.onSortButtonClick = function(t) {
                        var e;
                        return (null != (e = this.dynatableConfig) ? e.use_external_bootstrap : void 0) === !1 ? r(t.currentTarget).toggleClass("open") : void 0
                    }, s.prototype.onSortClick = function(t) {
                        var e, n;
                        return r(t.target).closest("a") && this.goToFirstPage(), e = r(t.target).closest("a"), this.dynatable.sorts.clear(), this.dynatable.sorts.add(e.attr("title"), e.attr("data-direction")), canstar_widget.vent.trigger("dynatable:collection_generated", this.dynatable.settings.dataset.records), n = P.findWhere(this.columns, {
                            name: e.attr("title")
                        }), canstar_widget.vent.trigger("dynatable:sort_changed", {
                            column: n,
                            direction: e.attr("data-direction")
                        }), this.dynatable.process()
                    }, s.prototype.onLeadPopupClick = function(t) {
                        var e, n;
                        return n = this.getRecordDataFromEl(r(t.target)), e = f.prototype.getLeadName(n.SUPP.CO_CODE), e !== !1 ? (t.preventDefault(), this.trigger("leadModalClicked", n, e)) : !0
                    }, s.prototype.onLeadPageClick = function(t) {
                        var e, n, i, o, s, a, l;
                        return e = r(t.currentTarget), s = this.getRecordDataFromEl(r(t.target)), o = f.prototype.getLeadName(s.SUPP.CO_CODE), o !== !1 && (i = e.attr("href")), i = e.attr("href"), i && "#" !== i ? !0 : (a = {}, r.each(canstar_widget.stored_selector_params, function(t, e) {
                            return a[t] = e.text
                        }), n = f.prototype.getExclusionUrl(s.SUPP.CO_CODE) ? "" + canstar_widget.base_url + "refferals/lifedetails" : "http://httpslink.com/d7ru", l = r.extend({}, a), l.product_id = s.SUPP.SR_PROD_ID, l.product_name = s.SUPP.PRODUCT_NAME, l.company = s.SUPP.COMPANY_NAME, l.companyCode = s.SUPP.CO_CODE, l.star_rating = s["Star Rating"], l.product_type = s.SUPP.PRODUCT_TYPE, l = r.param(l), e.attr("href", "" + n + "?" + l))
                    }, s.prototype.onStarOverlayClick = function() {
                        return this.trigger("starOverlayClicked")
                    }, s.prototype.getRecordDataFromEl = function(t) {
                        var e, n, i, r, o;
                        return n = t.closest("tr"), e = t.closest("tbody").find("tr"), o = e.index(n), i = this.dynatable.settings.dataset.records, r = i[o]
                    }, s.prototype.getFilteredRecordCount = function() {
                        var t;
                        return null != (t = this.dynatable) ? t.settings.dataset.fullRecords.length : void 0
                    }, s.prototype.configureDefaultSorts = function(t, e) {
                        var n, i, r, o, s, a;
                        e.sorts.clear(), e.settings.overrideSort && (e.settings.features.sort = !1, e.sortFunction = this.overrideSort), e.sorts.functions.starRatingSort = this.starRatingSort, e.sorts.functions.string = this.stringSort, e.sorts.functions.number = this.numberSort, e.sortsHeaders.toggleSort = this.customToggleSort, e.sortsHeaders.appendArrowUp = this.setCustomArrowUp, e.sortsHeaders.appendArrowDown = this.setCustomArrowDown, i = [
                            ["Star Rating", "desc"],
                            ["Company", "asc"],
                            ["Product Name", "asc"]
                        ], i = (null != (o = this.dynatableConfig) ? o.default_sorts : void 0) || i, P.each(i, function() {
                            return function(t) {
                                var n, i;
                                return n = t[0], i = "desc" === t[1] ? -1 : 1, e.sorts.add(n, i)
                            }
                        }(this)), s = this.columns, a = [];
                        for (r in s) n = s[r], a.push(n.sortingType && n.tab && !e.settings.dataset.sortTypes[n.name] ? e.settings.dataset.sortTypes[n.name] = n.sortingType : void 0);
                        return a
                    }, s.prototype.starRatingPreSort = function(t, e) {
                        var n, i, r, o, s, a;
                        for (n = 0, n = o = 0, s = t.length; s > o; n = ++o) switch (i = t[n], r = i[e]) {
                            case "10":
                            case -12:
                            case null:
                            case "null":
                            case "not rated":
                            case "Not rated":
                            case "rising star":
                                t[n][e] = -12;
                                break;
                            case "11":
                            case -11:
                            case "New":
                                t[n][e] = -11;
                                break;
                            case "12":
                            case 4.5:
                            case -10:
                            case "6":
                                t[n][e] = -10;
                                break;
                            default:
                                t[n][e] = isNaN(Number(r)) ? (null != r && null != (a = r.match(/\*/g)) ? a.length : void 0) || -100 : Number(r)
                        }
                        return t
                    }, s.prototype.numericPreSort = function(t, e) {
                        var n, i;
                        for (i in t) n = t[i][e], "number" == typeof n && (n = "" + n), t[i].sortData = 1 * n.replace(/[^0-9\.-]+/g, "");
                        return t
                    }, s.prototype._segmentArray = function(t, e, n, r) {
                        var o, s, a, l, c, u, d, p, h, f, m, g, v, _, y, b, w;
                        for (o = [], a = [], y = e.sortAbove, u = f = 0, v = y.length; v > f; u = ++f) h = y[u], o[u] = [];
                        for (b = e.sortBelow, u = m = 0, _ = b.length; _ > m; u = ++m) h = b[u], a[u] = [];
                        for (u = g = w = t.length - 1; g >= 0; u = g += -1) d = t[u], c = d[n], i.call(e.sortBelow, c) >= 0 ? (l = e.sortBelow.indexOf(c), a[l].push(d), t.splice(u, 1)) : i.call(e.sortAbove, c) >= 0 && (s = e.sortAbove.indexOf(c), o[s].push(d), t.splice(u, 1));
                        return "number" === r && (t = this.numericPreSort(t, n)), p = {
                            above: o,
                            records: [t],
                            below: a
                        }
                    }, s.prototype.overrideSort = function(t, e, n, i) {
                        var r, o, s, a, l, c, u, d, p, h, f;
                        if (this.currentlySortedBy.field = n, this.currentlySortedBy.value = e, this.currentlySortedBy.direction = i, l = this.customSortConfigs[n], "number" !== e || l ? ("Star Rating" === n || "Star Rating" === (null != l ? l.sort_as : void 0)) && this.starRatingPreSort(t, n) : (t = this.numericPreSort(t, n), n = "sortData"), null != (null != l ? l.custom_sort_order : void 0))
                            for (l.sortAbove || (l.sortAbove = []), l.sortBelow || (l.sortBelow = []), a = this._segmentArray(t.slice(0), l, n, e), t = [], i && (h = [a.below.reverse(), a.above.reverse()], a.above = h[0], a.below = h[1]), f = ["above", "records", "below"], c = 0, d = f.length; d > c; c++)
                                for (o = f[c], s = a[o], u = 0, p = s.length; p > u; u++) r = s[u], t = t.concat("number" === e && "records" === o ? this.sortFunction(r, "sortData", i, this.currentlySortedBy.secondaryField) : this.sortFunction(r, n, i, this.currentlySortedBy.secondaryField));
                        else t = this.sortFunction(t, n, i, this.currentlySortedBy.secondaryField);
                        return t
                    }, s.prototype.sortFunction = function(t, e, n, i) {
                        var r, o, s, a, l, c;
                        return t.length ? (a = null != (c = P.findWhere(t[0].columns, {
                            name: i
                        })) ? c.sortingType : void 0, r = null != this.company_name_field ? this.company_name_field : "COMPANY_NAME", s = null != this.prod_name_field ? this.prod_name_field : "PRODUCT_NAME", o = null != this.id_field ? this.id_field : "PROD_ID", l = !0, i || t[0].SUPP[r] && t[0].SUPP[s] && t[0].SUPP[o] ? t.sort(function(t, c) {
                            var u, d;
                            return l && c[e] === t[e] ? i && t[i] !== c[i] ? (u = "number" === a ? +t[i] : t[i], d = "number" === a ? +c[i] : c[i], n ? d > u ? 1 : -1 : u > d ? 1 : -1) : c.SUPP[r].toLowerCase() !== t.SUPP[r].toLowerCase() ? t.SUPP[r].toLowerCase() > c.SUPP[r].toLowerCase() ? 1 : -1 : c.SUPP[s].toLowerCase() !== t.SUPP[s].toLowerCase() ? t.SUPP[s].toLowerCase() > c.SUPP[s].toLowerCase() ? 1 : -1 : t.SUPP[o].toLowerCase() > c.SUPP[o].toLowerCase() ? 1 : -1 : "Company" === e ? n ? t.SUPP[r].toLowerCase() > c.SUPP[r].toLowerCase() ? 1 : -1 : c.SUPP[r].toLowerCase() > t.SUPP[r].toLowerCase() ? 1 : -1 : n ? t[e] > c[e] ? 1 : -1 : c[e] > t[e] ? 1 : -1
                        }) : ("undefined" != typeof console && null !== console && console.error("Could not run secondary sort, error in SUPP object"), l = !1), t) : t
                    }, s.prototype.starRatingSort = function(t, e, n, i) {
                        var r, o, s;
                        return r = this.getStarValue(t["Star Rating"]), o = this.getStarValue(e["Star Rating"]), s = r - o, i > 0 ? s : -s
                    }, s.prototype.getStarValue = function(t) {
                        var e;
                        return e = this.getValueFromHTMLString(t), "string" == typeof e && (e = function() {
                            var e;
                            switch (t.toLowerCase()) {
                                case "10":
                                    return -4;
                                case "11":
                                    return -3;
                                case "not rated":
                                    return -1;
                                case "new":
                                    return 0;
                                case "rising star":
                                    return 4.5;
                                default:
                                    return isNaN(Number(t)) ? (null != (e = t.match(/\*/g)) ? e.length : void 0) || -100 : Number(t)
                            }
                        }()), e
                    }, s.prototype.isNumber = function(t) {
                        return this.stringToNumber(t) !== !1
                    }, s.prototype.stringToNumber = function(t) {
                        return "number" == typeof t ? t : "string" != typeof t ? !1 : (t = this.checkSpecialCases(t), t = t.replace(/\$/g, ""), t = t.replace(/\,/g, ""), t = t.replace(/\</g, ""), t = t.replace(/\>/g, ""), t = t.replace(/kg/g, ""), t = t.replace(/\sdays/g, ""), t = t.split(" to ")[0], /\%/g.test(t) && (t = t.replace(/\%/g, ""), t /= 100), t = 1 * t, "number" != typeof t || isNaN(t) ? !1 : t)
                    }, s.prototype.stringSort = function(t, e, n, i) {
                        var r, o, s, a, l;
                        return r = t[n], s = e[n], r && s && !this.requiresCalculation(n) || (r = this.calculateTags(t, n), s = this.calculateTags(e, n)), this.isNumber(r) && this.isNumber(s) ? this.compareNumbers(r, s, i) : (r = "string" == typeof r ? (o = r.toLowerCase(), o = this.checkSpecialCases(o)) : o = "", s = "string" == typeof s ? (a = s.toLowerCase(), a = this.checkSpecialCases(a)) : a = "", l = r === s ? 0 : i > 0 ? o > a : a > o, l === !1 ? -1 : l - 0)
                    }, s.prototype.calculateTags = function(t, e) {
                        var n, i, r;
                        return i = this.columns[this.columnNames.indexOf(e)], i && i.calculator ? (n = this.calculators[i.calculator](t, t[i.name], i), r = this.getValueFromHTMLString(n)) : i && i.transform === !1 ? r = this.getValueFromHTMLString(t[i.name]) : i && i.transform ? (n = this.transforms[i.transform](t[i.name], t, i.name), r = this.getValueFromHTMLString(n)) : t[e]
                    }, s.prototype.numberSort = function(t, e, n, i) {
                        var r, o;
                        return t[n] && e[n] && !this.requiresCalculation(n) || (r = this.calculateTags(t, n), o = this.calculateTags(e, n)), this.compareNumbers(r, o, i)
                    }, s.prototype.compareNumbers = function(t, e, n) {
                        var i, r;
                        return i = this.stringToNumber(t), r = this.stringToNumber(e), t === e ? 0 : n > 0 ? i - r : r - i
                    }, s.prototype.requiresCalculation = function(t, e) {
                        var n;
                        return n = this.columns[this.columnNames.indexOf(t)], e && null != n ? n.calculator : (null != n ? n.calculator : void 0) || (null != n ? n.sort_transformed : void 0)
                    }, s.prototype.checkSpecialCases = function(t) {
                        var e;
                        return e = function() {
                            switch (null != t ? t.toLowerCase() : void 0) {
                                case "no":
                                    return "0";
                                case "n/a":
                                    return "0.0001";
                                case "never":
                                    return "0.0002";
                                case "nil":
                                    return "0.0003";
                                case "none":
                                    return "0.0004";
                                case "no min":
                                    return "0.0005";
                                case "partial":
                                    return "0.9";
                                case "yes":
                                case "full":
                                    return "1";
                                case "no max":
                                    return "999999999";
                                case "no cap":
                                    return "9999999999";
                                case "unlimited":
                                    return "99999999999";
                                case "always":
                                    return "99999999999";
                                default:
                                    return t
                            }
                        }()
                    }, s.prototype.getValueFromHTMLString = function(t) {
                        var e;
                        return /<.*>/.test(t) ? (e = document.createElement("div"), e.innerHTML = t, e.firstChild.getAttribute("value") || ("undefined" != typeof console && null !== console ? console.error("HTML string has no value: ", t) : void 0)) : t
                    }, s.prototype.exportTable = function() {
                        var t, e, n, i, o, s, a, l, c, u, d, p;
                        for (e = {
                                category: canstar_widget.faceted_search.category,
                                columns: [],
                                records: []
                            }, this.$table.find("thead th").each(function() {
                                return r(this).hasClass("hidden-without-tab") ? void 0 : e.columns.push(r(this).attr("data-dynatable-column"))
                            }), this.$table.data("dynatable").records.resetOriginal(), this.$table.data("dynatable").queries.run(), u = this.$table.data("dynatable").records.sort(), s = 0, l = u.length; l > s; s++) {
                            for (o = u[s], i = [], d = e.columns, a = 0, c = d.length; c > a; a++) t = d[a], n = /<.*>/.test("" + o[t]), n ? (null != (p = r(o[t])) ? p.attr("title") : void 0) && i.push(r(o[t]).attr("title")) : i.push(o[t]);
                            e.records.push(i)
                        }
                        return e
                    }, s.prototype.dispose = function() {
                        return this.$tabs && this.$tabs.remove(), this.$table.removeData("dynatable").remove(), this.hasOwnProperty("compareShortlist") && this.compareShortlist && this.resetComparisonProducts(), s.__super__.dispose.apply(this, arguments)
                    }, s.prototype.isRateCityEnabled = function() {
                        return null == this.options.configs.table.ratecity_enabled && (this.options.configs.table.ratecity_enabled = !0), this.options.configs.table.ratecity_enabled
                    }, s.prototype.dynatable_slugify = function(t) {
                        return t.replace(/\s*\/\s*/g, "-").replace("*", "").replace(/^\s+|\s+$/g, "").replace(/\s+/g, "-").replace(/([A-Z])/g, function(t) {
                            return t.toLowerCase()
                        })
                    }, s.prototype.moveColumn = function(t, e, n) {
                        var i;
                        if (e) return i = t.splice(e, 1)[0], t.splice(n, 0, i)
                    }, s.prototype.compareIsEnabled = function() {
                        return canstar_widget.faceted_search.compare_enabled
                    }, s.prototype.isDisclaimerRequired = function() {
                        var t;
                        return null != (t = canstar_widget.faceted_search) ? t.star_rating_note : void 0
                    }, s.prototype.removeCustomArrows = function() {
                        var t;
                        return t = this.$("table.table-faceted-search th"), t.find("i.fa").remove()
                    }, s.prototype.setCustomArrowIcon = function(t, e) {
                        var n, i;
                        return i = t.find(".text-center-vertical").text(), n = "Company" === i || "Brand" === i ? function() {
                            switch (e) {
                                case 1:
                                    return "fa-sort-alpha-desc";
                                case 0:
                                    return "fa-sort";
                                case -1:
                                    return "fa-sort-alpha-asc"
                            }
                        }() : function() {
                            switch (e) {
                                case 1:
                                    return "fa-sort-desc";
                                case 0:
                                    return "fa-sort";
                                case -1:
                                    return "fa-sort-asc"
                            }
                        }(), t.append('<span class="dynatable-arrow"><i class="fa ' + n + '"></i></span>')
                    }, s.prototype.setCustomArrowUp = function(t) {
                        return t.removeClass("arrow-down"), t.addClass("arrow-up"), this.setCustomArrowIcon(t, -1)
                    }, s.prototype.setCustomArrowDown = function(t) {
                        return t.removeClass("arrow-up"), t.addClass("arrow-down"), this.setCustomArrowIcon(t, 1)
                    }, s.prototype.customToggleSort = function(t, e, n) {
                        var i, o, s, a, l, c, u, d, p, h, f, m, g, v;
                        if (c = this.dynatable, a = c.settings.inputs, u = c.sortsHeaders, d = u.sortedByColumn(e, n), p = u.sortedByColumnValue(n), null == p && null != (null != (h = this.columns[n.index]) ? h.sort_order : void 0) && (p = "asc" === this.columns[n.index].sort_order ? -1 : 1), null == p && null != (null != (f = this.columns[n.index]) ? f.custom_sort_order : void 0) && (p = "asc" === this.columns[n.index].custom_sort_order ? -1 : 1), null == p && null != (null != (m = this.columns[n.index]) && null != (g = m.custom_sort) ? g.order : void 0) && (p = "asc" === this.columns[n.index].custom_sort.order ? -1 : 1), a.multisort && c.utility.anyMatch(t, a.multisort, function(e, n) {
                                return t[n]
                            }) || (this.removeCustomArrows(), u.removeAllArrows(), c.sorts.clear()), (null != (v = this.dynatableConfig) ? v.disable_builtin_tracking : void 0) !== !0 && (_caq.push(["_track_event", "table:sort", {
                                field: r(t.currentTarget).parent().attr("data-dynatable-column")
                            }]), o = "table:sort", this.options.isTableSnapshot === !0 && (o += " | Embed"), _gaq.push(["_trackEvent", o, r(t.currentTarget).parent().attr("data-dynatable-column")])), 1 === p) {
                            for (s = 0; s < n.sorts.length;) c.sorts.add(n.sorts[s], -1), s++;
                            this.setCustomArrowDown(e), i = "desc"
                        } else {
                            for (s = 0, l = n.sorts.length; l > s;) c.sorts.add(n.sorts[s], 1), s++;
                            this.setCustomArrowUp(e), i = "asc"
                        }
                        return r(t.target).closest("a") && this.goToFirstPage(), this.refreshDesktopSortButton(n.id, i)
                    }, s.prototype.onWindowResize = function() {
                        var t;
                        return l.prototype.onMobile() ? this.configMobileCellView() : (t = "#dynatable table." + this.totalClass, r(t).removeClass(this.totalClass))
                    }, s.prototype.configMobileCellView = function() {
                        var t, e;
                        return t = !document.getElementById("dynatable") && this.$table || r("#dynatable table"), this.shownCells = t.find("tbody tr:first-child td:not(.hidden-xs, .hidden-without-tab)"), e = this.shownCells.length, e -= 1, this.totalClass = function() {
                            switch (e) {
                                case 1:
                                    return "cell-mobile-1";
                                case 2:
                                    return "cell-mobile-2";
                                case 3:
                                    return "cell-mobile-3";
                                case 4:
                                    return "cell-mobile-4";
                                case 5:
                                    return "cell-mobile-5";
                                case 6:
                                    return "cell-mobile-6";
                                default:
                                    return "cell-mobile-x"
                            }
                        }(), t.addClass(this.totalClass)
                    }, s.prototype.refreshProductListFromLocalStorage = function() {
                        var t, e, n, i, o, s, a;
                        if (null != this.compareShortlist) {
                            s = localStorage.getItem("canstar_shortlist_bar"), ("function" == typeof s ? s(r.isEmptyObject(s)) : void 0) && (o = {});
                            try {
                                o = JSON.parse(s)
                            } catch (l) {
                                n = l, console.log(n)
                            }
                            if (e = this.compareShortlist.getCurrentCollection(), i = 0, this.comparison_products = {}, P.each(o[e], function(t) {
                                    return function(e) {
                                        var n, o, s, a;
                                        return s = 0 === e.productId.indexOf("_") ? e.productId.substr(1) : e.productId, a = e.name, n = r('input[type="checkbox"][value="' + s + '"].compare'), n.attr("checked", !0), o = n.closest("tr"), o.addClass("product-selected-compare"), s = "_" + s, t.comparison_products[s] = a, i += 1
                                    }
                                }(this)), i > 1) return r("#dynatable table thead th.compare button").attr("disabled", !1).removeClass("inactive"), t = r("#compare-shortlist .shortlist-main-container"), t.find(".shortlist-control-column .compare-button").removeClass("inactive").removeAttr("disabled"), t.find(".shortlist-product-count").text(i), 3 === i && r("input.compare:not(:checked)", this.el).prop("disabled", !0), 2 === i && r("th.compare span", this.el).hide(), null != (a = this.compareShortlist) ? a.onShortlistShow(null, !0) : void 0
                        }
                    }, s.prototype.onContextualAddClick = function(t) {
                        var e, n, i, s, a, c, u, d, p, h, f, m, g;
                        return e = r(t.target), a = "_" + e.data("related-prod-id"), u = e.data("original-prod-name"), c = e.data("original-company-name"), p = e.data("related-prod-name"), i = e.data("related-company-name"), d = e.data("related-prod-image"), g = "" + c + "|" + u + "|" + i + "|" + p, s = {
                            event_name: "Click Tracking",
                            event_type: "3 Way Recommendation | Add",
                            event_label: g
                        }, n = {
                            referring_company_name: c,
                            referring_product_name: u,
                            company_name: i,
                            product_name: p
                        }, this.compareShortlist.checkProductAdded(a) || (o.prototype.trackEvent("3way_rec_add", n), l.prototype.gaTrackEvent(s), f = 0, h = this.compareShortlist.determineProductModel(f), this.compareShortlist.updateShortListBar(h, a, p, i, d, "anchor"), m = "input.compare[value=" + e.data("related-prod-id") + "]", r(m, this.el).length > 0 ? r(m, this.el).trigger("click") : this.comparison_products[a] = p), t.preventDefault()
                    }, s.prototype.onContextualAddClose = function(t) {
                        var e, n, i, s, a, c, u, d;
                        return e = r(t.target).parent().find(".add-this"), 0 === e.length && "undefined" != typeof console && null !== console && console.error('"Add this" button not found in DOM structure'), c = e.data("original-prod-name"), a = e.data("original-company-name"), u = e.data("related-prod-name"), i = e.data("related-company-name"), d = "" + a + "|" + c + "|" + i + "|" + u, s = {
                            event_name: "Click Tracking",
                            event_type: "3 Way Recommendation | Close",
                            event_label: d
                        }, n = {
                            referring_company_name: a,
                            referring_product_name: c,
                            company_name: i,
                            product_name: u
                        }, o.prototype.trackEvent("3way_rec_close", n), l.prototype.gaTrackEvent(s)
                    }, s.prototype.onDrawerToggle = function(t) {
                        var e, n, i, o, s, a, l, c, u, d;
                        return s = r(t.currentTarget), !s.hasClass("toggle-drawer") && s.parent().parent().hasClass("features") && (s = r("td.details a.toggle-drawer", s.parent().parent().parent())), a = s.parent(), l = r(".details-drawer", a), u = "true" === s.attr("data-open"), c = parseInt(l.attr("data-openheight")) || 250, n = parseInt(a.parent().height()) - c, d = 2 + parseInt(a.parent().height()) + c, e = 100, o = {
                            height: c,
                            opacity: u ? 0 : 1
                        }, i = {
                            height: u ? n : d
                        }, u ? (l.animate(o, e), l.css({
                            display: "none"
                        })) : (l.css({
                            display: "block",
                            opacity: 0,
                            "overflow-y": "auto !important"
                        }), l.animate(o, e), this.trigger("detailsdrawer:open", s.attr("value"))), a.animate(i, e), s.html(s.attr("data-text-" + (u ? "open" : "close"))), s.attr("data-open", !u)
                    }, s.prototype.onExcludeRow = function(t) {
                        var e, n, i;
                        return i = r(t.currentTarget).attr("value"), e = P.findWhere(this.options.configs.table.field_defs, {
                            transform: "getHideButton"
                        }), n = this.collection.filter(function(t) {
                            return t.attributes.SUPP[e.tag] === i
                        }), P.each(n, function(t) {
                            var e;
                            return null != (e = t.collection) && "function" == typeof e.remove ? e.remove(t) : void 0
                        }), r(t.currentTarget).parents("tr").fadeOut(), this.trigger("row_excluded", {
                            id: i,
                            field_def: e,
                            products: n
                        })
                    }, s.prototype.savePrimarySort = function() {
                        var t, e, n;
                        return e = this.dynatable.settings.dataset.sorts, n = this.dynatable.settings.dataset.sortsKeys, t = P.map(n, function(t) {
                            var n;
                            return n = 1 === e[t] ? "asc" : "desc", [t, n]
                        }), t.slice(0, 1)
                    }, s.prototype.bubbleEvent = function(t) {
                        var e, n;
                        return e = r(t.currentTarget), n = e.attr("data-trackevent"), n ? this.trigger("" + n + ":" + t.type, e) : void 0
                    }, s
                }(b)
            })
        }.call(this),
        function() {
            define("components/competitor_lists/schema_competitor_form", ["require"], function() {
                return {
                    type: "object",
                    properties: {}
                }
            })
        }.call(this), define("text-cns!components/competitor_lists/tmpl_competitor.html", [], function() {
            return '<div class="competitor-lists"></div>\n\n<ul class="competitor-buttons">\n    <li><a class="new_btn" href="#new">New List</a></li>\n    <li><a class="modify_btn" href="#modify">Modify List</a></li>\n</ul>\n\n<div id="form_container"></div>\n'
        }), define("text-cns!components/competitor_lists/tmpl_competitor_lists.html", [], function() {
            return '<label><h3>Use a competitor list:</h3></label>\n<select class="competitor-select" name="competitor-list">\n    <option value="0">Please select a list</option>\n    <% _.each(lists, function (list) {\n        var select = selected === list.ID ? \'selected="selected"\' : \'\';\n    %>\n    <option value="<%= list.ID %>" <%= select %>><%= list.NAME %></option>\n    <% }) %>\n</select>\n'
        }), define("text-cns!components/competitor_lists/tmpl_competitor_form.html", [], function() {
            return '<div class="modal-dialog">\n  <div class="modal-content">\n    <div class="modal-header">\n      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n      <h3 class="modal-title">Competitor Lists</h3>\n      <p>Create competitor lists for use in reporting throughout Canstar View</p>\n    </div>\n    <div class="modal-body">\n      <fieldset>\n        <legend>Define Competitors</legend>\n        <form method="POST" action="<%= data.form_action %>" role="form" class="form">\n          <div class="control-group">\n            <div class="control-label">Step 1: What do you want to do?</div>\n            <input type="radio" class="form-control" name="action" id="ins_list" value="INS" checked="checked">\n            <label class="control-label small" for="ins_list">Create New List</label>\n            <input type="radio" class="form-control" name="action" id="upd_list" value="UPD">\n            <label class="control-label small" for="upd_list">Modify a List</label>\n            <input type="radio" class="form-control" name="action" id="cln_list" value="CLN">\n            <label class="control-label small" for="cln_list">Clone Existing List</label>\n          <% if(data.displayDelete) { %>\n            <input type="radio" class="form-control" name="action" id="del_list" value="DEL">\n            <label class="control-label small" for="del_list">Delete a List</label>\n          <% } %>\n          </div>\n          <div class="control-group modify clone delete">\n            <label class="control-label" for="list_id">Step 2: Select a list</label>\n            <select id="list_id" name="list_id">\n                <% _.each(data.lists, function (list) {\n                    var selected = data.selectedList === list.ID ? \'selected="selected"\' : \'\';\n                %>\n                <option value="<%= list.ID %>" <%= selected %>><%= list.NAME %></option>\n                <% }); %>\n            </select>\n          </div>\n          <div class="control-group">\n            <label class="control-label new" for="co_code">Step 2: Select Competitors</label>\n            <label class="control-label modify clone delete" for="co_code">Step 3: Select Competitors</label>\n            <select id="co_code" class="multiselect" multiple="multiple" name="co_code">\n                <% _.each(data.companies, function (company) {\n                    var selected = company.SELECTED === \'Y\' ? \'selected="selected\' : \'\';\n                %>\n                <option value="<%= company.ELD_VALUE %>" <%= selected %>><%= company.ELD_LABEL %></option>\n                <% }); %>\n            </select>\n            <!--select with list of companies-->\n          </div>\n          <div class="control-group new clone">\n            <label class="control-label new" for="name">Step 3: Name competitor list</label>\n            <label class="control-label clone" for="name">Step 3: Name competitor list</label>\n            <input type="text" class="form-control" name="name" id="name">\n          </div>\n          <div class="control-group modify delete">\n            <div class="control-label" for="people">Step 4: Check if the list is being used</div>\n            <textarea name="usage" id="usage" disabled="disabled" rows="6"></textarea>\n            <div class="warning-modify warning" style="display:none;">\n                <p>WARNING: Modifying this list will impact existing reports by the above users.</p>\n                <p>To save changes as a new list, please select \'Clone Existing List\' in Step 1.</p>\n            </div>\n          <% if(data.displayDelete) { %>\n            <div class="warning-delete warning" style="display:none;">\n                <p>WARNING: A list that is in use in existing reports cannot be deleted.</p>\n                <p>Please be aware that lists may also be utilised by other users on an ad-hoc basis.</p>\n            </div>\n          <% } %>\n          </div>\n          <div class="inputs"></div>\n          <div class="submit-container control-group">\n            <input id="submit" type="submit" class="btn btn-info button_submit text-center" value="Save">\n            <button type="button" class="btn btn-info" data-dismiss="modal">Cancel</button>\n            <div class="alert validation alert-error alert-danger">Please correct the following errors:<br/><br/> <span></span></div>\n            <div class="alert submission alert-error alert-danger">something went wrong with your submission<br/><br/> <span></span></div>\n          </div>\n        </form>\n        <div class="alert alert-success">Competitor List <span class="submit_action">Saved</span>.</div>\n        <div class="return" style="display:none;">\n            <button type="button" class="btn btn-info" data-dismiss="modal">OK</button>\n        </div>\n      </fieldset>\n    </div><!-- /.modal-body -->\n  </div><!-- /.modal-content -->\n</div><!-- /.modal-dialog -->'
        }), define("text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor.html", [], function() {
            return '<div id="form_container"></div>'
        }), define("text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor_lists.html", [], function() {
            return ""
        }), define("text-cns!components/competitor_lists/themes/no_modal/competitor_lists/tmpl_competitor_form.html", [], function() {
            return '<h3>Competitor Lists</h3>\n<p>Create competitor lists for use in reporting throughout Canstar View</p>\n<fieldset>\n  <legend>Define Competitors</legend>\n  <form method="POST" action="<%= data.form_action %>" role="form" class="form">\n    <div class="control-group">\n      <div class="control-label">Step 1: What do you want to do?</div>\n      <input type="radio" class="form-control" name="action" id="ins_list" value="INS" checked="checked">\n      <label class="control-label small" for="ins_list">Create New List</label>\n      <input type="radio" class="form-control" name="action" id="upd_list" value="UPD">\n      <label class="control-label small" for="upd_list">Modify a List</label>\n      <input type="radio" class="form-control" name="action" id="cln_list" value="CLN">\n      <label class="control-label small" for="cln_list">Clone Existing List</label>\n    <% if(data.displayDelete) { %>\n      <input type="radio" class="form-control" name="action" id="del_list" value="DEL">\n      <label class="control-label small" for="del_list">Delete a List</label>\n    <% } %>\n    </div>\n    <div class="control-group modify clone delete">\n      <label class="control-label" for="list_id">Step 2: Select a list</label>\n      <select id="list_id" name="list_id">\n          <% _.each(data.lists, function (list) {\n              var selected = data.selectedList === list.ID ? \'selected="selected"\' : \'\';\n          %>\n          <option value="<%= list.ID %>" <%= selected %>><%= list.NAME %></option>\n          <% }); %>\n      </select>\n    </div>\n    <div class="control-group">\n      <label class="control-label new" for="co_code">Step 2: Select Competitors</label>\n      <label class="control-label modify clone delete" for="co_code">Step 3: Select Competitors</label>\n      <select id="co_code" class="multiselect" multiple="multiple" name="co_code">\n          <% _.each(data.companies, function (company) {\n              var selected = company.SELECTED === \'Y\' ? \'selected="selected\' : \'\';\n          %>\n          <option value="<%= company.ELD_VALUE %>" <%= selected %>><%= company.ELD_LABEL %></option>\n          <% }); %>\n      </select>\n      <!--select with list of companies-->\n    </div>\n    <div class="control-group new clone">\n      <label class="control-label new" for="name">Step 3: Name competitor list</label>\n      <label class="control-label clone" for="name">Step 3: Name competitor list</label>\n      <input type="text" class="form-control" name="name" id="name">\n    </div>\n    <div class="control-group modify delete">\n      <div class="control-label" for="people">Step 4: Check if the list is being used</div>\n      <textarea name="usage" id="usage" disabled="disabled" rows="6"></textarea>\n      <div class="warning-modify warning" style="display:none;">\n          <p>WARNING: Modifying this list will impact existing reports by the above users.</p>\n          <p>To save changes as a new list, please select \'Clone Existing List\' in Step 1.</p>\n      </div>\n    <% if(data.displayDelete) { %>\n      <div class="warning-delete warning" style="display:none;">\n          <p>WARNING: A list that is in use in existing reports cannot be deleted.</p>\n          <p>Please be aware that lists may also be utilised by other users on an ad-hoc basis.</p>\n      </div>\n    <% } %>\n    </div>\n    <div class="inputs"></div>\n    <div class="submit-container control-group">\n      <input id="submit" type="submit" class="btn btn-info button_submit text-center" value="Save Changes">\n      <div class="alert validation alert-error alert-danger">Please correct the following errors:<br/><br/> <span></span></div>\n      <div class="alert submission alert-error alert-danger">something went wrong with your submission<br/><br/> <span></span></div>\n    </div>\n  </form>\n  <div class="alert alert-success">Competitor List <span class="submit_action">Saved</span>.</div>\n  <div class="return" style="display:none;">\n      <button type="button" class="btn btn-info" data-dismiss="modal">OK</button>\n  </div>\n</fieldset>\n'
        }), define("text-cns!components/competitor_lists/themes/modal/tmpl_competitor_lists.html", [], function() {
            return '<select class="competitor-select" name="competitor-list">\n    <option value="0">Please select a list</option>\n    <% _.each(lists, function (list) {\n        var select = selected === list.ID ? \'selected="selected"\' : \'\';\n    %>\n    <option value="<%= list.ID %>" <%= select %>><%= list.NAME %></option>\n    <% }) %>\n</select>\n'
        }),
        function() {
            define("components/competitor_lists/templates", ["require", "text-cns!components/competitor_lists/tmpl_competitor.html", "text-cns!components/competitor_lists/tmpl_competitor_lists.html", "text-cns!components/competitor_lists/tmpl_competitor_form.html", "text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor.html", "text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor_lists.html", "text-cns!components/competitor_lists/themes/no_modal/competitor_lists/tmpl_competitor_form.html", "text-cns!components/competitor_lists/themes/modal/tmpl_competitor_lists.html"], function(t) {
                return t("text-cns!components/competitor_lists/tmpl_competitor.html"), t("text-cns!components/competitor_lists/tmpl_competitor_lists.html"), t("text-cns!components/competitor_lists/tmpl_competitor_form.html"), t("text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor.html"), t("text-cns!components/competitor_lists/themes/no_modal/tmpl_competitor_lists.html"), t("text-cns!components/competitor_lists/themes/no_modal/competitor_lists/tmpl_competitor_form.html"), t("text-cns!components/competitor_lists/themes/modal/tmpl_competitor_lists.html")
            })
        }.call(this), define("jqueryui/core", ["jquery"], function(t) {
            ! function(t, e) {
                function n(e, n) {
                    var r, o, s, a = e.nodeName.toLowerCase();
                    return "area" === a ? (r = e.parentNode, o = r.name, e.href && o && "map" === r.nodeName.toLowerCase() ? (s = t("img[usemap=#" + o + "]")[0], !!s && i(s)) : !1) : (/input|select|textarea|button|object/.test(a) ? !e.disabled : "a" === a ? e.href || n : n) && i(e)
                }

                function i(e) {
                    return t.expr.filters.visible(e) && !t(e).parents().andSelf().filter(function() {
                        return "hidden" === t.css(this, "visibility")
                    }).length
                }
                var r = 0,
                    o = /^ui-id-\d+$/;
                t.ui = t.ui || {}, t.ui.version || (t.extend(t.ui, {
                    version: "@VERSION",
                    keyCode: {
                        BACKSPACE: 8,
                        COMMA: 188,
                        DELETE: 46,
                        DOWN: 40,
                        END: 35,
                        ENTER: 13,
                        ESCAPE: 27,
                        HOME: 36,
                        LEFT: 37,
                        NUMPAD_ADD: 107,
                        NUMPAD_DECIMAL: 110,
                        NUMPAD_DIVIDE: 111,
                        NUMPAD_ENTER: 108,
                        NUMPAD_MULTIPLY: 106,
                        NUMPAD_SUBTRACT: 109,
                        PAGE_DOWN: 34,
                        PAGE_UP: 33,
                        PERIOD: 190,
                        RIGHT: 39,
                        SPACE: 32,
                        TAB: 9,
                        UP: 38
                    }
                }), t.fn.extend({
                    _focus: t.fn.focus,
                    focus: function(e, n) {
                        return "number" == typeof e ? this.each(function() {
                            var i = this;
                            setTimeout(function() {
                                t(i).focus(), n && n.call(i)
                            }, e)
                        }) : this._focus.apply(this, arguments)
                    },
                    scrollParent: function() {
                        var e;
                        return e = t.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                            return /(relative|absolute|fixed)/.test(t.css(this, "position")) && /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"))
                        }).eq(0) : this.parents().filter(function() {
                            return /(auto|scroll)/.test(t.css(this, "overflow") + t.css(this, "overflow-y") + t.css(this, "overflow-x"))
                        }).eq(0), /fixed/.test(this.css("position")) || !e.length ? t(document) : e
                    },
                    zIndex: function(n) {
                        if (n !== e) return this.css("zIndex", n);
                        if (this.length)
                            for (var i, r, o = t(this[0]); o.length && o[0] !== document;) {
                                if (i = o.css("position"), ("absolute" === i || "relative" === i || "fixed" === i) && (r = parseInt(o.css("zIndex"), 10), !isNaN(r) && 0 !== r)) return r;
                                o = o.parent()
                            }
                        return 0
                    },
                    uniqueId: function() {
                        return this.each(function() {
                            this.id || (this.id = "ui-id-" + ++r)
                        })
                    },
                    removeUniqueId: function() {
                        return this.each(function() {
                            o.test(this.id) && t(this).removeAttr("id")
                        })
                    }
                }), t("<a>").outerWidth(1).jquery || t.each(["Width", "Height"], function(n, i) {
                    function r(e, n, i, r) {
                        return t.each(o, function() {
                            n -= parseFloat(t.css(e, "padding" + this)) || 0, i && (n -= parseFloat(t.css(e, "border" + this + "Width")) || 0), r && (n -= parseFloat(t.css(e, "margin" + this)) || 0)
                        }), n
                    }
                    var o = "Width" === i ? ["Left", "Right"] : ["Top", "Bottom"],
                        s = i.toLowerCase(),
                        a = {
                            innerWidth: t.fn.innerWidth,
                            innerHeight: t.fn.innerHeight,
                            outerWidth: t.fn.outerWidth,
                            outerHeight: t.fn.outerHeight
                        };
                    t.fn["inner" + i] = function(n) {
                        return n === e ? a["inner" + i].call(this) : this.each(function() {
                            t(this).css(s, r(this, n) + "px")
                        })
                    }, t.fn["outer" + i] = function(e, n) {
                        return "number" != typeof e ? a["outer" + i].call(this, e) : this.each(function() {
                            t(this).css(s, r(this, e, !0, n) + "px")
                        })
                    }
                }), t.extend(t.expr[":"], {
                    data: t.expr.createPseudo ? t.expr.createPseudo(function(e) {
                        return function(n) {
                            return !!t.data(n, e)
                        }
                    }) : function(e, n, i) {
                        return !!t.data(e, i[3])
                    },
                    focusable: function(e) {
                        return n(e, !isNaN(t.attr(e, "tabindex")))
                    },
                    tabbable: function(e) {
                        var i = t.attr(e, "tabindex"),
                            r = isNaN(i);
                        return (r || i >= 0) && n(e, !r)
                    }
                }), t.support.selectstart = "onselectstart" in document.createElement("div"), function() {
                    var e = /msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase()) || [];
                    t.ui.ie = e.length ? !0 : !1
                }(), t.fn.extend({
                    disableSelection: function() {
                        return this.bind((t.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(t) {
                            t.preventDefault()
                        })
                    },
                    enableSelection: function() {
                        return this.unbind(".ui-disableSelection")
                    }
                }), t.extend(t.ui, {
                    plugin: {
                        add: function(e, n, i) {
                            var r, o = t.ui[e].prototype;
                            for (r in i) o.plugins[r] = o.plugins[r] || [], o.plugins[r].push([n, i[r]])
                        },
                        call: function(t, e, n) {
                            var i, r = t.plugins[e];
                            if (r && t.element[0].parentNode && 11 !== t.element[0].parentNode.nodeType)
                                for (i = 0; i < r.length; i++) t.options[r[i][0]] && r[i][1].apply(t.element, n)
                        }
                    },
                    contains: t.contains,
                    hasScroll: function(e, n) {
                        if ("hidden" === t(e).css("overflow")) return !1;
                        var i = n && "left" === n ? "scrollLeft" : "scrollTop",
                            r = !1;
                        return e[i] > 0 ? !0 : (e[i] = 1, r = e[i] > 0, e[i] = 0, r)
                    },
                    isOverAxis: function(t, e, n) {
                        return t > e && e + n > t
                    },
                    isOver: function(e, n, i, r, o, s) {
                        return t.ui.isOverAxis(e, i, o) && t.ui.isOverAxis(n, r, s)
                    }
                }))
            }(t)
        }), define("jqueryui/widget", ["jquery"], function(t) {
            ! function(t, e) {
                var n = 0,
                    i = Array.prototype.slice,
                    r = t.cleanData;
                t.cleanData = function(e) {
                    for (var n, i = 0; null != (n = e[i]); i++) try {
                        t(n).triggerHandler("remove")
                    } catch (o) {}
                    r(e)
                }, t.widget = function(e, n, i) {
                    var r, o, s, a, l = e.split(".")[0];
                    e = e.split(".")[1], r = l + "-" + e, i || (i = n, n = t.Widget), t.expr[":"][r.toLowerCase()] = function(e) {
                        return !!t.data(e, r)
                    }, t[l] = t[l] || {}, o = t[l][e], s = t[l][e] = function(t, e) {
                        return this._createWidget ? void(arguments.length && this._createWidget(t, e)) : new s(t, e)
                    }, t.extend(s, o, {
                        version: i.version,
                        _proto: t.extend({}, i),
                        _childConstructors: []
                    }), a = new n, a.options = t.widget.extend({}, a.options), t.each(i, function(e, r) {
                        t.isFunction(r) && (i[e] = function() {
                            var t = function() {
                                    return n.prototype[e].apply(this, arguments)
                                },
                                i = function(t) {
                                    return n.prototype[e].apply(this, t)
                                };
                            return function() {
                                var e, n = this._super,
                                    o = this._superApply;
                                return this._super = t, this._superApply = i, e = r.apply(this, arguments), this._super = n, this._superApply = o, e
                            }
                        }())
                    }), s.prototype = t.widget.extend(a, {
                        widgetEventPrefix: a.widgetEventPrefix || e
                    }, i, {
                        constructor: s,
                        namespace: l,
                        widgetName: e,
                        widgetFullName: r
                    }), o ? (t.each(o._childConstructors, function(e, n) {
                        var i = n.prototype;
                        t.widget(i.namespace + "." + i.widgetName, s, n._proto)
                    }), delete o._childConstructors) : n._childConstructors.push(s), t.widget.bridge(e, s)
                }, t.widget.extend = function(n) {
                    for (var r, o, s = i.call(arguments, 1), a = 0, l = s.length; l > a; a++)
                        for (r in s[a]) o = s[a][r], s[a].hasOwnProperty(r) && o !== e && (n[r] = t.isPlainObject(o) ? t.isPlainObject(n[r]) ? t.widget.extend({}, n[r], o) : t.widget.extend({}, o) : o);
                    return n
                }, t.widget.bridge = function(n, r) {
                    var o = r.prototype.widgetFullName;
                    t.fn[n] = function(s) {
                        var a = "string" == typeof s,
                            l = i.call(arguments, 1),
                            c = this;
                        return s = !a && l.length ? t.widget.extend.apply(null, [s].concat(l)) : s, this.each(a ? function() {
                            var i, r = t.data(this, o);
                            return r ? t.isFunction(r[s]) && "_" !== s.charAt(0) ? (i = r[s].apply(r, l), i !== r && i !== e ? (c = i && i.jquery ? c.pushStack(i.get()) : i, !1) : void 0) : t.error("no such method '" + s + "' for " + n + " widget instance") : t.error("cannot call methods on " + n + " prior to initialization; attempted to call method '" + s + "'")
                        } : function() {
                            var e = t.data(this, o);
                            e ? e.option(s || {})._init() : new r(s, this)
                        }), c
                    }
                }, t.Widget = function() {}, t.Widget._childConstructors = [], t.Widget.prototype = {
                    widgetName: "widget",
                    widgetEventPrefix: "",
                    defaultElement: "<div>",
                    options: {
                        disabled: !1,
                        create: null
                    },
                    _createWidget: function(e, i) {
                        i = t(i || this.defaultElement || this)[0], this.element = t(i), this.uuid = n++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = t.widget.extend({}, this.options, this._getCreateOptions(), e), this.bindings = t(), this.hoverable = t(), this.focusable = t(), i !== this && (t.data(i, this.widgetName, this), t.data(i, this.widgetFullName, this), this._on(this.element, {
                            remove: function(t) {
                                t.target === i && this.destroy()
                            }
                        }), this.document = t(i.style ? i.ownerDocument : i.document || i), this.window = t(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
                    },
                    _getCreateOptions: t.noop,
                    _getCreateEventData: t.noop,
                    _create: t.noop,
                    _init: t.noop,
                    destroy: function() {
                        this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
                    },
                    _destroy: t.noop,
                    widget: function() {
                        return this.element
                    },
                    option: function(n, i) {
                        var r, o, s, a = n;
                        if (0 === arguments.length) return t.widget.extend({}, this.options);
                        if ("string" == typeof n)
                            if (a = {}, r = n.split("."), n = r.shift(), r.length) {
                                for (o = a[n] = t.widget.extend({}, this.options[n]), s = 0; s < r.length - 1; s++) o[r[s]] = o[r[s]] || {}, o = o[r[s]];
                                if (n = r.pop(), i === e) return o[n] === e ? null : o[n];
                                o[n] = i
                            } else {
                                if (i === e) return this.options[n] === e ? null : this.options[n];
                                a[n] = i
                            }
                        return this._setOptions(a), this
                    },
                    _setOptions: function(t) {
                        var e;
                        for (e in t) this._setOption(e, t[e]);
                        return this
                    },
                    _setOption: function(t, e) {
                        return this.options[t] = e, "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!e).attr("aria-disabled", e), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
                    },
                    enable: function() {
                        return this._setOption("disabled", !1)
                    },
                    disable: function() {
                        return this._setOption("disabled", !0)
                    },
                    _on: function(e, n) {
                        var i, r = this;
                        n ? (e = i = t(e), this.bindings = this.bindings.add(e)) : (n = e, e = this.element, i = this.widget()), t.each(n, function(n, o) {
                            function s() {
                                return r.options.disabled === !0 || t(this).hasClass("ui-state-disabled") ? void 0 : ("string" == typeof o ? r[o] : o).apply(r, arguments)
                            }
                            "string" != typeof o && (s.guid = o.guid = o.guid || s.guid || t.guid++);
                            var a = n.match(/^(\w+)\s*(.*)$/),
                                l = a[1] + r.eventNamespace,
                                c = a[2];
                            c ? i.delegate(c, l, s) : e.bind(l, s)
                        })
                    },
                    _off: function(t, e) {
                        e = (e || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, t.unbind(e).undelegate(e)
                    },
                    _delay: function(t, e) {
                        function n() {
                            return ("string" == typeof t ? i[t] : t).apply(i, arguments)
                        }
                        var i = this;
                        return setTimeout(n, e || 0)
                    },
                    _hoverable: function(e) {
                        this.hoverable = this.hoverable.add(e), this._on(e, {
                            mouseenter: function(e) {
                                t(e.currentTarget).addClass("ui-state-hover")
                            },
                            mouseleave: function(e) {
                                t(e.currentTarget).removeClass("ui-state-hover")
                            }
                        })
                    },
                    _focusable: function(e) {
                        this.focusable = this.focusable.add(e), this._on(e, {
                            focusin: function(e) {
                                t(e.currentTarget).addClass("ui-state-focus")
                            },
                            focusout: function(e) {
                                t(e.currentTarget).removeClass("ui-state-focus")
                            }
                        })
                    },
                    _trigger: function(e, n, i) {
                        var r, o, s = this.options[e];
                        if (i = i || {}, n = t.Event(n), n.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(), n.target = this.element[0], o = n.originalEvent)
                            for (r in o) r in n || (n[r] = o[r]);
                        return this.element.trigger(n, i), !(t.isFunction(s) && s.apply(this.element[0], [n].concat(i)) === !1 || n.isDefaultPrevented())
                    }
                }, t.each({
                    show: "fadeIn",
                    hide: "fadeOut"
                }, function(e, n) {
                    t.Widget.prototype["_" + e] = function(i, r, o) {
                        "string" == typeof r && (r = {
                            effect: r
                        });
                        var s, a = r ? r === !0 || "number" == typeof r ? n : r.effect || n : e;
                        r = r || {}, "number" == typeof r && (r = {
                            duration: r
                        }), s = !t.isEmptyObject(r), r.complete = o, r.delay && i.delay(r.delay), s && t.effects && t.effects.effect[a] ? i[e](r) : a !== e && i[a] ? i[a](r.duration, r.easing, o) : i.queue(function(n) {
                            t(this)[e](), o && o.call(i[0]), n()
                        })
                    }
                })
            }(t)
        }), define("jqueryui/mouse", ["jquery", "./widget"], function(t) {
            ! function(t) {
                var e = !1;
                t(document).mouseup(function() {
                    e = !1
                }), t.widget("ui.mouse", {
                    version: "@VERSION",
                    options: {
                        cancel: "input,textarea,button,select,option",
                        distance: 1,
                        delay: 0
                    },
                    _mouseInit: function() {
                        var e = this;
                        this.element.bind("mousedown." + this.widgetName, function(t) {
                            return e._mouseDown(t)
                        }).bind("click." + this.widgetName, function(n) {
                            return !0 === t.data(n.target, e.widgetName + ".preventClickEvent") ? (t.removeData(n.target, e.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1) : void 0
                        }), this.started = !1
                    },
                    _mouseDestroy: function() {
                        this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
                    },
                    _mouseDown: function(n) {
                        if (!e) {
                            this._mouseStarted && this._mouseUp(n), this._mouseDownEvent = n;
                            var i = this,
                                r = 1 === n.which,
                                o = "string" == typeof this.options.cancel && n.target.nodeName ? t(n.target).closest(this.options.cancel).length : !1;
                            return r && !o && this._mouseCapture(n) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                                i.mouseDelayMet = !0
                            }, this.options.delay)), this._mouseDistanceMet(n) && this._mouseDelayMet(n) && (this._mouseStarted = this._mouseStart(n) !== !1, !this._mouseStarted) ? (n.preventDefault(), !0) : (!0 === t.data(n.target, this.widgetName + ".preventClickEvent") && t.removeData(n.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(t) {
                                return i._mouseMove(t)
                            }, this._mouseUpDelegate = function(t) {
                                return i._mouseUp(t)
                            }, t(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), n.preventDefault(), e = !0, !0)) : !0
                        }
                    },
                    _mouseMove: function(e) {
                        return !t.ui.ie || document.documentMode >= 9 || e.button ? this._mouseStarted ? (this._mouseDrag(e), e.preventDefault()) : (this._mouseDistanceMet(e) && this._mouseDelayMet(e) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, e) !== !1, this._mouseStarted ? this._mouseDrag(e) : this._mouseUp(e)), !this._mouseStarted) : this._mouseUp(e)
                    },
                    _mouseUp: function(e) {
                        return t(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, e.target === this._mouseDownEvent.target && t.data(e.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(e)), !1
                    },
                    _mouseDistanceMet: function(t) {
                        return Math.max(Math.abs(this._mouseDownEvent.pageX - t.pageX), Math.abs(this._mouseDownEvent.pageY - t.pageY)) >= this.options.distance
                    },
                    _mouseDelayMet: function() {
                        return this.mouseDelayMet
                    },
                    _mouseStart: function() {},
                    _mouseDrag: function() {},
                    _mouseStop: function() {},
                    _mouseCapture: function() {
                        return !0
                    }
                })
            }(t)
        }), define("jqueryui/sortable", ["jquery", "./core", "./mouse", "./widget"], function(t) {
            ! function(t) {
                t.widget("ui.sortable", t.ui.mouse, {
                    version: "@VERSION",
                    widgetEventPrefix: "sort",
                    ready: !1,
                    options: {
                        appendTo: "parent",
                        axis: !1,
                        connectWith: !1,
                        containment: !1,
                        cursor: "auto",
                        cursorAt: !1,
                        dropOnEmpty: !0,
                        forcePlaceholderSize: !1,
                        forceHelperSize: !1,
                        grid: !1,
                        handle: !1,
                        helper: "original",
                        items: "> *",
                        opacity: !1,
                        placeholder: !1,
                        revert: !1,
                        scroll: !0,
                        scrollSensitivity: 20,
                        scrollSpeed: 20,
                        scope: "default",
                        tolerance: "intersect",
                        zIndex: 1e3
                    },
                    _create: function() {
                        var t = this.options;
                        this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? "x" === t.axis || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
                    },
                    _destroy: function() {
                        this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
                        for (var t = this.items.length - 1; t >= 0; t--) this.items[t].item.removeData(this.widgetName + "-item");
                        return this
                    },
                    _setOption: function(e, n) {
                        "disabled" === e ? (this.options[e] = n, this.widget().toggleClass("ui-sortable-disabled", !!n)) : t.Widget.prototype._setOption.apply(this, arguments)
                    },
                    _mouseCapture: function(e, n) {
                        var i = this;
                        if (this.reverting) return !1;
                        if (this.options.disabled || "static" == this.options.type) return !1;
                        this._refreshItems(e);
                        var r = null;
                        if (t(e.target).parents().each(function() {
                                return t.data(this, i.widgetName + "-item") == i ? (r = t(this), !1) : void 0
                            }), t.data(e.target, i.widgetName + "-item") == i && (r = t(e.target)), !r) return !1;
                        if (this.options.handle && !n) {
                            var o = !1;
                            if (t(this.options.handle, r).find("*").andSelf().each(function() {
                                    this == e.target && (o = !0)
                                }), !o) return !1
                        }
                        return this.currentItem = r, this._removeCurrentsFromItems(), !0
                    },
                    _mouseStart: function(e, n, i) {
                        var r = this.options;
                        if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(e), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {
                                top: this.offset.top - this.margins.top,
                                left: this.offset.left - this.margins.left
                            }, t.extend(this.offset, {
                                click: {
                                    left: e.pageX - this.offset.left,
                                    top: e.pageY - this.offset.top
                                },
                                parent: this._getParentOffset(),
                                relative: this._getRelativeOffset()
                            }), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(e), this.originalPageX = e.pageX, this.originalPageY = e.pageY, r.cursorAt && this._adjustOffsetFromHelper(r.cursorAt), this.domPosition = {
                                prev: this.currentItem.prev()[0],
                                parent: this.currentItem.parent()[0]
                            }, this.helper[0] != this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), r.containment && this._setContainment(), r.cursor && (t("body").css("cursor") && (this._storedCursor = t("body").css("cursor")), t("body").css("cursor", r.cursor)), r.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", r.opacity)), r.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", r.zIndex)), this.scrollParent[0] != document && "HTML" != this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", e, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !i)
                            for (var o = this.containers.length - 1; o >= 0; o--) this.containers[o]._trigger("activate", e, this._uiHash(this));
                        return t.ui.ddmanager && (t.ui.ddmanager.current = this), t.ui.ddmanager && !r.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(e), !0
                    },
                    _mouseDrag: function(e) {
                        if (this.position = this._generatePosition(e), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll) {
                            var n = this.options,
                                i = !1;
                            this.scrollParent[0] != document && "HTML" != this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - e.pageY < n.scrollSensitivity ? this.scrollParent[0].scrollTop = i = this.scrollParent[0].scrollTop + n.scrollSpeed : e.pageY - this.overflowOffset.top < n.scrollSensitivity && (this.scrollParent[0].scrollTop = i = this.scrollParent[0].scrollTop - n.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - e.pageX < n.scrollSensitivity ? this.scrollParent[0].scrollLeft = i = this.scrollParent[0].scrollLeft + n.scrollSpeed : e.pageX - this.overflowOffset.left < n.scrollSensitivity && (this.scrollParent[0].scrollLeft = i = this.scrollParent[0].scrollLeft - n.scrollSpeed)) : (e.pageY - t(document).scrollTop() < n.scrollSensitivity ? i = t(document).scrollTop(t(document).scrollTop() - n.scrollSpeed) : t(window).height() - (e.pageY - t(document).scrollTop()) < n.scrollSensitivity && (i = t(document).scrollTop(t(document).scrollTop() + n.scrollSpeed)), e.pageX - t(document).scrollLeft() < n.scrollSensitivity ? i = t(document).scrollLeft(t(document).scrollLeft() - n.scrollSpeed) : t(window).width() - (e.pageX - t(document).scrollLeft()) < n.scrollSensitivity && (i = t(document).scrollLeft(t(document).scrollLeft() + n.scrollSpeed))), i !== !1 && t.ui.ddmanager && !n.dropBehaviour && t.ui.ddmanager.prepareOffsets(this, e)
                        }
                        this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" == this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" == this.options.axis || (this.helper[0].style.top = this.position.top + "px");
                        for (var r = this.items.length - 1; r >= 0; r--) {
                            var o = this.items[r],
                                s = o.item[0],
                                a = this._intersectsWithPointer(o);
                            if (a && o.instance === this.currentContainer && s != this.currentItem[0] && this.placeholder[1 == a ? "next" : "prev"]()[0] != s && !t.contains(this.placeholder[0], s) && ("semi-dynamic" == this.options.type ? !t.contains(this.element[0], s) : !0)) {
                                if (this.direction = 1 == a ? "down" : "up", "pointer" != this.options.tolerance && !this._intersectsWithSides(o)) break;
                                this._rearrange(e, o), this._trigger("change", e, this._uiHash());
                                break
                            }
                        }
                        return this._contactContainers(e), t.ui.ddmanager && t.ui.ddmanager.drag(this, e), this._trigger("sort", e, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
                    },
                    _mouseStop: function(e, n) {
                        if (e) {
                            if (t.ui.ddmanager && !this.options.dropBehaviour && t.ui.ddmanager.drop(this, e), this.options.revert) {
                                var i = this,
                                    r = this.placeholder.offset();
                                this.reverting = !0, t(this.helper).animate({
                                    left: r.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft),
                                    top: r.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)
                                }, parseInt(this.options.revert, 10) || 500, function() {
                                    i._clear(e)
                                })
                            } else this._clear(e, n);
                            return !1
                        }
                    },
                    cancel: function() {
                        if (this.dragging) {
                            this._mouseUp({
                                target: null
                            }), "original" == this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                            for (var e = this.containers.length - 1; e >= 0; e--) this.containers[e]._trigger("deactivate", null, this._uiHash(this)), this.containers[e].containerCache.over && (this.containers[e]._trigger("out", null, this._uiHash(this)), this.containers[e].containerCache.over = 0)
                        }
                        return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" != this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), t.extend(this, {
                            helper: null,
                            dragging: !1,
                            reverting: !1,
                            _noFinalSort: null
                        }), this.domPosition.prev ? t(this.domPosition.prev).after(this.currentItem) : t(this.domPosition.parent).prepend(this.currentItem)), this
                    },
                    serialize: function(e) {
                        var n = this._getItemsAsjQuery(e && e.connected),
                            i = [];
                        return e = e || {}, t(n).each(function() {
                            var n = (t(e.item || this).attr(e.attribute || "id") || "").match(e.expression || /(.+)[\-=_](.+)/);
                            n && i.push((e.key || n[1] + "[]") + "=" + (e.key && e.expression ? n[1] : n[2]))
                        }), !i.length && e.key && i.push(e.key + "="), i.join("&")
                    },
                    toArray: function(e) {
                        var n = this._getItemsAsjQuery(e && e.connected),
                            i = [];
                        return e = e || {}, n.each(function() {
                            i.push(t(e.item || this).attr(e.attribute || "id") || "")
                        }), i
                    },
                    _intersectsWith: function(t) {
                        var e = this.positionAbs.left,
                            n = e + this.helperProportions.width,
                            i = this.positionAbs.top,
                            r = i + this.helperProportions.height,
                            o = t.left,
                            s = o + t.width,
                            a = t.top,
                            l = a + t.height,
                            c = this.offset.click.top,
                            u = this.offset.click.left,
                            d = i + c > a && l > i + c && e + u > o && s > e + u;
                        return "pointer" == this.options.tolerance || this.options.forcePointerForContainers || "pointer" != this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > t[this.floating ? "width" : "height"] ? d : o < e + this.helperProportions.width / 2 && n - this.helperProportions.width / 2 < s && a < i + this.helperProportions.height / 2 && r - this.helperProportions.height / 2 < l
                    },
                    _intersectsWithPointer: function(e) {
                        var n = "x" === this.options.axis || t.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, e.top, e.height),
                            i = "y" === this.options.axis || t.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, e.left, e.width),
                            r = n && i,
                            o = this._getDragVerticalDirection(),
                            s = this._getDragHorizontalDirection();
                        return r ? this.floating ? s && "right" == s || "down" == o ? 2 : 1 : o && ("down" == o ? 2 : 1) : !1
                    },
                    _intersectsWithSides: function(e) {
                        var n = t.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, e.top + e.height / 2, e.height),
                            i = t.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, e.left + e.width / 2, e.width),
                            r = this._getDragVerticalDirection(),
                            o = this._getDragHorizontalDirection();
                        return this.floating && o ? "right" == o && i || "left" == o && !i : r && ("down" == r && n || "up" == r && !n)
                    },
                    _getDragVerticalDirection: function() {
                        var t = this.positionAbs.top - this.lastPositionAbs.top;
                        return 0 !== t && (t > 0 ? "down" : "up")
                    },
                    _getDragHorizontalDirection: function() {
                        var t = this.positionAbs.left - this.lastPositionAbs.left;
                        return 0 !== t && (t > 0 ? "right" : "left")
                    },
                    refresh: function(t) {
                        return this._refreshItems(t), this.refreshPositions(), this
                    },
                    _connectWith: function() {
                        var t = this.options;
                        return t.connectWith.constructor == String ? [t.connectWith] : t.connectWith
                    },
                    _getItemsAsjQuery: function(e) {
                        var n = [],
                            i = [],
                            r = this._connectWith();
                        if (r && e)
                            for (var o = r.length - 1; o >= 0; o--)
                                for (var s = t(r[o]), a = s.length - 1; a >= 0; a--) {
                                    var l = t.data(s[a], this.widgetName);
                                    l && l != this && !l.options.disabled && i.push([t.isFunction(l.options.items) ? l.options.items.call(l.element) : t(l.options.items, l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), l])
                                }
                        i.push([t.isFunction(this.options.items) ? this.options.items.call(this.element, null, {
                            options: this.options,
                            item: this.currentItem
                        }) : t(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
                        for (var o = i.length - 1; o >= 0; o--) i[o][0].each(function() {
                            n.push(this)
                        });
                        return t(n)
                    },
                    _removeCurrentsFromItems: function() {
                        var e = this.currentItem.find(":data(" + this.widgetName + "-item)");
                        this.items = t.grep(this.items, function(t) {
                            for (var n = 0; n < e.length; n++)
                                if (e[n] == t.item[0]) return !1;
                            return !0
                        })
                    },
                    _refreshItems: function(e) {
                        this.items = [], this.containers = [this];
                        var n = this.items,
                            i = [
                                [t.isFunction(this.options.items) ? this.options.items.call(this.element[0], e, {
                                    item: this.currentItem
                                }) : t(this.options.items, this.element), this]
                            ],
                            r = this._connectWith();
                        if (r && this.ready)
                            for (var o = r.length - 1; o >= 0; o--)
                                for (var s = t(r[o]), a = s.length - 1; a >= 0; a--) {
                                    var l = t.data(s[a], this.widgetName);
                                    l && l != this && !l.options.disabled && (i.push([t.isFunction(l.options.items) ? l.options.items.call(l.element[0], e, {
                                        item: this.currentItem
                                    }) : t(l.options.items, l.element), l]), this.containers.push(l))
                                }
                        for (var o = i.length - 1; o >= 0; o--)
                            for (var c = i[o][1], u = i[o][0], a = 0, d = u.length; d > a; a++) {
                                var p = t(u[a]);
                                p.data(this.widgetName + "-item", c), n.push({
                                    item: p,
                                    instance: c,
                                    width: 0,
                                    height: 0,
                                    left: 0,
                                    top: 0
                                })
                            }
                    },
                    refreshPositions: function(e) {
                        this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
                        for (var n = this.items.length - 1; n >= 0; n--) {
                            var i = this.items[n];
                            if (i.instance == this.currentContainer || !this.currentContainer || i.item[0] == this.currentItem[0]) {
                                var r = this.options.toleranceElement ? t(this.options.toleranceElement, i.item) : i.item;
                                e || (i.width = r.outerWidth(), i.height = r.outerHeight());
                                var o = r.offset();
                                i.left = o.left, i.top = o.top
                            }
                        }
                        if (this.options.custom && this.options.custom.refreshContainers) this.options.custom.refreshContainers.call(this);
                        else
                            for (var n = this.containers.length - 1; n >= 0; n--) {
                                var o = this.containers[n].element.offset();
                                this.containers[n].containerCache.left = o.left, this.containers[n].containerCache.top = o.top, this.containers[n].containerCache.width = this.containers[n].element.outerWidth(), this.containers[n].containerCache.height = this.containers[n].element.outerHeight()
                            }
                        return this
                    },
                    _createPlaceholder: function(e) {
                        e = e || this;
                        var n = e.options;
                        if (!n.placeholder || n.placeholder.constructor == String) {
                            var i = n.placeholder;
                            n.placeholder = {
                                element: function() {
                                    var n = t(document.createElement(e.currentItem[0].nodeName)).addClass(i || e.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                                    return i || (n.style.visibility = "hidden"), n
                                },
                                update: function(t, r) {
                                    (!i || n.forcePlaceholderSize) && (r.height() || r.height(e.currentItem.innerHeight() - parseInt(e.currentItem.css("paddingTop") || 0, 10) - parseInt(e.currentItem.css("paddingBottom") || 0, 10)), r.width() || r.width(e.currentItem.innerWidth() - parseInt(e.currentItem.css("paddingLeft") || 0, 10) - parseInt(e.currentItem.css("paddingRight") || 0, 10)))
                                }
                            }
                        }
                        e.placeholder = t(n.placeholder.element.call(e.element, e.currentItem)), e.currentItem.after(e.placeholder), n.placeholder.update(e, e.placeholder)
                    },
                    _contactContainers: function(e) {
                        for (var n = null, i = null, r = this.containers.length - 1; r >= 0; r--)
                            if (!t.contains(this.currentItem[0], this.containers[r].element[0]))
                                if (this._intersectsWith(this.containers[r].containerCache)) {
                                    if (n && t.contains(this.containers[r].element[0], n.element[0])) continue;
                                    n = this.containers[r], i = r
                                } else this.containers[r].containerCache.over && (this.containers[r]._trigger("out", e, this._uiHash(this)), this.containers[r].containerCache.over = 0);
                        if (n)
                            if (1 === this.containers.length) this.containers[i]._trigger("over", e, this._uiHash(this)), this.containers[i].containerCache.over = 1;
                            else {
                                for (var o = 1e4, s = null, a = this.containers[i].floating ? "left" : "top", l = this.containers[i].floating ? "width" : "height", c = this.positionAbs[a] + this.offset.click[a], u = this.items.length - 1; u >= 0; u--)
                                    if (t.contains(this.containers[i].element[0], this.items[u].item[0]) && this.items[u].item[0] != this.currentItem[0]) {
                                        var d = this.items[u].item.offset()[a],
                                            p = !1;
                                        Math.abs(d - c) > Math.abs(d + this.items[u][l] - c) && (p = !0, d += this.items[u][l]), Math.abs(d - c) < o && (o = Math.abs(d - c), s = this.items[u], this.direction = p ? "up" : "down")
                                    }
                                if (!s && !this.options.dropOnEmpty) return;
                                this.currentContainer = this.containers[i], s ? this._rearrange(e, s, null, !0) : this._rearrange(e, null, this.containers[i].element, !0), this._trigger("change", e, this._uiHash()), this.containers[i]._trigger("change", e, this._uiHash(this)), this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[i]._trigger("over", e, this._uiHash(this)), this.containers[i].containerCache.over = 1
                            }
                    },
                    _createHelper: function(e) {
                        var n = this.options,
                            i = t.isFunction(n.helper) ? t(n.helper.apply(this.element[0], [e, this.currentItem])) : "clone" == n.helper ? this.currentItem.clone() : this.currentItem;
                        return i.parents("body").length || t("parent" != n.appendTo ? n.appendTo : this.currentItem[0].parentNode)[0].appendChild(i[0]), i[0] == this.currentItem[0] && (this._storedCSS = {
                            width: this.currentItem[0].style.width,
                            height: this.currentItem[0].style.height,
                            position: this.currentItem.css("position"),
                            top: this.currentItem.css("top"),
                            left: this.currentItem.css("left")
                        }), (!i[0].style.width || n.forceHelperSize) && i.width(this.currentItem.width()), (!i[0].style.height || n.forceHelperSize) && i.height(this.currentItem.height()), i
                    },
                    _adjustOffsetFromHelper: function(e) {
                        "string" == typeof e && (e = e.split(" ")), t.isArray(e) && (e = {
                            left: +e[0],
                            top: +e[1] || 0
                        }), "left" in e && (this.offset.click.left = e.left + this.margins.left), "right" in e && (this.offset.click.left = this.helperProportions.width - e.right + this.margins.left), "top" in e && (this.offset.click.top = e.top + this.margins.top), "bottom" in e && (this.offset.click.top = this.helperProportions.height - e.bottom + this.margins.top)
                    },
                    _getParentOffset: function() {
                        this.offsetParent = this.helper.offsetParent();
                        var e = this.offsetParent.offset();
                        return "absolute" == this.cssPosition && this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) && (e.left += this.scrollParent.scrollLeft(), e.top += this.scrollParent.scrollTop()), (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && "html" == this.offsetParent[0].tagName.toLowerCase() && t.ui.ie) && (e = {
                            top: 0,
                            left: 0
                        }), {
                            top: e.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                            left: e.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
                        }
                    },
                    _getRelativeOffset: function() {
                        if ("relative" == this.cssPosition) {
                            var t = this.currentItem.position();
                            return {
                                top: t.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                                left: t.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                            }
                        }
                        return {
                            top: 0,
                            left: 0
                        }
                    },
                    _cacheMargins: function() {
                        this.margins = {
                            left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                            top: parseInt(this.currentItem.css("marginTop"), 10) || 0
                        }
                    },
                    _cacheHelperProportions: function() {
                        this.helperProportions = {
                            width: this.helper.outerWidth(),
                            height: this.helper.outerHeight()
                        }
                    },
                    _setContainment: function() {
                        var e = this.options;
                        if ("parent" == e.containment && (e.containment = this.helper[0].parentNode), ("document" == e.containment || "window" == e.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, t("document" == e.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (t("document" == e.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), !/^(document|window|parent)$/.test(e.containment)) {
                            var n = t(e.containment)[0],
                                i = t(e.containment).offset(),
                                r = "hidden" != t(n).css("overflow");
                            this.containment = [i.left + (parseInt(t(n).css("borderLeftWidth"), 10) || 0) + (parseInt(t(n).css("paddingLeft"), 10) || 0) - this.margins.left, i.top + (parseInt(t(n).css("borderTopWidth"), 10) || 0) + (parseInt(t(n).css("paddingTop"), 10) || 0) - this.margins.top, i.left + (r ? Math.max(n.scrollWidth, n.offsetWidth) : n.offsetWidth) - (parseInt(t(n).css("borderLeftWidth"), 10) || 0) - (parseInt(t(n).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, i.top + (r ? Math.max(n.scrollHeight, n.offsetHeight) : n.offsetHeight) - (parseInt(t(n).css("borderTopWidth"), 10) || 0) - (parseInt(t(n).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top]
                        }
                    },
                    _convertPositionTo: function(e, n) {
                        n || (n = this.position);
                        var i = "absolute" == e ? 1 : -1,
                            r = "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                            o = /(html|body)/i.test(r[0].tagName);
                        return {
                            top: n.top + this.offset.relative.top * i + this.offset.parent.top * i - ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() : o ? 0 : r.scrollTop()) * i,
                            left: n.left + this.offset.relative.left * i + this.offset.parent.left * i - ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() : o ? 0 : r.scrollLeft()) * i
                        }
                    },
                    _generatePosition: function(e) {
                        var n = this.options,
                            i = "absolute" != this.cssPosition || this.scrollParent[0] != document && t.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                            r = /(html|body)/i.test(i[0].tagName);
                        "relative" != this.cssPosition || this.scrollParent[0] != document && this.scrollParent[0] != this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset());
                        var o = e.pageX,
                            s = e.pageY;
                        if (this.originalPosition && (this.containment && (e.pageX - this.offset.click.left < this.containment[0] && (o = this.containment[0] + this.offset.click.left), e.pageY - this.offset.click.top < this.containment[1] && (s = this.containment[1] + this.offset.click.top), e.pageX - this.offset.click.left > this.containment[2] && (o = this.containment[2] + this.offset.click.left), e.pageY - this.offset.click.top > this.containment[3] && (s = this.containment[3] + this.offset.click.top)), n.grid)) {
                            var a = this.originalPageY + Math.round((s - this.originalPageY) / n.grid[1]) * n.grid[1];
                            s = this.containment ? a - this.offset.click.top >= this.containment[1] && a - this.offset.click.top <= this.containment[3] ? a : a - this.offset.click.top >= this.containment[1] ? a - n.grid[1] : a + n.grid[1] : a;
                            var l = this.originalPageX + Math.round((o - this.originalPageX) / n.grid[0]) * n.grid[0];
                            o = this.containment ? l - this.offset.click.left >= this.containment[0] && l - this.offset.click.left <= this.containment[2] ? l : l - this.offset.click.left >= this.containment[0] ? l - n.grid[0] : l + n.grid[0] : l
                        }
                        return {
                            top: s - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" == this.cssPosition ? -this.scrollParent.scrollTop() : r ? 0 : i.scrollTop()),
                            left: o - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" == this.cssPosition ? -this.scrollParent.scrollLeft() : r ? 0 : i.scrollLeft())
                        }
                    },
                    _rearrange: function(t, e, n, i) {
                        n ? n[0].appendChild(this.placeholder[0]) : e.item[0].parentNode.insertBefore(this.placeholder[0], "down" == this.direction ? e.item[0] : e.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
                        var r = this.counter;
                        this._delay(function() {
                            r == this.counter && this.refreshPositions(!i)
                        })
                    },
                    _clear: function(e, n) {
                        this.reverting = !1;
                        var i = [];
                        if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] == this.currentItem[0]) {
                            for (var r in this._storedCSS)("auto" == this._storedCSS[r] || "static" == this._storedCSS[r]) && (this._storedCSS[r] = "");
                            this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
                        } else this.currentItem.show();
                        this.fromOutside && !n && i.push(function(t) {
                            this._trigger("receive", t, this._uiHash(this.fromOutside))
                        }), !this.fromOutside && this.domPosition.prev == this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent == this.currentItem.parent()[0] || n || i.push(function(t) {
                            this._trigger("update", t, this._uiHash())
                        }), this !== this.currentContainer && (n || (i.push(function(t) {
                            this._trigger("remove", t, this._uiHash())
                        }), i.push(function(t) {
                            return function(e) {
                                t._trigger("receive", e, this._uiHash(this))
                            }
                        }.call(this, this.currentContainer)), i.push(function(t) {
                            return function(e) {
                                t._trigger("update", e, this._uiHash(this))
                            }
                        }.call(this, this.currentContainer))));
                        for (var r = this.containers.length - 1; r >= 0; r--) n || i.push(function(t) {
                            return function(e) {
                                t._trigger("deactivate", e, this._uiHash(this))
                            }
                        }.call(this, this.containers[r])), this.containers[r].containerCache.over && (i.push(function(t) {
                            return function(e) {
                                t._trigger("out", e, this._uiHash(this))
                            }
                        }.call(this, this.containers[r])), this.containers[r].containerCache.over = 0);
                        if (this._storedCursor && t("body").css("cursor", this._storedCursor), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" == this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, this.cancelHelperRemoval) {
                            if (!n) {
                                this._trigger("beforeStop", e, this._uiHash());
                                for (var r = 0; r < i.length; r++) i[r].call(this, e);
                                this._trigger("stop", e, this._uiHash())
                            }
                            return this.fromOutside = !1, !1
                        }
                        if (n || this._trigger("beforeStop", e, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] != this.currentItem[0] && this.helper.remove(), this.helper = null, !n) {
                            for (var r = 0; r < i.length; r++) i[r].call(this, e);
                            this._trigger("stop", e, this._uiHash())
                        }
                        return this.fromOutside = !1, !0
                    },
                    _trigger: function() {
                        t.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
                    },
                    _uiHash: function(e) {
                        var n = e || this;
                        return {
                            helper: n.helper,
                            placeholder: n.placeholder || t([]),
                            position: n.position,
                            originalPosition: n.originalPosition,
                            offset: n.positionAbs,
                            item: n.currentItem,
                            sender: e ? e.element : null
                        }
                    }
                })
            }(t)
        }), define("multiselect", ["jquery", "jqueryui/core", "jqueryui/sortable"], function(t) {
            ! function(t) {
                t.widget("ui.multiselect", {
                    options: {
                        sortable: !0,
                        dragToAdd: !0,
                        searchable: !0,
                        doubleClickable: !0,
                        animated: "fast",
                        show: "slideDown",
                        hide: "slideUp",
                        dividerLocation: .6,
                        width: null,
                        height: null,
                        nodeComparator: function(t, e) {
                            var n = t.text(),
                                i = e.text();
                            return n == i ? 0 : i > n ? -1 : 1
                        }
                    },
                    _create: function() {
                        this.element.hide(), this.id = this.element.attr("id"), this.container = t('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element), this.count = 0, this.selectedContainer = t('<div class="selected"></div>').appendTo(this.container), this.availableContainer = t('<div class="available"></div>').appendTo(this.container), this.selectedActions = t('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 ' + t.ui.multiselect.locale.itemsCount + '</span><a href="#" class="remove-all">' + t.ui.multiselect.locale.removeAll + "</a></div>").appendTo(this.selectedContainer), this.availableActions = t('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">' + t.ui.multiselect.locale.addAll + "</a></div>").appendTo(this.availableContainer), this.selectedList = t('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart", function() {
                            return !1
                        }).appendTo(this.selectedContainer), this.availableList = t('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart", function() {
                            return !1
                        }).appendTo(this.availableContainer);
                        var e = this,
                            n = this.options.width;
                        n || (n = this.element.width());
                        var i = this.options.height;
                        i || (i = this.element.height()), this.container.width(n - 2), this.selectedContainer.width(Math.floor(n * this.options.dividerLocation) - 1), this.availableContainer.width(Math.floor(n * (1 - this.options.dividerLocation)) - 2), this.selectedList.height(Math.max(i - this.selectedActions.height(), 1)), this.availableList.height(Math.max(i - this.availableActions.height(), 1)), this.options.animated || (this.options.show = "show", this.options.hide = "hide"), this._populateLists(this.element.find("option")), this.options.sortable && this.selectedList.sortable({
                            placeholder: "ui-state-highlight",
                            axis: "y",
                            update: function() {
                                e.selectedList.find("li").each(function() {
                                    t(this).data("optionLink") && t(this).data("optionLink").remove().appendTo(e.element)
                                })
                            },
                            beforeStop: function(t, e) {
                                e.item.addClass("dropped")
                            },
                            receive: function(n, i) {
                                i.item.data("optionLink").attr("selected", !0), e.count += 1, e._updateCount(), e.selectedList.children(".dropped").each(function() {
                                    t(this).removeClass("dropped"), t(this).data("optionLink", i.item.data("optionLink")), t(this).data("idx", i.item.data("idx")), e._applyItemState(t(this), !0)
                                }), setTimeout(function() {
                                    i.item.remove()
                                }, 1)
                            },
                            stop: function() {
                                e.element.change()
                            }
                        }), this.options.searchable ? this._registerSearchEvents(this.availableContainer.find("input.search")) : t(".search").hide(), this.container.find(".remove-all").click(function() {
                            return e._populateLists(e.element.find("option").removeAttr("selected")), e.element.trigger("change"), !1
                        }), this.container.find(".add-all").click(function() {
                            var n = e.element.find("option").not(":selected");
                            return e.availableList.children("li:hidden").length > 1 ? e.availableList.children("li").each(function(e) {
                                t(this).is(":visible") && t(n[e - 1]).attr("selected", "selected")
                            }) : n.attr("selected", "selected"), e._populateLists(e.element.find("option")), e.element.trigger("change"), !1
                        })
                    },
                    destroy: function() {
                        this.element.show(), this.container.remove(), t.Widget.prototype.destroy.apply(this, arguments)
                    },
                    _populateLists: function(e) {
                        this.selectedList.children(".ui-element").remove(), this.availableList.children(".ui-element").remove(), this.count = 0; {
                            var n = this;
                            t(e.map(function(t) {
                                var e = n._getOptionNode(this).appendTo(this.selected ? n.selectedList : n.availableList).show();
                                return this.selected && (n.count += 1), n._applyItemState(e, this.selected), e.data("idx", t), e[0]
                            }))
                        }
                        this._updateCount(), n._filter.apply(this.availableContainer.find("input.search"), [n.availableList])
                    },
                    _updateCount: function() {
                        this.selectedContainer.find("span.count").text(this.count + " " + t.ui.multiselect.locale.itemsCount)
                    },
                    _getOptionNode: function(e) {
                        e = t(e);
                        var n = t('<li class="ui-state-default ui-element" title="' + e.text() + '"><span class="ui-icon"/>' + e.text() + '<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
                        return n.data("optionLink", e), n
                    },
                    _cloneWithData: function(t) {
                        var e = t.clone(!1, !1);
                        return e.data("optionLink", t.data("optionLink")), e.data("idx", t.data("idx")), e
                    },
                    _setSelected: function(e, n) {
                        var i = e.data("optionLink").attr("selected", n),
                            r = i.parent();
                        if (i.detach().appendTo(r), this.element.trigger("change"), n) {
                            var o = this._cloneWithData(e);
                            return e[this.options.hide](this.options.animated, function() {
                                t(this).remove()
                            }), o.appendTo(this.selectedList).hide()[this.options.show](this.options.animated), this._applyItemState(o, !0), o
                        }
                        var s = this.availableList.find("li"),
                            a = this.options.nodeComparator,
                            l = null,
                            c = e.data("idx"),
                            u = a(e, t(s[c]));
                        if (u) {
                            for (; c >= 0 && c < s.length;)
                                if (u > 0 ? c++ : c--, u != a(e, t(s[c]))) {
                                    l = s[u > 0 ? c : c + 1];
                                    break
                                }
                        } else l = s[c];
                        var d = this._cloneWithData(e);
                        return l ? d.insertBefore(t(l)) : d.appendTo(this.availableList), e[this.options.hide](this.options.animated, function() {
                            t(this).remove()
                        }), d.hide()[this.options.show](this.options.animated), this._applyItemState(d, !1), d
                    },
                    _applyItemState: function(t, e) {
                        e ? (this.options.sortable ? t.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon") : t.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"), t.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"), this._registerRemoveEvents(t.find("a.action"))) : (t.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"), t.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"), this._registerAddEvents(t.find("a.action"))), this._registerDoubleClickEvents(t), this._registerHoverEvents(t)
                    },
                    _filter: function(e) {
                        var n = t(this),
                            i = e.children("li"),
                            r = i.map(function() {
                                return t(this).text().toLowerCase()
                            }),
                            o = t.trim(n.val().toLowerCase()),
                            s = [];
                        o ? (i.hide(), r.each(function(t) {
                            this.indexOf(o) > -1 && s.push(t)
                        }), t.each(s, function() {
                            t(i[this]).show()
                        })) : i.show()
                    },
                    _registerDoubleClickEvents: function(t) {
                        this.options.doubleClickable && (t.dblclick(function() {
                            t.find("a.action").click()
                        }), t.find("a.action").dblclick(function(t) {
                            t.stopPropagation()
                        }))
                    },
                    _registerHoverEvents: function(e) {
                        e.removeClass("ui-state-hover"), e.mouseover(function() {
                            t(this).addClass("ui-state-hover")
                        }), e.mouseout(function() {
                            t(this).removeClass("ui-state-hover")
                        })
                    },
                    _registerAddEvents: function(e) {
                        var n = this;
                        e.click(function() {
                            n._setSelected(t(this).parent(), !0);
                            return n.count += 1, n._updateCount(), !1
                        }), this.options.sortable && this.options.dragToAdd && e.each(function() {
                            t(this).parent().draggable({
                                connectToSortable: n.selectedList,
                                helper: function() {
                                    var e = n._cloneWithData(t(this)).width(t(this).width() - 50);
                                    return e.width(t(this).width()), e
                                },
                                appendTo: n.container,
                                containment: n.container,
                                revert: "invalid"
                            })
                        })
                    },
                    _registerRemoveEvents: function(e) {
                        var n = this;
                        e.click(function() {
                            return n._setSelected(t(this).parent(), !1), n.count -= 1, n._updateCount(), !1
                        })
                    },
                    _registerSearchEvents: function(e) {
                        var n = this;
                        e.focus(function() {
                            t(this).addClass("ui-state-active")
                        }).blur(function() {
                            t(this).removeClass("ui-state-active")
                        }).keypress(function(t) {
                            return 13 == t.keyCode ? !1 : void 0
                        }).keyup(function() {
                            n._filter.apply(this, [n.availableList])
                        })
                    }
                }), t.extend(t.ui.multiselect, {
                    locale: {
                        addAll: "Add all",
                        removeAll: "Remove all",
                        itemsCount: "items selected"
                    }
                })
            }(t)
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/competitor_lists/CompetitorForm", ["require", "jquery", "underscore", "backbone", "components/form/form", "components/competitor_lists/schema_competitor_form", "components/competitor_lists/templates", "multiselect"], function(e) {
                var i, r, o, s, a, l;
                return i = e("jquery"), l = e("underscore"), r = e("backbone"), s = e("components/form/form"), a = e("components/competitor_lists/schema_competitor_form"), e("components/competitor_lists/templates"), e("multiselect"), o = function(e) {
                    function r() {
                        return this.onClose = t(this.onClose, this), this.custom_validation = t(this.custom_validation, this), this.after_submit = t(this.after_submit, this), this.submit_form = t(this.submit_form, this), this.render = t(this.render, this), this.renderDelete = t(this.renderDelete, this), this.renderClone = t(this.renderClone, this), this.renderModify = t(this.renderModify, this), this.renderNew = t(this.renderNew, this), this.showDelete = t(this.showDelete, this), this.showClone = t(this.showClone, this), this.showModify = t(this.showModify, this), this.showNew = t(this.showNew, this), this.get_companies = t(this.get_companies, this), this.updateActionInput = t(this.updateActionInput, this), this.updateListSelect = t(this.updateListSelect, this), this.updateUsage = t(this.updateUsage, this), this.updateCompanySelect = t(this.updateCompanySelect, this), this.on_lists_refreshed = t(this.on_lists_refreshed, this), this.on_list_change = t(this.on_list_change, this), this.showForm = t(this.showForm, this), this.on_action_change = t(this.on_action_change, this), this.setElClass = t(this.setElClass, this), this.events = t(this.events, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.path = "components/competitor_lists", r.prototype.id = "competitor-form", r.stylesheets = ["components/competitor_lists/competitor_form.css"], r.prototype.templates = {
                        form: "!tmpl_competitor_form.html"
                    }, r.prototype.events = function() {
                        return l.extend({}, r.__super__.events.apply(this, arguments), {
                            'change input[name="action"]': "on_action_change",
                            "change select#list_id": "on_list_change"
                        })
                    }, r.prototype.countryCode = "AUST", r.prototype.allCompanies = [], r.prototype.rendered = !1, r.prototype.displayDelete = !1, r.prototype.canDelete = !0, r.prototype.isModal = !0, r.prototype.initialize = function(t) {
                        if (null == t.service_url) throw Error("Missing mandatory parameter: service_url");
                        if (null == t.user_id) throw Error("Missing mandatory parameter: user_id");
                        if (null == t.cust_id) throw Error("Missing mandatory parameter: cust_id");
                        return null != t.modal && (this.isModal = t.modal), t.form_action = "" + t.service_url, null != t.request_type && (this.request_type = t.request_type), null != t.country_code && (this.countryCode = t.country_code), null != t.displayDelete && (this.displayDelete = t.displayDelete), this.setElClass(), this.render(), r.__super__.initialize.apply(this, arguments)
                    }, r.prototype.setElClass = function() {
                        return this.isModal ? this.$el.attr("class", "modal fade") : void 0
                    }, r.prototype.on_action_change = function(t) {
                        return this.showForm(), t.stopPropagation()
                    }, r.prototype.showForm = function() {
                        var t, e;
                        return i(".alert-error.validation, .warning", this.el).hide(), i("#submit", this.el).val("Save"), i(".submit_action", this.el).text("Saved"), this.request_type = "POST", t = i("input[name=action]:checked", this.el).val(), e = i("#list_id", this.el).val(), "INS" === t ? this.showNew() : "UPD" === t ? this.showModify(e) : "CLN" === t ? this.showClone(e) : "DEL" === t ? (this.request_type = "DELETE", this.showDelete(e)) : "undefined" != typeof console && null !== console ? console.error("Unknown action") : void 0
                    }, r.prototype.on_list_change = function() {
                        return this.showForm()
                    }, r.prototype.on_lists_refreshed = function() {
                        var t;
                        return r.__super__.after_submit.apply(this, arguments), t = {}, this.isModal ? jQuery(this.el).one("hidden.bs.modal", function(t) {
                            return function() {
                                return t.onClose(), t.render()
                            }
                        }(this)) : this.delegateEvents(l.extend({}, this.events(), {
                            "click .return button": function(t) {
                                return function() {
                                    return t.onClose(), t.render(), t.delegateEvents()
                                }
                            }(this)
                        }))
                    }, r.prototype.updateCompanySelect = function(t) {
                        var e, n;
                        return i("#co_code", this.el).val([]), n = this.collection.get(t), n && l.each(n.get("companies"), function() {
                            return function(t) {
                                return i("#co_code option[value='" + t.ELD_VALUE + "']").prop("selected", "selected")
                            }
                        }(this)), e = i(".multiselect"), e.is(":ui-multiselect") && e.multiselect("destroy"), e.multiselect({
                            sortable: !1,
                            dragToAdd: !1,
                            dividerLocation: .5
                        })
                    }, r.prototype.updateUsage = function(t, e) {
                        var n, r;
                        return n = null, r = "" + this.options.view_url + "editlist/getEditListUsage/" + t + "/" + this.options.user_id + "/" + this.options.cust_id, i.getJSON(r, function(t) {
                            return function(n) {
                                var r;
                                return (null != n ? n.length : void 0) > 0 ? (r = "This list is in use by the following people:\n\n", l.each(n, function(t) {
                                    return r += "" + t.OWNER + " used in " + t.CNT_USAGE + " saved and/or scheduled report/s.\n"
                                }), i("#usage").val(r), i(".warning-" + e, t.el).show(), t.canDelete = !1) : (r = "List used:\n\nThis list has not been used yet in any reports.", i("#usage").val(r), i(".warning-" + e, t.el).hide(), t.canDelete = !0)
                            }
                        }(this))
                    }, r.prototype.updateListSelect = function(t) {
                        return i("#list_id", this.el).val(t)
                    }, r.prototype.updateActionInput = function(t) {
                        return i(t, this.el).prop("checked", "checked")
                    }, r.prototype.get_companies = function() {
                        return 0 === this.allCompanies.length ? i.getJSON("" + this.options.service_url + "?country_code=" + this.countryCode, function(t) {
                            return function(e) {
                                return t.allCompanies = e
                            }
                        }(this)) : i.Deferred().resolve()
                    }, r.prototype.showNew = function() {
                        return i(".modify, .clone, .delete", this.el).hide(), i(".new", this.el).show(), this.updateCompanySelect()
                    }, r.prototype.showModify = function(t) {
                        return i(".new, .clone, .delete", this.el).hide(), i(".modify", this.el).show(), this.updateCompanySelect(t), this.updateUsage(t, "modify")
                    }, r.prototype.showClone = function(t) {
                        return i(".new, .modify, .delete", this.el).hide(), i(".clone", this.el).show(), this.updateCompanySelect(t)
                    }, r.prototype.showDelete = function(t) {
                        return i(".new, .modify, .clone", this.el).hide(), i(".delete", this.el).show(), i("#submit", this.el).val("Delete"), i(".submit_action", this.el).text("Deleted"), this.updateCompanySelect(t), this.updateUsage(t, "delete")
                    }, r.prototype.renderNew = function() {
                        return i.when(this.rendered).then(function(t) {
                            return function() {
                                return t.updateActionInput("#ins_list"), t.showNew(), t.$el.show()
                            }
                        }(this))
                    }, r.prototype.renderModify = function() {
                        return i.when(this.rendered).then(function(t) {
                            return function() {
                                var e, n;
                                return t.updateActionInput("#upd_list"), e = t.collection.selected || (null != (n = t.collection.models[0]) ? n.get("id") : void 0), t.showModify(e), t.updateListSelect(e), t.$el.show()
                            }
                        }(this))
                    }, r.prototype.renderClone = function() {
                        return i.when(this.rendered).then(function(t) {
                            return function() {
                                var e, n;
                                return t.updateActionInput("#cln_list"), e = t.collection.selected || (null != (n = t.collection.models[0]) ? n.get("id") : void 0), t.showClone(e), t.updateListSelect(e), t.$el.show()
                            }
                        }(this))
                    }, r.prototype.renderDelete = function() {
                        return i.when(this.rendered).then(function(t) {
                            return function() {
                                var e, n;
                                return t.updateActionInput("#del_list"), e = t.collection.selected || (null != (n = t.collection.models[0]) ? n.get("id") : void 0), t.showDelete(e), t.$el.show()
                            }
                        }(this))
                    }, r.prototype.render = function() {
                        return this.rendered = this.get_companies().then(function(t) {
                            return function() {
                                return t.$el.hide(), t.$el.html(l.template(t.templates.form, {
                                    data: l.extend(t.options, {
                                        companies: t.allCompanies,
                                        lists: t.collection.toJSON(),
                                        selectedList: t.collection.selected || t.collection.models[0],
                                        displayDelete: t.displayDelete
                                    })
                                }))
                            }
                        }(this)), this.isModal ? void 0 : this.renderNew()
                    }, r.prototype.submit_form = function() {
                        return this.read_form_data(), this.form_data = l.extend(this.form_data, {
                            co_code: [this.form_data.co_code].join(","),
                            value: [this.form_data.co_code].join(","),
                            auto_generated: "N",
                            global: "N",
                            list_type: 1,
                            view_user_id: this.options.user_id,
                            customer_id: this.options.cust_id
                        }), "CLN" === this.form_data.action && (this.form_data.action = "INS"), "INS" === this.form_data.action && delete this.form_data.list_id, this.custom_validation(), r.__super__.submit_form.apply(this, arguments)
                    }, r.prototype.after_submit = function(t) {
                        return this.collection.selected = null != t ? t.result : void 0, this.trigger("submit", t)
                    }, r.prototype.custom_validation = function() {
                        var t, e, n;
                        return t = [], ("INS" === (n = this.form_data.action) || "CLN" === n) && (e = l.map(i("#list_id option"), function(t) {
                            return i(t).text()
                        }), this.form_data.name && 0 !== this.form_data.name.length ? l.contains(e, this.form_data.name) && t.push("The name you have entered already exists. Please enter another name to proceed.") : t.push("A competitor list name is required")), this.form_data.co_code && 0 !== this.form_data.co_code.length || t.push("Please select at least one competitor to proceed."), "DEL" !== this.form_data.action || this.canDelete || t.push("A list that is in use in existing reports cannot be deleted. Please contact the users listed to request deletion of the reports that utilise this competitor list."), t.length > 0 ? (this.invalid = !0, this.invalid_messages = this.invalid_messages.concat(t)) : void 0
                    }, r.prototype.onClose = function() {
                        var t;
                        return t = i(".multiselect", this.el), t.is(":ui-multiselect") && t.multiselect("destroy"), r.__super__.onClose.apply(this, arguments)
                    }, r
                }(s)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/competitor_lists/CompetitorListView", ["require", "jquery", "underscore", "backbone", "libraries/Canstar", "components/base/View", "components/competitor_lists/CompetitorForm", "libraries/Loader", "components/competitor_lists/templates"], function(e) {
                var i, r, o, s, a, l, c, u;
                return i = e("jquery"), u = e("underscore"), r = e("backbone"), o = e("libraries/Canstar"), c = e("components/base/View"), s = e("components/competitor_lists/CompetitorForm"), l = e("libraries/Loader"), e("components/competitor_lists/templates"), a = function(e) {
                    function r() {
                        return this._trigger_list_selected = t(this._trigger_list_selected, this), this._lazy_request_list_companies = t(this._lazy_request_list_companies, this), this._configure_competitor_lists = t(this._configure_competitor_lists, this), this.filter_companies = t(this.filter_companies, this), this.on_click_modify_list = t(this.on_click_modify_list, this), this.on_click_new_list = t(this.on_click_new_list, this), this.on_competitor_list_changed = t(this.on_competitor_list_changed, this), this.renderLists = t(this.renderLists, this), this.render = t(this.render, this), this.init_form = t(this.init_form, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.path = "components/competitor_lists", r.prototype.id = "competitor-lists", r.stylesheets = ["../css/jquery-ui-1.9.2.custom.css", "../css/ui.multiselect.css", "components/competitor_lists/competitor_lists.css"], r.prototype.templates = {
                        competitor: "!!tmpl_competitor.html",
                        competitor_lists: "!!tmpl_competitor_lists.html"
                    }, r.prototype.events = {
                        "change .competitor-select": "on_competitor_list_changed",
                        "click .new_btn": "on_click_new_list",
                        "click .modify_btn": "on_click_modify_list"
                    }, r.prototype.competitorForm = null, r.prototype.initialize = function(t) {
                        if (!t.service_url) throw Error("Missing mandatory parameter: service_url");
                        if (!t.view_url) throw Error("Missing mandatory parameter: view_url");
                        if (!t.user_id) throw Error("Missing mandatory parameter: user_id");
                        if (!t.cust_id) throw Error("Missing mandatory parameter: cust_id");
                        return this.init_form(), this._configure_competitor_lists(!0)
                    }, r.prototype.init_form = function() {
                        return this.competitorForm = new s({
                            collection: this.collection,
                            service_url: this.options.service_url,
                            view_url: this.options.view_url,
                            user_id: this.options.user_id,
                            cust_id: this.options.cust_id,
                            modal: null != this.options.modal ? this.options.modal : !0,
                            country_code: null != this.options.country_code ? this.options.country_code : null,
                            displayDelete: null != this.options.displayDelete ? this.options.displayDelete : !1,
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), this.competitorForm.on("submit", function(t) {
                            return function(e) {
                                return t.collection.fetch({
                                    success: function() {
                                        return t.once("changed", function() {
                                            return this.competitorForm.on_lists_refreshed(e)
                                        }), t._configure_competitor_lists()
                                    }
                                })
                            }
                        }(this))
                    }, r.prototype.render = function() {
                        return this.$el.html(this.templates.competitor()), this.renderLists(), i("#form_container", this.el).html(this.competitorForm.el), this
                    }, r.prototype.renderLists = function() {
                        return i(".competitor-lists", this.el).html(this.templates.competitor_lists({
                            lists: this.collection.toJSON(),
                            selected: this.collection.selected
                        }))
                    }, r.prototype.on_competitor_list_changed = function(t) {
                        var e, n;
                        return t = t || window.event, e = i(t.target), n = e.val(), n && n.length > 1 ? this.filter_companies(n) : this._trigger_list_selected()
                    }, r.prototype.on_click_new_list = function() {
                        return i.when(this.competitorForm.renderNew()).then(function(t) {
                            return function() {
                                return jQuery(t.competitorForm.$el).modal("show")
                            }
                        }(this))
                    }, r.prototype.on_click_modify_list = function() {
                        return i.when(this.competitorForm.renderModify()).then(function(t) {
                            return function() {
                                return jQuery(t.competitorForm.$el).modal("show")
                            }
                        }(this))
                    }, r.prototype.filter_companies = function(t) {
                        var e;
                        return e = this.collection.get(t), e ? e.get("companies") ? this._trigger_list_selected(e) : this._lazy_request_list_companies(e, this._trigger_list_selected) : void 0
                    }, r.prototype._configure_competitor_lists = function(t) {
                        return null == t && (t = !1), u.each(this.collection.models, function(t) {
                            return function(e) {
                                return e.set("id", e.get("ID")), t._lazy_request_list_companies(e, null, t.options.country_code)
                            }
                        }(this)), t ? this.render() : this.renderLists(), this.collection.selected ? this.filter_companies(this.collection.selected) : this.trigger("changed")
                    }, r.prototype._lazy_request_list_companies = function(t, e, n) {
                        return n = null != n ? n : "AUST", i.getJSON(this.options.service_url + "?list_id=" + t.get("id") + "&country_code=" + n, function() {
                            return function(n) {
                                return t.set("companies", []), u.isArray(n) && u.each(n, function(e) {
                                    return "Y" === e.SELECTED ? t.get("companies").push(e) : void 0
                                }), "function" == typeof e ? e(t) : void 0
                            }
                        }(this))
                    }, r.prototype._trigger_list_selected = function(t) {
                        return this.collection.selected = (null != t ? t.get("ID") : void 0) || null, this.trigger("changed", null != t ? t.attributes : void 0)
                    }, r
                }(c)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("components/competitor_lists/CompetitorListController", ["require", "jquery", "underscore", "backbone", "components/competitor_lists/CompetitorListView"], function(e) {
                var n, i, r, o, s;
                return n = e("jquery"), s = e("underscore"), i = e("backbone"), o = e("components/competitor_lists/CompetitorListView"), r = function() {
                    function e(e) {
                        var n;
                        this.options = e, this.buildUrl = t(this.buildUrl, this), this.getSelectedList = t(this.getSelectedList, this), this._loadView = t(this._loadView, this), this.getLists = t(this.getLists, this), s.each(this.mandatory_params, function(t) {
                            return function(e) {
                                if (!t.options[e]) throw new Error("Must provide " + e + " parameter")
                            }
                        }(this)), n = i.Collection.extend({
                            selected: null
                        }), this.competitorLists = new n, this.competitorLists.url = this.buildUrl()
                    }
                    return e.prototype.mandatory_params = ["service_url", "view_url", "user_id", "cust_id"], e.prototype.listsLoaded = null, e.prototype.getLists = function() {
                        return this.listsLoaded = new n.Deferred, this.competitorLists.fetch({
                            success: this._loadView,
                            error: function(t) {
                                return function(e, n) {
                                    return console.error("Error fetching collections", n), t._loadView(e)
                                }
                            }(this)
                        }), this.listsLoaded.promise()
                    }, e.prototype._loadView = function(t) {
                        var e, n;
                        return t.selected = null != (n = this.options.selected_competitor_list) ? n : null, e = {
                            collection: t,
                            service_url: this.options.service_url,
                            view_url: this.options.view_url,
                            user_id: this.options.user_id,
                            cust_id: this.options.cust_id,
                            country_code: null != this.options.country_code ? this.options.country_code : null
                        }, null != this.options.modal && (e.modal = this.options.modal), null != this.options.theme && (e.theme = this.options.theme), null != this.options.displayDelete && (e.displayDelete = this.options.displayDelete), this.competitorListView = new o(e), this.listsLoaded.resolve(this.competitorListView)
                    }, e.prototype.getSelectedList = function() {
                        return this.competitorLists.selected
                    }, e.prototype.buildUrl = function() {
                        return "" + this.options.service_url + "?user_id=" + this.options.user_id + "&cust_id=" + this.options.cust_id + "&list_type=1"
                    }, e
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/select/AutoCompleteListItemView", ["require", "jquery", "underscore", "libraries/Canstar", "components/base/View"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), a = e("underscore"), o = e("libraries/Canstar"), s = e("components/base/View"), r = function(e) {
                    function i() {
                        return this.onClickDelete = t(this.onClickDelete, this), this.onClickItemInfo = t(this.onClickItemInfo, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.path = "components/select", i.prototype.className = "list-item-box", i.prototype.templates = {
                        item_view: "!!tmpl_auto_complete_list_item_view.html"
                    }, i.prototype.events = {
                        "click .item-info": "onClickItemInfo",
                        "click .item-delete": "onClickDelete"
                    }, i.prototype.initialize = function(t) {
                        var e;
                        return this.view_helpers = {
                            companyLogo: o.prototype.companyLogo,
                            blueCompanyLogo: o.prototype.blueCompanyLogo,
                            base_url: canstar_widget.base_url
                        }, this.$el.empty(), this.singleOnly = null != (e = null != t ? t.singleOnly : void 0) ? e : !1, this.$el.html(this.templates.item_view(a.extend(this.model.toJSON(), this.view_helpers)))
                    }, i.prototype.onClickItemInfo = function(t) {
                        return this.singleOnly === !0 ? (this.trigger("itemSelected", this.model), t.stopPropagation()) : this.model.set("selected", !0)
                    }, i.prototype.onClickDelete = function() {
                        return this.model.set("selected", !1)
                    }, i
                }(s)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/select/AutoCompleteListView", ["require", "jquery", "underscore", "components/base/View", "components/select/AutoCompleteListItemView"], function(e) {
                var i, r, o, s, a;
                return i = e("jquery"), a = e("underscore"), s = e("components/base/View"), r = e("components/select/AutoCompleteListItemView"), o = function(e) {
                    function i() {
                        return this.render = t(this.render, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.path = "components/select", i.prototype.className = "auto-complete-list", i.prototype.events = {
                        onkeypress: "onKeydown"
                    }, i.prototype.initialize = function(t) {
                        var e;
                        return this.collection.on("reset", this.render), this.singleOnly = null != (e = null != t ? t.singleOnly : void 0) ? e : !1
                    }, i.prototype.render = function() {
                        return this.$el.html(""), a.each(this.collection.models, function(t) {
                            return function(e) {
                                var n;
                                return n = new r({
                                    model: e,
                                    theme_path: t.options.theme_path,
                                    theme_config: t.options.theme_config,
                                    singleOnly: t.singleOnly
                                }), n.on("itemSelected", function(e) {
                                    return t.trigger("itemSelected", e)
                                }), t.$el.append(n.el)
                            }
                        }(this)), this.el
                    }, i.prototype.onKeydown = function(t) {
                        return console.log(t, "AutoCompleteListView")
                    }, i
                }(s)
            })
        }.call(this), define("text-cns!components/select/tmpl_select_view_auto_complete.html", [], function() {
            return '<ul class="facet-block">\n  <li class="facet-item autocomplete-list-selected"></li>\n  <li class="facet-item autocomplete-list">\n    <input placeholder="Search Providers" type="text" name="select_text_entry" class="autocomplete select-text"></input>\n  </li>\n</ul>'
        }), define("text-cns!components/select/tmpl_auto_complete_list_item_view.html", [], function() {
            return '<div class="list-item">\n  <div class="item-delete">\n    <img src="<%= base_url %>assets/image/facet-delete.png">\n  </div>\n  <div class="item-info">\n    <%= companyLogo(value, \'Company logo\', {width: 60}, null, \'http://snapshots.canstar.com.au/widgets/\') %>\n    <p><%= description %></p>\n  </div>\n</div>'
        }), define("text-cns!widgets/search/themes/gold/select/tmpl_select_view_auto_complete.html", [], function() {
            return '<ul class="facet-block list-unstyled margin-bottom-20">\n    <li class="facet-item autocomplete-list-selected"></li>\n    <li class="facet-item">\n      <div class="input-group autocomplete-search-group autocomplete-list">\n          <input placeholder="Search Providers" type="text" name="select_text_entry" class="form-control autocomplete select-text"></input>\n          <span class="input-group-addon"><i class="fa fa-search"></i></span>\n      </div>\n    </li>\n</ul>\n'
        }), define("text-cns!widgets/search/themes/gold/select/tmpl_auto_complete_list_item_view.html", [], function() {
            return '<div class="list-item clearfix">\n    <div class="col-xs-12 padding-sm">\n        <div class="pull-left item-info">\n            <%= companyLogo(value, \'Company logo\', {width: 80}, null, \'http://snapshots.canstar.com.au/widgets/\') %>\n            <small><%= description %></small>\n        </div>\n        <div class="pull-right item-delete">\n            <i class="fa fa-close"></i>\n	    </div>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue/select/tmpl_select_view_auto_complete.html", [], function() {
            return '<ul class="facet-block list-unstyled margin-bottom-20">\n    <li class="facet-item autocomplete-list-selected"></li>\n    <li class="facet-item">\n      <div class="input-group autocomplete-search-group autocomplete-list">\n          <input placeholder="Search brands" type="text" class="form-control autocomplete select-text"></input>\n          <span class="input-group-addon"><i class="fa fa-search"></i></span>\n      </div>\n    </li>\n</ul>\n'
        }), define("text-cns!widgets/search/themes/blue/select/tmpl_auto_complete_list_item_view.html", [], function() {
            return '<div class="list-item clearfix">\n    <div class="col-xs-12 padding-sm">\n        <div class="pull-left item-info">\n            <%= blueCompanyLogo(value, \'Company logo\', {width: 80}, null, \'http://cdn.canstarblue.com.au/\') %>\n            <small><%= description %></small>\n        </div>\n        <div class="pull-right item-delete">\n            <i class="fa fa-close"></i>\n        </div>\n    </div>\n</div>\n'
        }),
        function() {
            define("components/select/templates", ["require", "text-cns!components/select/tmpl_select_view_auto_complete.html", "text-cns!components/select/tmpl_auto_complete_list_item_view.html", "text-cns!widgets/search/themes/gold/select/tmpl_select_view_auto_complete.html", "text-cns!widgets/search/themes/gold/select/tmpl_auto_complete_list_item_view.html", "text-cns!widgets/search/themes/blue/select/tmpl_select_view_auto_complete.html", "text-cns!widgets/search/themes/blue/select/tmpl_auto_complete_list_item_view.html"], function(t) {
                return t("text-cns!components/select/tmpl_select_view_auto_complete.html"), t("text-cns!components/select/tmpl_auto_complete_list_item_view.html"), t("text-cns!widgets/search/themes/gold/select/tmpl_select_view_auto_complete.html"), t("text-cns!widgets/search/themes/gold/select/tmpl_auto_complete_list_item_view.html"), t("text-cns!widgets/search/themes/blue/select/tmpl_select_view_auto_complete.html"), t("text-cns!widgets/search/themes/blue/select/tmpl_auto_complete_list_item_view.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/select/SelectViewAutoComplete", ["require", "jquery", "cns-jquery", "backbone", "components/base/View", "components/select/SelectView", "components/select/AutoCompleteListView", "libraries/Loader", "components/select/templates"], function(e) {
                var i, r, o, s, a, l, c, u;
                return i = e("jquery"), u = e("cns-jquery"), o = e("backbone"), c = e("components/base/View"), a = e("components/select/SelectView"), r = e("components/select/AutoCompleteListView"), s = e("libraries/Loader"), e("components/select/templates"), l = function(e) {
                    function s() {
                        return this.onClose = t(this.onClose, this), this.clearSelected = t(this.clearSelected, this), this.removeListItemFromFacet = t(this.removeListItemFromFacet, this), this.addListItemFromFacet = t(this.addListItemFromFacet, this), this.search = t(this.search, this), this.selectSingleOnly = t(this.selectSingleOnly, this), this.showList = t(this.showList, this), this.hideList = t(this.hideList, this), this.onTextChange = t(this.onTextChange, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), s.__super__.constructor.apply(this, arguments)
                    }
                    return n(s, e), s.prototype.path = "components/select", s.prototype.className = "select-auto-complete", s.prototype.searchList = ".auto-complete-list", s.stylesheets = ["components/select/select_view_auto_complete.css"], s.prototype.templates = {
                        select_view_auto_complete: "!tmpl_select_view_auto_complete.html"
                    }, s.prototype.events = {
                        "keyup input.autocomplete": "onTextChange"
                    }, s.prototype.initialize = function(t) {
                        var e;
                        return this.options = t, this.collection.on("reset", this.render), this.collection.on("change", this.render), this.singleOnly = null != (e = null != (null != t ? t.singleOnly : void 0)) ? e : !1, this.filtered = new o.Collection, this.selected = new o.Collection, this.autoCompleteList = new r({
                            collection: this.filtered,
                            theme_path: this.options.theme_path,
                            theme_config: this.options.theme_config,
                            singleOnly: this.singleOnly
                        }), this.autoCompleteListSelected = new r({
                            collection: this.selected,
                            className: "selected",
                            theme_path: this.options.theme_path,
                            theme_config: this.options.theme_config
                        }), (null != t ? t.singleOnly : void 0) === !0 && this.autoCompleteList.on("itemSelected", this.selectSingleOnly), this.searchPlaceholder = this.options.placeholders ? this.options.placeholders[0] : "Search providers", this.addAnotherPlaceholder = this.options.placeholders ? this.options.placeholders[1] : "+ Add another provider"
                    }, s.prototype.render = function() {
                        return this.filtered.set([], {
                            silent: !1
                        }), this.filtered.trigger("reset"), this.selected.set(this.collection.where({
                            selected: !0
                        })), this.selected.trigger("reset"), this.autoCompleteList.$el.detach(), this.autoCompleteListSelected.$el.detach(), this.$el.html(this.templates.select_view_auto_complete), this.selected.models.length > 0 ? i("input", this.el).prop("placeholder", this.addAnotherPlaceholder) : i("input", this.el).prop("placeholder", this.searchPlaceholder), i(".autocomplete-list-selected", this.el).append(this.autoCompleteListSelected.el), i(".autocomplete-list", this.el).append(this.autoCompleteList.el)
                    }, s.prototype.onTextChange = function(t) {
                        var e, n;
                        return _.contains([40, 38], t.keyCode) ? void this.triggerListItemSelectAction(t) : 13 === t.keyCode ? void this.triggerListItemClick() : (n = i(".autocomplete", this.el).val(), this.search(n), e = new RegExp("^(" + n + ")", "i"), this.filtered.comparator = "description", this.filtered.sort(), this.filtered.comparator = function() {
                            return function(t, n) {
                                if (e.test(t.get("description")) && !e.test(n.get("description"))) return -1;
                                if (!e.test(t.get("description")) && e.test(n.get("description"))) return 1;
                                if (e.test(t.get("description")) && e.test(n.get("description"))) {
                                    if (t.get("description") > n.get("description")) return 1;
                                    if (t.get("description") < n.get("description")) return -1
                                }
                                return 0
                            }
                        }(this), this.filtered.sort(), this.filtered.trigger("reset"), i(".autocomplete-list .list-item-box").first().addClass("focus"), this.showList())
                    }, s.prototype.hideList = function() {
                        return i(this.searchList).css("opacity", 1).slideUp("fast").animate({
                            opacity: 0
                        }, {
                            queue: !1,
                            duration: "fast"
                        })
                    }, s.prototype.showList = function() {
                        return i(this.searchList).css("opacity", 0).slideDown("fast").animate({
                            opacity: 1
                        }, {
                            queue: !1,
                            duration: "fast"
                        })
                    }, s.prototype.triggerListItemSelectAction = function(t) {
                        var e, n, r, o;
                        return n = i(".autocomplete-list .list-item-box.focus"), e = i(".auto-complete-list"), r = n.next(), 40 === t.keyCode && r.length && (n.removeClass("focus"), r.addClass("focus"), e.animate({
                            scrollTop: e.scrollTop() + r.outerHeight() + 1
                        }, 200)), o = n.prev(), 38 === t.keyCode && o.length ? (n.removeClass("focus"), o.addClass("focus"), e.animate({
                            scrollTop: e.scrollTop() - o.outerHeight() - 1
                        }, 100)) : void 0
                    }, s.prototype.selectSingleOnly = function(t) {
                        return this.collection.each(function() {
                            return function(e) {
                                return e.set(e.get("value") !== t.get("value") ? {
                                    selected: !1
                                } : {
                                    selected: !0
                                })
                            }
                        }(this)), this.collection.trigger("reset")
                    }, s.prototype.triggerListItemClick = function() {
                        return i(".autocomplete-list .list-item-box.focus .item-info").click(), i('.select-auto-complete .autocomplete-list input[type="text"].select-text').focus()
                    }, s.prototype.search = function(t) {
                        var e;
                        return "" === t ? void this.filtered.set([]) : (e = new RegExp(t, "gi"), this.filtered.set(this.collection.filter(function() {
                            return function(t) {
                                return (e.test(t.get("description")) || e.test(t.get("value"))) && !t.get("selected")
                            }
                        }(this))))
                    }, s.prototype.addListItemFromFacet = function(t) {
                        var e;
                        return e = this.collection.find(function() {
                            return function(e) {
                                return e.get("value") ? e.get("value").toLowerCase() === t.toLowerCase() : void("undefined" != typeof console && null !== console && console.error("Value attribute doesnt exist in Companies model "))
                            }
                        }(this)), e.set({
                            selected: !0
                        }), this.render()
                    }, s.prototype.removeListItemFromFacet = function(t) {
                        var e;
                        return e = this.collection.find(function() {
                            return function(e) {
                                return e.get("value") ? e.get("value").toLowerCase() === t.toLowerCase() : void("undefined" != typeof console && null !== console && console.error("Value attribute doesnt exist in Companies model "))
                            }
                        }(this)), e.set({
                            selected: !1
                        }), this.render()
                    }, s.prototype.clearSelected = function() {
                        return _.each(this.collection.where({
                            selected: !0
                        }), function() {
                            return function(t) {
                                return t.set({
                                    selected: !1
                                }, {
                                    silent: !0
                                })
                            }
                        }(this)), this.collection.trigger("reset")
                    }, s.prototype.onClose = function() {
                        return this.hideList(), this.collection.unbind()
                    }, s
                }(c)
            })
        }.call(this), define("text-cns!components/facets/tmpl_facet.html", [], function() {
            return '<h2>Refine:</h2>\n<div class="facets-container"></div>'
        }), define("text-cns!components/facets/tmpl_facet_container.html", [], function() {
            return '<div class="facet"></div>'
        }), define("text-cns!components/facets/tmpl_facet_title.html", [], function() {
            return "<h3><%= name %></h3>"
        }), define("text-cns!components/facets/tmpl_facet_body.html", [], function() {
            return "<%= filters %>"
        }), define("text-cns!components/facets/tmpl_filter_checkbox.html", [], function() {
            return '<label<%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="checkbox" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <%= description %>\n    <% if (tooltip) { %>\n    <i class="icon-tooltip" data-tooltip="<%= tooltip %>"></i>\n    <% } %>\n</label>'
        }), define("text-cns!components/facets/tmpl_filter_radio_button.html", [], function() {
            return '<label<%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="radio" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <%= description %>\n    <% if (tooltip) { %>\n    <i class="icon-tooltip" data-tooltip="<%= tooltip %>"></i>\n    <% } %>\n</label>'
        }), define("text-cns!components/facets/tmpl_filter_radio_button_group.html", [], function() {
            return '<label class="control radio" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="radio" name="<%= facet_name %>" value="<%= description %>" data-name="<%= name  %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <span><%= description %></span>\n    <% if (tooltip) { %>\n    <span class="abs-top-right">\n        <div class="hidden-xs hidden-sm" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="right" title="<%= tooltip %>" data-html="true" />\n        </div>\n        <div class="hidden-md hidden-lg" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>" data-html="true" />\n        </div>\n    </span>\n    <% } %>\n</label>\n'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_facet.html", [], function() {
            return '<div id="accordion" class="panel-group facets-container" role="tablist" aria-multiselectable="true"></div>'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_facet_container.html", [], function() {
            return '<div class="panel panel-faceted-search"></div>'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_facet_title.html", [], function() {
            return '<div class="panel-heading bg-gradient" role="tab" id="<%= id %>-Heading">\n    <h4 class="panel-title">\n        <a role="button" data-toggle="collapse" data-target="#collapse<%= id %>" aria-expanded="<%= !collapsed %>">\n            <%= name %>\n            <i class="font-sm margin-top-5 fa fa-caret-down"></i>\n        </a>\n    </h4>\n</div>\n'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_facet_body.html", [], function() {
            return '<%\nvar classes = "facet collapse";\nif(!collapsed) {\n  classes += " in";\n}\n%>\n<div id="collapse<%= id %>" class="<%= classes %>" aria-expanded="<%= !collapsed %>">\n    <div class="panel-body">\n        <%= filters %>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_filter_checkbox.html", [], function() {
            return '<label class="control checkbox" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="checkbox" name="<%= name %>" value="<%= description %>" <% if(typeof(tag_value) !== \'undefined\' && tag_value !== null){ %> data-tag-value="<%= tag_value %>"<% } %> data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <span><%= description %><span>\n    <% if (tooltip) { %>\n    <span class="abs-top-right">\n        <div class="hidden-xs hidden-sm" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="right" title="<%= tooltip %>" />\n        </div>\n        <div class="hidden-md hidden-lg" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>" />\n        </div>\n    </span>\n    <% } %>\n</label>\n'
        }), define("text-cns!widgets/search/themes/gold/facets/tmpl_filter_radio_button.html", [], function() {
            return '<label class="control radio" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="radio" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <%= description %>\n    <% if (tooltip) { %>\n    <span class="pull-right">\n        <i class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>"></i>\n    </span>\n    <% } %>\n</label>\n'
        }), define("text-cns!widgets/search/themes/blue/facets/tmpl_filter_checkbox.html", [], function() {
            return '<label class="control checkbox" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="checkbox" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <span><%= description %><span>\n    <% if (tooltip) { %>\n    <span class="abs-top-right">\n        <div class="hidden-xs hidden-sm" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="right" title="<%= tooltip %>" />\n        </div>\n        <div class="hidden-md hidden-lg" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>" />\n        </div>\n    </span>\n    <% } %>\n</label>'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet.html", [], function() {
            return '<div id="accordion" class="panel-group facets-container" role="tablist" aria-multiselectable="true"></div>'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_container.html", [], function() {
            return '<div class="panel panel-faceted-search"></div>'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_title.html", [], function() {
            return '<div class="panel-heading bg-gradient" role="tab" id="<%= id %>-Heading">\n    <h4 class="panel-title no-wrap">\n        <a role="button" data-toggle="collapse" data-target="#collapse<%= id %>" aria-expanded="<%= !collapsed %>">\n            <%= name %>\n            <i class="font-sm margin-top-5 fa fa-caret-down"></i>\n        </a>\n    </h4>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_body.html", [], function() {
            return '<%\r\nvar classes = "facet collapse";\r\nif(!collapsed) {\r\n  classes += " in";\r\n}\r\n%>\r\n<div id="collapse<%= id %>" class="<%= classes %>" aria-expanded="<%= !collapsed %>">\r\n    <div class="panel-body">\r\n        <%= filters %>\r\n    </div>\r\n</div>'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_checkbox.html", [], function() {
            return '<label class="control checkbox" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="checkbox" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <span><%= description %><span>\n    <% if (tooltip) { %>\n    <span class="abs-top-right">\n        <div class="hidden-xs hidden-sm" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="right" title="<%= tooltip %>" />\n        </div>\n        <div class="hidden-md hidden-lg" >\n            <img src="<%= base_url %>assets/image/icon-info.png" class="fs-info-tooltip" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>" />\n        </div>\n    </span>\n    <% } %>\n</label>'
        }), define("text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_radio_button.html", [], function() {
            return '<label class="control radio" <%= selected ? \' class="selected"\' : \'\' %>>\n    <input type="radio" name="<%= name %>" value="<%= description %>" data-facet="<%= facet %>"<%= selected ? \' checked\' : \'\' %> />\n    <span class="control-indicator"></span>\n    <%= description %>\n    <% if (tooltip) { %>\n    <span class="pull-right">\n        <i class="fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="<%= tooltip %>"></i>\n    </span>\n    <% } %>\n</label>'
        }),
        function() {
            define("components/facets/templates", ["require", "text-cns!components/facets/tmpl_facet.html", "text-cns!components/facets/tmpl_facet_container.html", "text-cns!components/facets/tmpl_facet_title.html", "text-cns!components/facets/tmpl_facet_body.html", "text-cns!components/facets/tmpl_filter_checkbox.html", "text-cns!components/facets/tmpl_filter_radio_button.html", "text-cns!components/facets/tmpl_filter_radio_button_group.html", "text-cns!widgets/search/themes/gold/facets/tmpl_facet.html", "text-cns!widgets/search/themes/gold/facets/tmpl_facet_container.html", "text-cns!widgets/search/themes/gold/facets/tmpl_facet_title.html", "text-cns!widgets/search/themes/gold/facets/tmpl_facet_body.html", "text-cns!widgets/search/themes/gold/facets/tmpl_filter_checkbox.html", "text-cns!widgets/search/themes/gold/facets/tmpl_filter_radio_button.html", "text-cns!widgets/search/themes/blue/facets/tmpl_filter_checkbox.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_facet.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_container.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_title.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_body.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_checkbox.html", "text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_radio_button.html"], function(t) {
                return t("text-cns!components/facets/tmpl_facet.html"), t("text-cns!components/facets/tmpl_facet_container.html"), t("text-cns!components/facets/tmpl_facet_title.html"), t("text-cns!components/facets/tmpl_facet_body.html"), t("text-cns!components/facets/tmpl_filter_checkbox.html"), t("text-cns!components/facets/tmpl_filter_radio_button.html"), t("text-cns!components/facets/tmpl_filter_radio_button_group.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_facet.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_facet_container.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_facet_title.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_facet_body.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_filter_checkbox.html"), t("text-cns!widgets/search/themes/gold/facets/tmpl_filter_radio_button.html"), t("text-cns!widgets/search/themes/blue/facets/tmpl_filter_checkbox.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_container.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_title.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_facet_body.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_checkbox.html"), t("text-cns!widgets/search/themes/blue_product/facets/tmpl_filter_radio_button.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/facets/Facets", ["require", "jquery", "underscore", "backbone", "libraries/Canstar", "components/base/View", "components/competitor_lists/CompetitorListController", "components/select/SelectViewAutoComplete", "libraries/Analytics", "components/facets/templates"], function(i) {
                var r, o, s, a, l, c, u, d, p;
                return r = i("jquery"), p = i("underscore"), s = i("backbone"), a = i("libraries/Canstar"), d = i("components/base/View"), l = i("components/competitor_lists/CompetitorListController"), u = i("components/select/SelectViewAutoComplete"), o = i("libraries/Analytics"), i("components/facets/templates"), c = function(i) {
                    function s() {
                        return this.convertToSlug = t(this.convertToSlug, this), this.fetchCompetitors = t(this.fetchCompetitors, this), this.get_company_filters = t(this.get_company_filters, this), this.fetchCompanies = t(this.fetchCompanies, this), this.setDefaultFilter = t(this.setDefaultFilter, this), this.set_initial_filters = t(this.set_initial_filters, this), this.sendGoogleAnalyticsEvent = t(this.sendGoogleAnalyticsEvent, this), this.getMonetisedFilterTitle = t(this.getMonetisedFilterTitle, this), this.isFacetLinkedToSearch = t(this.isFacetLinkedToSearch, this), this.isMonetisedFilterOverrideEnabled = t(this.isMonetisedFilterOverrideEnabled, this), this.getActiveMonetisedFilter = t(this.getActiveMonetisedFilter, this), this.on_competitor_list_changed = t(this.on_competitor_list_changed, this), this.onCompanyChange = t(this.onCompanyChange, this), this.clearAllFilters = t(this.clearAllFilters, this), this.linkCompanyFilterToFacet = t(this.linkCompanyFilterToFacet, this), this.onFilterChange = t(this.onFilterChange, this), this.changeMonetisedFilter = t(this.changeMonetisedFilter, this), this.onClickFacetGroupHtag = t(this.onClickFacetGroupHtag, this), this.onFacetClick = t(this.onFacetClick, this), this._deferred_render_companies = t(this._deferred_render_companies, this), this.showLoadingDiv = t(this.showLoadingDiv, this), this.buildFacetDiv = t(this.buildFacetDiv, this), this.render = t(this.render, this), this.configureFacets = t(this.configureFacets, this), this.initialize = t(this.initialize, this), s.__super__.constructor.apply(this, arguments)
                    }
                    return n(s, i), s.prototype.path = "components/facets", s.prototype.id = "facets", s.stylesheets = ["components/facets/facets.css"], s.prototype.events = {
                        "click .facet.collapsible h3": "onFacetClick",
                        "click .facet-group > h3": "onClickFacetGroupHtag",
                        "change .facet input": "onFilterChange"
                    }, s.prototype.templates = {
                        facet: "!tmpl_facet.html",
                        facet_container: "!!tmpl_facet_container.html",
                        facet_header: "!!tmpl_facet_title.html",
                        facet_body: "!!tmpl_facet_body.html",
                        filter_checkbox: "!!tmpl_filter_checkbox.html",
                        filter_radio_button: "!!tmpl_filter_radio_button.html",
                        filter_radio_button_group: "!!tmpl_filter_radio_button_group.html",
                        facet_body_tooltip: "!!tmpl_facet_body_tooltip.html"
                    }, s.prototype.initialize = function() {
                        return this.configureFacets(), this.on("closeActiveFilter", this.onCloseActiveFilter), this.activeFilters = []
                    }, s.prototype.configureFacets = function() {
                        var t, n, i, r, o, s, a, l, c;
                        l = this.options.model.attributes, c = [];
                        for (n in l) e.call(l, n) && (a = l[n], t = this.model.get(n), o = this.options.facetsConfig.facets[n], c.push(t ? function() {
                            var e, a, l, c;
                            for (c = [], r = e = 0, a = t.length; a > e; r = ++e) i = t[r], i.selected = !1, i.dataFacet = n, i.value = i.description, i.name = this.convertToSlug(n) + "_" + this.convertToSlug(i.description), s = null != (l = o.values) ? l[i.description] : void 0, null != (null != s ? s.value : void 0) && (i.tagValue = s.value), null != (null != s ? s.hide_when : void 0) && (i.hide_when = s.hide_when), c.push(null != (null != s ? s.active_filter_name : void 0) ? i.active_filter_name = s.active_filter_name : i.active_filter_name = i.description);
                            return c
                        }.call(this) : void 0));
                        return c
                    }, s.prototype.render = function() {
                        var t, n, i, o, s, a, l, c, u, d, h, f, m, g, v, _, y, b;
                        this.$el.html(this.templates.facet), t = this.$el.find(".facets-container"), 0 === (null != t ? t.length : void 0) && "undefined" != typeof console && null !== console && console.error("Facet template must have correct container class"), f = this.options.facetsConfig.provider_search_position, h = p.isNumber(f), a = {}, l = [], d = 0, h === !1 && this.showLoadingDiv("companies", t), y = this.options.facetsConfig.facets;
                        for (u in y)
                            if (e.call(y, u)) {
                                if (s = y[u], !s) return;
                                s.hide_when && this._shouldHide(s.hide_when) || (n = this.buildFacetDiv(u, s), c = u.replace(/\s/g, ""), s.group ? (s.group in a || (a[s.group] = d, l[d] = {
                                    groupName: s.group,
                                    facets: []
                                }, d--), s.collapsed === !1 && (l[a[s.group]].collapsed = !1), l[a[s.group]].facets.push(n)) : l[d] = n, h && f === d && (d++, l[d] = r('<div id="override_search_container"></div>')), d++)
                            }
                        for (m = 0, v = l.length; v > m; m++)
                            if (n = l[m])
                                if (r.isPlainObject(n)) {
                                    for (i = r('<div class="facet-group" />'), i.append(r("<h3 />").html(n.groupName)), b = n.facets, g = 0, _ = b.length; _ > g; g++) o = b[g], i.append(o);
                                    n.collapsed !== !1 && i.children(".facet").hide(), t.append(i)
                                } else t.append(n);
                        return this.options.facetsConfig.show_competitor_lists && this.showLoadingDiv("competitor_lists"), this.fetchCompanies(), this.fetchCompetitors(), h && this.showLoadingDiv("companies", this.$el.find("#override_search_container")), this
                    }, s.prototype.buildFacetDiv = function(t, e) {
                        var n, i, o, s, l, c, u, d, h, f, m, g, v;
                        if (n = r(this.templates.facet_container()), u = t.replace(/\s/g, ""), l = null != e.name ? e.name : t, s = this.templates.facet_header({
                                name: l,
                                id: u,
                                collapsed: e.collapsed
                            }), n.append(s), e.collapsible !== !1 && n.addClass("collapsible"), o = r('<ul class="filters" />'), null != e.tooltip && (f = this.templates.facet_body_tooltip({
                                tooltip: p.escape(e.tooltip)
                            }), o.append(f)), this.model.get(t))
                            for (v = this.model.get(t), m = 0, g = v.length; g > m; m++) c = v[m], c.hide_when && this._shouldHide(c.hide_when) || (c.category = t, h = a.prototype.isIE8() ? "filter_radio_button" : null != c.template && null != this.templates[c.template] ? c.template : "filter_checkbox", d = this.templates[h]({
                                facet_name: t,
                                name: c.name,
                                facet: t,
                                base_url: canstar_widget.base_url,
                                description: p.escape(c.description),
                                tooltip: p.escape(c.tooltip),
                                selected: c.selected,
                                tag_value: c.tagValue
                            }), o.append(r("<li />").html(d)));
                        return i = this.templates.facet_body({
                            id: u,
                            filters: o.prop("outerHTML"),
                            collapsed: e.collapsed
                        }), n.append(i), e.collapsed ? n.children("ul").hide() : n.addClass("expanded"), n
                    }, s.prototype.showLoadingDiv = function(t, e) {
                        return null == e && (e = this.$el), null != e ? e.append(r('<div class="facet-loading"/>').attr("id", t)) : void 0
                    }, s.prototype._deferred_render_companies = function() {
                        return this.company_facet ? (this.$el.find("#companies.facet-loading").replaceWith(this.company_facet.el), this.options.companies.trigger("reset")) : void 0
                    }, s.prototype.onFacetClick = function(t) {
                        var e;
                        return t = t || window.event, e = r(t.target), e.parent().toggleClass("expanded"), e.siblings("ul").animate({
                            height: "toggle"
                        }, 200, "swing", function() {
                            return r(this).css("overflow", "visible")
                        }), null != canstar_widget.faceted_search ? a.prototype.gaTrackEvent({
                            event_label: "Facet Group - " + r(t.target).text()
                        }) : void 0
                    }, s.prototype.onClickFacetGroupHtag = function(t) {
                        var e;
                        return t = t || window.event, e = r(t.target), e.parent().toggleClass("expanded"), e.siblings(".facet").animate({
                            height: "toggle"
                        }, 200, "swing", function() {
                            return r(this).css("overflow", "visible")
                        })
                    }, s.prototype.changeMonetisedFilter = function(t) {
                        var e, n, i, r;
                        return n = t.dataFacet, r = this.model.get(n), i = p.find(r, function(e) {
                            return e.value !== t.value
                        }), null != i ? (this.updateRadioActiveFilters(i, n), e = "facets." + n, i.company = !1, this.$("input[data-facet='" + n + "']").not(":checked").prop("checked", !0), this.trigger("radiofilter:changed", i, e)) : "undefined" != typeof console && null !== console ? console.error("Alternate radio filter not found - monetised filter override cant be enabled") : void 0
                    }, s.prototype.onFilterChange = function(t) {
                        var e, n, i, s, l, c, u, d, h;
                        return a.prototype.isIE8() && (t = t || window.event, r("#" + this.id).find("label.selected").removeClass("selected").find("input[type=radio]").prop("checked", !1)), e = r(t.currentTarget), u = e.attr("type"), e.parent().toggleClass("selected"), i = e.attr("data-facet"), l = e.is(":checked"), c = this.model.get(i), s = p.findWhere(c, {
                            description: e.attr("value")
                        }), this.isFacetLinkedToSearch(s.category) ? void this.linkCompanyFilterToFacet(s, l) : ("radio" === u ? this.updateRadioActiveFilters(s, i) : this.updateActiveFilters(s), n = "facets." + i, s.company = !1, "radio" === u ? this.trigger("radiofilter:changed", s, n) : e.is(":checked") ? this.trigger("filter:added", s, n, "value") : this.trigger("filter:removed", s, n, "removeValue"), setTimeout(function(t) {
                            return function() {
                                return t.sendGoogleAnalyticsEvent(s, 50)
                            }
                        }(this)), d = null != (h = e.is(":checked")) ? h : {
                            "true": "false"
                        }, o.prototype.trackEvent("search:facets:" + i + ":" + s.value, {
                            checked: d
                        }))
                    }, s.prototype.linkCompanyFilterToFacet = function(t, e) {
                        var n;
                        return n = t.tagValue, e && null != n ? this.company_facet.addListItemFromFacet(n) : this.company_facet.removeListItemFromFacet(n)
                    }, s.prototype.clearAllFilters = function() {
                        return this.activeFilters = [], this.$("input").attr("checked", !1), this.company_facet.clearSelected()
                    }, s.prototype.onCompanyChange = function(t) {
                        var e, n;
                        return n = t.get("value"), e = {
                            active_filter_name: t.get("description"),
                            description: t.get("description"),
                            value: t.get("value"),
                            company: !0
                        }, this.updateActiveFilters(e), t.changed.selected === !0 ? (this.setLinkedFilter(e, !0), "undefined" != typeof _gaq && null !== _gaq && _gaq.push(["_trackEvent", "Filter", "" + canstar_widget.faceted_search.category + " | Provider Search", "" + e.description]), this.trigger("filter:added", e, "SUPP.CO_CODE", "value")) : (this.trigger("filter:removed", e, "SUPP.CO_CODE", "removeValue"), this.setLinkedFilter(e, !1))
                    }, s.prototype.setLinkedFilter = function(t, e) {
                        var n;
                        return n = this.$("input[data-tag-value=" + t.value + "]"), n.length > 0 ? n.attr("checked", e) : void 0
                    }, s.prototype.on_competitor_list_changed = function(t) {
                        return t && t.companies ? this.trigger("competitor_list:changed", t.companies, "competitor_list:changed") : t ? console.error("List should have companies") : this.trigger("competitor_list:changed", null, "competitor_list:changed")
                    }, s.prototype.onCloseActiveFilter = function(t) {
                        var e, n, i;
                        return e = r(t.currentTarget), "true" === e.attr("company") ? (i = this.options.companies.findWhere({
                            value: e.attr("value")
                        }), i || (i = this.options.companies.findWhere({
                            description: e.attr("value")
                        })), i.set("selected", !1)) : (n = r('#facets input[value="' + e.attr("value") + '"]').attr("checked", !1), n.parent().removeClass("selected"), this.onFilterChange(t))
                    }, s.prototype.updateActiveFilters = function(t) {
                        var e, n;
                        return e = p.pluck(this.activeFilters, "description"), p.contains(e, t.description) ? (n = e.indexOf(t.description), this.activeFilters.splice(n, 1)) : this.activeFilters.push(t)
                    }, s.prototype.updateRadioActiveFilters = function(t, e) {
                        var n, i;
                        return n = p.pluck(this.activeFilters, "description"), i = this.model.get(e), p.each(i, function(t) {
                            return function(e) {
                                var i;
                                return p.contains(n, e.description) ? (i = n.indexOf(e.description), t.activeFilters.splice(i, 1)) : void 0
                            }
                        }(this)), this.activeFilters.push(t)
                    }, s.prototype.getActiveMonetisedFilter = function(t) {
                        return p.find(this.activeFilters, function(e) {
                            return e.category === t
                        })
                    }, s.prototype.isMonetisedFilterOverrideEnabled = function() {
                        var t;
                        return t = p.find(this.options.facetsConfig.facets, function(t) {
                            return t.filter_override === !0
                        }), null != t
                    }, s.prototype.isFacetLinkedToSearch = function(t) {
                        var e;
                        return e = p.find(this.options.facetsConfig.facets, function(e, n) {
                            return e.linked_to_provider_search === !0 && n === t
                        }), null != e
                    }, s.prototype.getMonetisedFilterTitle = function() {
                        var t;
                        return t = null, p.find(this.options.facetsConfig.facets, function(e) {
                            return null != e.filter_override_label && e.filter_override_label.length > 0 ? (t = e.filter_override_label, !0) : void 0
                        }), t
                    }, s.prototype.sendGoogleAnalyticsEvent = function(t) {
                        return "undefined" != typeof _gaq && null !== _gaq ? _gaq.push(["_trackEvent", "Filter", "" + canstar_widget.faceted_search.category + " " + t.category, t.description]) : void 0
                    }, s.prototype.set_initial_filters = function(t) {
                        return p.each(t.facets, function(t) {
                            return function(e) {
                                var n, i;
                                return n = null != (i = e.attr) ? i.split(".")[1] : void 0, p.each(e.vals, function(e) {
                                    return t.setDefaultFilter(n, e)
                                })
                            }
                        }(this))
                    }, s.prototype.setDefaultFilter = function(t, e) {
                        var n, i, r, o, s;
                        if (i = void 0, this.model && this.model.get(t)) {
                            for (s = this.model.get(t), r = 0, o = s.length; o > r; r++)
                                if (n = s[r], n.description === e) {
                                    i = n;
                                    break
                                }
                            i && (i.selected = !0)
                        }
                        return i
                    }, s.prototype.fetchCompanies = function() {
                        return this.options.companies.fetch({
                            success: function(t) {
                                return function() {
                                    var e, n;
                                    return null != (null != (n = t.options.facetsConfig.select) ? n.placeholders : void 0) && (e = p.isArray(t.options.facetsConfig.select.placeholders) ? t.options.facetsConfig.select.placeholders : null), t.company_facet = new u({
                                        collection: t.options.companies,
                                        theme_path: t.options.theme_path,
                                        theme_config: t.options.theme_config,
                                        placeholders: e
                                    }), t.company_facet.on("constructed", function() {
                                        return t.$el.find("#companies.facet-loading").replaceWith(t.company_facet.el), t.options.companies.trigger("reset"), t.options.companies.on("change", t.onCompanyChange)
                                    })
                                }
                            }(this)
                        })
                    }, s.prototype.get_company_filters = function() {
                        var t, e;
                        return null != (t = this.company_facet) && null != (e = t.selected) ? e.pluck("value") : void 0
                    }, s.prototype.fetchCompetitors = function() {
                        var t, e;
                        return this.options.facetsConfig.show_competitor_lists && this.options.competitor_lists_url ? (t = new l({
                            service_url: canstar_widget.view.competitor_url,
                            view_url: canstar_widget.view.base_url,
                            user_id: canstar_widget.view.user_id,
                            cust_id: canstar_widget.view.cust_id,
                            country_code: canstar_widget.view.country_code,
                            selected_competitor_list: null != (e = this.options.selected_competitor_list) ? e : null
                        }), t.getLists().then(function(t) {
                            return function(e) {
                                return t.competitor_lists = e, e.on("changed", t.on_competitor_list_changed), t.$el.find("#competitor_lists.facet-loading").replaceWith(e.el)
                            }
                        }(this))) : void 0
                    }, s.prototype.convertToSlug = function(t) {
                        var e, n, i, r, o;
                        for (e = "/_,:;", i = "aaaaaeeeeeiiiiooooouuuunc------", t = t.replace(/^\s+|\s+$/g, ""), t = t.toLowerCase(), n = r = 0, o = t.length; o >= 0 ? o >= r : r >= o; n = o >= 0 ? ++r : --r) t = t.replace(new RegExp(e.charAt(n), "g"), i.charAt(n));
                        return t.replace(/[^a-z0-9 -]/g, "").replace(/\s+/g, "-").replace(/-+/g, "-")
                    }, s.prototype._shouldHide = function(t) {
                        var e, n, i;
                        if (n = !1, null != t.conditions)
                            if (e = null != (i = t.op) ? i : "and", "and" === e) n = p.every(t.conditions, this._conditionPasses);
                            else {
                                if ("or" !== e) return "undefined" != typeof console && null !== console && console.error("Invalid operator in hideWhen"), !1;
                                n = p.some(t.conditions, this._conditionPasses)
                            }
                        else n = this._conditionPasses(t);
                        return n
                    }, s.prototype._conditionPasses = function(t) {
                        var e, n, i, r, o, s, a, l;
                        if (n = {
                                eq: function(t, e) {
                                    return t === e
                                },
                                ne: function(t, e) {
                                    return t !== e
                                },
                                gt: function(t, e) {
                                    return parseInt(t, 10) > parseInt(e, 10)
                                },
                                gte: function(t, e) {
                                    return parseInt(t, 10) >= parseInt(e, 10)
                                },
                                lt: function(t, e) {
                                    return parseInt(t, 10) < parseInt(e, 10)
                                },
                                lte: function(t, e) {
                                    return parseInt(t, 10) <= parseInt(e, 10)
                                }
                            }, r = canstar_widget.faceted_search[t.lvalue], s = t.rvalue, e = n[null != (a = t.comparison) ? a : "eq"], o = null != (l = t.op) ? l : "and", null == e) return void("undefined" != typeof console && null !== console && console.error("Invalid comparison value passed to hide_when of facet"));
                        if (s = [].concat(s), i = !1, "and" === o) i = p.every(s, function(t) {
                            return e(r, t)
                        });
                        else {
                            if ("or" !== o) return "undefined" != typeof console && null !== console && console.error("Invalid operator in condition"), !1;
                            i = p.some(s, function(t) {
                                return e(r, t)
                            })
                        }
                        return i
                    }, s
                }(d)
            })
        }.call(this), define("text-cns!components/selector/tmpl_selector.html", [], function() {
            return '<form class="selector-form">\n<div class="row">\n    <div class="col-xs-12">\n        <div class="param-section text-left"></div>\n    </div>\n</div>\n\n<div class="amend-section">\n	<div class="info-section"></div>\n    <% if (show_compare != \'undefined\' && show_compare == true) { %>\n        <div class="row margin-top-10">\n            <div class="col-xs-12 text-center">\n                <button type="submit" name="compare-button" class="btn btn-white btn-lg">Compare</button>\n            </div>\n            <% if (selectorConfig && selectorConfig.info_link) { %>\n            <div class="col-xs-12 text-right">\n                <div class="info_link_container">\n                    <a href="#" onclick="return false;" class="info_link">\n                        <%= selectorConfig.info_link.text %>\n                    </a>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    <% } else { %>\n        <a class="change-search">Change search</a>\n    <% } %>\n\n</div>\n    <div style="clear:both;"></div>\n</form>\n'
        }), define("text-cns!components/selector/tmpl_input.html", [], function() {
            return "<div class=\"<%=cssClassInputGroup %>\" >\n  <label for='<%= param_name %>'><%= param_data.name %>:</label>\n    <%=prepend %><input <%=readonly %> type='<%= param_data.format == 'currency' ? 'tel' : 'text' %>' name='<%=param_name %>' value='<%=value %>'/><%=append %>\n</div>"
        }), define("text-cns!components/selector/tmpl_select.html", [], function() {
            return "<div <%= param_data.disabled ? 'style=\"display:none;\"' : '' %>>\n    <label for='<%= param_name %>'><%= param_data.name %>:</label>\n    <select name='<%= param_name %>'  <%= select_disabled %> <%= param_data.disabled ? 'disabled' : '' %>>\n    <% _.each( param_data.options, function(option_val, option_text) { %>\n    <% if (typeof option_val.value != 'undefined') {\n      option_val = option_val.value\n    } %>\n    <% if (typeof param_data.text != 'undefined' && param_data.text != param_data.value) { %>\n      <option <%= param_data.text == option_text ? 'selected' : '' %> value='<%= option_val %>'><%= option_text %></option>\n    <% } else { %>\n        <option <%= param_data.value == option_text ? 'selected' : '' %> value='<%= option_val %>'><%= option_text %></option>\n    <% } %>\n    <% }); %>\n    </select>\n<div>"
        }), define("text-cns!components/selector/tmpl_hidden.html", [], function() {
            return "<div style=\"display:none;\">\n  <input <%= readonly %> type='hidden' name='<%= param_name %>' value='<%= _helpers.currency(param_data.value) %>'/>\n<div>"
        }), define("text-cns!components/selector/tmpl_table_selector.html", [], function() {
            return '<form>\n  <div class="param-section"></div>\n  <div class="amend-section">\n      <div class="info-section"></div>\n      <a class="change-search">Change search</a>\n  </div>\n  <div style="clear:both;"></div>\n</form>'
        }), define("text-cns!components/selector/tmpl_checkbox.html", [], function() {
            return "<div  class='<%=cssClass %> overflow-fix' data-element=\"<%= param_name %>\" >\n    <label for='<%= param_name %>'><%= param_data.name %></label>\n    <div data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%=error_message || 'Please select at least one option'%>\" name='<%= param_name %>'  <%= select_disabled %> <%= param_data.disabled ? 'disabled' : '' %>>\n        <% _.each( param_data.options, function(option_val, option_text) { %>\n            <% if (typeof option_val.value != 'undefined') {\n                option_val = option_val.value\n            } %>\n            <% if (typeof param_data.text != 'undefined' && param_data.text != param_data.value) { %>\n                <label class=\"control checkbox checkbox-inverse\">\n                    <input class=\"form-control\" name='<%= param_name %>' type=\"checkbox\" <%= param_data.text == option_text ? 'checked' : '' %> id='<%= option_val %>' value='<%= option_val %>'>\n                    <span class=\"control-indicator\"></span>\n                    <%= option_text %>\n                </label>\n            <% } else { %>\n                <label class=\"control checkbox checkbox-inverse\">\n                    <input class=\"form-control\" name='<%= param_name %>' type=\"checkbox\" <%= param_data.value == option_text ? 'checked' : '' %> id='<%= option_val %>' value='<%= option_val %>'>\n                    <span class=\"control-indicator\"></span>\n                    <%= option_text %>\n                </label>\n            <% } %>\n        <% }); %>\n    </div>\n</div>\n"
        }), define("text-cns!components/selector/tmpl_radio.html", [], function() {
            return "<div  class='<%=cssClass %> overflow-fix' data-element=\"<%= param_name %>\" >\n	<label for='<%= param_name %>'><%= param_data.name %></label>\n	<div data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message || 'Please select an option'%>\"  name='<%= param_name %>'  <%= select_disabled %> <%= param_data.disabled ? 'disabled' : '' %>>\n        <% _.each( param_data.options, function(option_val, option_text) { %>\n            <% if (typeof option_val.value != 'undefined') {\n                option_val = option_val.value\n            } %>\n            <% if (typeof param_data.text != 'undefined' && param_data.text != param_data.value) { %>\n                <label class=\"control radio radio-inverse inline\">\n                    <input style=\"display: none !important;\" class=\"form-control\" name='<%= param_name %>' type=\"radio\" <%= param_data.disabled ? 'disabled' : '' %> <%= param_data.text == option_text ? 'checked=\"checked\"' : '' %> id='<%= option_val %>' value='<%= option_val %>'>\n                    <span class=\"control-indicator\"></span>\n                    <%= option_text %>\n                </label>\n            <% } else { %>\n                <label class=\"control radio radio-inverse inline\">\n                    <input style=\"display: none !important;\" class=\"form-control\" name='<%= param_name %>' type=\"radio\" <%= param_data.disabled ? 'disabled' : '' %> <%= param_data.value == option_text ? 'checked=\"checked\"' : '' %> id='<%= option_val %>' value='<%= option_val %>'>\n                    <span class=\"control-indicator\"></span>\n                    <%= option_text %>\n                </label>\n            <% } %>\n        <% }); %>\n	</div>\n</div>"
        }), define("text-cns!components/selector/tmpl_title.html", [], function() {
            return "<h2><%= title_text %></h2>\n"
        }), define("text-cns!components/selector/tmpl_category_title.html", [], function() {
            return "<h2><%= title_text %></h2>\n"
        }), define("text-cns!components/selector/tmpl_info_link.html", [], function() {
            return "<%=data.text%>\n"
        }), define("text-cns!components/selector/tooltip.html", [], function() {
            return '<div class="tooltip danger" role="tooltip">\r\n    <div class="tooltip-arrow"></div>\r\n    <div class="tooltip-inner"></div>\r\n</div>'
        }), define("text-cns!components/selector/tmpl_tooltip_list.html", [], function() {
            return "<p><%= data.intro %></p>\n<ul>\n  <% _.each(data.items, function(item) { %>\n  <li><%= item %></li>\n  <% }) %>\n</ul>\n"
        }), define("text-cns!components/selector/tmpl_heading.html", [], function() {
            return '<div class="<%=cssClass %>">\n    <span class="heading"><%=param_data.title_text %></span>\n</div>\n'
        }), define("text-cns!components/selector/tmpl_postcode.html", [], function() {
            return "<% if(typeof window.initAutocomplete === 'undefined'){ %>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500\" id=\"css_gm\">\n<script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyB8SlRpyN_KYMsFjEC-3HxR-fk0qlCWmoU&libraries=places&callback=initAutocomplete\" async defer id=\"api_gm\"></script>\n<%\n  var placeSearch, autocomplete,PostcodeElement;\n\n  window.initAutocomplete=function() {\n    PostcodeElement = $('input[type=text][name=\"'+param_name+'\"]');\n    autocomplete = new google.maps.places.Autocomplete(PostcodeElement[0],{ types: ['(regions)'] , componentRestrictions: { country: \"au\" }});\n    autocomplete.addListener('place_changed', function() {\n      var place = autocomplete.getPlace();\n      parts =_.filter(place.address_components,function(pl){ return _.contains(pl.types,'postal_code'); });\n      if( parts.length >= 1) {\n        postcode = parts[0]['short_name'];\n        PostcodeElement[0].value=postcode;\n      }else {\n        PostcodeElement[0].value=null;\n      }\n      if( typeof param_data.secondary_fill !== 'undefined' ){\n        sparts = _.filter(place.address_components, function(pl){\n          return _.contains(pl.types,param_data.secondary_fill.address_part_type);\n        });\n        if(sparts.length >= 1){\n          secval = sparts[0]['short_name'];\n          SecondaryElement = $('input[name=\"'+param_data.secondary_fill.field_name+'\"]');\n          SecondaryElement[0].value = secval;\n        }\n      }\n    });\n  }\n}\n%>\n<div class='<%=cssClass %> overflow-fix' >\n    <label for='<%= param_name %>'><%= param_data.name %></label>\n    <% if (cssClassInputGroup != null) { %> <div class='<%= cssClassInputGroup %>' > <% } %>\n        <%=prepend %>\n        <% var placeholderAttr = '';\n        if(placeholder) {\n          placeholderAttr = 'placeholder=\"' + param_data.placeholder + '\"';\n          /* If placeholder is set, don't use the default value */\n          value = '';\n        } %>\n        <input data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message || 'Invalid field'%>\" class=\"form-control\" <%=param_data.validate.required ? \"required\":\"\" %> <%=readonly %> type=\"<%= param_data.format == 'currency' ? 'tel' : 'text' %>\" name=\"<%=param_name %>\" value=\"<%=value %>\" <%= placeholderAttr %>/><%=append %>\n    <% if (cssClassInputGroup != null) { %> </div> <% } %>\n</div>\n"
        }), define("text-cns!widgets/search/themes/gold/selector/tmpl_input.html", [], function() {
            return "\n<div class='<%=cssClass %> overflow-fix' >\n    <label for='<%= param_name %>'><%= param_data.name %></label>\n    <% if (cssClassInputGroup != null) { %> <div class='<%= cssClassInputGroup %>' > <% } %>\n        <%=prepend %>\n        <% var placeholderAttr = '';\n        if(placeholder) {\n              placeholderAttr = 'placeholder=\"' + param_data.placeholder + '\"';\n              /* If placeholder is set, don't use the default value */\n              value = '';\n        } %>\n        <input data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message || 'Invalid field'%>\" class=\"form-control\" <%=readonly %> type='<%= param_data.format == 'currency' ? 'tel' : 'text' %>' name='<%=param_name %>' value='<%=value %>' <%= placeholderAttr %>/><%=append %>\n    <% if (cssClassInputGroup != null) { %> </div> <% } %>\n</div>\n"
        }), define("text-cns!widgets/search/themes/gold/selector/tmpl_select.html", [], function() {
            return "<div  class='<%=cssClass %> overflow-fix' data-element=\"<%= param_name %>\" >\n	<label for='<%= param_name %>'><%= param_data.name %></label>\n    <% if(param_data.tooltip && page_type === \"category\") { %>\n    <i class=\"fa fa-question-circle\" data-toggle=\"normal-tooltip\" title=\"<%= param_data.tooltip %>\"></i>\n    <% } %>\n    <div class=\"select full-width\">\n        <select data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message%>\"  class=\"form-control\" name='<%= param_name %>'  <%= select_disabled %> <%= param_data.disabled ? 'disabled' : '' %>>\n            <% if (placeholder) { %>\n                <option selected value=\"\" data-placeholder=\"true\"><%= param_data.placeholder %></option>\n            <% } %>\n            <% _.each( param_data.options, function(option_val, option_text) {\n                if (typeof option_val.value != 'undefined') {\n                    option_val = option_val.value\n                }\n                var selected = false;\n                if (placeholder === false) {\n                    if(typeof param_data.text != 'undefined' && param_data.text != param_data.value) {\n                        selected = (param_data.text == option_text ? 'selected' : '');\n                    } else {\n                        selected = (param_data.value == option_text ? 'selected' : '');\n                    }\n                } %>\n                <option <%= selected ? 'selected' : '' %> value='<%= option_val %>'><%= option_text %></option>\n            <% }); %>\n        </select>\n    </div>\n</div>\n"
        }), define("text-cns!widgets/search/themes/gold/selector/tmpl_table_selector.html", [], function() {
            return '<form class="selector-panel well well-default">\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="param-section col-override">\n\n            </div>\n        </div>\n    </div>\n\n    <div class="amend-section text-right font-strong">\n        <div class="info-section"></div>\n        <% if (show_compare != \'undefined\' && show_compare == true) { %>\n            <div class="row margin-top-10">\n                <div class="col-xs-12 text-center">\n                    <button type="submit" name="compare-button" class="btn btn-default btn-lg">Compare</button>\n                </div>\n            </div>\n        <% } else { %>\n            <div class="info-section"></div>\n            <a href="#" class="change-search" >Change search</a>\n        <% } %>\n    </div>\n</form>\n'
        }), define("text-cns!widgets/search/themes/gold/selector/tmpl_title.html", [], function() {
            return '<h4 class="margin-bottom-10"><%= title_text %></h4>'
        }), define("text-cns!widgets/search/themes/gold/selector/tmpl_category_title.html", [], function() {
            return '<h1 class="h2">Compare <%= selector_config && selector_config.category_name %></h1>\n'
        }), define("text-cns!widgets/search/themes/wealthbricks/selector/tmpl_selector.html", [], function() {
            return '<form class="selector-form">\n<div class="row">\n    <div class="col-xs-12">\n        <div class="param-section text-left"></div>\n    </div>\n</div>\n\n<div class="amend-section">\n  <div class="info-section"></div>\n    <% if (show_compare != \'undefined\' && show_compare == true) { %>\n        <div class="row margin-top-10">\n            <div class="col-xs-12 text-center">\n                <button type="submit" name="compare-button" class="btn btn-sm">Submit</button>\n            </div>\n            <% if (selectorConfig && selectorConfig.info_link) { %>\n            <div class="col-xs-12 text-right">\n                <div class="info_link_container">\n                    <a href="#" onclick="return false;" class="info_link">\n                        <%= selectorConfig.info_link.text %>\n                    </a>\n                </div>\n            </div>\n            <% } %>\n        </div>\n    <% } else { %>\n        <a class="change-search">Change search</a>\n    <% } %>\n\n</div>\n    <div style="clear:both;"></div>\n</form>\n'
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_select.html", [], function() {
            return "<div class='<%=cssClass %> overflow-fix' data-element=\"<%= param_name %>\" >\n    <div class=\"<%= param_data.name ? '' : 'hidden-xs' %> label-container\">\n        <label for='<%= param_name %>'><%= param_data.name %></label>\n    </div>\n    <div class=\"<%= param_data.name ? 'select-container-label' : 'select-container-no-label' %>\">\n        <div class=\"select full-width\">\n            <select data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message%>\"  class=\"form-control\" name='<%= param_name %>'  <%= select_disabled %> <%= param_data.disabled ? 'disabled' : '' %>>\n            <% if (placeholder) { %>\n            <option selected value=\"\" data-placeholder=\"true\"><%= param_data.placeholder %></option>\n            <% } %>\n            <% _.each( param_data.options, function(option_val, option_text) {\n            if (typeof option_val.value != 'undefined') {\n            option_val = option_val.value\n            }\n            var selected = false;\n            if (placeholder === false) {\n            if(typeof param_data.text != 'undefined' && param_data.text != param_data.value) {\n            selected = (param_data.text == option_text ? 'selected' : '');\n            } else {\n            selected = (param_data.value == option_text ? 'selected' : '');\n            }\n            } %>\n            <option <%= selected ? 'selected' : '' %> value='<%= option_val %>'><%= option_text %></option>\n            <% }); %>\n            </select>\n        </div>\n    </div>\n</div>\n"
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_selector.html", [], function() {
            return '<form class="selector-form">\n    <div class="row">\n        <div class="param-section text-left"></div>\n <% if(false){ %>   </div>\n                    <button type="submit" name="compare-button" class="btn btn-white btn-lg">Compare</button>\n                </div>\n\n    <div class="amend-section">\n        <div class="info-section"></div>\n            <div class="row"> <% } %>\n                <div class="<% if(selectorConfig.options.btn_class_override) { %><%= selectorConfig.options.btn_class_override %><% } else { %>col-xs-12 col-sm-3 text-center test<% } %>">\n                    <button type="submit" name="compare-button" class="btn btn-white btn-lg">Compare</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</form>\n<% if (selectorConfig && selectorConfig.info_link) { %>\n<div class="row">\n        <div class="<% if(selectorConfig.info_link.class_override) { %><%= selectorConfig.info_link.class_override %><% } else { %>col-xs-12 margin-top-5<% } %>">\n            <div class="info_link_container">\n                <span class="info_link">\n                    <%= selectorConfig.info_link.text %>\n                </span>\n            </div>\n        </div>\n</div>\n<% } %>\n'
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_table_selector.html", [], function() {
            return '<form class="selector-panel well well-default">\n    <div class="row">\n        <div class="col-xs-12">\n            <div class="param-section">\n\n            </div>\n        </div>\n    </div>\n</form>\n'
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_input.html", [], function() {
            return "\n<div class='<%=cssClass %> overflow-fix' >\n    <label for='<%= param_name %>'><%= param_data.name %></label>\n    <% if (cssClassInputGroup != null) { %> <div class='<%= cssClassInputGroup %>' > <% } %>\n        <%=prepend %>\n        <% var placeholderAttr = '';\n        if(placeholder) {\n              placeholderAttr = 'placeholder=\"' + param_data.placeholder + '\"';\n              /* If placeholder is set, don't use the default value */\n              value = '';\n        } %>\n        <input data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message || 'Invalid field'%>\" class=\"form-control\" <%=readonly %> type=\"<%= param_data.format == 'currency' ? 'tel' : 'text' %>\" name=\"<%=param_name %>\" value=\"<%=value %>\" <%= placeholderAttr %>/><%=append %>\n    <% if (cssClassInputGroup != null) { %> </div> <% } %>\n</div>\n"
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_title.html", [], function() {
            return '<div class="col-sm-2">\n    <h4 class="margin-bottom-10"><%= title_text %></h4>\n    <button type="button" class="change-search btn btn-primary btn-xs pull-left">Change Search</button>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_heading.html", [], function() {
            return '<div class="<%=cssClass %>">\n    <span class="heading"><%=param_data.title_text %></span>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue/selector/tmpl_postcode.html", [], function() {
            return "<% if(typeof window.initAutocomplete === 'undefined'){ %>\n<link type=\"text/css\" rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500\" id=\"css_gm\">\n<script src=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyB8SlRpyN_KYMsFjEC-3HxR-fk0qlCWmoU&libraries=places&callback=initAutocomplete\" async defer id=\"api_gm\"></script>\n<%\n  var placeSearch, autocomplete,PostcodeElement;\n\n  window.initAutocomplete=function() {\n    PostcodeElement = $('input[type=text][name=\"'+param_name+'\"]');\n    autocomplete = new google.maps.places.Autocomplete(PostcodeElement[0],{ types: ['(regions)'] , componentRestrictions: { country: \"au\" }});\n    autocomplete.addListener('place_changed', function() {\n      var place = autocomplete.getPlace();\n      parts =_.filter(place.address_components,function(pl){ return _.contains(pl.types,'postal_code'); });\n      if( parts.length >= 1) {\n        postcode = parts[0]['short_name'];\n        PostcodeElement[0].value=postcode;\n      }else {\n        PostcodeElement[0].value=null;\n      }\n      if( typeof param_data.secondary_fill !== 'undefined' ){\n        sparts = _.filter(place.address_components, function(pl){\n          return _.contains(pl.types,param_data.secondary_fill.address_part_type);\n        });\n        if(sparts.length >= 1){\n          secval = sparts[0]['short_name'];\n          SecondaryElement = $('input[name=\"'+param_data.secondary_fill.field_name+'\"]');\n          SecondaryElement[0].value = secval;\n        }\n      }\n    });\n  }\n}\n%>\n<div class='<%=cssClass %> overflow-fix' >\n    <label for='<%= param_name %>'><%= param_data.name %></label>\n    <% if (cssClassInputGroup != null) { %> <div class='<%= cssClassInputGroup %>' > <% } %>\n        <%=prepend %>\n        <% var placeholderAttr = '';\n        if(placeholder) {\n          placeholderAttr = 'placeholder=\"' + param_data.placeholder + '\"';\n          /* If placeholder is set, don't use the default value */\n          value = '';\n        } %>\n        <input data-toggle=\"tooltip\" data-style=\"danger\" data-placement=\"bottom\" title=\"<%=error_message || 'Invalid field'%>\" class=\"form-control\" <%=param_data.validate.required ? \"required\":\"\" %> <%=readonly %> type=\"<%= param_data.format == 'currency' ? 'tel' : 'text' %>\" name=\"<%=param_name %>\" value=\"<%=value %>\" <%= placeholderAttr %>/><%=append %>\n    <% if (cssClassInputGroup != null) { %> </div> <% } %>\n</div>\n"
        }),
        function() {
            define("components/selector/templates", ["require", "text-cns!components/selector/tmpl_selector.html", "text-cns!components/selector/tmpl_input.html", "text-cns!components/selector/tmpl_select.html", "text-cns!components/selector/tmpl_hidden.html", "text-cns!components/selector/tmpl_table_selector.html", "text-cns!components/selector/tmpl_checkbox.html", "text-cns!components/selector/tmpl_radio.html", "text-cns!components/selector/tmpl_title.html", "text-cns!components/selector/tmpl_category_title.html", "text-cns!components/selector/tmpl_info_link.html", "text-cns!components/selector/tooltip.html", "text-cns!components/selector/tmpl_tooltip_list.html", "text-cns!components/selector/tmpl_heading.html", "text-cns!components/selector/tmpl_postcode.html", "text-cns!widgets/search/themes/gold/selector/tmpl_input.html", "text-cns!widgets/search/themes/gold/selector/tmpl_select.html", "text-cns!widgets/search/themes/gold/selector/tmpl_table_selector.html", "text-cns!widgets/search/themes/gold/selector/tmpl_title.html", "text-cns!widgets/search/themes/gold/selector/tmpl_category_title.html", "text-cns!widgets/search/themes/wealthbricks/selector/tmpl_selector.html", "text-cns!widgets/search/themes/blue/selector/tmpl_select.html", "text-cns!widgets/search/themes/blue/selector/tmpl_selector.html", "text-cns!widgets/search/themes/blue/selector/tmpl_table_selector.html", "text-cns!widgets/search/themes/blue/selector/tmpl_input.html", "text-cns!widgets/search/themes/blue/selector/tmpl_title.html", "text-cns!widgets/search/themes/blue/selector/tmpl_heading.html", "text-cns!widgets/search/themes/blue/selector/tmpl_postcode.html"], function(t) {
                return t("text-cns!components/selector/tmpl_selector.html"), t("text-cns!components/selector/tmpl_input.html"), t("text-cns!components/selector/tmpl_select.html"), t("text-cns!components/selector/tmpl_hidden.html"), t("text-cns!components/selector/tmpl_table_selector.html"), t("text-cns!components/selector/tmpl_checkbox.html"), t("text-cns!components/selector/tmpl_radio.html"), t("text-cns!components/selector/tmpl_title.html"), t("text-cns!components/selector/tmpl_category_title.html"), t("text-cns!components/selector/tmpl_info_link.html"), t("text-cns!components/selector/tooltip.html"), t("text-cns!components/selector/tmpl_tooltip_list.html"), t("text-cns!components/selector/tmpl_heading.html"), t("text-cns!components/selector/tmpl_postcode.html"), t("text-cns!widgets/search/themes/gold/selector/tmpl_input.html"), t("text-cns!widgets/search/themes/gold/selector/tmpl_select.html"), t("text-cns!widgets/search/themes/gold/selector/tmpl_table_selector.html"), t("text-cns!widgets/search/themes/gold/selector/tmpl_title.html"), t("text-cns!widgets/search/themes/gold/selector/tmpl_category_title.html"), t("text-cns!widgets/search/themes/wealthbricks/selector/tmpl_selector.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_select.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_selector.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_table_selector.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_input.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_title.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_heading.html"), t("text-cns!widgets/search/themes/blue/selector/tmpl_postcode.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/selector/selector", ["require", "jquery", "underscore", "canstar_widget", "components/base/View", "libraries/Currency", "libraries/Calculators", "libraries/Canstar", "accounting", "components/selector/templates"], function(i) {
                var r, o, s, a, l, c, u, d, p;
                return r = i("jquery"), p = i("underscore"), d = i("canstar_widget"), u = i("components/base/View"), l = i("libraries/Currency"), s = i("libraries/Calculators"), a = i("libraries/Canstar"), o = i("accounting"), i("components/selector/templates"), c = function(i) {
                    function o() {
                        return this.process_params = t(this.process_params, this), this.map_params_profile = t(this.map_params_profile, this), this.convert_options_obj = t(this.convert_options_obj, this), this._ensure_option_level_dependencies = t(this._ensure_option_level_dependencies, this), this._ensure_selector_level_dependencies = t(this._ensure_selector_level_dependencies, this), this._helpers = t(this._helpers, this), this.get_full_params = t(this.get_full_params, this), this.get_param_values = t(this.get_param_values, this), this.getFormSubmitUrl = t(this.getFormSubmitUrl, this), this.enforceDependencyDisplayModel = t(this.enforceDependencyDisplayModel, this), this.queryToMatrixParams = t(this.queryToMatrixParams, this), this.getFullTablePageUrl = t(this.getFullTablePageUrl, this), this.onFormSubmit = t(this.onFormSubmit, this), this.onChangeSearchClick = t(this.onChangeSearchClick, this), this.sendParamGA = t(this.sendParamGA, this), this.sendParamCA = t(this.sendParamCA, this), this.isParamValid = t(this.isParamValid, this), this.anythingChecked = t(this.anythingChecked, this), this.areCheckboxesValid = t(this.areCheckboxesValid, this), this.areRadiosValid = t(this.areRadiosValid, this), this.removeError = t(this.removeError, this), this.displayError = t(this.displayError, this), this.validateParam = t(this.validateParam, this), this.validateAllParams = t(this.validateAllParams, this), this.setTableSelectParams = t(this.setTableSelectParams, this), this.onInputChange = t(this.onInputChange, this), this.renderInfoLink = t(this.renderInfoLink, this), this.render = t(this.render, this), this.updateTextProperties = t(this.updateTextProperties, this), this.getFacetPreselects = t(this.getFacetPreselects, this), this.addFacetPreselects = t(this.addFacetPreselects, this), this.applyQueryParams = t(this.applyQueryParams, this), this.getQueryParam = t(this.getQueryParam, this), this.updateCanstarWidgetObject = t(this.updateCanstarWidgetObject, this), this.onEditableChange = t(this.onEditableChange, this), this.setPlaceholderValues = t(this.setPlaceholderValues, this), this.finishConfiguring = t(this.finishConfiguring, this), this.configure = t(this.configure, this), this.verifyCtorArgs = t(this.verifyCtorArgs, this), this.initialize = t(this.initialize, this), this.defaults = t(this.defaults, this), o.__super__.constructor.apply(this, arguments)
                    }
                    return n(o, i), o.prototype.path = "components/selector", o.prototype.defaults = function() {
                        return this.show_compare = !1, this.preselect = null, this.params = null, this.page_type = null, this.selector_options = null, this.base_url = null, this.inPageSelectorConfig = !1, this.distributor = null, this.tableName = null, this.facetPreselects = [], this.selectorConfig = {}, this.page_types = {
                            category_page: "category",
                            comparison_page: "table"
                        }
                    }, o.prototype.templates = {
                        table_selector: "!!tmpl_table_selector.html",
                        selector: "!!tmpl_selector.html",
                        input: "!!tmpl_input.html",
                        select: "!!tmpl_select.html",
                        checkbox: "!!tmpl_checkbox.html",
                        radio: "!!tmpl_radio.html",
                        hidden: "!!tmpl_hidden.html",
                        tooltip: "!tooltip.html",
                        title: "!!tmpl_title.html",
                        category_title: "!!tmpl_category_title.html",
                        heading: "!!tmpl_heading.html",
                        tooltip_list: "!!tmpl_tooltip_list.html",
                        postcode: "!!tmpl_postcode.html",
                        info_link: "!!tmpl_info_link.html"
                    }, o.prototype.events = {
                        "click .change-search": "onChangeSearchClick",
                        "submit .selector-form": "onFormSubmit"
                    }, o.prototype.className = "selector-panel", o.prototype.isExcluded = !1, o.prototype.initialize = function() {
                        var t, e, n, i, r, o;
                        return this.defaults(), this.tableConfig = this.options.table_config, this.page_type = p.isEmpty(this.tableConfig) ? this.page_types.category_page : this.page_types.comparison_page, this.verifyCtorArgs() ? (null != this.options.base_url && (this.base_url = this.options.base_url), this.widgets_url = null != (t = null != (e = this.options) ? e.widgets_url : void 0) ? t : d.base_url, this.options.title_text = null != (null != (n = this.tableConfig.components) && null != (i = n.selector) ? i.title_text : void 0) ? this.tableConfig.components.selector.title_text : this.options.title_text || "Your search", this.options.btn_text = null != (null != (r = this.tableConfig.components) && null != (o = r.selector) ? o.btn_text : void 0) ? this.tableConfig.components.selector.btn_text : this.options.btn_text || ["Change Search", "Apply Changes"], null != this.options.selector_config_overrides && (this.selectorConfig = this.options.selector_config_overrides), this.configure()) : void 0
                    }, o.prototype.verifyCtorArgs = function() {
                        var t;
                        if (this.options.is_excluded === !0 && (this.isExcluded = !0), !p.isEmpty(this.options.selector_params) || this.isExcluded && !(null != (t = this.options.theme_config) ? t.selector_hidden_but_processed : void 0)) this.inPageSelectorConfig = !0;
                        else {
                            if (null == this.options.distributor || null == this.options.table) return "undefined" != typeof console && null !== console && console.error("Distributor or table not defined."), !1;
                            this.distributor = this.options.distributor, this.tableName = this.options.table
                        }
                        return null == this.options.table_config ? ("undefined" != typeof console && null !== console && console.error("Table config not defined."), !1) : !0
                    }, o.prototype.configure = function() {
                        var t;
                        return this.inPageSelectorConfig ? (this.params = this.options.selector_params, p.each(this.params, function(t) {
                            return function(e, n) {
                                return t.params[n].value = e.value
                            }
                        }(this)), this.categoryName = d.faceted_search.category, this.finishConfiguring()) : (t = "" + this.widgets_url + "api_v2/facets/selector_config?distributor=" + this.distributor + "&table=" + this.tableName, r.getJSON(t, function(t) {
                            return function(e) {
                                return t.selectorConfig = r.extend(!0, {}, e, t.selectorConfig), t.params = t.selectorConfig.fields, t.selector_options = t.selectorConfig.options, t.categoryName = d.faceted_search.category || t.selectorConfig.category_name || ("undefined" != typeof console && null !== console ? console.error("Category name not defined") : void 0), t.options.category_prefix && (t.categoryName = "" + t.options.category_prefix + " " + t.categoryName), t.setPlaceholderValues(t.params), null != t.options.preselect && p.each(t.options.preselect, function(e) {
                                    var n;
                                    return null == e.name && "undefined" != typeof console && null !== console && console.error("name property needed in preselect parameters"), null == t.params[e.name] && (t.params[e.name] = {
                                        name: e.name,
                                        type: "hidden"
                                    }), n = p.omit(e, "name"), r.extend(!0, t.params[e.name], n)
                                }), t.applyQueryParams(t.params)
                            }
                        }(this)).fail(function() {
                            return function(t) {
                                return "undefined" != typeof console && null !== console ? console.error(t) : void 0
                            }
                        }(this)).always(function(t) {
                            return function() {
                                return t.finishConfiguring()
                            }
                        }(this)))
                    }, o.prototype.finishConfiguring = function() {
                        var t, e, n, i, o, s, a, l, c, u;
                        return null != this.options.stored_params && p.each(this.options.stored_params, function(t) {
                            return function(e, n) {
                                return t.params[n].text = e.text, t.params[n].value = e.value
                            }
                        }(this)), e = !1, this.options.set_enabled === !0 && (e = !0), this.model = new Backbone.Model({
                            editable: e,
                            params: this.params
                        }), this.updateTextProperties(), this.updateCanstarWidgetObject(), this.model.on("change:editable", this.onEditableChange), this.options.show_compare === !0 && (this.show_compare = !0), null != this.options.preselect && (this.preselect = this.options.preselect), this.page_type === this.page_types.comparison_page ? null != (null != (o = this.options) && null != (s = o.table_config) && null != (a = s.components) ? a.table_selector : void 0) ? (i = null != (l = this.options) && null != (c = l.table_config) && null != (u = c.components) ? u.table_selector : void 0, n = [], p.each(window.location.search.trim().replace("?", "").split("&"), function(t) {
                            var e;
                            return e = t.split("="), n[e[0]] = {
                                name: e[0],
                                value: e[1]
                            }
                        }), n = p.extend(n, this.params, {
                            show_compare: this.show_compare,
                            options: this.options
                        }), t = r("<div class='col-xs-12'></div>"), p.each(i.rows, function() {
                            return function(e) {
                                var i;
                                return i = r("<div class='row'></div>"), p.each(e.columns, function(t) {
                                    return i.append(r(p.template("<div class='" + t.classes + "'>" + t.html + "</div>")(n)))
                                }), t.append(i)
                            }
                        }(this)), this.$el.html(this.templates.table_selector({
                            html: t[0].outerHTML
                        }))) : this.$el.html(this.templates.table_selector({
                            show_compare: this.show_compare
                        })) : this.$el.html(this.templates.selector({
                            show_compare: this.show_compare,
                            selectorConfig: this.selectorConfig
                        })), this.trigger("init")
                    }, o.prototype.setPlaceholderValues = function(t) {
                        return this.page_type === this.page_types.category_page ? p.each(t, function(t) {
                            return t.placeholder ? t.value = "" : void 0
                        }) : void 0
                    }, o.prototype.onEditableChange = function(t, e) {
                        return e || (this.updateTextProperties(), this.updateCanstarWidgetObject()), this.render()
                    }, o.prototype.updateCanstarWidgetObject = function() {
                        return d.stored_selector_params = this.get_full_params()
                    }, o.prototype.getQueryParam = function(t) {
                        var e, n, i;
                        for (t = t.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]").replace(/\x20/g, "\\+"), n = new RegExp("[\\?&]" + t + "(?:%5B%5D)?=([^&#]*)", "g"), i = [], e = []; null !== i;) i = n.exec(location.search), null !== i && e.push(decodeURIComponent(i[1].replace(/\+/g, " ")));
                        return e
                    }, o.prototype.applyQueryParams = function(t) {
                        return p.each(t, function(e) {
                            return function(n, i) {
                                var r, o, s;
                                return r = e.getQueryParam(i), (null != r ? r.length : void 0) > 0 ? "checkbox" === n.type || n.facet_preselect === !0 ? e.addFacetPreselects(i, r) : ((null != r ? r.length : void 0) > 1 && "undefined" != typeof console && null !== console && console.error("Multiple values found for non-checkbox param type", r), r = r[0], o = p.keys(n.options), !p.isArray(n.options) && p.contains(o, r) ? (t[i].text = r, t[i].value = (null != (s = n.options[r]) ? s.value : void 0) || n.options[r]) : t[i].value = r) : void 0
                            }
                        }(this))
                    }, o.prototype.addFacetPreselects = function(t, e) {
                        return p.each(e, function(e) {
                            return function(n) {
                                return e.facetPreselects.push("" + t + ":" + n)
                            }
                        }(this))
                    }, o.prototype.getFacetPreselects = function() {
                        return this.facetPreselects
                    }, o.prototype.updateTextProperties = function() {
                        var t;
                        return t = this.get_full_params(), p.each(t, function(t, e) {
                            var n, i, r, o;
                            return i = t.options, o = t.value, r = t.text, p.isObject(i) && !p.isArray(i) && null == r ? (n = !1, p.each(i, function() {
                                return function(i, r) {
                                    return p.isObject(i) && (i = i.value), o === i ? (t.text = r, n === !0 && "undefined" != typeof console && null !== console && console.error("Cannot deduce the correct text value for the " + e + " selector parameter. Setting text to " + r + ". Try explicitly setting the text property."), n = !0) : void 0
                                }
                            }(this))) : void 0
                        })
                    }, o.prototype.render = function() {
                        var t, e, n, i, o, s, a, l, c, u, d, h, f, m, g, v, _, y;
                        this.options.show_title !== !1 && (d = this.templates.title, this.page_type === this.page_types.category_page && (d = this.templates.category_title), "" !== this.options.title_text && r(".param-section", this.el).html(d({
                            title_text: this.options.title_text,
                            show_compare: this.show_compare,
                            selector_config: this.selectorConfig
                        }))), u = r.extend(!0, {}, this.model.get("params") || {}), n = {}, e = {}, a = 'readonly class="disabled"', l = 'disabled class="disabled"', this.model.get("editable") ? (o = "", this.$(".change-search", ".amend-section").text(this.options.btn_text[1]).addClass("editing")) : (o = a, this.$(".change-search", ".amend-section").text(this.options.btn_text[0]).removeClass("editing")), s = this.model.get("params");
                        for (i in u) c = u[i], null != c.options && (c.options = this.convert_options_obj(c.options)), e[i] = {
                            param_name: i,
                            param_data: r.extend(!0, {}, c),
                            readonly: o,
                            _helpers: this._helpers(),
                            prepend: "",
                            append: "",
                            select_disabled: "",
                            cssClass: c.classes,
                            cssClassInputGroup: null,
                            error_message: c.error_message,
                            hide_comparison_page: c.hide_comparison_page,
                            hide_vertical_page: c.hide_vertical_page,
                            placeholder: !1
                        }, c.placeholder && this.page_type === this.page_types.category_page && "" === c.value && (e[i].placeholder = !0), ("checkbox" === (null != (h = s[i]) ? h.type : void 0) || (null != (f = s[i]) ? f.facet_preselect : void 0) === !0) && (e[i].hide_comparison_page = !0), this._ensure_selector_level_dependencies(n, i, c, function(t) {
                            return s[t].value
                        }), this._ensure_option_level_dependencies(i, e[i].param_data.options, function(t) {
                            return s[t].value
                        }, function(t, e, n, i) {
                            return delete i[e]
                        }), null != (null != (m = e[i].param_data) ? m.options : void 0) && p.size(null != (g = e[i].param_data) ? g.options : void 0) < 2 && (e[i].select_disabled = l);
                        for (i in u) c = u[i], c.disabled = !n[i], c.disabled && (e[i].param_data.disabled = !0), e[i].value = e[i].param_data.text || e[i].param_data.value, c.format && (e[i] = this.format(e[i])), e[i].page_type = this.page_type, e[i].hide_comparison_page === !0 && this.page_type === this.page_types.comparison_page || e[i].hide_vertical_page === !0 && this.page_type === this.page_types.category_page || (t = r("hidden" === c.type ? this.templates.hidden(e[i]) : "heading" === c.type ? this.templates.heading(e[i]) : "postcode" === c.type ? this.templates.postcode(e[i]) : this.model.get("editable") === !1 || null == c.options ? this.templates.input(e[i]) : "radio" === c.type ? this.templates.radio(e[i]) : "checkbox" === c.type ? this.templates.checkbox(e[i]) : this.templates.select(e[i])), c.disabled && c.show_disabled !== !0 && t.hide(), r(".param-section", this.el).append(t));
                        return r(".param-section", this.el).unbind("change"), r(".param-section", this.el).unbind("blur"), r(".param-section select", this.el).change(this.onInputChange), r('.param-section input[type="checkbox"]', this.el).change(this.onInputChange), r('.param-section input[type="radio"]', this.el).change(this.onInputChange), r('.param-section input:not([type="checkbox"])', this.el).blur(this.onInputChange), null != (v = window.cns) && v.$('[data-toggle="tooltip"]', this.el).tooltip({
                            trigger: "manual",
                            template: this.templates.tooltip
                        }), null != (_ = window.cns) && _.$('[data-toggle="normal-tooltip"]', this.el).tooltip(), null != (null != (y = this.selectorConfig.info_link) ? y.template : void 0) ? this.renderInfoLink() : void 0
                    }, o.prototype.renderInfoLink = function() {
                        var t, e, n;
                        return t = this.templates[this.selectorConfig.info_link.template], t ? (e = t(null != this.selectorConfig.info_link.data ? {
                            data: this.selectorConfig.info_link.data
                        } : {
                            data: {
                                text: this.selectorConfig.info_link.text
                            }
                        }), null != (n = window.cns) ? n.$(".info_link", this.el).tooltip({
                            html: !0,
                            title: e
                        }) : void 0) : "undefined" != typeof console && null !== console ? console.error("template not found") : void 0
                    }, o.prototype.onInputChange = function(t) {
                        var e, n, i, o, s, l, c, u, d, p;
                        t = t || window.event, i = t.target, c = this.model.get("params"), d = r.extend(!0, {}, c), n = {};
                        for (s in d) u = d[s], null != (null != (p = d[s].options) ? p.default_value : void 0) && (c[s].value = d[s].options.default_value.value, this.model.set(c)), this._ensure_selector_level_dependencies(n, s, u, function(t) {
                            return function(e) {
                                return t.$("[name='" + e + "']").val()
                            }
                        }(this)), null != u.options && this._ensure_option_level_dependencies(s, u.options, function(t) {
                            return function(e) {
                                return t.$("[name='" + e + "']").val()
                            }
                        }(this), function(t) {
                            return function(e, n) {
                                var i;
                                return i = t.$("[name='" + e + "']"), i.find("option").filter(function() {
                                    return r(this).text() === n
                                }).remove()
                            }
                        }(this), function(t) {
                            return function(e, n, i) {
                                var o, s, l, d;
                                return o = t.$("[name='" + e + "']"), null != c[e].option_value_override && c[e].option_value_override !== !1 && (c[e].value = i, t.model.set("params", c)), 0 === o.find("option").filter(function() {
                                    return r(this).text() === n
                                }).length && o.append('<option value="' + i + '">' + n + "</option>"), null != u.field_label_override && u.field_label_override === !0 ? (c = t.model.get("params"), null != (null != (l = c[e]) && null != (d = l.options[n]) ? d.field_label : void 0) && (s = c[e].options[n].field_label, t.$("label[for='" + e + "']").text(s)), a.prototype.sortSelect(o)) : void 0
                            }
                        }(this)), e = this.$("[name='" + s + "']"), 1 === e.find("option").length ? e.prop("disabled", !0) : e.removeProp("disabled", !1);
                        return this.enforceDependencyDisplayModel(n), o = r(i).attr("name"), l = d[o], r(i).is("select") ? (l.text = r(i).find(":selected").text(), l.value = r(i).find(":selected").val()) : l.value = r(i).val(), this.validateParam(l, o, r(i).closest("form"))
                    }, o.prototype.setTableSelectParams = function(t) {
                        var e, n, i, o, s, a, l, c;
                        if (o = this.model.get("params"), a = this.validateAllParams(o, t), a && (o = this.process_params(o), this.map_params_profile(), this.model.set("params", o), null != (l = this.selector_options) ? l.trigger_url_change : void 0)) {
                            s = {};
                            for (n in o) e = o[n], null != e.value && (s[n] = e.value);
                            i = window.location.protocol + "//" + window.location.host + window.location.pathname + "?" + r.param(s), ("undefined" != typeof window && null !== window && null != (c = window.history) ? c.replaceState : void 0) ? window.history.replaceState({
                                path: i
                            }, "", i) : window.location.search = r.param(s)
                        }
                        return a
                    }, o.prototype.validateAllParams = function(t, e) {
                        var n, i, o, s, a, l, c, u, d;
                        for (null == t && (t = this.model.get("params")), null == e && (e = this.$("form")), s = e.serializeArray(), l = !0, i = {}, u = 0, d = s.length; d > u; u++) a = s[u], o = t[a.name], n = r("[name='" + a.name + "']", e), n.is("select") && (o.text = n.find("option:selected").text()), "checkbox" === o.type ? null == i[a.name] ? i[a.name] = [a.value] : i[a.name].push(a.value) : o.value = a.value, c = this.validateParam(o, a.name, e), c || (l = !1);
                        return p.each(i, function() {
                            return function(e, n) {
                                return t[n].value = e
                            }
                        }(this)), this.areRadiosValid(t, e) || (l = !1), this.areCheckboxesValid(t, e) || (l = !1), l
                    }, o.prototype.validateParam = function(t, e, n) {
                        var i;
                        return i = this.isParamValid(t, e, n), i ? this.removeError(e, n, t.type) : this.displayError(e, n, t.type), i
                    }, o.prototype.displayError = function(t, e, n) {
                        var i;
                        return "checkbox" === n ? this.$("input[name='" + t + "'] ~ .control-indicator").addClass("invalid-field") : this.$("[name='" + t + "']").addClass("invalid-field"), null != (i = window.cns) ? i.$(e).find("[name='" + t + "']").tooltip("show") : void 0
                    }, o.prototype.removeError = function(t, e, n) {
                        var i;
                        return "checkbox" === n ? this.$("input[name='" + t + "'] ~ .control-indicator").removeClass("invalid-field") : this.$("[name='" + t + "']").removeClass("invalid-field"), null != (i = window.cns) ? i.$(e).find("[name='" + t + "']").tooltip("hide") : void 0
                    }, o.prototype.areRadiosValid = function(t, e) {
                        var n;
                        return n = !0, p.each(t, function(t) {
                            return function(i, r) {
                                var o, s;
                                return "radio" === i.type ? t.anythingChecked(r, e) ? null != (s = window.cns) ? s.$(e).find("[name='" + r + "']").tooltip("hide") : void 0 : (null != (o = window.cns) && o.$(e).find("[name='" + r + "']").tooltip("show"), n = !1) : void 0
                            }
                        }(this)), n
                    }, o.prototype.areCheckboxesValid = function(t, e) {
                        var n;
                        return n = !0, p.each(t, function(t) {
                            return function(i, r) {
                                return "checkbox" !== i.type || t.validateParam(i, r, e) ? void 0 : n = !1
                            }
                        }(this)), n
                    }, o.prototype.anythingChecked = function(t, e) {
                        var n, i;
                        return i = !0, n = e.find("input[name='" + t + "']"), n.is(":checked") || n.prop("disabled") !== !1 || (i = !1), i
                    }, o.prototype.isParamValid = function(t, e, n) {
                        var i, r;
                        return i = !0, null != t.placeholder && t.text === t.placeholder ? !1 : (t.validate && t.error_message && ("checkbox" === t.type && t.validate.required ? i = this.anythingChecked(e, n) : (r = t.value, i = a.prototype.validateData(r, t.validate))), i)
                    }, o.prototype.sendParamCA = function(t) {
                        var e, n, i;
                        return i = this.tableName, e = {}, p.each(t, function() {
                            return function(t, n) {
                                var r;
                                return r = "" + i + "_" + n, e[r] = t
                            }
                        }(this)), n = p.clone(t), n.category = i, "undefined" != typeof _caq && null !== _caq && _caq.push(["_set_context", e]), "undefined" != typeof _caq && null !== _caq ? _caq.push(["_track_event", "selector:form:submit", n]) : void 0
                    }, o.prototype.sendParamGA = function() {
                        var t, n, i, r;
                        r = this.model.get("params"), t = [];
                        for (n in r) e.call(r, n) && (i = r[n], "undefined" != typeof _gaq && null !== _gaq && _gaq.push(["_trackEvent", "" + this.categoryName + " " + this.page_type + " selector", n, i.value]), t.push(i.value));
                        return "undefined" != typeof _caq && null !== _caq && _caq.push(["_track_event", this.categoryName + " " + this.page_type + " selector", r]), "undefined" != typeof _gaq && null !== _gaq ? _gaq.push(["_trackEvent", "" + this.categoryName + " " + this.page_type + " selector", "combined_profile", t.join(", ")]) : void 0
                    }, o.prototype.onChangeSearchClick = function(t) {
                        return t.preventDefault(), setTimeout(function(e) {
                            return function() {
                                var n, i, r, o;
                                if (n = !e.model.get("editable"), i = JSON.stringify(e.model.get("params")), n === !1) {
                                    if (!e.setTableSelectParams(e.$(t.target).closest("form"))) return;
                                    e.sendParamGA()
                                }
                                return e.model.set("editable", n), null != d && null != (o = d.vent) && "function" == typeof o.trigger && o.trigger("selector:changing", r), n === !1 && (r = e.get_param_values(), i !== JSON.stringify(e.model.get("params"))) ? (null != (null != d ? d.vent : void 0) && d.vent.trigger("selector:changed", r), e.trigger("changed", r)) : void 0
                            }
                        }(this), 1)
                    }, o.prototype.onFormSubmit = function(t) {
                        var e, n, i, r, o, s, a, l, c, u, d, p, h;
                        return t.preventDefault(), e = this.$(t.target).closest("form"), l = this.setTableSelectParams(e), o = this.getFullTablePageUrl(), a = this.getFormSubmitUrl(), n = (null != (c = this.selector_options) && null != (u = c.url) && null != (d = u.overrides) && null != (p = d[a]) ? p.target : void 0) || "_parent", l ? (this.sendParamGA(), s = null != (null != (h = this.selector_options) ? h.use_param_values : void 0) ? !1 : !0, r = this.get_param_values(s), this.sendParamCA(r), i = function() {
                            return function() {
                                return window.open(o, n)
                            }
                        }(this), "_parent" === n ? setTimeout(i, 150) : i()) : void 0
                    }, o.prototype.getFullTablePageUrl = function() {
                        var t, e, n, i, o, s, a;
                        return o = null != this.selector_options.use_param_values ? !1 : !0, e = this.get_param_values(o), s = this.getFormSubmitUrl(), n = "?" + r.param(e), this.selector_options.ng2_table === !0 && (n = this.queryToMatrixParams(n)), t = null != (a = this.base_url) ? a : "/", 0 === s.indexOf("http") && (t = ""), i = "" + t + s, "" + i + n
                    }, o.prototype.queryToMatrixParams = function(t) {
                        return t = t.replace(/(\?|&)/g, ";"), t = t.replace("+", "%20")
                    }, o.prototype.enforceDependencyDisplayModel = function(t) {
                        var e, n, i, r;
                        n = this.model.get("params"), r = [];
                        for (e in t) i = t[e], this.$("[name='" + e + "']").find("option") ? i ? (this.$("[name='" + e + "']").prop("disabled", !i), r.push(this.$('*[data-element="' + e + '"]').is(":visible") ? void 0 : this.$('*[data-element="' + e + '"]').css("opacity", 0).slideDown("fast").animate({
                            opacity: 1
                        }, {
                            queue: !1,
                            duration: "fast"
                        }))) : (this.$("[name='" + e + "']").prop("disabled", !i), r.push(n[e].show_disabled !== !0 ? this.$('*[data-element="' + e + '"]').css("opacity", 1).slideUp("fast").animate({
                            opacity: 0
                        }, {
                            queue: !1,
                            duration: "fast"
                        }) : void 0)) : r.push(void 0);
                        return r
                    }, o.prototype.getFormSubmitUrl = function() {
                        var t, e, n, i;
                        if (t = this.get_param_values(), e = this.selector_options.url["default"], this.options.url_override) return this.options.url_override;
                        i = function(n) {
                            return function(i) {
                                var r, o, s, a, l;
                                if (r = n.selector_options.url.overrides[i], null != r.depends) {
                                    if (p.isArray(r.depends)) {
                                        for (l = r.depends, s = 0, a = l.length; a > s; s++)
                                            if (o = l[s], n._test_dependency(t[o.lvalue], o.rvalue, o.comparator) === !1) return;
                                        return e = i
                                    }
                                    if (p.isObject(r.depends) && n._test_dependency(callback(r.depends.lvalue), r.depends.rvalue, r.depends.comparator) !== !1) return e = i
                                }
                            }
                        }(this);
                        for (n in this.selector_options.url.overrides) i(n);
                        return e
                    }, o.prototype.get_param_values = function(t) {
                        var e, n;
                        return null == t && (t = !1), e = this.get_full_params(), n = p.reduce(this.model.get("params"), function(e, n, i) {
                            return n.value && (e[i] = n.value), t === !0 && n.text_override !== !1 && n.text && (e[i] = n.text), e
                        }, {})
                    }, o.prototype.get_full_params = function() {
                        var t, e;
                        return t = null != (null != (e = this.model.get("params")) ? e.fields : void 0) ? this.model.get("params").fields : this.model.get("params"), t = this.process_params(t), this.map_params_profile(), t
                    }, o.prototype._helpers = function() {
                        return {
                            currency: function(t) {
                                return function(e) {
                                    return t.model.get("editable") === !1 ? l.prototype.formatCurrency(e, !1) : e
                                }
                            }(this),
                            years: function(t) {
                                return function(e) {
                                    return t.model.get("editable") === !1 ? (e = parseInt(e.replace(/\D/g, ""), 10), e + " years") : e
                                }
                            }(this)
                        }
                    }, o.prototype.format = function(t) {
                        var e;
                        return e = t.param_data.format, this.model.get("editable") === !0 ? "currency" === e ? (t.prepend = '<span class="input-group-addon">$</span>', t.cssClassInputGroup = "input-group input-prepend", t.cssClass += " input-prepend currency") : "years" === e && (t.append = '<span class="input-group-addon">years</span>', t.cssClassInputGroup = "input-group input-append", t.cssClass += " input-append years") : "currency" === e ? t.value = l.prototype.formatCurrency(t.value, !1) : "years" === e && (t.value = (parseInt(t.value, 10) || t.value) + " years"), t
                    }, o.prototype._test_dependency = function(t, e, n) {
                        var i;
                        return null == n && (n = "eq"), i = !1, "gt" === n || "gte" === n || "lt" === n || "lte" === n ? i = "gt" === n ? t > e ? !0 : !1 : "gte" === n ? t >= e ? !0 : !1 : "lt" === n ? e > t ? !0 : !1 : "lte" === n && e >= t ? !0 : !1 : (p.isArray(e) ? e.indexOf(t) > -1 && (i = !0) : t === e && (i = !0), "ne" === n && (i = !i)), i
                    }, o.prototype._ensure_selector_level_dependencies = function(t, e, n, i) {
                        var r, o, s, a, l, c;
                        if (o = function(n) {
                                return function(i, r, o) {
                                    var s;
                                    return s = n._test_dependency(i, r, o), null == t[e] ? t[e] = s : t[e] !== !1 ? t[e] = s : void 0
                                }
                            }(this), "hidden" !== n.type && (null == t[e] && (t[e] = !0), null != n.depends)) {
                            if (p.isArray(n.depends)) {
                                for (l = n.depends, c = [], s = 0, a = l.length; a > s; s++) r = l[s], c.push(o(i(r.lvalue), r.rvalue, r.comparator));
                                return c
                            }
                            if (p.isObject(n.depends)) return o(i(n.depends.lvalue), n.depends.rvalue, n.depends.comparator)
                        }
                    }, o.prototype._ensure_option_level_dependencies = function(t, e, n, i, r) {
                        var o, s, a;
                        a = [];
                        for (s in e) o = e[s], a.push(function(o) {
                            return function(s, a) {
                                var l, c, u, d;
                                if (null != a.depends)
                                    if (p.isArray(a.depends)) {
                                        for (d = a.depends, c = 0, u = d.length; u > c; c++)
                                            if (l = d[c], o._test_dependency(n(l.lvalue), l.rvalue, l.comparator) === !1 && "function" == typeof i) return void i(t, s, a.value, e);
                                        if ("function" == typeof r) return r(t, s, a.value, e)
                                    } else if (p.isObject(a.depends))
                                    if (o._test_dependency(n(a.depends.lvalue), a.depends.rvalue, a.depends.comparator) === !1) "function" == typeof i && i(t, s, a.value, e);
                                    else if ("function" == typeof r) return r(t, s, a.value, e)
                            }
                        }(this)(s, o));
                        return a
                    }, o.prototype.convert_options_obj = function(t) {
                        var e;
                        return e = {}, Array.isArray(t) ? p.each(t, function() {
                            return function(t) {
                                return e[t] = t
                            }
                        }(this)) : e = t, e.hasOwnProperty("depends") && (e = p.clone(e, !0), delete e.depends), e
                    }, o.prototype.map_params_profile = function() {
                        var t, e, n, i, r, o, s, a, l, c, u, d, h, f, m, g;
                        u = this.model.get("params"), r = void 0, g = this.tableConfig.profile_map;
                        for (e in g) {
                            for (c = g[e], s = c, a = this.tableConfig.profile_map_order, p.isObject(c) && null != c.name && null != c.order && (s = c.name, a = c.order), i = e.split("|"), o = 0, t = f = 0, m = i.length; m > f; t = ++f) n = i[t], l = u[a[t]], null != l && null != l.value && (h = p.isObject(l.value) && null != l.value.name ? l.value.name : l.value, h === n && o++);
                            o === i.length && (r = s)
                        }
                        return null != this.tableConfig.profile_map ? null != r ? (d = null != this.tableConfig.profile_map_target && null != u[this.tableConfig.profile_map_target] ? this.tableConfig.profile_map_target : "profile", u[d].value = r) : "undefined" != typeof console && null !== console ? console.error("No matching profile found") : void 0 : void 0
                    }, o.prototype.process_params = function(t) {
                        return p.each(t, function() {
                            return function(e, n) {
                                var i, r, o, a, l, c, u, d, h;
                                if (null != (h = e.options) ? h.hasOwnProperty("depends") : void 0)
                                    for (i = e.options.depends, o = t[i.lvalue], r = o.value, a = !1, "string" == typeof i.rvalue && r === i.rvalue ? a = !0 : "array" == typeof i.rvalue && p.indexOf(i.rvalue, r) && (a = !0), c = Object.keys(i.value), u = 0, d = c.length; d > u; u++) l = c[u], e.options[l] = a === !0 ? i.value[l] : i["default"][l], e.text === l && e.value !== e.options[l] && (e.value = e.options[l]);
                                return e.calculator ? t[n].value = s.prototype[e.calculator](t) : void 0
                            }
                        }(this)), t
                    }, o
                }(u)
            })
        }.call(this),
        function() {
            var t = {}.hasOwnProperty,
                e = function(e, n) {
                    function i() {
                        this.constructor = e
                    }
                    for (var r in n) t.call(n, r) && (e[r] = n[r]);
                    return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
                };
            define("components/select/OptionModel", ["require", "underscore", "backbone"], function(t) {
                var n, i, r;
                return r = t("underscore"), n = t("backbone"), i = function(t) {
                    function n() {
                        return n.__super__.constructor.apply(this, arguments)
                    }
                    return e(n, t), n.prototype.defaults = {
                        value: "",
                        description: "",
                        selected: !1
                    }, n
                }(n.Model)
            })
        }.call(this), define("text!components/contact_form/tmpl_contact_form.html", [], function() {
            return '<div class="form" id="contact_form">\n	<h2><%= data.form_title %></h2>\n    <%=  data.call_centre_number && data.call_centre_number.length > 0 ? \'<h3>Phone</h3>\' : \'\' %>\n  <div class="phone_number"><%= data.call_centre_number %></div>\n  <%=  data.call_centre_number && data.call_centre_number.length > 0 ? \'<div class="opening_hours">\'+data.opening_hours+\' </div>\' : \'\' %>\n	<form method="POST" action="<%= data.form_action %>" class="form-horizontal" role="form">\n		<div class="form_header"><%= data.form_header %></div>\n    <div class="form_desc"><%= data.form_desc %></div>\n		<div class="inputs"></div>\n		<div id="contact_time_select_container">\n			<div class="logo">\n				<img src="<%= data.disclaimer_logo %>" alt=""/>\n			</div>\n		</div>\n		<div class="submit-container control-group">\n			<input id="submit" type="submit" class="button_submit text-center" value="Contact me">\n		</div>\n		<div class="alert validation alert-error">The following fields were invalid<br/><br/> <span></span></div>\n		<div class="alert submission alert-error">Something went wrong with your submission<br/><br/> <span></span></div>\n	</form>\n</div>\n<div class="section disclaimer">\n	<div class="text">\n		<span><%= data.disclaimer_text %></span>\n	</div>\n</div>\n<div class="section comparitor">\n	<div class="text">\n		<span><%= data.comparitor_text %></span>\n	</div>\n</div>\n<div class="alert alert-success"><%= data.submitted_text %></div>\n<button style="display:none;" class="btn btn-large btn-success return" type="button">Return to Canstar</button>\n'
        }),
        function() {
            define("components/contact_form/schema_contact_form", ["require"], function() {
                return {
                    type: "object",
                    properties: {
                        full_name: {
                            type: "string",
                            description: "Name",
                            maxLength: 256
                        },
                        phone: {
                            type: "string",
                            description: "Phone",
                            minLength: 8,
                            maxLength: 20
                        }
                    },
                    required: ["full_name", "phone"]
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/contact_form/contact_form", ["require", "jquery", "underscore", "backbone", "libraries/Canstar", "libraries/Time", "libraries/Loader", "libraries/Mobile", "components/form/form", "text!components/contact_form/tmpl_contact_form.html", "components/contact_form/schema_contact_form"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h;
                return i = e("jquery"), h = e("underscore"), r = e("backbone"), o = e("libraries/Canstar"), u = e("libraries/Time"), l = e("libraries/Loader"), c = e("libraries/Mobile"), a = e("components/form/form"), p = e("text!components/contact_form/tmpl_contact_form.html"), d = e("components/contact_form/schema_contact_form"), s = function(e) {
                    function r() {
                        return this.return_clicked = t(this.return_clicked, this), this.submit_form = t(this.submit_form, this), this.events = t(this.events, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.className = "reboot contact", r.stylesheets = ["components/contact_form/contact_form.css"], r.prototype.events = function() {
                        return {
                            "submit form": "submit_form",
                            "click .return": "return_clicked"
                        }
                    }, r.prototype.initialize = function(t) {
                        if (c.prototype.setMobileViewPort(), null == t.template && (t.template = p), r.__super__.initialize.call(this, t), null == this.options.lead_company_id) throw Error("Missing mandatory parameter: lead_company_id");
                        return null == this.options.captured && (this.options.captured = {}), this.options.form_action = "" + this.options.form_action + "/" + this.options.lead_company_id
                    }, r.prototype.submit_form = function(t) {
                        return this.read_form_data(), this.form_data = i.extend(this.form_data, this.options.captured), this.form_data = i.extend(this.form_data, {
                            preferred_time: (new Date).toISOString()
                        }), r.__super__.submit_form.call(this, t)
                    }, r.prototype.return_clicked = function() {
                        return window.close()
                    }, r
                }(a)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                },
                i = [].indexOf || function(t) {
                    for (var e = 0, n = this.length; n > e; e++)
                        if (e in this && this[e] === t) return e;
                    return -1
                };
            define("libraries/ConfigModel", ["require", "underscore"], function(e) {
                var r, o;
                return o = e("underscore"), r = function(e) {
                    function r() {
                        return this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.initialize = function() {}, r.prototype.traversedFields = {
                        transform: {},
                        calculator: {}
                    }, r.prototype.traverse = function(t, e) {
                        var n, r;
                        for (n in t) {
                            if (r = t[n], i.call(o.keys(this.traversedFields), n) >= 0) return void(this.traversedFields[n][e] = r);
                            o.isObject(r || o.isArray(r)) && this.traverse(r, n)
                        }
                    }, r.prototype.parse = function(t) {
                        return this.traverse(t), t
                    }, r
                }(Backbone.Model)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("libraries/DataModel", ["require", "underscore", "libraries/Calculators", "libraries/Transforms"], function(e) {
                var i, r, o, s;
                return s = e("underscore"), i = e("libraries/Calculators"), o = e("libraries/Transforms"), r = function(e) {
                    function r() {
                        return this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.initialize = function(t) {
                        if (!t.traversedFields) throw new Error("missing traversedTags attribute")
                    }, r.prototype.parse = function(t) {
                        return s.each(this.attributes.traversedFields.calculator, function() {
                            return function(e, n) {
                                var r;
                                return r = i.prototype[e](t[n], t), t[n] = calc_value
                            }
                        }(this)), s.each(this.attributes.traversedFields.transform, function() {
                            return function(e, n) {
                                var i;
                                return i = o.prototype[e](t[n], t), t[n] = i
                            }
                        }(this)), t
                    }, r
                }(Backbone.Model)
            })
        }.call(this),
        function(t) {
            "function" == typeof define && define.amd ? define("jquerymaskplugin", ["jquery"], t) : t(window.jQuery || window.Zepto)
        }(function(t) {
            var e = function(e, n, i) {
                e = t(e);
                var r, o = this,
                    s = e.val();
                n = "function" == typeof n ? n(e.val(), void 0, e, i) : n;
                var a = {
                    invalid: [],
                    getCaret: function() {
                        try {
                            var t, n = 0,
                                i = e.get(0),
                                r = document.selection,
                                o = i.selectionStart;
                            return r && -1 === navigator.appVersion.indexOf("MSIE 10") ? (t = r.createRange(), t.moveStart("character", e.is("input") ? -e.val().length : -e.text().length), n = t.text.length) : (o || "0" === o) && (n = o), n
                        } catch (s) {}
                    },
                    setCaret: function(t) {
                        try {
                            if (e.is(":focus")) {
                                var n, i = e.get(0);
                                i.setSelectionRange ? i.setSelectionRange(t, t) : i.createTextRange && (n = i.createTextRange(), n.collapse(!0), n.moveEnd("character", t), n.moveStart("character", t), n.select())
                            }
                        } catch (r) {}
                    },
                    events: function() {
                        e.on("keyup.mask", a.behaviour).on("paste.mask drop.mask", function() {
                            setTimeout(function() {
                                e.keydown().keyup()
                            }, 100)
                        }).on("change.mask", function() {
                            e.data("changed", !0)
                        }).on("blur.mask", function() {
                            s === e.val() || e.data("changed") || e.trigger("change"), e.data("changed", !1)
                        }).on("keydown.mask, blur.mask", function() {
                            s = e.val()
                        }).on("focusout.mask", function() {
                            i.clearIfNotMatch && !r.test(a.val()) && a.val("")
                        })
                    },
                    getRegexMask: function() {
                        for (var t, e, i, r, s, a, l = [], c = 0; c < n.length; c++) t = o.translation[n[c]], t ? (e = t.pattern.toString().replace(/.{1}$|^.{1}/g, ""), i = t.optional, r = t.recursive, r ? (l.push(n[c]), s = {
                            digit: n[c],
                            pattern: e
                        }) : l.push(i || r ? e + "?" : e)) : l.push(n[c].replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"));
                        return a = l.join(""), s && (a = a.replace(new RegExp("(" + s.digit + "(.*" + s.digit + ")?)"), "($1)?").replace(new RegExp(s.digit, "g"), s.pattern)), new RegExp(a)
                    },
                    destroyEvents: function() {
                        e.off(["keydown", "keyup", "paste", "drop", "blur", "focusout", ""].join(".mask "))
                    },
                    val: function(t) {
                        var n, i = e.is("input"),
                            r = i ? "val" : "text";
                        return arguments.length > 0 ? (e[r]() !== t && e[r](t), n = e) : n = e[r](), n
                    },
                    getMCharsBeforeCount: function(t, e) {
                        for (var i = 0, r = 0, s = n.length; s > r && t > r; r++) o.translation[n.charAt(r)] || (t = e ? t + 1 : t, i++);
                        return i
                    },
                    caretPos: function(t, e, i, r) {
                        var s = o.translation[n.charAt(Math.min(t - 1, n.length - 1))];
                        return s ? Math.min(t + i - e - r, i) : a.caretPos(t + 1, e, i, r)
                    },
                    behaviour: function(e) {
                        e = e || window.event, a.invalid = [];
                        var n = e.keyCode || e.which;
                        if (-1 === t.inArray(n, o.byPassKeys)) {
                            var i = a.getCaret(),
                                r = a.val(),
                                s = r.length,
                                l = s > i,
                                c = a.getMasked(),
                                u = c.length,
                                d = a.getMCharsBeforeCount(u - 1) - a.getMCharsBeforeCount(s - 1);
                            return a.val(c), !l || 65 === n && e.ctrlKey || (8 !== n && 46 !== n && (i = a.caretPos(i, s, u, d)), a.setCaret(i)), a.callbacks(e)
                        }
                    },
                    getMasked: function(t) {
                        var e, r, s = [],
                            l = a.val(),
                            c = 0,
                            u = n.length,
                            d = 0,
                            p = l.length,
                            h = 1,
                            f = "push",
                            m = -1;
                        for (i.reverse ? (f = "unshift", h = -1, e = 0, c = u - 1, d = p - 1, r = function() {
                                return c > -1 && d > -1
                            }) : (e = u - 1, r = function() {
                                return u > c && p > d
                            }); r();) {
                            var g = n.charAt(c),
                                v = l.charAt(d),
                                _ = o.translation[g];
                            _ ? (v.match(_.pattern) ? (s[f](v), _.recursive && (-1 === m ? m = c : c === e && (c = m - h), e === m && (c -= h)), c += h) : _.optional ? (c += h, d -= h) : _.fallback ? (s[f](_.fallback), c += h, d -= h) : a.invalid.push({
                                p: d,
                                v: v,
                                e: _.pattern
                            }), d += h) : (t || s[f](g), v === g && (d += h), c += h)
                        }
                        var y = n.charAt(e);
                        return u !== p + 1 || o.translation[y] || s.push(y), s.join("")
                    },
                    callbacks: function(t) {
                        var r = a.val(),
                            o = r !== s,
                            l = [r, t, e, i],
                            c = function(t, e, n) {
                                "function" == typeof i[t] && e && i[t].apply(this, n)
                            };
                        c("onChange", o === !0, l), c("onKeyPress", o === !0, l), c("onComplete", r.length === n.length, l), c("onInvalid", a.invalid.length > 0, [r, t, e, a.invalid, i])
                    }
                };
                o.mask = n, o.options = i, o.remove = function() {
                    var t = a.getCaret();
                    return a.destroyEvents(), a.val(o.getCleanVal()), a.setCaret(t - a.getMCharsBeforeCount(t)), e
                }, o.getCleanVal = function() {
                    return a.getMasked(!0)
                }, o.init = function(n) {
                    if (n = n || !1, i = i || {}, o.byPassKeys = t.jMaskGlobals.byPassKeys, o.translation = t.jMaskGlobals.translation, o.translation = t.extend({}, o.translation, i.translation), o = t.extend(!0, {}, o, i), r = a.getRegexMask(), n === !1) {
                        i.placeholder && e.attr("placeholder", i.placeholder), e.attr("autocomplete", "off"), a.destroyEvents(), a.events();
                        var s = a.getCaret();
                        a.val(a.getMasked()), a.setCaret(s + a.getMCharsBeforeCount(s, !0))
                    } else a.events(), a.val(a.getMasked())
                }, o.init(!e.is("input"))
            };
            t.maskWatchers = {};
            var n = function() {
                    var n = t(this),
                        r = {},
                        o = "data-mask-",
                        s = n.attr("data-mask");
                    return n.attr(o + "reverse") && (r.reverse = !0), n.attr(o + "clearifnotmatch") && (r.clearIfNotMatch = !0), i(n, s, r) ? n.data("mask", new e(this, s, r)) : void 0
                },
                i = function(e, n, i) {
                    i = i || {};
                    var r = t(e).data("mask"),
                        o = JSON.stringify,
                        s = t(e).val() || t(e).text();
                    try {
                        return "function" == typeof n && (n = n(s)), "object" != typeof r || o(r.options) !== o(i) || r.mask !== n
                    } catch (a) {}
                };
            t.fn.mask = function(n, r) {
                r = r || {};
                var o = this.selector,
                    s = t.jMaskGlobals,
                    a = t.jMaskGlobals.watchInterval,
                    l = function() {
                        return i(this, n, r) ? t(this).data("mask", new e(this, n, r)) : void 0
                    };
                t(this).each(l), o && "" !== o && s.watchInputs && (clearInterval(t.maskWatchers[o]), t.maskWatchers[o] = setInterval(function() {
                    t(document).find(o).each(l)
                }, a))
            }, t.fn.unmask = function() {
                return clearInterval(t.maskWatchers[this.selector]), delete t.maskWatchers[this.selector], this.each(function() {
                    var e = t(this).data("mask");
                    e && e.remove().removeData("mask")
                })
            }, t.fn.cleanVal = function() {
                return this.data("mask").getCleanVal()
            };
            var r = {
                maskElements: "input,td,span,div",
                dataMaskAttr: "*[data-mask]",
                dataMask: !0,
                watchInterval: 300,
                watchInputs: !0,
                watchDataMask: !1,
                byPassKeys: [9, 16, 17, 18, 36, 37, 38, 39, 40, 91],
                translation: {
                    0: {
                        pattern: /\d/
                    },
                    9: {
                        pattern: /\d/,
                        optional: !0
                    },
                    "#": {
                        pattern: /\d/,
                        recursive: !0
                    },
                    A: {
                        pattern: /[a-zA-Z0-9]/
                    },
                    S: {
                        pattern: /[a-zA-Z]/
                    }
                }
            };
            t.jMaskGlobals = t.jMaskGlobals || {}, r = t.jMaskGlobals = t.extend(!0, {}, r, t.jMaskGlobals), r.dataMask && t(r.dataMaskAttr).each(n), setInterval(function() {
                t.jMaskGlobals.watchDataMask && t(document).find(t.jMaskGlobals.maskElements).filter(r.dataMaskAttr).each(n)
            }, r.watchInterval)
        }),
        function() {
            define("components/lead/FormLogic", ["require", "jquery", "jquerymaskplugin"], function(t) {
                var e, n;
                return e = t("jquery"), t("jquerymaskplugin"), n = function() {
                    function t() {}
                    return t.prototype.configureForm = {
                        medibank: function() {
                            return e('select[name="state"]', this.contact_form.el).prop("disabled", "disabled").val(this.model.get("SUPP").STATE_CODE), e('input[name="mobile"]', this.contact_form.el).mask(new Array(11).join(0))
                        },
                        lifebroker: function() {
                            var t, n;
                            return e('input[name="phone"]', this.contact_form.el).mask(new Array(11).join(0)), t = canstar_widget.stored_selector_params.age.value, t ? (n = new Date, this.captured.dob = "01/01/" + (n.getFullYear() - t)) : void 0
                        }
                    }, t.prototype.capturedDataTransform = {
                        medibank: function(t) {
                            return t
                        },
                        lifebroker: function(t, e) {
                            return "STARS" === e && "6" === t && (t = "5"), "sum_insured" === e && (t = t.replace(/\x20pa/, "")), t
                        }
                    }, t
                }()
            })
        }.call(this),
        function(t, e) {
            "function" == typeof define && define.amd ? define("jquery.placeholder", ["jquery"], e) : e(jQuery)
        }(this, function(t) {
            function e(e) {
                var n = {},
                    i = /^jQuery\d+$/;
                return t.each(e.attributes, function(t, e) {
                    e.specified && !i.test(e.name) && (n[e.name] = e.value)
                }), n
            }

            function n(e, n) {
                var i = this,
                    o = t(i);
                if (i.value == o.attr("placeholder") && o.hasClass("placeholder"))
                    if (o.data("placeholder-password")) {
                        if (o = o.hide().next().show().attr("id", o.removeAttr("id").data("placeholder-id")), e === !0) return o[0].value = n;
                        o.focus()
                    } else i.value = "", o.removeClass("placeholder"), i == r() && i.select()
            }

            function i() {
                var i, r = this,
                    o = t(r),
                    s = this.id;
                if ("" == r.value) {
                    if ("password" == r.type) {
                        if (!o.data("placeholder-textinput")) {
                            try {
                                i = o.clone().attr({
                                    type: "text"
                                })
                            } catch (a) {
                                i = t("<input>").attr(t.extend(e(this), {
                                    type: "text"
                                }))
                            }
                            i.removeAttr("name").data({
                                "placeholder-password": o,
                                "placeholder-id": s
                            }).bind("focus.placeholder", n), o.data({
                                "placeholder-textinput": i,
                                "placeholder-id": s
                            }).before(i)
                        }
                        o = o.removeAttr("id").hide().prev().attr("id", s).show()
                    }
                    o.addClass("placeholder"), o[0].value = o.attr("placeholder")
                } else o.removeClass("placeholder")
            }

            function r() {
                try {
                    return document.activeElement
                } catch (t) {}
            }
            var o, s, a = "[object OperaMini]" == Object.prototype.toString.call(window.operamini),
                l = "placeholder" in document.createElement("input") && !a,
                c = "placeholder" in document.createElement("textarea") && !a,
                u = t.fn,
                d = t.valHooks,
                p = t.propHooks;
            l && c ? (s = u.placeholder = function() {
                return this
            }, s.input = s.textarea = !0) : (s = u.placeholder = function() {
                var t = this;
                return t.filter((l ? "textarea" : ":input") + "[placeholder]").not(".placeholder").bind({
                    "focus.placeholder": n,
                    "blur.placeholder": i
                }).data("placeholder-enabled", !0).trigger("blur.placeholder"), t
            }, s.input = l, s.textarea = c, o = {
                get: function(e) {
                    var n = t(e),
                        i = n.data("placeholder-password");
                    return i ? i[0].value : n.data("placeholder-enabled") && n.hasClass("placeholder") ? "" : e.value
                },
                set: function(e, o) {
                    var s = t(e),
                        a = s.data("placeholder-password");
                    return a ? a[0].value = o : s.data("placeholder-enabled") ? ("" == o ? (e.value = o, e != r() && i.call(e)) : s.hasClass("placeholder") ? n.call(e, !0, o) || (e.value = o) : e.value = o, s) : e.value = o
                }
            }, l || (d.input = o, p.value = o), c || (d.textarea = o, p.value = o), t(function() {
                t(document).delegate("form", "submit.placeholder", function() {
                    var e = t(".placeholder", this).each(n);
                    setTimeout(function() {
                        e.each(i)
                    }, 10)
                })
            }), t(window).bind("beforeunload.placeholder", function() {
                t(".placeholder").each(function() {
                    this.value = ""
                })
            }))
        }), define("text-cns!components/lead/tmpl_lead.html", [], function() {
            return '<button type="button" class="close" aria-hidden="true">&lt; Back</button>\n\n<header>\n    <span class="company"><%= data.Company %></span>\n\n    <h2><%= data[\'Product Name\'] %></h2>\n    <span class="star-rating"><%= data.Stars %></span>\n\n    <span class="fact"><%= data[\'Monthly Premium\'] %></span>\n    <span class="fact-description">Estimated Monthly Premium</span>\n</header>\n\n<% if(lead.mobile_preamble) { %>\n<p class="show-on-mobile"><%= lead.mobile_preamble %></p>\n<% } %>\n\n<p class="show-on-mobile"><a href="http://www.canstar.com.au/terms-of-use#choosewell">Terms and Conditions</a> apply to this service</p>\n<a class="btn btn-success call-an-expert show-on-mobile" href="tel:<%= lead.phone %>"><img src="<%= base_url %>assets/image/call-out.png" />Call an expert for help</a>\n<a class="btn btn-warning have-an-expert-call-you show-on-mobile" data-toggle="contact-form"><img src="<%= base_url %>assets/image/call-in.png" />Have an expert call you</a>\n\n<div id="contact-form">\n  <div class="form-container">\n  </div>\n</div>\n\n<a class="btn btn-info policy-details show-on-mobile" data-toggle="product-card"> <img src="<%= base_url %>assets/image/magnify.png"> View policy details</a>\n\n<div id="product-card"></div>\n\n'
        }), define("text-cns!components/lead/tmpl_product_card.html", [], function() {
            return '<ul data-tabs="tabs" class="nav nav-tabs">\n  <% active = \'class="active"\';\n  _.each(config && config.sections, function (section, name) { %>\n\n  <li <%= active %>><a href="#<%= name %>" data-toggle="tab"><%= name %></a></li>\n  <% active = \'\';\n  }); %>\n</ul>\n<div class="tab-content">\n  <% active = \'active\';\n  _.each(config && config.sections, function (section, name) { %>\n  <div id="<%= name %>" class="tab-pane <%= active %>">\n    <h3 class="show-on-mobile"><%= name %></h3>\n\n    <ul>\n      <% var i = 0;\n        _.each(section.fields, function (value, label) { %>\n        <li <%= i % 2 === 1 ? \'class="odd"\' : \'\' %>><span class="feature-label"><%= label %></span><span class="value"> <%= data[label] %></span></li>\n      <% i++;\n        }); %>\n    </ul>\n  </div>\n    <% active = \'\';\n    }); %>\n</div>\n<%= legend %>\n<p class="disclaimer">\nPrice indicated above assumes 0% LHC (Lifetime Health Cover) and full Federal Government rebate available.\n</p>\n'
        }), define("text-cns!components/lead/tmpl_contact_form.html", [], function() {
            return '<h2><%= data.form_title %></h2>\n\n<% if (data.form_preamble1) { %>\n<p class="preamble"><%= data.form_preamble1 %></p>\n<% } %>\n<% if (data.form_preamble2) { %>\n<p class="preamble"><%= data.form_preamble2 %></p>\n<% } %>\n\n<form method="POST" action="<%= data.form_action %>" class="form-horizontal form" role="form">\n    <% if (data.form_header) { %>\n    <p><%= data.form_header %></p>\n    <% } %>\n\n    <% if (data.form_desc) { %>\n    <p><%= data.form_desc %></p>\n    <% } %>\n\n    <div class="inputs"></div>\n\n    <div class="submit-container">\n        <button id="submit" type="submit" class="btn btn-success">Call me</button>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="alert validation alert-error"><div>The following fields were invalid</div></span><span></span></div>\n<div class="alert submission alert-error"><div>Something went wrong with your submission</div><span></span></div>\n    <div style="clear:both;"></div>\n</form>\n\n<div class="alert alert-success"><%= data.submitted_text %></div>\n\n<% if (data.disclaimer_logo) { %>\n<div class="logo">\n    <img src="<%= data.disclaimer_logo %>" alt=""/>\n</div>\n<% } %>\n<% if (data.disclaimer_text) { %>\n<p class="disclaimer"><%= data.disclaimer_text %></p>\n<% } %>\n\n<% if (data.comparitor_text) { %>\n<p class="comparitor"><%= data.comparitor_text %></p>\n<% } %>\n'
        }), define("text-cns!components/lead/tmpl_legend.html", [], function() {
            return '<ul class="legend">\n  <% _.each(legends, function (image, label) { %>\n    <li><img src="<%= image %>" alt="<%= label %>" /> <span><%= label %></span></li>\n  <% }); %>\n</ul>\n'
        }), define("text-cns!components/lead/themes/choosewell/tmpl_contact_form.html", [], function() {
            return '<h2><%= data.form_title %></h2>\n\n<% if (data.form_preamble1) { %>\n<p class="preamble"><%= data.form_preamble1 %></p>\n<% } %>\n<% if (data.form_preamble2) { %>\n<p class="preamble"><%= data.form_preamble2 %></p>\n<% } %>\n\n<form method="POST" action="<%= data.form_action %>" class="form-horizontal form" role="form">\n    <% if (data.form_header) { %>\n    <p><%= data.form_header %></p>\n    <% } %>\n\n    <% if (data.form_desc) { %>\n    <p><%= data.form_desc %></p>\n    <% } %>\n\n    <div class="inputs"></div>\n\n    <div class="submit-container">\n        <button id="submit" type="submit" class="btn btn-success">Contact me</button>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="alert validation alert-error"><div>The following fields were invalid</div></span><span></span></div>\n<div class="alert submission alert-error"><div>Something went wrong with your submission</div><span></span></div>\n    <div style="clear:both;"></div>\n</form>\n\n<div class="alert alert-success"><%= data.submitted_text %></div>\n\n<% if (data.disclaimer_logo) { %>\n<div class="logo">\n    <img src="<%= data.disclaimer_logo %>" alt=""/>\n</div>\n<% } %>\n<% if (data.disclaimer_text) { %>\n<p class="disclaimer"><%= data.disclaimer_text %></p>\n<% } %>\n\n<% if (data.comparitor_text) { %>\n<p class="comparitor"><%= data.comparitor_text %></p>\n<% } %>\n'
        }), define("text-cns!components/lead/themes/choosewell_1/tmpl_contact_form.html", [], function() {
            return '<h2><%= data.form_title %></h2>\n\n<% if (data.form_preamble1) { %>\n<p class="preamble"><%= data.form_preamble1 %></p>\n<% } %>\n<h3>Have an Expert Call You</h3>\n<form method="POST" action="<%= data.form_action %>" class="form-horizontal form" role="form">\n    <% if (data.form_header) { %>\n    <p><%= data.form_header %></p>\n    <% } %>\n\n    <% if (data.form_desc) { %>\n    <p><%= data.form_desc %></p>\n    <% } %>\n\n    <div class="inputs"></div>\n\n    <div class="submit-container">\n        <button id="submit" type="submit" class="btn btn-success">Contact me</button>\n    </div>\n    <div style="clear:both;"></div>\n    <div class="alert validation alert-error"><div>The following fields were invalid</div></span><span></span></div>\n<div class="alert submission alert-error"><div>Something went wrong with your submission</div><span></span></div>\n    <div style="clear:both;"></div>\n</form>\n\n<div class="alert alert-success"><%= data.submitted_text %></div>\n\n<div class="phone-container">\n    <div>OR</div>\n    <div class="phone">\n        <img src="<%= data.form_phone_logo %>" /><span><%= data.form_phone %></span>\n    </div>\n</div>\n\n<% if (data.disclaimer_text) { %>\n<p class="disclaimer"><%= data.disclaimer_text %></p>\n<% } %>\n\n<% if (data.comparitor_text) { %>\n<p class="comparitor"><%= data.comparitor_text %></p>\n<% } %>\n'
        }), define("text-cns!components/lead/themes/medibank/tmpl_lead.html", [], function() {
            return '<button type="button" class="close" aria-hidden="true">&lt; Back</button>\n\n<header>\n    <span class="company"><%= data.Company %></span>\n\n    <h2><%= data[\'Product Name\'] %></h2>\n    <span class="star-rating"><%= data.Stars %></span>\n\n    <span class="fact"><%= data[\'Monthly Premium\'] %></span>\n    <span class="fact-description">Estimated Monthly Premium</span>\n</header>\n\n<a class="btn btn-success call-an-expert show-on-mobile" href="tel:<%= lead.phone %>"><img src="<%= base_url %>assets/image/call-out.png" />Call an expert for help</a>\n<a class="btn btn-warning have-an-expert-call-you show-on-mobile" data-toggle="contact-form"><img src="<%= base_url %>assets/image/call-in.png" />Have an expert call you</a>\n\n<div id="contact-form">\n  <div class="form-container">\n  </div>\n  <div class="continue">\n      <div>\n          <span class="quote"><a href="<%= lead.proceed_link %>" onclick="_gaq.push([\'_trackEvent\', \'Leads\', \'Medibank Lightbox\', \'FinalQuote\'])">Continue to finalise quote <img src="<%= base_url %>assets/image/chevron.png"/></a></span><span class="logo"><img src="<%= lead.form.disclaimer_logo %>" alt=""/></span>\n      </div>\n      <p>Receive a quote which factors in the Government Rebate and Lifetime Health Cover loading. You\'ll be directed to the Medibank website.<br/>\n      <a href="http://www.canstar.com.au/terms-of-use/#health" target="_blank">Terms & conditions apply</a>\n      </p>\n  </div>\n</div>\n\n<a class="btn btn-primary continue-button show-on-mobile" onclick="_gaq.push([\'_trackEvent\', \'Leads\', \'Medibank Lead Form\', \'FinalQuote\'])" href="<%= lead.proceed_link %>">Continue to finalise quote <img src="<%= base_url %>assets/image/chevron.png"/></a>\n\n<a class="btn btn-info policy-details show-on-mobile" data-toggle="product-card"> <img src="<%= base_url %>assets/image/magnify.png"> View policy details</a>\n\n<div id="product-card"></div>\n'
        }), define("text-cns!components/lead/themes/lifebroker/tmpl_lead.html", [], function() {
            return '<div class="modal-body clearfix">\n    <% if(lead.mobile_preamble) { %>\n        <p class="visible-xs"><%= lead.mobile_preamble %></p>\n    <% } %>\n\n    <button type="button" class="close" aria-hidden="true" data-dismiss="modal">\n        <span class="fa fa-times"></span>\n    </button>\n\n    <div class="col-xs-12 col-sm-6 product-card-container">\n        <span class="company"><%= data.Company %></span>\n        <h2><%= data[\'Product Name\'] %></h2>\n        <span class="star-rating"><%= data[\'Star Rating\'] %></span>\n\n        <hr />\n\n        <div id="product-card"></div>\n    </div>\n\n    <div class="col-xs-12 col-sm-6 contact-form-container">\n        <div id="contact-form">\n            <div class="visible-xs show-on-mobile arrow-down"></div>\n            <div class="form-container"></div>\n        </div>\n    </div>\n</div>\n'
        }), define("text-cns!components/lead/themes/lifebroker/tmpl_product_card.html", [], function() {
            return '<div class="show-on-mobile legend-container visible-xs">\n    <span class="legend-tooltip ">?</span>\n\n    <div class="mobile-legend-container hide">\n        <%= legend %>\n    </div>\n</div>\n\n<div class="tab-content">\n  <% active = \'active\';\n  _.each(config && config.sections, function (section, name) { %>\n  <div id="<%= name %>" class="tab-pane <%= active %>">\n    <ul>\n      <% var i = 0;\n        _.each(section.fields, function (value, label) { %>\n        <li><span class="value"> <%= data[label] %></span><span class="feature-label"><%= label %></span></li>\n      <% i++;\n        }); %>\n    </ul>\n  </div>\n    <% active = \'\';\n    }); %>\n</div>\n<hr/>\n<% if(lead && lead.form && lead.form.disclaimer_text1) { %>\n<p class="disclaimer hidden-xs"><%= lead.form.disclaimer_text1 %></p>\n<% } %>\n<div class="hidden-xs">\n    <%= legend %>\n</div>\n'
        }), define("text-cns!components/lead/themes/lifebroker/tmpl_contact_form.html", [], function() {
            return '\n<% if (data.form_preamble1) { %>\n<p class="preamble hidden-xs"><%= data.form_preamble1 %></p>\n<% } %>\n<% if(data.mobile_preamble) { %>\n<p class="show-on-mobile mobile-preamble visible-xs"><%= data.mobile_preamble %></p>\n<% } %>\n<form method="POST" action="<%= data.form_action %>" class="form-horizontal form" role="form">\n    <% if (data.form_header) { %>\n    <p><%= data.form_header %></p>\n    <% } %>\n\n    <% if (data.form_desc) { %>\n    <p><%= data.form_desc %></p>\n    <% } %>\n\n    <div class="inputs"></div>\n\n    <div class="submit-container">\n        <button id="submit" type="submit">Get Quote</button>\n    </div>\n\n    <div style="clear:both;"></div>\n    <div class="alert validation alert-error alert-danger"><div>The following fields were invalid</div></span><span></span></div>\n    <div class="alert submission alert-error alert-danger"><div>Something went wrong with your submission</div><span></span></div>\n    <div style="clear:both;"></div>\n</form>\n\n<div class="alert alert-success"><%= data.submitted_text %></div>\n\n<div class="phone-container">\n    <div class="phone">\n        <img src="<%= data.form_phone_logo %>" />\n        <span class="show-on-desktop hidden-xs"><%= data.form_phone %></span>\n        <span class="show-on-mobile visible-xs"><%= data.form_phone_mobile %></span>\n    </div>\n</div>\n\n<p class="disclaimer show-on-mobile visible-xs"><%= data.disclaimer_text1 %></p>\n<p class="disclaimer"><%= data.disclaimer_text2 %></p>\n'
        }), define("text-cns!components/lead/themes/lifebroker/tmpl_legend.html", [], function() {
            return '<% _.each(legends, function (legend) {\n  var size = _.size(legend);\n  var width = 0;\n  var ul_class = \'\';\n  if(size > 4) {\n    width = 50;\n  } else {\n    width = size > 0 ? 12/size : 12;\n  } %>\n    <ul class="legend">\n        <%  _.each(legend, function (image, label) { %>\n            <li class="item row col-xs-<%= width %>"><img src="<%= image %>" alt="<%= label %>" /> <span><%= label %></span></li>\n        <% }); %>\n    </ul>\n<% }); %>\n'
        }),
        function() {
            define("components/lead/templates", ["require", "text-cns!components/lead/tmpl_lead.html", "text-cns!components/lead/tmpl_product_card.html", "text-cns!components/lead/tmpl_contact_form.html", "text-cns!components/lead/tmpl_legend.html", "text-cns!components/lead/themes/choosewell/tmpl_contact_form.html", "text-cns!components/lead/themes/choosewell_1/tmpl_contact_form.html", "text-cns!components/lead/themes/medibank/tmpl_lead.html", "text-cns!components/lead/themes/lifebroker/tmpl_lead.html", "text-cns!components/lead/themes/lifebroker/tmpl_product_card.html", "text-cns!components/lead/themes/lifebroker/tmpl_contact_form.html", "text-cns!components/lead/themes/lifebroker/tmpl_legend.html"], function(t) {
                return t("text-cns!components/lead/tmpl_lead.html"), t("text-cns!components/lead/tmpl_product_card.html"), t("text-cns!components/lead/tmpl_contact_form.html"), t("text-cns!components/lead/tmpl_legend.html"), t("text-cns!components/lead/themes/choosewell/tmpl_contact_form.html"), t("text-cns!components/lead/themes/choosewell_1/tmpl_contact_form.html"), t("text-cns!components/lead/themes/medibank/tmpl_lead.html"), t("text-cns!components/lead/themes/lifebroker/tmpl_lead.html"), t("text-cns!components/lead/themes/lifebroker/tmpl_product_card.html"), t("text-cns!components/lead/themes/lifebroker/tmpl_contact_form.html"), t("text-cns!components/lead/themes/lifebroker/tmpl_legend.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/lead/lead", ["require", "jquery", "underscore", "backbone", "libraries/Canstar", "components/base/View", "libraries/Text", "components/contact_form/contact_form", "libraries/ConfigModel", "libraries/DataModel", "./FormLogic", "jquery.placeholder", "components/lead/templates"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h;
                return i = e("jquery"), h = e("underscore"), r = e("backbone"), o = e("libraries/Canstar"), p = e("components/base/View"), d = e("libraries/Text"), a = e("components/contact_form/contact_form"), s = e("libraries/ConfigModel"), l = e("libraries/DataModel"), c = e("./FormLogic"), e("jquery.placeholder"), e("components/lead/templates"), u = function(e) {
                    function o() {
                        return this._configureForm = t(this._configureForm, this), this._setCapturedData = t(this._setCapturedData, this), this.getProfile = t(this.getProfile, this), this.getProductId = t(this.getProductId, this), this._replaceUrls = t(this._replaceUrls, this), this._configure_lead = t(this._configure_lead, this), this.on_legend_tooltip = t(this.on_legend_tooltip, this), this.on_toggle_mobile_panel = t(this.on_toggle_mobile_panel, this), this.on_close_lead = t(this.on_close_lead, this), this.render_legend = t(this.render_legend, this), this.render_product_card = t(this.render_product_card, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), o.__super__.constructor.apply(this, arguments)
                    }
                    return n(o, e), o.prototype.path = "components/lead", o.prototype.id = "lead", o.stylesheets = ["font-awesome/css/font-awesome.css", "components/lead/lead.css"], o.prototype.templates = {
                        lead: "!!tmpl_lead.html",
                        product_card: "!!tmpl_product_card.html",
                        contact_form: "!tmpl_contact_form.html",
                        legend: "!!tmpl_legend.html"
                    }, o.prototype.events = {
                        "click .close": "on_close_lead",
                        "click .btn[data-toggle]": "on_toggle_mobile_panel",
                        "click .legend-tooltip": "on_legend_tooltip"
                    }, o.prototype.initialize = function() {
                        return this.facetConfig = this.options.facetConfig, this.leadName = this.options.leadName, this.productRowData = this.options.productRowData, this.profile = this.getProfile(), this.productId = this.getProductId(), this.configModel = new s, this._configure_lead()
                    }, o.prototype.render = function() {
                        var t, e, n, r;
                        return t = {
                            config: this.detailsConfig.toJSON().profiles[this.profile],
                            data: this.model.toJSON(),
                            lead: this.leadConfig.toJSON(),
                            base_url: canstar_widget.base_url
                        }, this.$el.html(this.templates.lead(t)), t.legend = this.render_legend({
                            legends: null != (n = t.lead) && null != (r = n.card) ? r.legends : void 0
                        }), e = this.render_product_card(t), i("#product-card", this.el).html(e), this.contact_form = new a(h.extend({}, this.leadConfig.toJSON().form, {
                            base_url: canstar_widget.base_url,
                            gold_url: canstar_widget.gold_url,
                            template: this.templates.contact_form,
                            captured: this.captured,
                            ga_tracking: ["_trackEvent", "Leads", "" + d.prototype.ucwords(this.options.leadName) + " Lightbox", "Submit"]
                        })), this._configureForm(), i("#contact-form .form-container", this.el).html(this.contact_form.render()), this.el
                    }, o.prototype.render_product_card = function(t) {
                        var e, n;
                        return n = this.templates.product_card(t), e = this.show_relevant_legends(n)
                    }, o.prototype.render_legend = function(t) {
                        return this.templates.legend(t)
                    }, o.prototype.show_relevant_legends = function(t) {
                        var e, n, r, o;
                        return n = i("<div>").append(t), r = n.find(".legend > li.row"), e = n.find(".tab-content img"), o = h.pluck(e, "src"), h.each(r, function(t) {
                            var e;
                            return e = i(t).find("img"), h.find(e, function(e) {
                                return h.contains(o, e.src) ? (i(t).show(), !0) : void 0
                            })
                        }), n.html()
                    }, o.prototype.on_close_lead = function(t) {
                        return t.preventDefault(), this.trigger("close")
                    }, o.prototype.on_toggle_mobile_panel = function(t) {
                        var e;
                        return t.preventDefault(), e = i(t.target).attr("data-toggle"), "undefined" != typeof e && e !== !1 ? i("#" + e).toggle() : !0
                    }, o.prototype.on_legend_tooltip = function(t) {
                        return t.preventDefault(), i(t.target).parent().find(".mobile-legend-container").removeClass("hide"), i(t.target).css("cursor", "auto"), this.events = h.omit(this.events, "click .legend-tooltip"), this.delegateEvents()
                    }, o.prototype._configure_lead = function() {
                        var t, e;
                        return this.detailsConfig = new s, this.detailsConfig.url = "" + canstar_widget.base_url + "api/facets/details_config?collection=" + canstar_widget.faceted_search.collection, this.detailsConfig.fetch({
                            success: function(e) {
                                return function() {
                                    return e.model = new l({
                                        traversedFields: e.detailsConfig.traversedFields
                                    }), e.model.url = "" + canstar_widget.base_url + "api/facets/data/" + e.productId + ("?collection=" + canstar_widget.faceted_search.collection + "&profile=" + e.profile), e.model.fetch({
                                        success: function() {
                                            return t()
                                        }
                                    })
                                }
                            }(this)
                        }), e = r.Model.extend({
                            parse: function(t) {
                                return function(e) {
                                    return e = t._replaceUrls(e)
                                }
                            }(this)
                        }), this.leadConfig = new e, this.leadConfig.url = canstar_widget.base_url + "api/facets/lead_config?name=" + this.options.leadName, this.leadConfig.fetch({
                            success: function() {
                                return function() {
                                    return t()
                                }
                            }(this)
                        }), t = h.after(2, function(t) {
                            return function() {
                                return t._setCapturedData(t.model), t.trigger("configured")
                            }
                        }(this))
                    }, o.prototype._replaceUrls = function(t) {
                        var e, n;
                        return e = canstar_widget.base_url || ("undefined" != typeof console && null !== console ? console.error("canstar_widget.base_url is missing") : void 0), n = canstar_widget.gold_url || ("undefined" != typeof console && null !== console ? console.error("canstar_widget.gold_url is missing") : void 0), null == n || null == e ? t : (h.each(t, function(t) {
                            return function(i, r, o) {
                                return "string" == typeof i ? (i = d.prototype.replaceAll(i, {
                                    "%base_url%": null != e ? e.substring(0, (null != e ? e.length : void 0) - 1) : void 0
                                }), i = d.prototype.replaceAll(i, {
                                    "%gold_url%": null != n ? n.substring(0, (null != n ? n.length : void 0) - 1) : void 0
                                })) : "object" == typeof i && (i = t._replaceUrls(i)), o[r] = i
                            }
                        }(this)), t)
                    }, o.prototype.getProductId = function() {
                        var t;
                        return t = this.facetConfig.id_field || ("undefined" != typeof console && null !== console ? console.error("Missing id field in facet_config") : void 0), this.productRowData.SUPP[t] || ("undefined" != typeof console && null !== console ? console.error("Missing " + t + " in row supplementary data") : void 0)
                    }, o.prototype.getProfile = function() {
                        var t;
                        return t = this.facetConfig.profile_field || ("undefined" != typeof console && null !== console ? console.error("Missing profile_field in facet_config") : void 0), this.productRowData.SUPP[t] || ("undefined" != typeof console && null !== console ? console.error("Missing " + t + " in row supplementary data") : void 0)
                    }, o.prototype._setCapturedData = function(t) {
                        var e;
                        return this.captured = this.captured || {}, e = h.object(h.map(this.leadConfig.get("captured_data"), function(e) {
                            return function(n, i) {
                                var r;
                                return r = c.prototype.capturedDataTransform[e.leadName](t.get("SUPP")[n], n), [i, r]
                            }
                        }(this))), h.extend(e, h.object(h.map(canstar_widget.stored_selector_params, function(t) {
                            return function(e, n) {
                                var i, r;
                                return r = e.text || e.value, i = c.prototype.capturedDataTransform[t.leadName](r, n), [n, i]
                            }
                        }(this)))), h.extend(this.captured, e)
                    }, o.prototype._configureForm = function() {
                        return i(":input", this.contact_form.el).placeholder(), this.listenTo(this.contact_form, "after_submit", function(t) {
                            return function() {
                                return t.trigger("after_submit")
                            }
                        }(this)), c.prototype.configureForm[this.leadName].apply(this)
                    }, o
                }(p)
            })
        }.call(this), define("text!components/compare_shortlist/tmpl_compare_shortlist.html", [], function() {
            return '<div class="shortlist-root hidden-xs hide-on-mobile shortlist-primary">\n    <div id="compare-shortlist" class="compare-shortlist-container">\n        <div class="shortlist-main-container container">\n            <div class="row">\n                <div class="col-xs-12">\n                    <h4 class="color-white margin-none pull-left shortlist-started-info">Well done you\'ve started a shortlist.</h4>\n                    <i class="fa fa-times shortlist-hide pull-right"></i>\n                    </div>\n                </div>\n            <div class="row shortlist-started-info">\n                <div class="col-xs-12">\n                    <small>You can select up to 3 products to do a detailed comparison</small>\n                </div>\n            </div>\n            <div class="row margin-top-10">\n                <div class="shortlist-product-container">\n                        <%= productList %>\n                    </div>\n\n                <div class="col-xs-3 shortlist-control-column">\n                    <div class="shortlist-controls text-center">\n                        <button class="compare-button btn btn-white inactive full-width">Compare</button>\n\n                        <div class="compare-bar-selected-details text-left">\n                            (<span class="shortlist-product-count color-white">0</span>) products in shortlist\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n    </div>\n\n    <div class="show-shortlist-parent-container">\n        <div class="show-shortlist-container">\n            <div class="shortlist-toggle toggle-show-control">\n                <div class="shortlist-show">\n                    <i class="icon-chevron-up icon-white"></i>Shortlist\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'
        }), define("text!components/compare_shortlist/tmpl_compare_shortlist_product.html", [], function() {
            return '<div class="product-box-container col-xs-3 <% if (productId !== 0) { %> selected<% } %>">\n    <div class="white-box">\n        <button class="close font-xs"><i class="fa fa-times"></i></button>\n\n        <div class="product-box text-center">\n        <input type="hidden" name="product_id" value="<%= productId %>" class="product-id" />\n        <div class="product-logo"><%= image %></div>\n        <div class="product-name"><%= name %></div>\n    </div>\n    </div>\n</div>'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/compare_shortlist/CompareShortlistProductView", ["require", "underscore", "jquery", "backbone", "components/base/BaseView", "libraries/Loader", "libraries/Canstar", "text!components/compare_shortlist/tmpl_compare_shortlist_product.html", "jquery.lazyload"], function(e) {
                var i, r, o, s, a, l, c, u;
                return u = e("underscore"), i = e("jquery"), r = e("backbone"), o = e("components/base/BaseView"), l = e("libraries/Loader"), s = e("libraries/Canstar"), c = e("text!components/compare_shortlist/tmpl_compare_shortlist_product.html"), e("jquery.lazyload"), a = function(e) {
                    function i() {
                        return this.render = t(this.render, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.tagName = "div", i.prototype.className = "span3", i.stylesheets = ["bootstrap/css/bootstrap.reboot.css", "components/compare_shortlist/compare_shortlist_product.css"], i.prototype.events = function() {
                        return {
                            "click #compare-shortlist .shortlist-product-container .product-box-container .close": "onShortlistRemoveProduct"
                        }
                    }, i.prototype.initialize = function(t) {
                        return this.on("onShortlistRemoveProduct", this.onShortlistRemoveProduct), u.bindAll(this), this.render(t.products.models), this
                    }, i.prototype.render = function(t) {
                        var e, n, i;
                        for (n = 0, i = t.length; i > n; n++) e = t[n], this.$el.append(u.template(c, e.attributes));
                        return this
                    }, i
                }(o)
            })
        }.call(this),
        function() {
            var t = {}.hasOwnProperty,
                e = function(e, n) {
                    function i() {
                        this.constructor = e
                    }
                    for (var r in n) t.call(n, r) && (e[r] = n[r]);
                    return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
                };
            define("components/compare_shortlist/CompareShortlistProductModel", ["require", "jquery", "underscore", "backbone"], function(t) {
                var n, i, r, o;
                return n = t("jquery"), o = t("underscore"), i = t("backbone"), r = function(t) {
                    function n() {
                        return n.__super__.constructor.apply(this, arguments)
                    }
                    return e(n, t), n.prototype.defaults = {
                        productId: 0,
                        name: "Add Product",
                        image: "",
                        domStructureType: "form"
                    }, n
                }(i.Model)
            })
        }.call(this),
        function() {
            var t = {}.hasOwnProperty,
                e = function(e, n) {
                    function i() {
                        this.constructor = e
                    }
                    for (var r in n) t.call(n, r) && (e[r] = n[r]);
                    return i.prototype = n.prototype, e.prototype = new i, e.__super__ = n.prototype, e
                };
            define("components/compare_shortlist/CompareShortlistProductCollection", ["require", "jquery", "underscore", "backbone", "components/compare_shortlist/CompareShortlistProductModel"], function(t) {
                var n, i, r, o, s;
                return n = t("jquery"), s = t("underscore"), i = t("backbone"), o = t("components/compare_shortlist/CompareShortlistProductModel"), r = function(t) {
                    function n() {
                        return n.__super__.constructor.apply(this, arguments)
                    }
                    return e(n, t), n.prototype.model = o, n
                }(i.Collection)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/compare_shortlist/compare_shortlist", ["require", "underscore", "jquery", "backbone", "components/base/BaseView", "libraries/Loader", "libraries/Canstar", "text!components/compare_shortlist/tmpl_compare_shortlist.html", "text!components/compare_shortlist/tmpl_compare_shortlist_product.html", "components/compare_shortlist/CompareShortlistProductView", "components/compare_shortlist/CompareShortlistProductModel", "components/compare_shortlist/CompareShortlistProductCollection", "jquery.lazyload"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h, f;
                return f = e("underscore"), i = e("jquery"), r = e("backbone"), o = e("components/base/BaseView"), l = e("libraries/Loader"), s = e("libraries/Canstar"), p = e("text!components/compare_shortlist/tmpl_compare_shortlist.html"), h = e("text!components/compare_shortlist/tmpl_compare_shortlist_product.html"), c = e("components/compare_shortlist/CompareShortlistProductView"), d = e("components/compare_shortlist/CompareShortlistProductModel"), u = e("components/compare_shortlist/CompareShortlistProductCollection"), e("jquery.lazyload"), a = function(e) {
                    function r() {
                        return this.checkProductAdded = t(this.checkProductAdded, this), this.forceAddToDynatable = t(this.forceAddToDynatable, this), this.fixVisiblePositioning = t(this.fixVisiblePositioning, this), this.calculateShortlistPositionBeforeShow = t(this.calculateShortlistPositionBeforeShow, this), this.compareShortlistProductsClick = t(this.compareShortlistProductsClick, this), this.onShortlistHide = t(this.onShortlistHide, this), this.onShortlistShow = t(this.onShortlistShow, this), this.determineProductModel = t(this.determineProductModel, this), this.onShortlistProductCloseClick = t(this.onShortlistProductCloseClick, this), this.sortProductsByPopulated = t(this.sortProductsByPopulated, this), this.removeProductFromShortlist = t(this.removeProductFromShortlist, this), this.updateShortListBar = t(this.updateShortListBar, this), this.addProductToShortlist = t(this.addProductToShortlist, this), this.renderProducts = t(this.renderProducts, this), this.render = t(this.render, this), this.refreshShortlist = t(this.refreshShortlist, this), this.resetShortlist = t(this.resetShortlist, this), this.clearShortlist = t(this.clearShortlist, this), this.setShortlistDefaults = t(this.setShortlistDefaults, this), this.rebuildStorageCollection = t(this.rebuildStorageCollection, this), this.getCurrentCollection = t(this.getCurrentCollection, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.shortList = {}, r.stylesheets = ["bootstrap3/css/bootstrap.reboot3.css", "components/compare_shortlist/compare_shortlist.css"], r.prototype.className = "reboot3", r.prototype.events = function() {
                        return {
                            "click .shortlist-hide": "onShortlistHide",
                            "click .shortlist-root .shortlist-toggle .shortlist-show": "onShortlistShow",
                            "click .shortlist-product-container .product-box-container.selected .close": "onShortlistProductCloseClick",
                            "click .shortlist-controls .compare-button": "compareShortlistProductsClick"
                        }
                    }, r.prototype.initialize = function() {
                        return this.shortList[this.getCurrentCollection()] = {}, this.setShortlistDefaults(), null != ("undefined" != typeof canstar_widget && null !== canstar_widget ? canstar_widget.vent : void 0) && canstar_widget.vent.on("compare_shortlist:changed", this.setShortlistDefaults), this
                    }, r.prototype.getCurrentCollection = function() {
                        var t;
                        return t = canstar_widget.faceted_search, null != canstar_widget.faceted_search.distributor ? t.distributor + "_" + t.table : t.collection
                    }, r.prototype.rebuildStorageCollection = function() {
                        var t, e;
                        return t = this.getCurrentCollection(), e = {}, e[t] = [], f.each(this.shortList[t], function(n) {
                            return e[t].push(n)
                        }), window.localStorage.setItem("canstar_shortlist_bar", JSON.stringify(e))
                    }, r.prototype.setShortlistDefaults = function() {
                        var t, e, n, r, o, s, a, l, p, h, m, g, v;
                        if (t = this.getCurrentCollection(), h = localStorage.getItem("canstar_shortlist_bar"), "function" == typeof h ? h(i.isEmptyObject(h)) : void 0) p = {};
                        else try {
                            p = JSON.parse(h)
                        } catch (_) {
                            e = _, console.log(e)
                        }
                        if (r = new d, o = new d, s = new d, this.productList = new u([r, o, s]), this.hasAddedProduct = !1, this.localStorageProductCount = 0, null != p && p.hasOwnProperty(t) && null != p[t]) {
                            for (l = p[t], n = g = 0, v = l.length; v > g; n = ++g) m = l[n], this.localStorageProductCount++, a = this.productList.at(n), "object" == typeof m && (this.hasAddedProduct = !0, a.set(m));
                            i.isEmptyObject(p) ? this.clearShortlist() : (f.each(p[t], function(e) {
                                return function(n) {
                                    return e.shortList[t][n.productId] = n
                                }
                            }(this)), localStorage.setItem("canstar_shortlist_bar", JSON.stringify(p)))
                        }
                        return this.shortlistTemplate = new c({
                            products: this.productList
                        })
                    }, r.prototype.clearShortlist = function() {
                        return window.localStorage.removeItem("canstar_shortlist_bar")
                    }, r.prototype.resetShortlist = function() {
                        return this.setShortlistDefaults(), this.onShortlistHide()
                    }, r.prototype.refreshShortlist = function() {
                        var t, e, n, r, o, s, a, l;
                        for (r = 0, l = this.productList.models, s = 0, a = l.length; a > s; s++) n = l[s], e = n.get("productId"), 0 !== e && (r++, o = 0 === e.indexOf("_") ? e.substr(1) : e, t = i('td.compare input.compare[value="' + o + '"]'), t.attr("checked", !0), t.closest("tr").addClass("product-selected-compare"));
                        return r > 0 ? (3 === r && i(".compare input.compare:not(:checked)").attr("disabled", !0), this.renderProducts()) : void 0
                    }, r.prototype.render = function() {
                        var t;
                        return this.$el.html(f.template(p, {
                            productList: this.shortlistTemplate.$el.html()
                        })), t = window.setInterval(function(e) {
                            return function() {
                                var n;
                                return i("#dynatable table tbody").is(":visible") ? (window.clearInterval(t), n = e.fixVisiblePositioning(i(".shortlist-root .show-shortlist-container")), i(".shortlist-root .show-shortlist-container .shortlist-toggle").css("bottom", n)) : void 0
                            }
                        }(this), 100), this.localStorageProductCount > 0 && (this.renderProducts(), this.refreshShortlist(), this.onShortlistShow(null, !0), this.forceAddToDynatable()), this
                    }, r.prototype.renderProducts = function() {
                        var t, e, n, r, o, s, a, l;
                        for (t = i("#compare-shortlist .shortlist-main-container"), r = "", n = 0, l = this.productList.models, s = 0, a = l.length; a > s; s++) o = l[s], r += f.template(h, o.attributes), 0 !== o.get("productId") && n++;
                        return t.find(".shortlist-product-container").html(r), e = i("#dynatable th.compare button"), 0 === n || 1 === n ? (t.find(".shortlist-control-column .compare-button").addClass("inactive").attr("disabled", "disabled"), e.addClass("inactive").attr("disabled", "disabled")) : n >= 2 && (t.find(".shortlist-control-column .compare-button").removeClass("inactive").removeAttr("disabled"), i(".shortlist-started-info").hide("fast"), e.removeClass("inactive").removeAttr("disabled")), n >= 1 ? (0 === e.find("em.selected-product-count").length && e.append('<em class="selected-product-count"></em>'), e.find("em.selected-product-count").text("(" + n + ")")) : e.find("em.selected-product-count").remove(), n > 1 && i(".shortlist-alert-container").hasClass("show-welcome") && i(".shortlist-alert-container").removeClass("show-welcome"), t.find(".shortlist-product-count").text(n), this
                    }, r.prototype.addProductToShortlist = function(t, e) {
                        var n, i, r, o, s, a;
                        return t.find("td.product-name > form").length > 0 ? (n = "form", a = t.find("td.product-name > form .prod_link").val()) : t.find("td.product-name > a").length > 0 ? (n = "anchor", a = t.find("td.product-name > a").text()) : t.find("td.product-name > span").length > 0 && (n = "span", a = t.find("td.product-name").text()), i = t.find("td.company img").attr("value"), s = t.find("td.company img").attr("src"), t.addClass("product-selected-compare"), r = this.determineProductModel(e.productId), r !== !1 ? this : (o = 0, r = this.determineProductModel(o), this.updateShortListBar(r, e.productId, a, i, s, n), this)
                    }, r.prototype.updateShortListBar = function(t, e, n, r, o, s) {
                        var a, l, c, u;
                        return t.set({
                            productId: String(e),
                            name: n,
                            image: "<img src='" + o + "' alt='" + r + "' onerror=\"this.onerror=null; this.style.display = 'none'; this.outerHTML = '<span>" + r + "</span>';\" />",
                            domStructureType: s
                        }), a = this.getCurrentCollection(), this.shortList[a][e] = t, this.rebuildStorageCollection(), this.sortProductsByPopulated(), this.renderProducts(), this.hasAddedProduct || (this.hasAddedProduct = !0), i(".shortlist-root").hasClass("visible") ? (c = i("body").css("padding-bottom"), l = c.substr(0, c.length - 2), u = i(".shortlist-root #compare-shortlist").height(), u !== l ? i("body").css("padding-bottom", u) : void 0) : this.onShortlistShow(null, !0)
                    }, r.prototype.removeProductFromShortlist = function(t, e) {
                        var n, r, o, s, a;
                        return a = this.determineProductModel(e.productId), a.set({
                            productId: 0,
                            name: "Add Product",
                            image: ""
                        }), n = this.getCurrentCollection(), delete this.shortList[n][e.productId], this.rebuildStorageCollection(), this.sortProductsByPopulated(), this.renderProducts(), t.removeClass("product-selected-compare"), i(".shortlist-root").hasClass("visible") ? (o = i("body").css("padding-bottom"), r = o.substr(0, o.length - 2), s = i(".shortlist-root #compare-shortlist").height(), s !== r && i("body").css("padding-bottom", s)) : this.onShortlistShow(null, !0), this
                    }, r.prototype.sortProductsByPopulated = function() {
                        var t, e, n, i, r, o;
                        for (r = this.productList.models, o = [], n = 0, i = r.length; i > n; n++) e = r[n], 0 === e.get("productId") ? (e.destroy(), t = d, o.push(this.productList.add(t))) : o.push(void 0);
                        return o
                    }, r.prototype.onShortlistProductCloseClick = function(t) {
                        var e, n, r, o, s, a, l, c, u;
                        return n = i(t.currentTarget).closest(".product-box-container"), a = n.find(".product-box input.product-id").val(), l = this.determineProductModel(a), s = l.get("domStructureType"), u = 0 === a.indexOf("_") ? a.substr(1) : a, e = i('input[type="checkbox"][value="' + u + '"].compare'), r = e.closest("tr"), r.removeClass("product-selected-compare"), r.find('input[type="checkbox"].compare').attr("checked", !1), c = {
                            productId: a,
                            productName: l.get("name")
                        }, o = this.getCurrentCollection(), delete this.shortList[o][a], this.rebuildStorageCollection(), this.trigger("removeProductFromCompare", a, n, c), this
                    }, r.prototype.determineProductModel = function(t) {
                        var e, n, i, r, o;
                        for (e = !1, o = this.productList.models, i = 0, r = o.length; r > i; i++)
                            if (n = o[i], n.attributes.hasOwnProperty("productId") && n.attributes.productId === t) {
                                e = n;
                                break
                            }
                        return e
                    }, r.prototype.onShortlistShow = function(t, e) {
                        var n, r, o;
                        return null == e && (e = !1), n = i(".shortlist-root"), this.hasAddedProduct || n.find(".shortlist-alert-container").removeClass("show-welcome").addClass("show-info"), r = this.calculateShortlistPositionBeforeShow(), i("#compare-shortlist .show-shortlist-container .shortlist-toggle").css("bottom", 0), o = e ? "show" : "toggle", n.find("#compare-shortlist").animate({
                            height: o,
                            position: "fixed",
                            bottom: r
                        }, "fast", "swing", function(t) {
                            return function() {
                                var e;
                                return n.addClass("visible"), i("body").css({
                                    paddingBottom: n.find("#compare-shortlist").height()
                                }), e = t.fixVisiblePositioning(i("#compare-shortlist")), i("#compare-shortlist").css("bottom", e)
                            }
                        }(this)), this
                    }, r.prototype.onShortlistHide = function() {
                        var t;
                        return t = i(".shortlist-root"), i("body").animate({
                            paddingBottom: 0
                        }, "fast", "swing"), t.find("#compare-shortlist").animate({
                            height: "hide",
                            position: "fixed",
                            bottom: -t.height()
                        }, "fast", "swing", function() {
                            return t.removeClass("visible")
                        }), this
                    }, r.prototype.compareShortlistProductsClick = function() {
                        return i("#faceted-search #results table thead tr th.compare button").trigger("click")
                    }, r.prototype.calculateShortlistPositionBeforeShow = function() {
                        var t, e, n, r, o, s;
                        return s = i(window).width(), o = i("#dynatable table").outerWidth(), n = i("#faceted-search").outerWidth(), e = o > n ? o : n, t = 0, e > s ? t = e - s : s === e && (r = parseFloat(i("#content").css("padding"))), t
                    }, r.prototype.fixVisiblePositioning = function(t) {
                        var e, n, r, o, s, a, l;
                        return e = 0, l = i(window).scrollTop(), a = i(window).height(), n = t.position().top, r = t.outerHeight(), o = n - l, s = a - o, r > s && (e = r - s + parseFloat(t.css("bottom"))), i("#compare-shortlist").css("bottom", e), e
                    }, r.prototype.forceAddToDynatable = function() {
                        return this.trigger("forciblyAddProducts", this.productList.models)
                    }, r.prototype.checkProductAdded = function(t) {
                        var e, n;
                        return e = !1, n = this.shortList[this.getCurrentCollection()], f.each(n, function() {
                            return function(n) {
                                return n.get("productId") === t ? e = !0 : void 0
                            }
                        }(this)), e
                    }, r
                }(o)
            })
        }.call(this), define("text-cns!components/star_popover/tmpl_star_modal.html", [], function() {
            return '<i class="fa fa-question-circle star-tooltip"></i>\n'
        }), define("text-cns!components/star_popover/tmpl_modal.html", [], function() {
            return '<div class="modal fade star-modal">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n      </div>\n      <div class="modal-body">\n      </div>\n    </div>\n  </div>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/star_popover/StarModalView", ["require", "jquery", "cns-jquery", "underscore", "canstar_widget", "components/base/BaseView", "./StarPopoverView", "text-cns!./tmpl_star_modal.html", "text-cns!./tmpl_modal.html"], function(e) {
                var i, r, o, s, a, l, c, u, d;
                return i = e("jquery"), l = e("cns-jquery"), d = e("underscore"), a = e("canstar_widget"), r = e("components/base/BaseView"), s = e("./StarPopoverView"), u = e("text-cns!./tmpl_star_modal.html"), c = e("text-cns!./tmpl_modal.html"), o = function(e) {
                    function i() {
                        return this.close = t(this.close, this), this.showStarModal = t(this.showStarModal, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.id = "star-modal", i.prototype.events = {
                        "click .star-tooltip": "showStarModal"
                    }, i.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.template = d.template(u), this.starPopover = new s({
                            tableProfile: t.profileName
                        }), i.__super__.initialize.call(this, t)
                    }, i.prototype.render = function() {
                        return this.$el.html(this.template({
                            base_url: a.base_url
                        })), this
                    }, i.prototype.showStarModal = function(t) {
                        var e;
                        return t.preventDefault(), e = l(c), e.find(".modal-body").append(this.starPopover.el), e.modal("show"), e.on("shown.bs.modal", function(t) {
                            return function() {
                                return t.starPopover.trigger("shown")
                            }
                        }(this))
                    }, i.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, i
                }(r)
            })
        }.call(this),
        function(t) {
            var e = "object" == typeof exports && exports,
                n = "object" == typeof module && module && module.exports == e && module,
                i = "object" == typeof global && global;
            (i.global === i || i.window === i) && (t = i);
            var r = function(t) {
                this.message = t
            };
            r.prototype = new Error, r.prototype.name = "InvalidCharacterError";
            var o = function(t) {
                    throw new r(t)
                },
                s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                a = /[\t\n\f\r ]/g,
                l = function(t) {
                    t = String(t).replace(a, "");
                    var e = t.length;
                    e % 4 == 0 && (t = t.replace(/==?$/, ""), e = t.length), (e % 4 == 1 || /[^+a-zA-Z0-9/]/.test(t)) && o("Invalid character: the string to be decoded is not correctly encoded.");
                    for (var n, i, r = 0, l = "", c = -1; ++c < e;) i = s.indexOf(t.charAt(c)), n = r % 4 ? 64 * n + i : i, r++ % 4 && (l += String.fromCharCode(255 & n >> (-2 * r & 6)));
                    return l
                },
                c = function(t) {
                    t = String(t), /[^\0-\xFF]/.test(t) && o("The string to be encoded contains characters outside of the Latin1 range.");
                    for (var e, n, i, r, a = t.length % 3, l = "", c = -1, u = t.length - a; ++c < u;) e = t.charCodeAt(c) << 16, n = t.charCodeAt(++c) << 8, i = t.charCodeAt(++c), r = e + n + i, l += s.charAt(r >> 18 & 63) + s.charAt(r >> 12 & 63) + s.charAt(r >> 6 & 63) + s.charAt(63 & r);
                    return 2 == a ? (e = t.charCodeAt(c) << 8, n = t.charCodeAt(++c), r = e + n, l += s.charAt(r >> 10) + s.charAt(r >> 4 & 63) + s.charAt(r << 2 & 63) + "=") : 1 == a && (r = t.charCodeAt(c), l += s.charAt(r >> 2) + s.charAt(r << 4 & 63) + "=="), l
                },
                u = {
                    encode: c,
                    decode: l,
                    version: "0.1.0"
                };
            if ("function" == typeof define && "object" == typeof define.amd && define.amd) define("base-64", [], function() {
                return u
            });
            else if (e && !e.nodeType)
                if (n) n.exports = u;
                else
                    for (var d in u) u.hasOwnProperty(d) && (e[d] = u[d]);
            else t.base64 = u
        }(this), define("text-cns!components/table_snapshot_creator/tmpl_prod_bundle.html", [], function() {
            return '<script data-main="<%= base_url %>assets/js/" src="<%= base_url %>assets/js/widgets/table_snapshot/table_snapshot-prod.js" data-snapshot="<%= state %>"></script>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/table_snapshot_creator/TableSnapshotModel", ["require", "backbone", "canstar_widget", "libraries/Text", "base-64", "text-cns!./tmpl_prod_bundle.html"], function(e) {
                var i, r, o, s, a, l;
                return i = e("backbone"), a = e("canstar_widget"), o = e("libraries/Text"), s = e("base-64"), l = e("text-cns!./tmpl_prod_bundle.html"), r = function(e) {
                    function i() {
                        return this.decodeState = t(this.decodeState, this), this.getScriptTag = t(this.getScriptTag, this), this.encodedState = t(this.encodedState, this), this.updateState = t(this.updateState, this), this.validate = t(this.validate, this), this.parse = t(this.parse, this), this.initialize = t(this.initialize, this), this.defaults = t(this.defaults, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.defaults = function() {
                        return {
                            base_url: "https://widgets.canstar.com.au/widgets/",
                            faceted_search: {
                                distributor: "canstar",
                                table: ""
                            },
                            facets: {},
                            numRows: 10,
                            monetisedOnly: !1,
                            tableUrl: "",
                            sorts: [
                                []
                            ],
                            desktopColumns: ["Company", "Product Name", "Star Rating", "Apply"],
                            mobileColumns: ["Company", "Product Name", "Star Rating", "Apply"],
                            allColumns: []
                        }
                    }, i.prototype.initialize = function(t) {
                        return null != (null != t ? t.encState : void 0) && delete t.encState, i.__super__.initialize.apply(this, arguments)
                    }, i.prototype.parse = function(t) {
                        var e;
                        return e = t, null != t.encState && (e = this.decodeState(t.encState), delete t.encState), e = _.extend(e, t)
                    }, i.prototype.validate = function(t) {
                        var e, n;
                        return e = void 0, 2 <= (n = t.numRows) && 10 >= n || (e = {
                            field: "numRows",
                            message: "Please input a value between 2 and 10"
                        }), e
                    }, i.prototype.updateState = function(t) {
                        return this.set(t), this.trigger("updated")
                    }, i.prototype.encodedState = function() {
                        var t, e;
                        return e = _.omit(this.toJSON(), "allColumns"), t = s.encode(JSON.stringify(e))
                    }, i.prototype.getScriptTag = function() {
                        var t, e, n;
                        return t = this.encodedState(), this.decodeState(t), e = _.template(l, {
                            base_url: a.base_url,
                            state: t
                        }), n = o.prototype.htmlEscape(e)
                    }, i.prototype.decodeState = function(t) {
                        var e, n;
                        return e = s.decode(t), n = JSON.parse(e)
                    }, i
                }(i.Model)
            })
        }.call(this), define("text-cns!components/table_snapshot_creator/tmpl_table_snapshot_creator.html", [], function() {
            return '<a class="snapshot-btn" href="#" onclick="return false;">\n  <i class="fa fa-camera"></i>\n</a>\n<div class="modal fade form">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n        <h4>Share table</h4>\n      </div>\n      <div class="modal-body container-fluid">\n        <%= modal_body %>\n      </div><!-- /.modal-body -->\n    </div><!-- /.modal-content -->\n  </div><!-- /.modal-dialog -->\n</div>\n'
        }), define("text-cns!components/table_snapshot_creator/tmpl_modal_body.html", [], function() {
            return '<form onsubmit="return false;">\n  <div class="col-sm-6">\n    <h3><i class="fa fa-cog" aria-hidden="true"></i> Options</h3>\n    <div class="form-group">\n      <label for="num_rows">Number of rows</label>\n      <input type="number" class="form-control" id="num_rows"\n             value="<%= model && model.get(\'numRows\') || 10 %>"\n             min="2"\n             max="10">\n    </div>\n    <div class="form-group monetised-filter checkbox">\n      <label>\n        <% var checked = model.get(\'monetisedOnly\') === true %>\n        <input type="checkbox" name="monetised_only" value="yes" <%= checked ? "checked" : "" %>>\n        Show only monetised products\n      </label>\n    </div>\n  </div>\n  <div class="form-group col-sm-6">\n    <h3><i class="fa fa-bars" aria-hidden="true"></i> Columns to display</h3>\n    <div class="row">\n      <div class="column desktop-col">Desktop</div>\n      <div class="column mobile-col">Mobile</div>\n      <div class="column column-name"></div>\n    </div>\n    <% _.each(model && model.get(\'allColumns\'), function(column) { %>\n      <% if(column !== "Compare"){ %>\n        <div class="row">\n          <div class="column desktop-col">\n            <% var checked = _.contains(model.get(\'desktopColumns\'), column); %>\n            <input type="checkbox" name="desktop_column" value="<%= column %>" <%= checked ? "checked" : "" %>>\n          </div>\n          <div class="column mobile-col">\n            <% var checked = _.contains(model.get(\'mobileColumns\'), column); %>\n            <input type="checkbox" name="mobile_column" value="<%= column %>" <%= checked ? "checked" : "" %>>\n          </div>\n          <label class="column column-name">\n            <%= column %>\n          </label>\n        </div>\n     <% } %>\n    <% }); %>\n  </div>\n  <div class="form-group col-xs-12">\n    <button type="button" class="btn btn-primary generate-snapshot">Generate snapshot</button>\n    <hr/>\n    <label for="script_tag" class="control-label">Script tag</label>\n    <br style="clear:both;"/>\n    <% var input_val = \'Click generate snapshot button\';\n    if(model) {\n      input_val = model.getScriptTag();\n    }\n    %>\n    <textarea id="script_tag" readonly="readonly" type="text" rows="1"><%= input_val %></textarea>\n    <div>\n      <span>Paste the above script tag into your content:</span>\n      <button type="button" id="cpy-text" class="btn btn-primary pull-right">Copy <i class="fa fa-clipboard" aria-hidden="true"></i></button>\n  </div>\n  </div>\n</form>\n<div class="return">\n  <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>\n</div>\n'
        }),
        function(t, e) {
            "object" == typeof module && module.exports ? module.exports = e() : "function" == typeof define && define.amd ? define("spinjs", e) : t.Spinner = e()
        }(this, function() {
            "use strict";

            function t(t, e) {
                var n, i = document.createElement(t || "div");
                for (n in e) i[n] = e[n];
                return i
            }

            function e(t) {
                for (var e = 1, n = arguments.length; n > e; e++) t.appendChild(arguments[e]);
                return t
            }

            function n(t, e, n, i) {
                var r = ["opacity", e, ~~(100 * t), n, i].join("-"),
                    o = .01 + n / i * 100,
                    s = Math.max(1 - (1 - t) / e * (100 - o), t),
                    a = c.substring(0, c.indexOf("Animation")).toLowerCase(),
                    l = a && "-" + a + "-" || "";
                return p[r] || (u.insertRule("@" + l + "keyframes " + r + "{0%{opacity:" + s + "}" + o + "%{opacity:" + t + "}" + (o + .01) + "%{opacity:1}" + (o + e) % 100 + "%{opacity:" + t + "}100%{opacity:" + s + "}}", u.cssRules.length), p[r] = 1), r
            }

            function i(t, e) {
                var n, i, r = t.style;
                if (e = e.charAt(0).toUpperCase() + e.slice(1), void 0 !== r[e]) return e;
                for (i = 0; i < d.length; i++)
                    if (n = d[i] + e, void 0 !== r[n]) return n
            }

            function r(t, e) {
                for (var n in e) t.style[i(t, n) || n] = e[n];
                return t
            }

            function o(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var n = arguments[e];
                    for (var i in n) void 0 === t[i] && (t[i] = n[i])
                }
                return t
            }

            function s(t, e) {
                return "string" == typeof t ? t : t[e % t.length]
            }

            function a(t) {
                this.opts = o(t || {}, a.defaults, h)
            }

            function l() {
                function n(e, n) {
                    return t("<" + e + ' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">', n)
                }
                u.addRule(".spin-vml", "behavior:url(#default#VML)"), a.prototype.lines = function(t, i) {
                    function o() {
                        return r(n("group", {
                            coordsize: u + " " + u,
                            coordorigin: -c + " " + -c
                        }), {
                            width: u,
                            height: u
                        })
                    }

                    function a(t, a, l) {
                        e(p, e(r(o(), {
                            rotation: 360 / i.lines * t + "deg",
                            left: ~~a
                        }), e(r(n("roundrect", {
                            arcsize: i.corners
                        }), {
                            width: c,
                            height: i.scale * i.width,
                            left: i.scale * i.radius,
                            top: -i.scale * i.width >> 1,
                            filter: l
                        }), n("fill", {
                            color: s(i.color, t),
                            opacity: i.opacity
                        }), n("stroke", {
                            opacity: 0
                        }))))
                    }
                    var l, c = i.scale * (i.length + i.width),
                        u = 2 * i.scale * c,
                        d = -(i.width + i.length) * i.scale * 2 + "px",
                        p = r(o(), {
                            position: "absolute",
                            top: d,
                            left: d
                        });
                    if (i.shadow)
                        for (l = 1; l <= i.lines; l++) a(l, -2, "progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
                    for (l = 1; l <= i.lines; l++) a(l);
                    return e(t, p)
                }, a.prototype.opacity = function(t, e, n, i) {
                    var r = t.firstChild;
                    i = i.shadow && i.lines || 0, r && e + i < r.childNodes.length && (r = r.childNodes[e + i], r = r && r.firstChild, r = r && r.firstChild, r && (r.opacity = n))
                }
            }
            var c, u, d = ["webkit", "Moz", "ms", "O"],
                p = {},
                h = {
                    lines: 12,
                    length: 7,
                    width: 5,
                    radius: 10,
                    scale: 1,
                    corners: 1,
                    color: "#000",
                    opacity: .25,
                    rotate: 0,
                    direction: 1,
                    speed: 1,
                    trail: 100,
                    fps: 20,
                    zIndex: 2e9,
                    className: "spinner",
                    top: "50%",
                    left: "50%",
                    shadow: !1,
                    hwaccel: !1,
                    position: "absolute"
                };
            if (a.defaults = {}, o(a.prototype, {
                    spin: function(e) {
                        this.stop();
                        var n = this,
                            i = n.opts,
                            o = n.el = t(null, {
                                className: i.className
                            });
                        if (r(o, {
                                position: i.position,
                                width: 0,
                                zIndex: i.zIndex,
                                left: i.left,
                                top: i.top
                            }), e && e.insertBefore(o, e.firstChild || null), o.setAttribute("role", "progressbar"), n.lines(o, n.opts), !c) {
                            var s, a = 0,
                                l = (i.lines - 1) * (1 - i.direction) / 2,
                                u = i.fps,
                                d = u / i.speed,
                                p = (1 - i.opacity) / (d * i.trail / 100),
                                h = d / i.lines;
                            ! function f() {
                                a++;
                                for (var t = 0; t < i.lines; t++) s = Math.max(1 - (a + (i.lines - t) * h) % d * p, i.opacity), n.opacity(o, t * i.direction + l, s, i);
                                n.timeout = n.el && setTimeout(f, ~~(1e3 / u))
                            }()
                        }
                        return n
                    },
                    stop: function() {
                        var t = this.el;
                        return t && (clearTimeout(this.timeout), t.parentNode && t.parentNode.removeChild(t), this.el = void 0), this
                    },
                    lines: function(i, o) {
                        function a(e, n) {
                            return r(t(), {
                                position: "absolute",
                                width: o.scale * (o.length + o.width) + "px",
                                height: o.scale * o.width + "px",
                                background: e,
                                boxShadow: n,
                                transformOrigin: "left",
                                transform: "rotate(" + ~~(360 / o.lines * u + o.rotate) + "deg) translate(" + o.scale * o.radius + "px,0)",
                                borderRadius: (o.corners * o.scale * o.width >> 1) + "px"
                            })
                        }
                        for (var l, u = 0, d = (o.lines - 1) * (1 - o.direction) / 2; u < o.lines; u++) l = r(t(), {
                            position: "absolute",
                            top: 1 + ~(o.scale * o.width / 2) + "px",
                            transform: o.hwaccel ? "translate3d(0,0,0)" : "",
                            opacity: o.opacity,
                            animation: c && n(o.opacity, o.trail, d + u * o.direction, o.lines) + " " + 1 / o.speed + "s linear infinite"
                        }), o.shadow && e(l, r(a("#000", "0 0 4px #000"), {
                            top: "2px"
                        })), e(i, e(l, a(s(o.color, u), "0 0 1px rgba(0,0,0,.1)")));
                        return i
                    },
                    opacity: function(t, e, n) {
                        e < t.childNodes.length && (t.childNodes[e].style.opacity = n)
                    }
                }), "undefined" != typeof document) {
                u = function() {
                    var n = t("style", {
                        type: "text/css"
                    });
                    return e(document.getElementsByTagName("head")[0], n), n.sheet || n.styleSheet
                }();
                var f = r(t("group"), {
                    behavior: "url(#default#VML)"
                });
                !i(f, "transform") && f.adj ? l() : c = i(f, "animation")
            }
            return a
        }),
        function() {
            define("mixins/SpinnerMixin", ["require", "underscore", "spinjs"], function(t) {
                var e, n, i;
                return i = t("underscore"), e = t("spinjs"), n = {
                    spinnerDefaults: function() {
                        return void 0
                    },
                    initialize: function(t) {
                        return null == t && (t = {}), this.spinnerOptions = {}, i.defaults(this.spinnerOptions, {
                            lines: 13,
                            length: 11,
                            width: 5,
                            radius: 17,
                            corners: 1,
                            rotate: 0,
                            color: "#666",
                            speed: 1,
                            trail: 60,
                            shadow: !1,
                            hwaccel: !1,
                            className: "spinner",
                            zIndex: 2e9,
                            top: "50%",
                            left: "50%"
                        }), void i.extend(this.spinnerOptions, this.spinnerDefaults())
                    },
                    showSpinner: function(t) {
                        return this.spinner = this.spinner || new e(this.spinnerOptions), this.spinner.spin(t)
                    },
                    hideSpinner: function() {
                        return "undefined" == typeof this.spinner ? void("undefined" != typeof console && null !== console && console.error("Spinner does not exist")) : this.spinner.stop()
                    }
                }
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/table_snapshot_creator/TableSnapshotCreatorView", ["require", "jquery", "cns-jquery", "underscore", "canstar_widget", "components/base/BaseView", "./TableSnapshotModel", "text-cns!./tmpl_table_snapshot_creator.html", "text-cns!./tmpl_modal_body.html", "cocktail", "mixins/SpinnerMixin"], function(e) {
                var i, r, o, s, a, l, c, u, d, p, h;
                return i = e("jquery"), u = e("cns-jquery"), h = e("underscore"), c = e("canstar_widget"), r = e("components/base/BaseView"), l = e("./TableSnapshotModel"), p = e("text-cns!./tmpl_table_snapshot_creator.html"), d = e("text-cns!./tmpl_modal_body.html"), o = e("cocktail"), s = e("mixins/SpinnerMixin"), a = function(e) {
                    function r() {
                        return this.copyScriptTag = t(this.copyScriptTag, this), this.close = t(this.close, this), this.updateModal = t(this.updateModal, this), this.onGenerateSnapshot = t(this.onGenerateSnapshot, this), this.onClick = t(this.onClick, this), this.readSnapshotData = t(this.readSnapshotData, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), r.__super__.constructor.apply(this, arguments)
                    }
                    return n(r, e), r.prototype.events = {
                        "click .snapshot-btn": "onClick",
                        "click .generate-snapshot": "onGenerateSnapshot",
                        "click #cpy-text": "copyScriptTag"
                    }, r.prototype.id = "table-snapshot-creator", r.prototype.initialize = function(t) {
                        return null == t && (t = {}), this.template = h.template(p), this.model = new l, this.isSnapshot = this.readSnapshotData(), this.listenTo(this.model, "updated", this.updateModal), r.__super__.initialize.call(this, t)
                    }, r.prototype.render = function() {
                        var t;
                        return t = h.template(d, {
                            model: this.model
                        }), this.$el.html(this.template({
                            modal_body: t
                        })), this
                    }, r.prototype.readSnapshotData = function() {
                        var t, e, n;
                        return t = i('[data-snapshot][src*="table_snapshot-prod"]'), 0 === t.length ? !1 : (e = t.data("snapshot"), n = this.model.decodeState(e), this.model.set(n), !0)
                    }, r.prototype.onClick = function() {
                        return u(".modal", this.el).modal("show"), u(".modal", this.el).one("shown.bs.modal", function(t) {
                            return function() {
                                return t.showSpinner(i(".modal-content", t.el).get(0)), t.trigger("click")
                            }
                        }(this))
                    }, r.prototype.onGenerateSnapshot = function() {
                        var t, e, n, r, o;
                        return this.showSpinner(i(".modal-content", this.el).get(0)), o = this.$el.find("#num_rows").val(), e = this.$el.find("form").serializeArray(), r = null != h.findWhere(e, {
                            name: "monetised_only"
                        }), t = h.chain(e).where({
                            name: "desktop_column"
                        }).pluck("value").value(), n = h.chain(e).where({
                            name: "mobile_column"
                        }).pluck("value").value(), this.model.updateState({
                            numRows: o,
                            desktopColumns: t,
                            mobileColumns: n,
                            monetisedOnly: r
                        })
                    }, r.prototype.updateModal = function() {
                        var t, e;
                        return setTimeout(function(t) {
                            return function() {
                                return t.hideSpinner()
                            }
                        }(this), 1e3), e = h.template(d, {
                            model: this.model
                        }), this.$(".modal-body").html(e), this.model.isValid() || (t = this.model.validationError, "numRows" !== t.field) ? void 0 : (this.$("#num_rows").closest(".form-group").addClass("has-error"), this.$("#num_rows").after("<span class='help-block'>" + t.message + "</span>"))
                    }, r.prototype.close = function() {
                        return this.remove(), this.unbind(), "function" == typeof this.onClose ? this.onClose() : void 0
                    }, r.prototype.copyScriptTag = function() {
                        var t, e;
                        t = document.getElementById("script_tag"), t.focus(), t.setSelectionRange(0, t.value.length);
                        try {
                            return e = document.execCommand("copy")
                        } catch (n) {
                            return e = !1
                        }
                    }, r
                }(r), o.mixin(a, s)
            })
        }.call(this), define("text-cns!components/sponsored_products/tmpl_sponsored_products.html", [], function() {
            return '<div class="sponsored-products-header row">\n  <div class="col-md-6 sponsored-label-container">\n    <span class="sponsored-label">Sponsored</span>\n  </div>\n<% _.each(headers, function(header) { %>\n  <div class="sponsored-products-column col-md-3" data-toggle="tooltip" title="<%= header.tooltip %>">\n    <%= header.text %>\n  </div>\n<% }); %>\n</div>\n<div class="sponsored-products-body row">\n  <%= Templates.prototype.AdSlot({\n    name: \'sponsored-product-1\',\n    adClass: \'ad-sponsored-product\'\n  }) %>\n  <%= Templates.prototype.AdSlot({\n    name: \'sponsored-product-2\',\n    adClass: \'ad-sponsored-product\'\n  }) %>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("components/sponsored_products/SponsoredProductsView", ["require", "jquery", "underscore", "cns-jquery", "canstar_widget", "components/base/BaseView", "libraries/templates", "text-cns!./tmpl_sponsored_products.html"], function(e) {
                var i, r, o, s, a, l, c, u;
                return i = e("jquery"), u = e("underscore"), l = e("cns-jquery"), a = e("canstar_widget"), r = e("components/base/BaseView"), s = e("libraries/templates"), c = e("text-cns!./tmpl_sponsored_products.html"), o = function(e) {
                    function i() {
                        return this.onShown = t(this.onShown, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.id = "sponsored-products", i.prototype.initialize = function(t) {
                        return null == t && (t = {}), null == t.headers && "undefined" != typeof console && null !== console && console.error("Missing header options"), this.template = u.template(c), this.on("shown", this.onShown), i.__super__.initialize.call(this, t)
                    }, i.prototype.render = function() {
                        return this.$el.html(this.template({
                            headers: this.options.headers,
                            Templates: s
                        })), l('[data-toggle="tooltip"]', this.el).tooltip(), this
                    }, i.prototype.onShown = function() {
                        return "undefined" != typeof googletag && null !== googletag && googletag.cmd.push("undefined" != typeof googletag && null !== googletag ? googletag.display("sponsored-product-1") : void 0), "undefined" != typeof googletag && null !== googletag ? googletag.cmd.push("undefined" != typeof googletag && null !== googletag ? googletag.display("sponsored-product-2") : void 0) : void 0
                    }, i
                }(r)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                return function() {
                    return t.apply(e, arguments)
                }
            };
            define("libraries/VariantMap", ["require", "canstar_widget"], function(e) {
                var n, i;
                return i = e("canstar_widget"), n = function() {
                    function e() {
                        this.initialise = t(this.initialise, this)
                    }
                    return e.prototype.initialise = function(t) {
                        return i.faceted_search.variant_map = _.defaults(t.variant_map, i.faceted_search.variant_map)
                    }, e
                }()
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = [].indexOf || function(t) {
                    for (var e = 0, n = this.length; n > e; e++)
                        if (e in this && this[e] === t) return e;
                    return -1
                };
            define("libraries/TrackingDataCollector", ["require", "jquery", "underscore", "backbone", "canstar_widget"], function(n) {
                var i, r, o, s, a;
                return i = n("jquery"), a = n("underscore"), r = n("backbone"), s = n("canstar_widget"), o = function() {
                    function n(n) {
                        this.getOutputString = t(this.getOutputString, this), this.getSortPosition = t(this.getSortPosition, this), this.setInitialDataPoint = t(this.setInitialDataPoint, this), this.getDataPoint = t(this.getDataPoint, this), this.bindEvents = t(this.bindEvents, this), this.getRowById = t(this.getRowById, this), this.buildEvents = t(this.buildEvents, this), this.initialize = t(this.initialize, this);
                        var i;
                        i = s.faceted_search.table, e.call(this.activeOnTables, i) < 0 || this.initialize(n)
                    }
                    var r, o, l, c, u, d;
                    return n.prototype.activeOnTables = ["bluemobile", "blueenergy"], d = {
                        bluemobile: {
                            category: "Mobile SIM-Only"
                        },
                        blueenergy: {
                            category: "Energy Plans"
                        }
                    }, r = {}, l = [], c = {}, u = {}, o = {}, n.prototype.initialize = function(t) {
                        var e;
                        return c = t, u = c.table, e = u.currentlySortedBy, this.setInitialDataPoint("CurrentSort", "" + e.field + "(" + e.value + ") " + (e.direction ? "asc" : "desc")), this.setInitialDataPoint("CurrentTab", "" + u.activeTab), o = {
                            search: c,
                            table: c.table,
                            vent: s.vent,
                            dom: c.$el,
                            selector: c.selector,
                            selector_dom: c.selector.$el
                        }, this.bindEvents(this.buildEvents())
                    }, n.prototype.buildEvents = function() {
                        var t;
                        return t = {
                            common: {
                                vent: {
                                    tabchange: {
                                        name: "CurrentTab",
                                        event: "dynatable:tab_changed",
                                        handler: function(t) {
                                            return function(e) {
                                                return t.trackEvent("Click Tracking", ["Tab: " + e.active_tab]), "" + e.active_tab
                                            }
                                        }(this)
                                    },
                                    sort: {
                                        name: "CurrentSort",
                                        event: "dynatable:sort_changed",
                                        handler: function(t) {
                                            var e, n;
                                            return e = "" + t.column.name + " (" + ((null != (n = t.column) ? n.sort_numeric : void 0) ? "number" : "string") + ") " + t.direction, this.trackEvent("Click Tracking", ["Sort select: " + e]), e
                                        }
                                    }
                                },
                                table: {
                                    popover: {
                                        name: "LastPopover",
                                        event: "popover:open",
                                        handler: function(t) {
                                            return function(e) {
                                                return t.trackEvent("Click Tracking", ["Explainer: Table Header - " + e.dynatableColumn])
                                            }
                                        }(this)
                                    }
                                }
                            },
                            bluemobile: {
                                table: {
                                    proceed: {
                                        name: "ProceedButtonTracking",
                                        event: "detailsbutton:click",
                                        handler: function(t) {
                                            return function(e) {
                                                var n, r, o, s, a, l;
                                                return l = t.getRowById(e.attr("data-id")), l ? (n = l.SUPP.COMPANY_NAME, a = l.SUPP.PRODUCT_NAME, s = t.getSortPosition("id", l.SUPP.id), o = i("span", e).text(), r = ["Lead: " + o, "Company: " + n, "Product: " + a, "Price: " + l["Advertised Price"], "Special:" + (l.Promotions || "N"), "Visible Position: " + s, "Visible Page: " + u.dynatable.settings.dataset.page, "Visible Total: " + u.currentPerPage, "Table Sort: " + t.getDataPoint("CurrentSort"), "Current Tab: " + u.activeTab], t.trackProceedClick(r)) : void 0
                                            }
                                        }(this)
                                    },
                                    prod_link: {
                                        name: "ProceedButtonTracking",
                                        event: "product_link:click",
                                        handler: function(t) {
                                            return function(e) {
                                                var n, i, r, o, s, a;
                                                return a = t.getRowById(e.attr("data-id")), a ? (n = a.SUPP.COMPANY_NAME, s = a.SUPP.PRODUCT_NAME, o = t.getSortPosition("id", a.SUPP.id), r = e.text(), i = ["Product Name Link", "Lead: " + r, "Company: " + n, "Product: " + s, "Price: " + a["Advertised Price"], "Special:" + (a.Promotions || "N"), "Visible Position: " + o, "Visible Page: " + u.dynatable.settings.dataset.page, "Visible Total: " + u.currentPerPage, "Table Sort: " + t.getDataPoint("CurrentSort"), "Current Tab: " + u.activeTab], t.trackProceedClick(i)) : void 0
                                            }
                                        }(this)
                                    }
                                },
                                dom: {
                                    tooltiphover: {
                                        name: "Tooltip Hover",
                                        event: "mouseover",
                                        selector: "div.mobile-data > div.table-tooltip",
                                        handler: function(t) {
                                            return function(e) {
                                                var n, r, o, s, a, l;
                                                return o = i(e.currentTarget).attr("data-id"), n = i(e.currentTarget).parents("td")[0].className.replace(/(\w)-/, function(t) {
                                                    return "" + t[1].toUpperCase() + " "
                                                }), a = t.getRowById(o), s = t.getSortPosition("id", a.SUPP.id), e.preventDefault(), r = ["Average Monthly Data", "Company: " + a.SUPP.COMPANY_NAME, "Product: " + a.SUPP.PRODUCT_NAME, "Product ID:" + a.SUPP.id, "TablePos: " + s + " "], l = setTimeout(function() {
                                                    return t.trackEvent("Hover Viewed", r)
                                                }, 1400), i(e.currentTarget).mouseout(function() {
                                                    return window.clearTimeout(l)
                                                })
                                            }
                                        }(this)
                                    }
                                }
                            },
                            blueenergy: {
                                dom: {
                                    popover: {
                                        name: "Row Popovers",
                                        event: "click",
                                        selector: "td.estimated-yearly-cost a.bluepopover",
                                        handler: function(t) {
                                            return function() {
                                                return t.trackEvent("Click Tracking", ["Explainer: Table Row - Estimated Yearly Cost"])
                                            }
                                        }(this)
                                    }
                                },
                                selector_dom: {
                                    popover: {
                                        name: "Selector Popovers",
                                        event: "click",
                                        selector: "a.bluepopover",
                                        handler: function(t) {
                                            return function(e) {
                                                var n;
                                                return n = i(e.target), 0 === n.children().length ? t.trackEvent("Click Tracking", ["Explainer: Selector  Estimated Yearly Cost"]) : t.trackEvent("Click Tracking", ["Explainer: Selector - Energy Usage"])
                                            }
                                        }(this)
                                    }
                                },
                                table: {
                                    drawer: {
                                        name: "DetailsDrawerOpened",
                                        event: "detailsdrawer:open",
                                        handler: function(t) {
                                            return function(e) {
                                                var n, i, r, o, s;
                                                return i = t.getRowById(e), n = "null" !== (null != (r = i.SUPP) ? r.PLAN_SECOND_NAME : void 0) && (null != (o = i.SUPP) && null != (s = o.PLAN_SECOND_NAME) ? s.length : void 0) > 1 ? i.SUPP.PLAN_SECOND_NAME : i.SUPP.PLAN_NAME, t.trackEvent("Click Tracking", ["Table show more: " + i.SUPP.COMPANY_NAME + " - " + n])
                                            }
                                        }(this)
                                    },
                                    proceed: {
                                        name: "ProceedButtonTracking",
                                        event: "detailsbutton:click",
                                        handler: function(t) {
                                            return function(e) {
                                                var n, r, o, s, a, l, c, d, p, h;
                                                return c = t.getRowById(e.attr("data-id")), c ? (n = c.SUPP.COMPANY_NAME, l = i(c["Estimated Yearly Cost"]).val() || c["Estimated Yearly Cost"], s = "null" !== (null != (d = c.SUPP) ? d.PLAN_SECOND_NAME : void 0) && (null != (p = c.SUPP) && null != (h = p.PLAN_SECOND_NAME) ? h.length : void 0) > 1 ? c.SUPP.PLAN_SECOND_NAME : c.SUPP.PLAN_NAME, a = t.getSortPosition("id", c.SUPP.id), o = i("span", e).text(), r = ["Lead: " + o, "Company: " + n, "Product: " + s, "Price: " + l, "Visible Position: " + a, "Visible Page: " + u.dynatable.settings.dataset.page, "Visible Total: " + u.currentPerPage, "Table Sort: " + t.getDataPoint("CurrentSort"), "Current Tab: " + t.getDataPoint("CurrentTab")], t.trackProceedClick(r)) : void 0
                                            }
                                        }(this)
                                    },
                                    compare: {
                                        name: "Compare Button Clicked",
                                        event: "comparebutton:click",
                                        handler: function(t) {
                                            return function(e) {
                                                return t.trackEvent("Click Tracking", a.extend(["3 Way Compare"], e))
                                            }
                                        }(this)
                                    }
                                }
                            }
                        }
                    }, n.prototype.trackProceedClick = function(t) {
                        return this.trackEvent("Leads Info", t)
                    }, n.prototype.trackEvent = function(t, e) {
                        var n;
                        return null == e && (e = []), _gaq.push(["_trackEvent", t, "" + d[s.faceted_search.table].category + " | " + (null != s && null != (n = s.faceted_search) ? n.profile : void 0), e.join(" | ")])
                    }, n.prototype.getRowById = function(t, e) {
                        var n;
                        return null == e && (e = "id"), n = u.dynatable.settings.dataset.records.find(function() {
                            return function(n) {
                                return n.SUPP[e] === t
                            }
                        }(this))
                    }, n.prototype.bindEvents = function(t) {
                        var n;
                        return n = s.faceted_search.table, e.call(this.activeOnTables, n) >= 0 && (a.each(t.common, function(t) {
                            return function(e, n) {
                                return a.each(e, function(e) {
                                    var i, r;
                                    return "dom" === n ? null != (i = o[n]) ? i.on(e.event, e.selector, t.getOutputString(e)) : void 0 : null != (r = o[n]) ? r.on(e.event, t.getOutputString(e)) : void 0
                                })
                            }
                        }(this)), s.faceted_search.table && t[s.faceted_search.table]) ? a.each(t[s.faceted_search.table], function(t) {
                            return function(e, n) {
                                return a.each(e, function(e) {
                                    var i, r;
                                    return "dom" === n ? null != (i = o[n]) ? i.on(e.event, e.selector, t.getOutputString(e)) : void 0 : null != (r = o[n]) ? r.on(e.event, t.getOutputString(e)) : void 0
                                })
                            }
                        }(this)) : void 0
                    }, n.prototype.getDataPoint = function(t) {
                        return null != t ? r[t] || "Not set yet" : r
                    }, n.prototype.setInitialDataPoint = function(t, e) {
                        return r[t] = e
                    }, n.prototype.getSortPosition = function(t, e) {
                        var n;
                        return n = a.map(c.table.dynatable.settings.dataset.records, function() {
                            return function(n, i) {
                                return n.SUPP[t] === e ? i + 1 : void 0
                            }
                        }(this)), n = a.without(n, void 0), n[0]
                    }, n.prototype.getOutputString = function(t) {
                        var e;
                        return e = function(e) {
                            return function() {
                                return r[t.name] = t.handler.apply(e, arguments)
                            }
                        }(this)
                    }, n
                }()
            })
        }.call(this), define("text-cns!widgets/search/tmpl_container.html", [], function() {
            return '<nav>\n    <div id="container_selector"></div>\n\n    <div class="refine-controls top">\n        <button class="revise">Refine <img class="icon-revise" src="<%= canstar_widget.base_url %>assets/image/filter.png"></button>\n        <a class="clear-facets hide">Clear</a>\n    </div>\n    <div id="container_facets"></div>\n\n    <div class="refine-controls bottom">\n        <button class="revise">Refine <img class="icon-revise" src="<%= canstar_widget.base_url %>assets/image/filter.png"></button>\n        <a class="clear-facets hide">Clear</a>\n    </div>\n</nav>\n\n<div id="results"></div>'
        }), define("text-cns!widgets/search/tmpl_tooltip.html", [], function() {
            return '<div class="tooltip primary" role="tooltip">\n    <div class="tooltip-arrow"></div>\n    <div class="tooltip-inner"></div>\n</div>'
        }), define("text-cns!widgets/search/tmpl_filter_overlay.html", [], function() {
            return '<div class="filter-overlay"></div>'
        }), define("text-cns!widgets/search/tmpl_active_filters.html", [], function() {
            return "<div class=\"active-filters-container\"><span>Filtered by:</span>\n<% _.each(filters, function(filter) { %>\n<div class='active-filter'><%= filter.description %><span company='<%= filter.company %>' value='<%= filter.value %>'data-facet='<%= filter.dataFacet %>' class='active-filter-close'>X</span></div>\n<% }); %>\n</div>"
        }), define("text-cns!widgets/search/tmpl_disclaimer_msgs.html", [], function() {
            return '<div class="row">\r\n<% _.each(items, function(item) {  %>\r\n    <div class="notice-box-container col-xs-12 col-sm-6">\r\n        <div class="alert alert-warning row" data-disclaimer="<%= item.name %>">\r\n            <a href="#" class="close remove-disclaimer-btn" data-dismiss="alert" aria-label="close"  data-disclaimer="<%= item.name %>">&times;</a>\r\n            <%= item.content %>\r\n        </div>\r\n    </div>\r\n<% }); %>\r\n</div>\r\n'
        }), define("text-cns!widgets/search/tmpl_table_snapshot.html", [], function() {
            return '<div class="row row-offcanvas row-offcanvas-left">\n    <div class="col-xs-12">\n        <div class="row">\n            <div class="col-xs-12 pull-right data-updated">\n                <span>Data updated <%= dataUpdated %></span>\n            </div>\n        </div>\n        <div id="results"></div>\n    </div>\n    <div class="col-xs-12 table-snapshot-footer">\n        <div class="row">\n            <div class="col-xs-1 canstar-logo">\n              <a rel="dofollow" href="<%= tableSnapshotModel.get(\'tableUrl\') %>">\n                  <img src="https://www.canstar.com.au/wp-content/themes/canstar/dist/images/logo.png" width="26" alt="Canstar">\n              </a>\n            </div>\n            <div class="col-xs-11 padding-none">\n                <div class="col-xs-7 table-url">\n                    <a rel="dofollow" href="<%= tableSnapshotModel.get(\'tableUrl\') %>">View all Canstar rated <%= canstar_widget.faceted_search.category && canstar_widget.faceted_search.category.toLowerCase() %> products</a>\n                </div>\n                <div class="col-xs-5 disclosures">\n                    <a href="#footer-disclaimer">View disclosures</a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/gold/tmpl_container.html", [], function() {
            return '<% if (show_table_snapshot_creator) { %>\n<div class="row">\n    <div class="col-xs-12 table-snapshot-creator-container"></div>\n</div>\n<% } %>\n<div class="row row-offcanvas row-offcanvas-left">\n    <div class="col-sm-4 col-md-3 sidebar-offcanvas bg-gradient-xs">\n        <button class="close-facets btn btn-primary full-width hidden-sm hidden-md hidden-lg margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n        <nav>\n            <div id="container_selector" class="hidden-xs"></div>\n            <div id="container_facets"></div>\n        </nav>\n        <button class="close-facets btn btn-primary full-width hidden-sm hidden-md hidden-lg margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n    </div>\n    <div class="col-sm-8 col-md-9">\n        <% if (show_sponsored_products) { %>\n            <div class="hidden-xs hidden-sm col-md-12">\n                <div class="sponsored-products-container"></div>\n            </div>\n        <% } %>\n        <div class="row">\n            <% var show_star_popover = (typeof show_star_popover !== \'undefined\' && show_star_popover === true);\n               var mobile_size = (show_star_popover ? \'col-xs-10\' : \'col-xs-12\');\n            %>\n            <div class="<%= mobile_size %> col-md-6 margin-bottom-10">\n                <h4 class="record-count">\n                    <span class="count-text"></span>\n                    <span class="filtered-text"></span>\n                </h4>\n                <span class="filtered"></span>\n            </div>\n            <% if(show_star_popover) { %>\n            <div class="col-xs-2 hidden-md hidden-lg">\n                <div class="star-modal-container"></div>\n            </div>\n            <% } %>\n            <div class="col-md-6 margin-bottom-10">\n                <div id="sort-container-desktop"></div>\n            </div>\n        </div>\n        <button class="btn filter-button btn-wide btn-default hidden-sm hidden-md hidden-lg pull-left"><i class="fa fa-filter"></i> Filter</button>\n        <div style="display:none;" id=\'providerNoResults\'></div>\n        <div id="results"></div>\n        <%= Templates.prototype.AdSlot({name: \'bottom-lb\', adClass: \'ad-leaderboard\'}) %>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/gold/tmpl_active_filters.html", [], function() {
            return "<div class=\"active-filters-container\">\n<% _.each(filters, function(filter) { %>\n<div class='active-filter'><%= filter.active_filter_name %><span company='<%= filter.company %>' value='<%= _.escape(filter.value) %>'data-facet='<%= _.escape(filter.dataFacet) %>' class='active-filter-close'><i class=\"fa fa-times\"></i></span></div>\n<% }); %>\n<a class=\"clear-filters\">clear all</a>\n</div>\n"
        }), define("text-cns!widgets/search/themes/blue/tmpl_container.html", [], function() {
            return '<div id="container_selector"></div>\n<div class="disclaimer-container"></div>\n<div class="row table-controls-container">\n    <div class="col-xs-12 filtered"></div>\n    <div class="sort-information-container hidden">\n        <h5 class="sort-title"></h5>\n        <a id="popoversort" class="small-text bluepopover" tabindex="0" role="button" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" style="display: none;"></a>\n    </div>\n    <% var show_star_popover = (typeof show_star_popover !== \'undefined\' && show_star_popover === true);\n       var mobile_size = (show_star_popover ? \'col-xs-10\' : \'col-xs-12\');\n    %>\n    <div class="table-buttons-container col-sm-6 margin-bottom-10 hidden-xs">\n        <button class="btn filter-button btn-primary pull-left margin-left-10 hidden-xs"><i class="fa fa-filter"></i>&nbsp; Filter Results</button>\n        <div class=\'btn btn-white btn-refresh hidden\' id="btn-refresh" title=\'Clear all filters\'>\n            <span class=\'hidden-sm\'>Reset table</span>\n            <i class=\'fa fa-refresh\'></i>\n        </div>\n    </div>\n    <div class="record-count-container <%= mobile_size %> col-md-4">\n        <h3 class="record-count">\n            <span class="count-text"></span>\n        </h3>\n    </div>\n    <div id="sort-container-desktop" class="pull-right"></div>\n\n</div>\n\n<div class="row row-offcanvas row-offcanvas-left">\n    <div class="col-xs-4 sidebar-offcanvas bg-gradient">\n        <button class="close-facets btn btn-primary full-width margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n        <nav>\n\n            <div id="container_facets"></div>\n        </nav>\n        <button class="close-facets btn btn-primary full-width margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n    </div>\n    <div class="col-xs-12">\n        <button class="btn filter-button btn-wide btn-default hidden-sm hidden-md hidden-lg pull-left margin-top-5"><i class="fa fa-filter"></i> Filter</button>\n        <div id="results" class="<%=canstar_widget.faceted_search.table%>"></div>\n        <div class="dynamic-content--disclaimer meta-disclaimer"></div>\n        <div class="ads ad-leaderboard">\n            <div id=\'bottom-lb\' class="center">\n                <span class="ad-title">Advertisement</span>\n                <% if( canstar_widget.faceted_search.distributor === \'canstar\' ) { %>\n                    <script type=\'text/javascript\'>\n                        if (typeof googletag !== \'undefined\') {\n                            googletag.cmd.push(function() { googletag.display(\'bottom-lb\'); });\n                        }\n                    </script>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/tmpl_container.html", [], function() {
            return '<div class="row">\n    <div class="col-xs-12 col-sm-6 margin-bottom-10">\n        <h3 class="record-count">\n            <span class="count-text"></span>\n            <span class="filtered-text"></span>\n        </h3>\n        <span class="filtered"></span>\n    </div>\n    <div class="col-sm-6 margin-bottom-10">\n        <div id="sort-container-desktop"></div>\n    </div>\n</div>\n<div class="row row-offcanvas row-offcanvas-left">\n    <div class="col-sm-4 col-md-3 sidebar-offcanvas bg-gradient-xs">\n        <button class="close-facets btn btn-primary full-width hidden-sm hidden-md hidden-lg margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n        <nav>\n            <div id="container_facets"></div>\n        </nav>\n        <div class="disclaimer hidden-xs">\n        * This rating is for overall customer satisfaction with the brand, and should not be confused with an individual product rating.<br>\n        ^ By clicking on a \'details\' button, you will leave Canstar Blue and be taken to our referral partner to compare. You agree that Canstar Blue\'s <a href="/terms-and-conditions/#referralterms" target="_blank">Referral Terms</a> apply to this referral. If you click on a brand that our referral partner does not cover, you will be taken to a brand page on Canstar Blue. Models & pricing at <a href="http://www.appliancesonline.com.au/" target="_blank" rel="nofollow">Appliances Online</a>. Canstar Blue\'s <a href="/terms-and-conditions/" target="_blank">Terms and Conditions</a> apply.\n        </div>\n\n        <button class="close-facets btn btn-primary full-width hidden-sm hidden-md hidden-lg margin-top-15 margin-bottom-15">View results <i class="fa fa-caret-right"></i></button>\n    </div>\n    <div class="col-sm-8 col-md-9">\n        <button class="btn filter-button btn-wide btn-default hidden-sm hidden-md hidden-lg pull-left"><i class="fa fa-filter"></i> Filter</button>\n        <div id="results"></div>\n        <div class="disclaimer-mobile hidden-sm hidden-md hidden-lg">\n        * This rating is for overall customer satisfaction with the brand, and should not be confused with an individual product rating.<br>\n        ^ By clicking on a \'details\' button, you will leave Canstar Blue and be taken to our referral partner to compare. You agree that Canstar Blue\'s <a href="/terms-and-conditions/#referralterms" target="_blank">Referral Terms</a> apply to this referral. If you click on a brand that our referral partner does not cover, you will be taken to a brand page on Canstar Blue. Models & pricing at <a href="http://www.appliancesonline.com.au/" target="_blank" rel="nofollow">Appliances Online</a>. Canstar Blue\'s <a href="/terms-and-conditions/" target="_blank">Terms and Conditions</a> apply.\n        </div>\n    </div>\n</div>\n'
        }), define("text-cns!widgets/search/themes/blue_product/tmpl_active_filters.html", [], function() {
            return "<div class=\"active-filters-container\">\n<% _.each(filters, function(filter) { %>\n<div class='active-filter'><%= filter.description %><span company='<%= filter.company %>' value='<%= filter.value %>'data-facet='<%= filter.dataFacet %>' class='active-filter-close'><i class=\"fa fa-times\"></i></span></div>\n<% }); %>\n<a class=\"clear-filters\">clear all</a>\n</div>"
        }), define("text-cns!widgets/search/themes/blue_brand/tmpl_container.html", [], function() {
            return '<div id="results"></div> \r\n'
        }),
        function() {
            define("widgets/search/templates", ["require", "text-cns!widgets/search/tmpl_container.html", "text-cns!widgets/search/tmpl_tooltip.html", "text-cns!widgets/search/tmpl_filter_overlay.html", "text-cns!widgets/search/tmpl_active_filters.html", "text-cns!widgets/search/tmpl_disclaimer_msgs.html", "text-cns!widgets/search/tmpl_table_snapshot.html", "text-cns!widgets/search/themes/gold/tmpl_container.html", "text-cns!widgets/search/themes/gold/tmpl_active_filters.html", "text-cns!widgets/search/themes/blue/tmpl_container.html", "text-cns!widgets/search/themes/blue/dropdown_sort/tmpl_dropdown_container.html", "text-cns!widgets/search/themes/blue_product/tmpl_container.html", "text-cns!widgets/search/themes/blue_product/tmpl_active_filters.html", "text-cns!widgets/search/themes/blue_brand/tmpl_container.html"], function(t) {
                return t("text-cns!widgets/search/tmpl_container.html"), t("text-cns!widgets/search/tmpl_tooltip.html"), t("text-cns!widgets/search/tmpl_filter_overlay.html"), t("text-cns!widgets/search/tmpl_active_filters.html"), t("text-cns!widgets/search/tmpl_disclaimer_msgs.html"), t("text-cns!widgets/search/tmpl_table_snapshot.html"), t("text-cns!widgets/search/themes/gold/tmpl_container.html"), t("text-cns!widgets/search/themes/gold/tmpl_active_filters.html"), t("text-cns!widgets/search/themes/blue/tmpl_container.html"), t("text-cns!widgets/search/themes/blue/dropdown_sort/tmpl_dropdown_container.html"), t("text-cns!widgets/search/themes/blue_product/tmpl_container.html"), t("text-cns!widgets/search/themes/blue_product/tmpl_active_filters.html"), t("text-cns!widgets/search/themes/blue_brand/tmpl_container.html")
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("widgets/search/search", ["jquery", "cns-jquery", "underscore", "backbone", "components/backbone/AppView", "components/base/View", "libraries/Loader", "libraries/Canstar", "libraries/Leads", "widgets/search/Router", "bower_components/Backbone.Facetr/dist/backbone.facetr", "./collections/ProductCollection", "components/dropdown_sort/DropdownSort", "components/dynatable/Dynatable", "components/facets/Facets", "components/selector/selector", "components/select/OptionModel", "components/lead/lead", "libraries/Mobile", "components/compare_shortlist/compare_shortlist", "components/cns_overlay/cns_overlay", "components/star_popover/StarPopoverView", "components/star_popover/StarModalView", "components/table_snapshot_creator/TableSnapshotCreatorView", "components/sponsored_products/SponsoredProductsView", "canstar_widget", "libraries/Auth", "libraries/templates", "libraries/VariantMap", "libraries/TrackingDataCollector", "libraries/Text", "widgets/search/templates", "jquery.lazyload"], function(e, i, r, o, s, a, l, c, u, d, p, h, f, m, g, v, _, y, b, w, P, S, C, x, k, T, L, E, A, N, O) {
                var D;
                return D = function(a) {
                    function l() {
                        return this.fixServiceParams = t(this.fixServiceParams, this), this.saveFacets = t(this.saveFacets, this), this.showResetButton = t(this.showResetButton, this), this.onRefreshClick = t(this.onRefreshClick, this), this.reloadActiveFilters = t(this.reloadActiveFilters, this), this.getActiveFilters = t(this.getActiveFilters, this), this.onRemoveDisclaimer = t(this.onRemoveDisclaimer, this), this.saveSnapshotState = t(this.saveSnapshotState, this), this.removeUnnecessaryScrollbars = t(this.removeUnnecessaryScrollbars, this), this.showLeadModal = t(this.showLeadModal, this), this.initLeadModal = t(this.initLeadModal, this), this.closeAllActiveFilters = t(this.closeAllActiveFilters, this), this.showFilterButton = t(this.showFilterButton, this), this.hideFilterButton = t(this.hideFilterButton, this), this.renderDisclaimerMsgs = t(this.renderDisclaimerMsgs, this), this.renderRecordCount = t(this.renderRecordCount, this), this.onActiveFilterCloseClick = t(this.onActiveFilterCloseClick, this), this.closeLastFilter = t(this.closeLastFilter, this), this.renderActiveFilters = t(this.renderActiveFilters, this), this.renderTable = t(this.renderTable, this), this.applyMonetisedFilterOverride = t(this.applyMonetisedFilterOverride, this), this.resetDropdownLabel = t(this.resetDropdownLabel, this), this.hasFilterRecords = t(this.hasFilterRecords, this), this.getFilterRecordCount = t(this.getFilterRecordCount, this), this.filterTable = t(this.filterTable, this), this.filterRadioFacets = t(this.filterRadioFacets, this), this._renderAfterFilterChange = t(this._renderAfterFilterChange, this), this.onClearFacetFilters = t(this.onClearFacetFilters, this), this.onReviseClick = t(this.onReviseClick, this), this.getStoredSelectorParams = t(this.getStoredSelectorParams, this), this.updateParams = t(this.updateParams, this), this.updateShortlist = t(this.updateShortlist, this), this.updateWidget = t(this.updateWidget, this), this.preventTableClicks = t(this.preventTableClicks, this), this.bindEvents = t(this.bindEvents, this), this.removeDefaultFilter = t(this.removeDefaultFilter, this), this.applyDefaultFilter = t(this.applyDefaultFilter, this), this.setInitialFacet = t(this.setInitialFacet, this), this.setInitialFacets = t(this.setInitialFacets, this), this.getSelectorTableName = t(this.getSelectorTableName, this), this.configureFacets = t(this.configureFacets, this), this.configureDropdownSort = t(this.configureDropdownSort, this), this.configureTableSnapshotCreator = t(this.configureTableSnapshotCreator, this), this.configureSponsoredProducts = t(this.configureSponsoredProducts, this), this.configureTable = t(this.configureTable, this), this.configureSelector = t(this.configureSelector, this), this.configureCompareShortlist = t(this.configureCompareShortlist, this), this.configureWidget = t(this.configureWidget, this), this.render = t(this.render, this), this.toggleFacetDisplay = t(this.toggleFacetDisplay, this), this.onCloseFacets = t(this.onCloseFacets, this), this.updateMobileSortInfo = t(this.updateMobileSortInfo, this), this.sendTableProfileGA = t(this.sendTableProfileGA, this), this.onShown = t(this.onShown, this), this.setupEventListeners = t(this.setupEventListeners, this), this.initialize = t(this.initialize, this), this.events = t(this.events, this), l.__super__.constructor.apply(this, arguments)
                    }
                    return n(l, a), l.prototype.id = "faceted-search", l.prototype.path = "widgets/search", l.prototype.js_path = "faceted_search", l.prototype.default_theme = "gold", l.prototype.templates = {
                        container: "!!tmpl_container.html",
                        tooltip: "!!tmpl_tooltip.html",
                        filter_overlay: "!!tmpl_filter_overlay.html",
                        active_filters: "!!tmpl_active_filters.html",
                        disclaimers: "!!tmpl_disclaimer_msgs.html",
                        no_prov_results: "!!tmpl_provider_no_result.html"
                    }, l.prototype.events = function() {
                        return {
                            "click .revise": "onReviseClick",
                            "click .clear-facets": "onClearFacetFilters",
                            "click .filter-button": "onFilterButtonClick",
                            "click .close-facets": "onCloseFacets",
                            "click .active-filter-close": "onActiveFilterCloseClick",
                            "click .clear-filters": "closeAllActiveFilters",
                            "click .clear-last-filter": "closeLastFilter",
                            "click .remove-disclaimer-btn": "onRemoveDisclaimer",
                            "click .table-buttons-container .btn-refresh": "onRefreshClick"
                        }
                    }, l.prototype.initialize = function() {
                        var t;
                        return this.container = e("#" + T.faceted_search.container), 0 === this.container.length && "undefined" != typeof console && null !== console && console.error("Cannot find faceted search container"), T.faceted_search.table_switch && (T.faceted_search = this.configureTableSwitch(T.faceted_search)), this.options.selector_params = null != T.selector_params ? T.selector_params : {}, this.appView = new s, this.vent = T.vent = r.extend({}, o.Events), t = T.faceted_search.category || "", c.prototype.validateselector(t).length > 0 && alert(c.prototype.validateselector(t)), this.setupEventListeners(), this.isConfigured = e.Deferred(), this.router = new d({
                            appView: this.appView,
                            rootView: this,
                            rootContainer: this.container
                        }), e(function() {
                            return o.history.start({
                                root: T.faceted_search.root_url
                            })
                        }), this.configureWidget(!0), b.prototype.setMobileViewPort()
                    }, l.prototype.setupEventListeners = function() {
                        return this.on("shown", this.onShown), this.templates.filter_overlay ? (this.filterOverlay = e(this.templates.filter_overlay()), this.filterOverlay.on("click", this.onCloseFacets)) : void 0
                    }, l.prototype.onShown = function(t) {
                        var e;
                        return t ? this.sendTableProfileGA() : null != (e = this.table) ? e.refreshProductListFromLocalStorage() : void 0
                    }, l.prototype.sendTableProfileGA = function() {
                        return e.when(this.isConfigured).then(function(t) {
                            return function() {
                                var e, n, i;
                                return t.isExcludedComponent("selector") ? void 0 : (n = t.getStoredSelectorParams(), e = null != n && null != (i = n.profile) ? i.value : void 0, e ? c.prototype.gaTrackEvent({
                                    event_name: "<Category> Table Profile",
                                    event_type: "profile",
                                    event_label: e
                                }) : void("undefined" != typeof console && null !== console && console.error("Selector parameters profile does not exist - ", n)))
                            }
                        }(this))
                    }, l.prototype.updateMobileSortInfo = function() {
                        var t, e, n, o, s, a, l, c, u, d, p, h, f;
                        return null != (null != (a = this.table) && null != (l = a.dynatable) && null != (c = l.settings) && null != (u = c.dataset) ? u.sortsKeys : void 0) && null != (null != (d = this.tableConfig) ? d.field_defs : void 0) && (n = this.table.dynatable.settings.dataset.sortsKeys[0], t = (null != (p = this.tableConfig) && null != (h = p.field_defs) ? h[n] : void 0) || r.findWhere(null != (f = this.tableConfig) ? f.field_defs : void 0, {
                            sort_as: n
                        }), e = i(this.$el).find(".sort-information-container"), s = e.find(".sort-title"), o = e.find("#popoversort"), "function" == typeof o.popover && o.popover({
                            html: !0
                        }), o.hide(), o.parent().addClass("hidden"), (null != t ? t.sort_popover : void 0) === !0) ? (o.attr("data-column", n), o.attr("data-content", t.popover), o.html(t.popover_title), s.html("Currently sorted by: " + n), o.show(), o.parent().removeClass("hidden")) : void 0
                    }, l.prototype.onFilterButtonClick = function(t) {
                        var n;
                        return n = e(t.target), this.toggleFacetDisplay(), e("body").append(this.filterOverlay)
                    }, l.prototype.onCloseFacets = function() {
                        return this.toggleFacetDisplay(), this.filterOverlay.detach()
                    }, l.prototype.toggleFacetDisplay = function() {
                        return e("body").toggleClass("sidebar-offcanvas-active"), this.$(".sidebar-offcanvas").toggleClass("active")
                    }, l.prototype.render = function() {
                        var t, n, r, o, s, a, l, u, d, p, h, f, m, g, v, _, y, b, w, P, S;
                        return r = null != (a = this.tableConfig) && null != (l = a.components) && null != (g = l.dynatable) ? g.star_popover : void 0, n = null != this.sponsoredProducts, o = null != this.tableSnapshotCreator, this.$el.html(this.templates.container({
                            show_star_popover: r,
                            table: T.faceted_search.table,
                            Templates: E,
                            show_sponsored_products: n,
                            show_table_snapshot_creator: o
                        })), r && this.$(".star-modal-container").append(new C({
                            profileName: T.faceted_search.profile
                        }).render().el), n && this.appView.showView(this.sponsoredProducts, this.$(".sponsored-products-container")), this.appView.showView(this.table, e("#results", this.el)), this.facets.isMonetisedFilterOverrideEnabled() && (t = this.facets.getMonetisedFilterTitle(), this.$("#providerNoResults").html(this.templates.no_prov_results({
                            filterName: t
                        }))), this.isExcludedComponent("selector") || this.appView.showView(this.selector, e("#container_selector", this.el)), null != this.compareShortlist && this.appView.showView(this.compareShortlist, this.$el, !1, !0), this.isExcludedComponent("facets") || this.appView.showView(this.facets, e("#container_facets", this.el)), null != this.dropdownSort && this.appView.showView(this.dropdownSort, e("#sort-container-desktop", this.el), !1, !1), null != (null != (v = this.tableConfig) && null != (_ = v.components) ? _.disclaimers : void 0) && this.renderDisclaimerMsgs(this.tableConfig.components.disclaimers), null != (null != (y = this.tableConfig) && null != (b = y.components) && null != (w = b.dynatable) ? w.bottom_disclaimer : void 0) && e(".meta-disclaimer", this.el).html(null != (P = this.tableConfig) && null != (S = P.components) && null != (u = S.dynatable) ? u.bottom_disclaimer : void 0), o && this.appView.showView(this.tableSnapshotCreator, e(".table-snapshot-creator-container", this.el)), this.should_render_itself === !0 && this.appView.showView(this, this.container, !1, !0), this.renderActiveFilters(), this.$el.hide().fadeIn(500, function(t) {
                            return function() {
                                return t.$el.removeClass("loading"), e("div.lazy", t.$el).lazyload(), t.vent.trigger("search:rendered"), c.prototype.timer(window.location, "end")
                            }
                        }(this)), null != (d = window.cns) && null != (p = d.$(".bluepopover[data-toggle=popover]")) && "function" == typeof p.popover && p.popover({
                            html: !0
                        }), this.hasOwnProperty("compareShortlist") && this.compareShortlist && this.compareShortlist.render(), (null != (h = this.tableConfig) && null != (f = h.components) && null != (m = f.dynatable) ? m.use_external_bootstrap : void 0) !== !1 && i("body").find(".fs-info-tooltip").tooltip({
                            template: this.templates.tooltip()
                        }), s = new N(this)
                    }, l.prototype.configureWidget = function(t) {
                        var n, i, o, s, a;
                        return c.prototype.timer(window.location, "start"), this.selector && this.selector.dispose(), this.table && this.table.dispose(), this.compareShortlist && this.compareShortlist.close(), t || null != (a = this.tableSnapshotCreator) && a.close(), this.vent.unbind(), e("body").addClass("canstar-search"), this.$el.addClass("loading"), i = new P({
                            text: "finding products that match your search",
                            duration: null,
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), this.vent.on("search:rendered", function() {
                            return i.hide()
                        }), t && (s = window.location.search.replace(/^\?/, "").split("&"), e.each(s, function() {
                            return function(t, e) {
                                var n;
                                return n = e.split("="), 2 === n.length && (n[1] = decodeURIComponent(n[1]), -1 !== n[1].indexOf("+") && (n[1] = n[1].replace(/\+/g, " ")), "referrer" === n[0] && "nzme" === n[1]) ? T.faceted_search.preselect = "Loan Type:Floating Rate" : void 0
                            }
                        }(this))), n = this.isExcludedComponent("facets") ? 2 : 3, this.configured = r.after(n, function(e) {
                            return function() {
                                return e.isConfigured.resolve(), e.isExcludedComponent("facets") || t && e.facetr && e.setInitialFacets(), e.bindEvents(), e.render(t)
                            }
                        }(this)), o = null != T.faceted_search.distributor && null != T.faceted_search.table ? "" + T.base_url + "api_v2/facets/table_config?distributor=" + T.faceted_search.distributor + "&table=" + T.faceted_search.table : "" + T.base_url + "api/facets/table_config?collection=" + T.faceted_search.collection, e.getJSON(o, function(t) {
                            return function(n) {
                                return t.tableConfig = n, A.prototype.initialise(n), t.configureSelector(n).then(function() {
                                    var i, r;
                                    return i = e.extend({}, T.faceted_search, {
                                        base_url: T.base_url
                                    }), null == i.collection && null != i.distributor && null != i.table && (i.collection = "" + i.distributor + "_" + i.table), r = e.param(i), t.configureFacets(r).then(function(e) {
                                        return t.configureDropdownSort(), t.configureTable(n, e, r)
                                    })
                                })
                            }
                        }(this)), this.configureCompareShortlist(), this.configureSponsoredProducts(), this.configureTableSnapshotCreator()
                    }, l.prototype.configureCompareShortlist = function() {
                        return T.faceted_search.hasOwnProperty("compare_enabled") && T.faceted_search.compare_enabled === !0 ? (this.compareShortlist = new w, this.listenTo(this.compareShortlist, "forciblyAddProducts", function(t) {
                            return function(e) {
                                return t.table.trigger("forciblyAddProducts", e)
                            }
                        }(this)), this.listenTo(this.compareShortlist, "removeProductFromCompare", function(t) {
                            return function(e, n, i) {
                                return t.table.trigger("removeProductFromCompare", e, n, i)
                            }
                        }(this))) : void 0
                    }, l.prototype.configureSelector = function(t) {
                        var n, i;
                        return this.selector = new v({
                            theme_path: this.theme_path,
                            theme_config: this.theme_config,
                            table_config: t,
                            stored_params: this.getStoredSelectorParams(),
                            selector_params: this.options.selector_params,
                            preselect: null != (i = T.faceted_search) ? i.selector_preselect : void 0,
                            is_excluded: this.isExcludedComponent("selector"),
                            distributor: T.faceted_search.distributor,
                            table: this.getSelectorTableName()
                        }), n = e.Deferred(), this.selector.on("init", function(t) {
                            return function() {
                                return t.updateParams(t.selector.get_param_values()), n.resolve(), t.configured()
                            }
                        }(this)), n
                    }, l.prototype.configureTable = function(t, e, n) {
                        var i, o, s, a, l, c;
                        return i = null, this.hasOwnProperty("compareShortlist") && this.compareShortlist && (i = this.compareShortlist), l = T.faceted_search.profile, a = t.profiles[l], a || ("undefined" != typeof console && null !== console && console.error("Profile " + l + " does not exist in defined list of table profiles - " + r.keys(t.profiles)), c = this.fixServiceParams(t.profiles, l, n), n = c.serviceParams, a = c.profile, T.faceted_search.profile = c.profileName), o = null != T.faceted_search.distributor && null != T.faceted_search.table ? "" + T.base_url + "api_v2/facets/data?" + n : "" + T.base_url + "api/facets/data?" + n, s = new h(null, {
                            url: o,
                            useProductModel: this.isSimilarProductsEnabled(t)
                        }), s.fetch({
                            success: function(n) {
                                return function(r) {
                                    var o, s, l, c;
                                    return o = e.product_etl_configs, r.addFrontendFilters(n.facetConfig.facets), n.table = new m({
                                        collection: r,
                                        configs: {
                                            table: t,
                                            profile: a,
                                            product_etl_configs: o
                                        },
                                        profileName: T.faceted_search.profile,
                                        compareShortlist: i,
                                        theme_path: n.theme_path,
                                        theme_config: n.theme_config
                                    }), n.facetr = p(r), n.listenTo(n.table, "leadModalClicked", n.initLeadModal), (null != (s = n.tableConfig) && null != (l = s.components) && null != (c = l.dynatable) ? c.record_count_above_widget : void 0) !== !1 && n.listenTo(n.table, "afterTableUpdate", n.renderRecordCount), n.table.on("constructed", function() {
                                        return n.configured()
                                    })
                                }
                            }(this)
                        })
                    }, l.prototype.isSimilarProductsEnabled = function(t) {
                        var e;
                        return null != (e = t.similar_products_enabled) ? e : !1
                    }, l.prototype.configureSponsoredProducts = function() {
                        var t;
                        return (null != (t = T.faceted_search.sponsored_products) ? t.enabled : void 0) === !0 ? this.sponsoredProducts = new k({
                            headers: T.faceted_search.sponsored_products.headers
                        }) : void 0
                    }, l.prototype.configureTableSnapshotCreator = function() {
                        return T.faceted_search.create_snapshot === !0 ? (this.tableSnapshotCreator = new x, this.listenTo(this.tableSnapshotCreator, "click", function(t) {
                            return function() {
                                return t.tableSnapshotCreator.model.updateState(t.saveSnapshotState())
                            }
                        }(this))) : void 0
                    }, l.prototype.configureDropdownSort = function() {
                        var t, e;
                        return this.dropdownSort = new f({
                            defaultSorts: null != (t = this.tableConfig.components) && null != (e = t.dynatable) ? e.default_sorts : void 0,
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        })
                    }, l.prototype.configureFacets = function(t) {
                        var n, i, r;
                        return i = T.base_url, n = null != T.faceted_search.distributor && null != T.faceted_search.table ? "" + i + "api_v2/facets/config?distributor=" + T.faceted_search.distributor + "&table=" + T.faceted_search.table : "" + i + "api/facets/config?collection=" + T.faceted_search.collection, r = null != T.faceted_search.distributor && null != T.faceted_search.table ? "" + i + "api_v2/facets?" + t : "" + i + "api/facets?" + t, e.getJSON(n, function(e) {
                            return function(n) {
                                var s;
                                return e.facetConfig = n, e.isExcludedComponent("facets") ? void 0 : (s = new o.Model({}, {
                                    url: r
                                }), s.fetch({
                                    success: function(r) {
                                        var s;
                                        return s = {
                                            model: r,
                                            companies: new o.Collection({}, {
                                                url: "" + i + "api/facets/companies?" + t,
                                                model: _
                                            }),
                                            facetsConfig: n,
                                            theme_path: e.theme_path,
                                            theme_config: e.theme_config
                                        }, e.facets = e.buildFacets(s), e.facets.on("constructed", function() {
                                            return e.configured()
                                        })
                                    }
                                }))
                            }
                        }(this))
                    }, l.prototype.getSelectorTableName = function() {
                        var t;
                        if (t = void 0, null != T.faceted_search.distributor)
                            if (null != T.faceted_search.selector_table_override) t = T.faceted_search.selector_table_override;
                            else if (null != T.faceted_search.table) t = T.faceted_search.table;
                        else {
                            if (null == T.faceted_search.dist_collection) throw new Error("No table name defined. For non-distributed vertical comparison pages, canstar_widget.faceted_search.dist_collection should be used, otherwise canstar_widget.faceted_search.table or canstar_widget.faceted_search.selector_table_override.");
                            t = T.faceted_search.dist_collection
                        }
                        return t
                    }, l.prototype.setInitialFacets = function() {
                        var t, n, i, o, s, a, l, c, u, d, p, h, f;
                        a = [], u = this.facetConfig.facets;
                        for (i in u) {
                            n = u[i], d = n.values;
                            for (s in d) o = d[s], o.preselected && a.push("" + i + ":" + s)
                        }
                        return t = T.faceted_search.preselect, t && ("string" == typeof t && (t = [t]), e.merge(a, t)), r.extend(a, this.selector.getFacetPreselects()), null != (null != T && null != (p = T.faceted_search) ? p.variant_map : void 0) && (l = 0, null != (null != T && null != (h = T.faceted_search) ? h.details_variant : void 0) && (l = T.faceted_search.details_variant), null != (null != (f = T.faceted_search.variant_map[l]) ? f.preselect : void 0) && (c = r.flatten([T.faceted_search.variant_map[l].preselect]), a = e.merge(a, c))), r.each(a, function(t) {
                            return function(e) {
                                return t.setInitialFacet(e)
                            }
                        }(this)), this.applyDefaultFilter()
                    }, l.prototype.setInitialFacet = function(t) {
                        var e, n, i, r;
                        return r = (null != t ? t.split(":") : void 0) || ("undefined" != typeof console && null !== console ? console.error("facetFilter not set correctly") : void 0), e = r[0], n = r[1], e && n && (i = this.facets.setDefaultFilter(e, n)) ? ("filter_radio_button_group" === i.template ? this.facets.updateRadioActiveFilters(i, e) : this.facets.updateActiveFilters(i), null != T.faceted_search.distributor && null != T.faceted_search.table ? this.facetr.facet("facets." + e).value(n, "or") : this.facetr.facet("FACETS." + e).value(n, "or")) : void 0
                    }, l.prototype.applyDefaultFilter = function() {
                        var t, e;
                        return (null != (e = this.tableConfig) ? e.default_filter : void 0) === !0 ? ("undefined" != typeof console && null !== console && console.log("Applying default filter"), t = this.facetr.collection(), t.calcDefaultFilteredProducts(), this.facetr.facet("defaultFilter").value(!0), this.defaultFilterApplied = !0) : void 0
                    }, l.prototype.removeDefaultFilter = function() {
                        var t;
                        return (null != (t = this.tableConfig) ? t.default_filter : void 0) === !0 && this.defaultFilterApplied === !0 ? ("undefined" != typeof console && null !== console && console.log("Removing default filter"), this.facetr.facet("defaultFilter").remove(), this.defaultFilterApplied = !1) : void 0
                    }, l.prototype.buildFacets = function(t) {
                        return new g(t)
                    }, l.prototype.bindEvents = function() {
                        return this.vent.on("selector:changed", this.updateShortlist), this.vent.on("selector:changed", this.updateWidget), this.vent.on("selector:changed", this.getActiveFilters), this.vent.on("search:rendered", this.reloadActiveFilters), this.vent.on("selector:changing", this.preventTableClicks), this.vent.on("selector:changed", this.preventTableClicks), this.vent.on("dynatable:sort_changed", this.updateMobileSortInfo), this.vent.on("search:rendered", this.updateMobileSortInfo), this.table.on("row_excluded", this.showResetButton), this.isExcludedComponent("facets") ? void 0 : (this.facets.on("filter:added filter:removed", this.filterTable), this.facets.on("radiofilter:changed", this.filterRadioFacets))
                    }, l.prototype.preventTableClicks = function() {
                        var t;
                        return (null != (t = this.selector) ? t.model.get("editable") : void 0) ? this.$el.addClass("prevent-clicks") : this.$el.removeClass("prevent-clicks")
                    }, l.prototype.updateWidget = function(t) {
                        var e;
                        return e = this.updateParams(t), e.length > 0 ? (e = e.join("\n"), alert(e)) : this.configureWidget()
                    }, l.prototype.updateShortlist = function() {
                        var t;
                        return null != (t = this.compareShortlist) ? t.clearShortlist() : void 0
                    }, l.prototype.updateParams = function(t) {
                        var n, i;
                        return r.extend(T.faceted_search, t), n = this.selector.$el, e(":input", n).removeClass("error"), i = [], r.each(this.getStoredSelectorParams(), function(t, r) {
                            var o, s;
                            return t.validate && t.error_message && (s = T.faceted_search[r], o = c.prototype.validateData(s, t.validate), !o) ? (i.push(t.error_message), e('[name="' + r + '"]', n).addClass("error has-error")) : void 0
                        }), i
                    }, l.prototype.getStoredSelectorParams = function() {
                        return T.stored_selector_params
                    }, l.prototype.onReviseClick = function() {
                        var t, n, i;
                        if (!this.isExcludedComponent("facets")) return e("#dynatable").toggleClass("hide-on-mobile"), c.prototype.onTablet(!0) && (this.$el.toggleClass("facets-show"), i = "&#60; Hide Refine"), this.facets.$el.toggleClass("show"), this.facets.$el.children(".facet").addClass("expanded"), this.facets.$el.find(".facet.expanded ul").show(), n = e(".refine-controls.top .revise"), t = n.find("img"), n.data("originalhtml") || n.data("originalhtml", n.html()), this.facets.$el.hasClass("show") ? (i = i || "View Changes", n.html(i).append(t), e("body").on("click", function(t) {
                            return function(n) {
                                var i;
                                return i = e(n.target), i.parents("#container_facets").length || i.closest(".revise").length || i.hasClass("revise") || i.hasClass("active-filter-close") ? void 0 : t.onReviseClick()
                            }
                        }(this))) : (n.html(n.data("originalhtml")), e("body").off("click")), this.$("nav .refine-controls .clear-facets").toggleClass("hide")
                    }, l.prototype.onClearFacetFilters = function() {
                        return this.isExcludedComponent("facets") ? void 0 : (this.onReviseClick(), this.facetr.clearValues(), this.configureWidget(!0))
                    }, l.prototype._renderAfterFilterChange = function(t) {
                        return setTimeout(function(e) {
                            return function() {
                                return e.renderTable(), e.resetDropdownLabel(), t.hide()
                            }
                        }(this), 50)
                    }, l.prototype.filterRadioFacets = function(t, e) {
                        var n, i;
                        return i = new P({
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), n = this.facetr.facet(e), this.facetr.facet(e).remove(), this.facetr.facet(e).value(t.value, t.op), this.removeDefaultFilter(), this._renderAfterFilterChange(i)
                    }, l.prototype.filterTable = function(t, e, n) {
                        var i, r, o, s;
                        if (!this.isExcludedComponent("facets")) return c.prototype.isIE8() && this.facetr.clearValues(), o = new P({
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), r = t.company, this.facets.isMonetisedFilterOverrideEnabled() && r && (i = "value" === n, this.applyMonetisedFilterOverride(i)), s = t.value, null != T.faceted_search.distributor && null != T.faceted_search.table ? this.facetr.facet(e)[n](s, t.op) : this.facetr.facet(e.replace("facets", "FACETS"))[n](s, t.op), this.removeDefaultFilter(), this._renderAfterFilterChange(o)
                    }, l.prototype.getFilterRecordCount = function(t, e) {
                        var n, i;
                        return n = t.split("."), i = this.table.collection.filter(function(t) {
                            var i;
                            return i = t.attributes, r.each(n, function(t) {
                                return i = i[t]
                            }), r.isArray(i) ? r.contains(i, e) : i === e
                        }), i.length
                    }, l.prototype.hasFilterRecords = function(t, e) {
                        return this.getFilterRecordCount(t, e) > 0
                    }, l.prototype.resetDropdownLabel = function() {
                        return this.vent.trigger("search:filter_changed")
                    }, l.prototype.applyMonetisedFilterOverride = function(t) {
                        var n, i, o, s, a, l, c, u, d, p;
                        return null == this.monetisedFilterOverridden && (this.monetisedFilterOverridden = !1), a = null, p = null, r.find(this.facetConfig.facets, function(t, e) {
                            return null != t.filter_override && t.filter_override === !0 ? (a = e, r.find(t.values, function(t, e) {
                                return null == t.frontend_filter ? (p = e, !0) : void 0
                            }), !0) : void 0
                        }), null == a || null == p ? void("undefined" != typeof console && null !== console && console.error("Cannot find monetised filter facet or filter name", a, p)) : (i = this.facets.get_company_filters(), c = i.length > 1, o = this.facetr.collection().companyFilteredOut(i), (o || !t) && (n = this.facets.getActiveMonetisedFilter(a), null != n && (s = n.value !== p, l = !t && 0 === i.length, d = l && !c && !o && this.monetisedFilterOverridden, u = s && t && o, d || u)) ? (d ? (this.monetisedFilterOverridden = !1, e("#providerNoResults").hide()) : u && (this.monetisedFilterOverridden = !0, e("#providerNoResults").show()), this.facets.changeMonetisedFilter(n)) : void 0)
                    }, l.prototype.renderTable = function() {
                        return this.table.render(), this.hasOwnProperty("compareShortlist") && this.compareShortlist && this.compareShortlist.refreshShortlist(), this.table.hasResults() ? this.showFilterButton() : (this.hideFilterButton(), this.renderRecordCount()), this.renderActiveFilters()
                    }, l.prototype.renderActiveFilters = function() {
                        var t, e, n, i, r, o, s;
                        if ((null != (e = this.tableConfig) && null != (n = e.components) && null != (i = n.search) ? i.active_filters : void 0) !== !1) return this.$el.find(".active-filters-container").remove(), this.$(".filtered-text").empty(), this.$(".filtered").empty(), this.facets.activeFilters.length ? (t = this.templates.active_filters({
                            filters: this.facets.activeFilters
                        }), (null != (r = this.tableConfig) && null != (o = r.components) && null != (s = o.dynatable) ? s.record_count_above_widget : void 0) !== !1 && this.$(".filtered-text").text("filtered by:"), this.$(".filtered").html(t)) : void 0
                    }, l.prototype.closeLastFilter = function() {
                        return this.$(".active-filter:last span").trigger("click")
                    }, l.prototype.onActiveFilterCloseClick = function(t) {
                        return this.facets.trigger("closeActiveFilter", t)
                    }, l.prototype.renderRecordCount = function() {
                        var t;
                        return t = this.table.hasResults() ? this.table.getFilteredRecordCount() : 0, this.$(".count-text").html("<strong>" + t + "</strong> of <strong>" + this.table.totalRecords + "</strong> results")
                    }, l.prototype.renderDisclaimerMsgs = function(t) {
                        var e, n, i, r, o;
                        for (i = [], r = 0, o = t.length; o > r; r++) n = t[r], L.prototype.getStorageItem("" + n.name + "-hide-disclaimer") || i.push(n);
                        return e = this.templates.disclaimers({
                            items: i
                        }), this.$(".disclaimer-container").html(e)
                    }, l.prototype.hideFilterButton = function() {
                        return this.$(".filter-button").hide()
                    }, l.prototype.showFilterButton = function() {
                        return this.$(".filter-button").show()
                    }, l.prototype.closeAllActiveFilters = function() {
                        var t;
                        return t = new P({
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), setTimeout(function(e) {
                            return function() {
                                return e.facets.clearAllFilters(), e.facetr.clearValues(), e.renderTable(), e.resetDropdownLabel(), t.hide()
                            }
                        }(this), 50)
                    }, l.prototype.initLeadModal = function(t, e) {
                        var n, i;
                        return i = new P({
                            text: "Loading",
                            duration: null,
                            theme_path: this.theme_path,
                            theme_config: this.theme_config
                        }), n = new y({
                            facetConfig: this.facetConfig,
                            theme: u.prototype.getLeadThemeName(e),
                            leadName: e,
                            productRowData: t
                        }), this.listenTo(n, "configured", function(t) {
                            return function() {
                                return t.showLeadModal(n, e), i.hide()
                            }
                        }(this))
                    }, l.prototype.showLeadModal = function(t, n) {
                        var r, o, s;
                        if (u.prototype.useModal(n)) return o = e(".lead-modal").length && e(".lead-modal"), o || (o = e("<div />").addClass("lead-modal modal-dialog modal-lg").appendTo(e("body")), o.wrap(e("<div />").addClass("modal fade life-modal-container"))), r = e(t.render()).addClass("modal-content"), o.on("hidden", function() {
                            return function() {
                                return null != t && t.close(), e("body").removeClass("no-scroll"), o.remove()
                            }
                        }(this)), t.on("after_submit", function(t) {
                            return function() {
                                return t.removeUnnecessaryScrollbars(o)
                            }
                        }(this)), e("body").addClass("no-scroll"), o.html(r), i(".life-modal-container").modal("show");
                        this.listenTo(t, "close", function(t) {
                            return function() {
                                return t.appView.showView(t, t.container, !1, !0), e("body").removeClass("no-scroll")
                            }
                        }(this));
                        try {
                            return this.appView.hideView(this, this.container), this.appView.showView(t, this.container, !0, !0), e("body").addClass("no-scroll")
                        } catch (a) {
                            return s = a, "undefined" != typeof console && null !== console && console.error("The following error occurred when trying to open lead modal.\n", s), null != t ? t.close() : void 0
                        }
                    }, l.prototype.removeUnnecessaryScrollbars = function(t) {
                        var e;
                        return (e = t.get(0)) ? (t.addClass("hideOverflow"), e.scrollWidth !== e.clientWidth || e.scrollHeight !== e.clientHeight ? t.removeClass("hideOverflow") : void 0) : void("undefined" != typeof console && null !== console && console.error("modal not defined"))
                    }, l.prototype.configureTableSwitch = function(t) {
                        var n, i, o, s, a, l;
                        return a = this, l = t.table_switch, o = 0, s = l[o], n = e('<div id="tableSwitch" class="btn-group" data-toggle="buttons-radio"></div>'), i = this.excluded_components, n.on("click", function(t) {
                            return s = l[e(t.target).attr("data-btn")], a.excluded_components = s.excluded_components || i, a.container.attr("class", s.className || ""), a.updateWidget(s)
                        }), r.each(l, function(t, e) {
                            return n.append("<button type='button' data-btn='" + e + "' class='btn'>" + t.label + "</button>"), t.selected ? (s = l[e], o = e) : void 0
                        }), this.container.prepend(n), r.each(s, function(e, n) {
                            return t[n] = e
                        }), this.excluded_components = s.excluded_components || i, this.container.attr("class", s.className || ""), e("button[data-btn='" + o + "']").addClass("active"), t
                    }, l.prototype.saveSnapshotState = function() {
                        var t, e, n, i;
                        return n = {
                            faceted_search: r.clone(T.faceted_search),
                            facets: this.saveFacets(),
                            base_url: T.base_url
                        }, i = this.tableConfig.profiles[T.faceted_search.profile], e = r.pluck(i.tabs, "fields"), t = r.extend.apply(this, e), n.allColumns = r.keys(t), n.sorts = this.table.savePrimarySort(), n.faceted_search.create_snapshot = !1, n.faceted_search.compare_enabled = !1, n.tableUrl = this.selector.getFullTablePageUrl(), n
                    }, l.prototype.onRemoveDisclaimer = function(t) {
                        var n;
                        return n = e(t.target).attr("data-disclaimer"), L.prototype.setStorageItem("" + n + "-hide-disclaimer", !0), e(t.target).closest(".notice-box-container").remove()
                    }, l.prototype.getActiveFilters = function() {
                        return this.activeFilters = [], r.each(this.facets.activeFilters, function(t) {
                            return function(e) {
                                return t.activeFilters.push("" + e.dataFacet + ":" + e.value)
                            }
                        }(this))
                    }, l.prototype.reloadActiveFilters = function() {
                        var t;
                        return (null != (t = this.activeFilters) ? t.length : void 0) > 0 ? (r.each(this.activeFilters, function(t) {
                            return function(e) {
                                return t.setInitialFacet(e)
                            }
                        }(this)), this.renderTable(), this.facets.render()) : void 0
                    }, l.prototype.onRefreshClick = function() {
                        return this.configureWidget()
                    }, l.prototype.showResetButton = function() {
                        return e("#btn-refresh").removeClass("hidden")
                    }, l.prototype.saveFacets = function() {
                        var t;
                        return t = this.facetr.settingsJSON(), t.facets = r.filter(t.facets, function(t) {
                            var e;
                            return (null != (e = t.vals) ? e.length : void 0) > 0
                        }), t
                    }, l.prototype.fixServiceParams = function(t, e, n) {
                        var i;
                        return r.each(T.faceted_search.selector_preselect, function() {
                            return function(t) {
                                var i, o, s, a, l, c, u;
                                return u = new RegExp(/\s/, "g"), s = t.name, o = O.prototype.textHasWhiteSpace(t.value), a = null !== o ? O.prototype.replaceSpaceWithChar(t.value, "+") : t.value, i = "", r.each(T.faceted_search, function(t, e) {
                                    var n;
                                    return e === s ? (n = O.prototype.textHasWhiteSpace(t), i = null !== n ? O.prototype.replaceSpaceWithChar(t, "+") : t) : void 0
                                }), l = new RegExp(s, "g"), c = n.match(l), null !== c && (c = [], "" !== s && "" !== a && "" !== i && (c = n.split("" + s + "=" + i), n = "" + c[0] + s + "=" + a + c[1]), "profile" === s) ? e = t.value : void 0
                            }
                        }(this)), i = {
                            serviceParams: n,
                            profileName: e,
                            profile: t[e]
                        }
                    }, l
                }(a)
            })
        }.call(this),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("widgets/category_selector/CategorySelectorView", ["require", "canstar_widget", "components/base/View", "components/selector/selector"], function(e) {
                var i, r, o, s;
                return s = e("canstar_widget"), o = e("components/base/View"), r = e("components/selector/selector"), i = function(e) {
                    function i() {
                        return this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.path = "widgets/search", i.prototype.default_theme = "gold", i.prototype.el = "#container_selector", i.prototype.selectorDefaults = function() {
                        return {
                            table_config: {},
                            set_enabled: !0,
                            show_compare: !0,
                            show_title: !1
                        }
                    }, i.prototype.templates = {}, i.prototype.initialize = function(t) {
                        return this.selectorOptions = _.extend(this.selectorDefaults(), {
                            theme_path: this.theme_path,
                            theme_config: this.theme_config,
                            distributor: t.distributor,
                            table: t.table
                        }), _.extend(this.selectorOptions, _.omit(t, ["el", "id", "className", "tagName", "events"])), _.extend(this.selectorOptions, s.category_selector), this.selector = new r(this.selectorOptions), this.listenTo(this.selector, "init", function(t) {
                            return function() {
                                return t.render()
                            }
                        }(this))
                    }, i.prototype.render = function() {
                        return this.selector.render(), this.$el.html(this.selector.el), this.trigger("rendered"), this.el
                    }, i
                }(o)
            })
        }.call(this), define("text-cns!widgets/category_selector/tmpl_modal.html", [], function() {
            return '<div class="modal fade" id="categorySelectorModal">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="vertical-selector">\n        <div class="selector">\n          <div id="container_selector"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'
        }),
        function() {
            var t = function(t, e) {
                    return function() {
                        return t.apply(e, arguments)
                    }
                },
                e = {}.hasOwnProperty,
                n = function(t, n) {
                    function i() {
                        this.constructor = t
                    }
                    for (var r in n) e.call(n, r) && (t[r] = n[r]);
                    return i.prototype = n.prototype, t.prototype = new i, t.__super__ = n.prototype, t
                };
            define("widgets/category_selector/CategorySelectorModalView", ["require", "cns-jquery", "components/base/BaseView", "./CategorySelectorView", "text-cns!./tmpl_modal.html"], function(e) {
                var i, r, o, s, a;
                return s = e("cns-jquery"), i = e("components/base/BaseView"), o = e("./CategorySelectorView"), a = e("text-cns!./tmpl_modal.html"), r = function(e) {
                    function i() {
                        return this.onBackdropClick = t(this.onBackdropClick, this), this.render = t(this.render, this), this.initialize = t(this.initialize, this), i.__super__.constructor.apply(this, arguments)
                    }
                    return n(i, e), i.prototype.events = {
                        "click #categorySelectorModal": "onBackdropClick"
                    }, i.prototype.initialize = function(t) {
                        return t.distributor && t.table && t.widgets_url ? void 0 : "undefined" != typeof console && null !== console && "function" == typeof console.error ? console.error("Missing required args") : void 0
                    }, i.prototype.render = function() {
                        return this.$el.html(_.template(a)), this.categorySelectorView = new o({
                            distributor: this.options.distributor,
                            table: this.options.table,
                            theme: this.options.theme,
                            widgets_url: this.options.widgets_url,
                            show_title: !0
                        }), $("body").addClass("categorySelectorModal"), s("#categorySelectorModal", this.el).on("shown.bs.modal", function(t) {
                            return function() {
                                return t.$("input:visible:first").focus()
                            }
                        }(this)), this.listenTo(this.categorySelectorView, "rendered", function(t) {
                            return function() {
                                return $("#cns-loading-overlay").remove(), s("#categorySelectorModal", t.el).modal({
                                    backdrop: "static"
                                })
                            }
                        }(this))
                    }, i.prototype.onBackdropClick = function(t) {
                        return t.target === t.currentTarget ? this.categorySelectorView.selector.validateAllParams() : void 0
                    }, i
                }(i)
            })
        }.call(this),
        function() {
            require(["base"], function() {
                return require(["jquery", "widgets/search/search", "widgets/category_selector/CategorySelectorModalView", "libraries/ABTestController"], function(t, e, n, i) {
                    var r, o, s, a, l, c, u, d, p;
                    return i.prototype.showSelectorModal() && (r = new n({
                        distributor: null != (o = null != (s = canstar_widget.category_selector) ? s.distributor : void 0) ? o : canstar_widget.faceted_search.distributor,
                        table: null != (a = null != (l = canstar_widget.category_selector) ? l.table : void 0) ? a : canstar_widget.faceted_search.table,
                        theme: null != (c = null != (u = canstar_widget.category_selector) ? u.theme : void 0) ? c : canstar_widget.faceted_search.theme,
                        widgets_url: null != (d = null != (p = canstar_widget.category_selector) ? p.widgets_url : void 0) ? d : canstar_widget.base_url
                    }), t("body").append(r.el), r.render()), new e
                })
            })
        }.call(this), define("widgets/search/app", function() {}), require(["widgets/search/app"])
}();